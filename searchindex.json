{"categories":[{"title":"AI","uri":"https://www.ganymedenil.com/categories/AI/"},{"title":"Go","uri":"https://www.ganymedenil.com/categories/Go/"},{"title":"Laravel","uri":"https://www.ganymedenil.com/categories/Laravel/"},{"title":"PHP","uri":"https://www.ganymedenil.com/categories/PHP/"},{"title":"goåŸºç¡€åº“","uri":"https://www.ganymedenil.com/categories/go%E5%9F%BA%E7%A1%80%E5%BA%93/"},{"title":"php7","uri":"https://www.ganymedenil.com/categories/php7/"},{"title":"å†™ç»™å¤§å¿™äººçœ‹çš„NGINX","uri":"https://www.ganymedenil.com/categories/%E5%86%99%E7%BB%99%E5%A4%A7%E5%BF%99%E4%BA%BA%E7%9C%8B%E7%9A%84NGINX/"},{"title":"å†™ç»™å¤§å¿™äººçœ‹çš„æŠ€æœ¯ä¹¦ç³»ç±»","uri":"https://www.ganymedenil.com/categories/%E5%86%99%E7%BB%99%E5%A4%A7%E5%BF%99%E4%BA%BA%E7%9C%8B%E7%9A%84%E6%8A%80%E6%9C%AF%E4%B9%A6%E7%B3%BB%E7%B1%BB/"},{"title":"å‰ç«¯","uri":"https://www.ganymedenil.com/categories/%E5%89%8D%E7%AB%AF/"},{"title":"åŒºå—é“¾","uri":"https://www.ganymedenil.com/categories/%E5%8C%BA%E5%9D%97%E9%93%BE/"},{"title":"å¼€å‘","uri":"https://www.ganymedenil.com/categories/%E5%BC%80%E5%8F%91/"},{"title":"å¾®æœåŠ¡","uri":"https://www.ganymedenil.com/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"},{"title":"æ¶æ„","uri":"https://www.ganymedenil.com/categories/%E6%9E%B6%E6%9E%84/"}],"posts":[{"content":"éšç€å·æ™®å¸ï¼ˆOFFICIAL TRUMPï¼‰çš„èµ°çº¢ï¼ŒSOLï¼ˆSOLANAï¼‰ ä¹Ÿé‡æ–°å›åˆ°å¤§ä¼—è§†é‡ã€‚å€Ÿæ­¤æœºä¼šæˆ‘å°†å†™ä¸€ä¸ªå…³äºSOLå¼€å‘çš„ä¸“é¢˜æ•™ç¨‹ä»¥ä¾›å‚è€ƒï¼Œå¸®åŠ©å¤§å®¶ç†è§£ SOL ä¸Šçš„æ™ºèƒ½åˆçº¦å¼€å‘ä¸ä»£å¸é“¸é€ ã€‚\næœ¬èŠ‚æˆ‘å°†ä»å¯¹ç§°å’Œä¸å¯¹ç§°åŠ å¯†ç®—æ³•å¼€å§‹è®²èµ·ï¼Œç„¶åç”±æµ…å…¥æ·±åˆ°æœ€åçš„å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰é“¾ä¸Šç¨‹åºã€‚\nè­¦å‘Š å› æœ¬æ•™ç¨‹æ¶‰åŠèµ„äº§äº¤æ˜“ï¼Œä¸ºäº†é¿å…æ‚¨çš„èµ„é‡‘æŸå¤±ï¼Œè¯¥æ•™ç¨‹å…¨ç¨‹å°†åœ¨ DevNetä¸Šè¿›è¡Œæ“ä½œï¼Œå¦‚æ‚¨éœ€è¦åœ¨ MaiNet ä¸Šæ“ä½œè¯·åŠ¡å¿…è°¨æ…ã€‚\nå¯¹ç§°å’Œéå¯¹ç§°åŠ å¯† â€œåŠ å¯†â€æŒ‡éšè—ä¿¡æ¯çš„ç ”ç©¶ã€‚æ—¥å¸¸ç”Ÿæ´»ä¸­ä½ ä¼šé‡åˆ°ä¸¤ç§ä¸»è¦çš„åŠ å¯†ç±»å‹ï¼š\nå¯¹ç§°åŠ å¯†æ˜¯æŒ‡ä½¿ç”¨ç›¸åŒçš„å¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚å®ƒå·²æœ‰æ•°ç™¾å¹´çš„å†å²ï¼Œä»å¤åŸƒåŠäººåˆ°ä¼Šä¸½èç™½å¥³ç‹ä¸€ä¸–éƒ½åœ¨ä½¿ç”¨ã€‚\nå¯¹ç§°åŠ å¯†ç®—æ³•æœ‰å¾ˆå¤šç§ï¼Œä½†ä»Šå¤©æœ€å¸¸è§çš„æ˜¯ AES å’Œ Chacha20ã€‚\néå¯¹ç§°åŠ å¯† éå¯¹ç§°åŠ å¯†ï¼Œä¹Ÿç§°ä¸ºâ€œå…¬é’¥åŠ å¯†â€ï¼Œè¯ç”Ÿäº 20 ä¸–çºª 70 å¹´ä»£ã€‚åœ¨éå¯¹ç§°åŠ å¯†ä¸­ï¼Œå‚ä¸è€…æ‹¥æœ‰ä¸€å¯¹å¯†é’¥ï¼ˆæˆ–å¯†é’¥å¯¹ï¼‰ã€‚æ¯ä¸ªå¯†é’¥å¯¹ç”±ä¸€ä¸ªç§é’¥å’Œä¸€ä¸ªå…¬é’¥ç»„æˆã€‚éå¯¹ç§°åŠ å¯†çš„å·¥ä½œæ–¹å¼ä¸å¯¹ç§°åŠ å¯†ä¸åŒï¼Œå¹¶ä¸”å¯ä»¥å®Œæˆä¸åŒçš„ä»»åŠ¡ï¼š\n**åŠ å¯†ï¼š**å¦‚æœä½¿ç”¨å…¬é’¥åŠ å¯†ï¼Œåˆ™åªæœ‰æ¥è‡ªåŒä¸€å¯†é’¥å¯¹çš„ç§é’¥æ‰èƒ½ç”¨äºè¯»å–å®ƒã€‚\n**ç­¾åï¼š**å¦‚æœä½¿ç”¨ç§é’¥åŠ å¯†ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ¥è‡ªåŒä¸€å¯†é’¥å¯¹çš„å…¬é’¥æ¥è¯æ˜ç§é’¥æŒæœ‰è€…å¯¹å…¶è¿›è¡Œäº†ç­¾åã€‚\nä½ ç”šè‡³å¯ä»¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥åå•†å‡ºä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„è‰¯å¥½å¯†é’¥ï¼è¿™ç§°ä¸ºå¯†é’¥äº¤æ¢ï¼Œä½ ä½¿ç”¨ä½ çš„å…¬é’¥å’Œæ¥æ”¶æ–¹çš„å…¬é’¥æ¥ç”Ÿæˆä¸€ä¸ªâ€œä¼šè¯â€å¯†é’¥ã€‚\néå¯¹ç§°åŠ å¯†ç®—æ³•æœ‰å¾ˆå¤šç§ï¼Œä½†ä»Šå¤©æœ€å¸¸è§çš„æ˜¯ ECC æˆ– RSA çš„å˜ä½“ã€‚\néå¯¹ç§°åŠ å¯†éå¸¸æµè¡Œï¼š\nä½ çš„é“¶è¡Œå¡å†…éƒ¨æœ‰ä¸€ä¸ªç§é’¥ï¼Œç”¨äºå¯¹äº¤æ˜“è¿›è¡Œç­¾åã€‚\nä½ çš„é“¶è¡Œå¯ä»¥é€šè¿‡ä½¿ç”¨åŒ¹é…çš„å…¬é’¥æ£€æŸ¥äº¤æ˜“æ¥ç¡®è®¤æ˜¯ä½ è¿›è¡Œçš„äº¤æ˜“ã€‚\nç½‘ç«™åœ¨å…¶è¯ä¹¦ä¸­åŒ…å«ä¸€ä¸ªå…¬é’¥ã€‚ä½ çš„æµè§ˆå™¨å°†ä½¿ç”¨æ­¤å…¬é’¥æ¥åŠ å¯†å®ƒå‘é€åˆ°ç½‘é¡µçš„æ•°æ®ï¼ˆå¦‚ä¸ªäººä¿¡æ¯ã€ç™»å½•è¯¦ç»†ä¿¡æ¯å’Œä¿¡ç”¨å¡å·ï¼‰ã€‚\nç½‘ç«™æ‹¥æœ‰åŒ¹é…çš„ç§é’¥ï¼Œä»¥ä¾¿ç½‘ç«™å¯ä»¥è¯»å–æ•°æ®ã€‚\nä½ çš„ç”µå­æŠ¤ç…§ç”±ç­¾å‘å›½è¿›è¡Œç­¾åï¼Œä»¥ç¡®ä¿æŠ¤ç…§ä¸è¢«ä¼ªé€ ã€‚\nç”µå­æŠ¤ç…§é—¸é—¨å¯ä»¥ä½¿ç”¨ç­¾å‘å›½çš„å…¬é’¥æ¥ç¡®è®¤è¿™ä¸€ç‚¹ã€‚\nä½ æ‰‹æœºä¸Šçš„æ¶ˆæ¯åº”ç”¨ç¨‹åºä½¿ç”¨å¯†é’¥äº¤æ¢æ¥ç”Ÿæˆä¼šè¯å¯†é’¥ã€‚\nç®€è€Œè¨€ä¹‹ï¼ŒåŠ å¯†æ— å¤„ä¸åœ¨ã€‚Solana ä»¥åŠå…¶ä»–åŒºå—é“¾åªæ˜¯åŠ å¯†çš„ä¼—å¤šç”¨é€”ä¹‹ä¸€ã€‚\nSolana ä½¿ç”¨å…¬é’¥ä½œä¸ºåœ°å€ å‚ä¸ Solana ç½‘ç»œçš„ç”¨æˆ·è‡³å°‘æ‹¥æœ‰ä¸€ä¸ªå¯†é’¥å¯¹ã€‚åœ¨ Solana ä¸­ï¼š\nå…¬é’¥è¢«ç”¨ä½œâ€œåœ°å€â€ï¼ŒæŒ‡å‘ Solana ç½‘ç»œä¸Šçš„ä¸€ä¸ªè´¦æˆ·ã€‚å³ä½¿æ˜¯å‹å¥½çš„åç§°â€”â€”ä¾‹å¦‚ example.sol â€”â€”ä¹ŸæŒ‡å‘åƒ dDCQNnDmNbFVi8cQhKAgXhyhXeJ625tvwsunRyRc7c8 è¿™æ ·çš„åœ°å€ã€‚\nç§é’¥ç”¨äºéªŒè¯å¯¹è¯¥å¯†é’¥å¯¹çš„æƒé™ã€‚å¦‚æœæ‚¨æ‹¥æœ‰æŸä¸ªåœ°å€çš„ç§é’¥ï¼Œåˆ™æ‚¨æ§åˆ¶è¯¥åœ°å€å†…çš„ä»£å¸ã€‚å› æ­¤ï¼Œé¡¾åæ€ä¹‰ï¼Œæ‚¨åº”è¯¥å§‹ç»ˆå°†ç§é’¥ä¿å¯†ã€‚\nç”Ÿæˆå¯†é’¥å¯¹ åˆ›å»ºæ–°ç›®å½•ï¼Œå®‰è£… TypeScriptã€Solana web3.js å’Œ esrunï¼š\nmkdir generate-keypair cd generate-keypair npm init -y npm install typescript @solana/web3.js@1 esrun @solana-developers/helpers@2 æ–°å»ºä¸€ä¸ªæ–‡ä»¶åä¸ºgenerate-keypair.tsçš„æ–‡ä»¶\nimport { Keypair } from \u0026quot;@solana/web3.js\u0026quot;; const keypair = Keypair.generate(); console.log(`âœ… Generated keypair!`); è¿è¡Œnpx esrun generate-keypair.tsã€‚ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡æœ¬ï¼š\nâœ… Generated keypair! æ¯ä¸ªKeypairéƒ½æœ‰ä¸€ä¸ªpublicKeyå’ŒsecretKeyå±æ€§ã€‚æ›´æ–°æ–‡ä»¶ï¼š\nimport { Keypair } from \u0026quot;@solana/web3.js\u0026quot;; const keypair = Keypair.generate(); console.log(`The public key is: `, keypair.publicKey.toBase58()); console.log(`The secret key is: `, keypair.secretKey); console.log(`âœ… Finished!`); è¿è¡Œnpx esrun generate-keypair.tsã€‚ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡æœ¬ï¼š\nThe public key is: CpuER4CRpfkLmXAdk3LDbh7urNqWyLL2gzyxoycmEeZc The secret key is: Uint8Array(64) [ (a long series of numbers) ] âœ… Finished! ä¸è¦åœ¨æºä»£ç ä¸­åŒ…å«ç§é’¥\nç”±äºå¯†é’¥å¯¹å¯ä»¥ä»ç§é’¥é‡æ–°ç”Ÿæˆï¼Œæˆ‘ä»¬é€šå¸¸åªå­˜å‚¨ç§é’¥ï¼Œå¹¶ä»ç§é’¥æ¢å¤å¯†é’¥å¯¹ã€‚\næ­¤å¤–ï¼Œç”±äºç§é’¥èµ‹äºˆäº†åœ°å€çš„æ§åˆ¶æƒï¼Œæˆ‘ä»¬ä¸å°†ç§é’¥å­˜å‚¨åœ¨æºä»£ç ä¸­ã€‚ç›¸åï¼Œæˆ‘ä»¬ï¼š\nå°†ç§é’¥æ”¾å…¥ .env æ–‡ä»¶ä¸­ å°† .env æ·»åŠ åˆ° .gitignore ä¸­ï¼Œè¿™æ · .env æ–‡ä»¶å°±ä¸ä¼šè¢«æäº¤ã€‚ ä» .env æ–‡ä»¶åŠ è½½ç°æœ‰å¯†é’¥å¯¹ ä¸ºäº†ç¡®ä¿æ‚¨çš„ç§é’¥çš„å®‰å…¨ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨æ–‡ä»¶.envæ³¨å…¥ç§é’¥ï¼š\nåˆ›å»ºä¸€ä¸ªåä¸º.envçš„æ–°æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æ‚¨ä¹‹å‰åˆ›å»ºçš„ç§é’¥å†…å®¹ï¼š\nSECRET_KEY=\u0026quot;[(a series of numbers)]\u0026quot; ç„¶åæˆ‘ä»¬å¯ä»¥ä»ç¯å¢ƒå˜é‡ä¸­åŠ è½½å¯†é’¥å¯¹ã€‚æ›´æ–°generate-keypair.tsï¼š\nimport \u0026quot;dotenv/config\u0026quot;; import { getKeypairFromEnvironment } from \u0026quot;@solana-developers/helpers\u0026quot;; const keypair = getKeypairFromEnvironment(\u0026quot;SECRET_KEY\u0026quot;); console.log( `âœ… Finished! We've loaded our secret key securely, using an env file!`, ); è¿è¡Œnpx esrun generate-keypair.tsã€‚ä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹ç»“æœï¼š\nâœ… Finished! We've loaded our secret key securely, using an env file! ä» Solana ç½‘ç»œè¯»å–æ•°æ® è´¦æˆ· Solana ä¸Šçš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨è´¦æˆ·ä¸­ã€‚è´¦æˆ·å¯ä»¥å­˜å‚¨ï¼š\nSOL å…¶ä»–ä»£å¸ï¼Œå¦‚ USDC NFT ç¨‹åºï¼Œå°±åƒæˆ‘ä»¬åœ¨æœ¬è¯¾ç¨‹ä¸­åˆ¶ä½œçš„ç”µå½±è¯„è®ºç¨‹åºï¼ ç¨‹åºæ•°æ®ï¼Œå°±åƒä¸Šé¢ç¨‹åºçš„ç”µå½±è¯„è®ºï¼ SOL SOL æ˜¯ Solana çš„â€œåŸç”Ÿä»£å¸â€â€”â€”è¿™æ„å‘³ç€ SOL ç”¨äºæ”¯ä»˜äº¤æ˜“è´¹ç”¨ã€è´¦æˆ·ç§Ÿé‡‘å’Œå…¶ä»–å¸¸è§è´¹ç”¨ã€‚SOL æœ‰æ—¶ç”¨ â—ç¬¦å·è¡¨ç¤ºã€‚æ¯ä¸ª SOL ç”± 10 äº¿ Lamports ç»„æˆã€‚\nå°±åƒé‡‘èåº”ç”¨ç¨‹åºé€šå¸¸ä»¥ç¾åˆ†ï¼ˆç¾å…ƒï¼‰å’Œä¾¿å£«ï¼ˆè‹±é•‘ï¼‰è¿›è¡Œæ•°å­¦è¿ç®—ä¸€æ ·ï¼ŒSolana åº”ç”¨ç¨‹åºé€šå¸¸ä»¥ Lamports çš„å½¢å¼è½¬ç§»ã€èŠ±è´¹ã€å­˜å‚¨å’Œå¤„ç† SOLï¼Œä»…åœ¨å‘ç”¨æˆ·æ˜¾ç¤ºæ—¶æ‰è½¬æ¢ä¸ºå®Œæ•´çš„ SOLã€‚\nåœ°å€ åœ°å€å”¯ä¸€æ ‡è¯†è´¦æˆ·ã€‚åœ°å€é€šå¸¸æ˜¾ç¤ºä¸º base-58 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ dDCQNnDmNbFVi8cQhKAgXhyhXeJ625tvwsunRyRc7c8ã€‚Solana ä¸Šçš„å¤§å¤šæ•°åœ°å€ä¹Ÿæ˜¯å…¬é’¥ã€‚å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œæ§åˆ¶åœ°å€åŒ¹é…ç§é’¥çš„äººæ§åˆ¶ç€è¯¥è´¦æˆ·â€”â€”ä¾‹å¦‚ï¼Œæ‹¥æœ‰ç§é’¥çš„äººå¯ä»¥ä»è¯¥è´¦æˆ·å‘é€ä»£å¸ã€‚\næ“ä½œ åŠ è½½å¯†é’¥å¯¹ æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ä¸Šæ–‡çš„å…¬é’¥ã€‚\nåˆ›å»ºä¸€ä¸ªåä¸ºcheck-balance.ts çš„æ–°æ–‡ä»¶ï¼Œå°†\u0026lt;your public key\u0026gt;æ›¿æ¢ä¸ºæ‚¨çš„å…¬é’¥ã€‚\nè„šæœ¬åŠ è½½å…¬é’¥ï¼Œè¿æ¥åˆ° DevNetï¼Œå¹¶æ£€æŸ¥ä½™é¢ï¼š\nimport { Connection, LAMPORTS_PER_SOL, PublicKey } from \u0026quot;@solana/web3.js\u0026quot;; const publicKey = new PublicKey(\u0026quot;\u0026lt;your public key\u0026gt;\u0026quot;); const connection = new Connection(\u0026quot;https://api.devnet.solana.com\u0026quot;, \u0026quot;confirmed\u0026quot;); const balanceInLamports = await connection.getBalance(publicKey); const balanceInSOL = balanceInLamports / LAMPORTS_PER_SOL; console.log( `ğŸ’° Finished! The balance for the wallet at address ${publicKey} is ${balanceInSOL}!`, ); ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶ npx esrun check-balance.ts ã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼çš„å†…å®¹ï¼š\nğŸ’° Finished! The balance for the wallet at address CpuER4CRpfkLmXAdk3LDbh7urNqWyLL2gzyxoycmEeZc is 0! åœ¨ DevNet ä¸Šè·å–ä¸€äº› SOL åœ¨ Devnet ä¸­ï¼Œæ‚¨å¯ä»¥è·å¾—å…è´¹çš„ SOL ç”¨äºå¼€å‘ã€‚å¯ä»¥å°† Devnet SOL è§†ä¸ºæ¡Œæ¸¸ç”¨çš„é’±å¸ - å®ƒçœ‹èµ·æ¥æœ‰ä»·å€¼ï¼Œä½†å®é™…ä¸Šæ²¡æœ‰ä»·å€¼ã€‚\nè·å–ä¸€äº› Devnet SOL å¹¶ä½¿ç”¨æ‚¨çš„å¯†é’¥å¯¹çš„å…¬é’¥ä½œä¸ºåœ°å€ã€‚\né€‰æ‹©æ‚¨æƒ³è¦çš„ä»»ä½•æ•°é‡çš„ SOLã€‚\næ£€æŸ¥æ‚¨çš„ä½™é¢ é‡æ–°è¿è¡Œè„šæœ¬ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ‚¨çš„ä½™é¢å·²æ›´æ–°ï¼š\nğŸ’° Finished! The balance for the wallet at address CpuER4CRpfkLmXAdk3LDbh7urNqWyLL2gzyxoycmEeZc is 0.5! æŸ¥çœ‹ä»»æ„åœ°å€çš„ä½™é¢ æ‚¨å¯ä»¥ä¿®æ”¹è„šæœ¬ä»¥æ£€æŸ¥ä»»ä½•é’±åŒ…çš„ä½™é¢ã€‚\nimport { Connection, LAMPORTS_PER_SOL, PublicKey } from \u0026quot;@solana/web3.js\u0026quot;; const suppliedPublicKey = process.argv[2]; if (!suppliedPublicKey) { throw new Error(\u0026quot;Provide a public key to check the balance of!\u0026quot;); } const connection = new Connection(\u0026quot;https://api.devnet.solana.com\u0026quot;, \u0026quot;confirmed\u0026quot;); const publicKey = new PublicKey(suppliedPublicKey); const balanceInLamports = await connection.getBalance(publicKey); const balanceInSOL = balanceInLamports / LAMPORTS_PER_SOL; console.log( `âœ… Finished! The balance for the wallet at address ${publicKey} is ${balanceInSOL}!`, ); % npx esrun check-balance.ts (some wallet address) âœ… Finished! The balance for the wallet at address CpuER4CRpfkLmXAdk3LDbh7urNqWyLL2gzyxoycmEeZc is 5! åœ¨ Solana ç½‘ç»œä¸Šåˆ›å»ºäº¤æ˜“ äº¤æ˜“æ˜¯åŸå­æ€§çš„ ä»»ä½•å¯¹é“¾ä¸Šæ•°æ®çš„ä¿®æ”¹éƒ½æ˜¯é€šè¿‡å‘é€ç»™ç¨‹åºçš„äº¤æ˜“æ¥å®Œæˆçš„ã€‚\nSolana ä¸Šçš„äº¤æ˜“ä¸å…¶ä»–åœ°æ–¹çš„äº¤æ˜“ç±»ä¼¼ï¼šå®ƒæ˜¯åŸå­æ€§çš„ã€‚åŸå­æ€§æ„å‘³ç€æ•´ä¸ªäº¤æ˜“è¦ä¹ˆå…¨éƒ¨è¿è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚\næƒ³è±¡ä¸€ä¸‹åœ¨çº¿æ”¯ä»˜ï¼š\nä½ çš„è´¦æˆ·ä½™é¢è¢«æ‰£é™¤ é“¶è¡Œå°†èµ„é‡‘è½¬ç§»ç»™å•†å®¶ è¿™ä¸¤ä»¶äº‹éƒ½éœ€è¦å‘ç”Ÿæ‰èƒ½ä½¿äº¤æ˜“æˆåŠŸã€‚å¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œéƒ½ä¸åº”è¯¥å‘ç”Ÿä»»ä½•äº‹æƒ…ï¼Œè€Œä¸æ˜¯æ”¯ä»˜ç»™å•†å®¶ä½†ä¸æ‰£é™¤ä½ çš„è´¦æˆ·ï¼Œæˆ–è€…æ‰£é™¤è´¦æˆ·ä½†ä¸æ”¯ä»˜ç»™å•†å®¶ã€‚\nåŸå­æ€§æ„å‘³ç€è¦ä¹ˆäº¤æ˜“å‘ç”Ÿâ€”â€”æ„å‘³ç€æ‰€æœ‰å•ä¸ªæ­¥éª¤éƒ½æˆåŠŸâ€”â€”è¦ä¹ˆæ•´ä¸ªäº¤æ˜“å¤±è´¥ã€‚\näº¤æ˜“åŒ…å«æŒ‡ä»¤ Solana ä¸Šäº¤æ˜“ä¸­çš„æ­¥éª¤ç§°ä¸ºæŒ‡ä»¤ã€‚\næ¯ä¸ªæŒ‡ä»¤åŒ…å«ï¼š\nä¸€ä¸ªå°†è¢«è¯»å–å’Œ/æˆ–å†™å…¥çš„è´¦æˆ·æ•°ç»„ã€‚è¿™å°±æ˜¯ Solana å¿«é€Ÿçš„åŸå› â€”â€”å½±å“ä¸åŒè´¦æˆ·çš„äº¤æ˜“å¯ä»¥å¹¶è¡Œå¤„ç† è¦è°ƒç”¨çš„ç¨‹åºçš„å…¬é’¥ ä¼ é€’ç»™è¢«è°ƒç”¨ç¨‹åºçš„æ•°æ®ï¼Œç»“æ„ä¸ºå­—èŠ‚æ•°ç»„ å½“ä¸€ä¸ªäº¤æ˜“è¿è¡Œæ—¶ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª Solana ç¨‹åºå°†ä½¿ç”¨äº¤æ˜“ä¸­åŒ…å«çš„æŒ‡ä»¤è¢«è°ƒç”¨ã€‚\næ­£å¦‚ä½ æ‰€æ–™ï¼Œ@solana/web3.js æä¾›äº†ç”¨äºåˆ›å»ºäº¤æ˜“å’ŒæŒ‡ä»¤çš„è¾…åŠ©å‡½æ•°ã€‚ä½ å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•° new Transaction() åˆ›å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“ã€‚åˆ›å»ºåï¼Œä½ å¯ä»¥ä½¿ç”¨ add() æ–¹æ³•å‘äº¤æ˜“æ·»åŠ æŒ‡ä»¤ã€‚\nå…¶ä¸­ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ˜¯ SystemProgram.transfer()ï¼Œå®ƒä¸ºç³»ç»Ÿç¨‹åºåˆ›å»ºä¸€ä¸ªæŒ‡ä»¤æ¥è½¬ç§»ä¸€äº› SOLï¼š\nconst transaction = new Transaction(); const sendSolInstruction = SystemProgram.transfer({ fromPubkey: sender, toPubkey: recipient, lamports: LAMPORTS_PER_SOL * amount, }); transaction.add(sendSolInstruction); SystemProgram.transfer() å‡½æ•°éœ€è¦ï¼š\nå‘ä»¶äººè´¦æˆ·å¯¹åº”çš„å…¬é’¥ æ”¶ä»¶äººè´¦æˆ·å¯¹åº”çš„å…¬é’¥ è¦å‘é€çš„ SOL æ•°é‡ï¼ˆä»¥ lamports ä¸ºå•ä½ï¼‰ã€‚ SystemProgram.transfer() è¿”å›ç”¨äºå°† SOL ä»å‘ä»¶äººå‘é€åˆ°æ”¶ä»¶äººçš„æŒ‡ä»¤ã€‚\næ­¤æŒ‡ä»¤ä¸­ä½¿ç”¨çš„ç¨‹åºå°†æ˜¯systemç¨‹åºï¼ˆåœ°å€ä¸º 11111111111111111111111111111111ï¼‰ï¼Œæ•°æ®æ˜¯è¦ä¼ è¾“çš„ SOL æ•°é‡ï¼ˆä»¥ Lamports ä¸ºå•ä½ï¼‰ï¼Œè´¦æˆ·å°†åŸºäºå‘ä»¶äººå’Œæ”¶ä»¶äººã€‚\nç„¶åï¼Œè¯¥æŒ‡ä»¤å¯ä»¥æ·»åŠ åˆ°äº¤æ˜“ä¸­ã€‚\nä¸€æ—¦æ·»åŠ äº†æ‰€æœ‰æŒ‡ä»¤ï¼Œå°±éœ€è¦å°†äº¤æ˜“å‘é€åˆ°é›†ç¾¤å¹¶è¿›è¡Œç¡®è®¤ï¼š\nconst signature = sendAndConfirmTransaction(connection, transaction, [ senderKeypair, ]); sendAndConfirmTransaction() å‡½æ•°æ¥å—ä»¥ä¸‹å‚æ•°ï¼š\nä¸€ä¸ªé›†ç¾¤è¿æ¥ ä¸€ä¸ªäº¤æ˜“ ä¸€ä¸ªå¯†é’¥å¯¹æ•°ç»„ï¼Œä½œä¸ºäº¤æ˜“çš„ç­¾åè€… - åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªç­¾åè€…ï¼šå‘é€è€…ã€‚ äº¤æ˜“æ‰‹ç»­è´¹ äº¤æ˜“æ‰‹ç»­è´¹æ˜¯ Solana ç»æµçš„ç»„æˆéƒ¨åˆ†ï¼Œä½œä¸ºå¯¹éªŒè¯è€…ç½‘ç»œå¤„ç†äº¤æ˜“æ‰€éœ€çš„ CPU å’Œ GPU èµ„æºçš„è¡¥å¿ã€‚Solana äº¤æ˜“æ‰‹ç»­è´¹æ˜¯ç¡®å®šçš„ã€‚\näº¤æ˜“ç­¾åè€…æ•°ç»„ä¸­åŒ…å«çš„ç¬¬ä¸€ä¸ªç­¾åè€…è´Ÿè´£æ”¯ä»˜äº¤æ˜“æ‰‹ç»­è´¹ã€‚å¦‚æœè¯¥ç­¾åè€…çš„è´¦æˆ·ä¸­æ²¡æœ‰è¶³å¤Ÿçš„ SOL æ¥æ”¯ä»˜äº¤æ˜“æ‰‹ç»­è´¹ï¼Œåˆ™äº¤æ˜“å°†è¢«ä¸¢å¼ƒï¼Œå¹¶å‡ºç°ç±»ä¼¼ä»¥ä¸‹é”™è¯¯ï¼š\n\u0026gt; Transaction simulation failed: Attempt to debit an account but found no record of a prior credit. å¦‚æœä½ é‡åˆ°è¿™ä¸ªé”™è¯¯ï¼Œé‚£æ˜¯å› ä¸ºä½ çš„å¯†é’¥å¯¹æ˜¯å…¨æ–°çš„ï¼Œæ²¡æœ‰ä»»ä½• SOL æ¥æ”¯ä»˜äº¤æ˜“è´¹ç”¨ã€‚è®©æˆ‘ä»¬é€šè¿‡åœ¨è®¾ç½®è¿æ¥åæ·»åŠ ä»¥ä¸‹å‡ è¡Œä»£ç æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\nawait airdropIfRequired( connection, keypair.publicKey, 1 * LAMPORTS_PER_SOL, 0.5 * LAMPORTS_PER_SOL, ); è¿™ä¼šå‘ä½ çš„è´¦æˆ·å­˜å…¥ 1 ä¸ª SOLï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æµ‹è¯•ã€‚è¿™åœ¨ä¸»ç½‘ï¼ˆMainnetï¼‰ä¸Šè¡Œä¸é€šï¼Œå› ä¸ºåœ¨ä¸»ç½‘ä¸Š SOL å…·æœ‰å®é™…ä»·å€¼ã€‚ä½†åœ¨æœ¬åœ°å’Œå¼€å‘ç½‘ï¼ˆDevnetï¼‰ä¸Šè¿›è¡Œæµ‹è¯•æ—¶ï¼Œè¿™éå¸¸æ–¹ä¾¿ã€‚\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Solana å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰å‘½ä»¤ solana airdrop 1 æ¥åœ¨ä½ çš„è´¦æˆ·ä¸­è·å¾—å…è´¹çš„æµ‹è¯• SOLï¼Œæ— è®ºæ˜¯åœ¨æœ¬åœ°è¿˜æ˜¯åœ¨å¼€å‘ç½‘ä¸Šè¿›è¡Œæµ‹è¯•ã€‚\nSolana åŒºå—æµè§ˆå™¨ æ‰€æœ‰åœ¨åŒºå—é“¾ä¸Šçš„äº¤æ˜“éƒ½å¯ä»¥åœ¨ Solana åŒºå—æµè§ˆå™¨ä¸Šå…¬å¼€æŸ¥çœ‹ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸Šé¢ç¤ºä¾‹ä¸­ sendAndConfirmTransaction() è¿”å›çš„ç­¾åï¼Œåœ¨ Solana åŒºå—æµè§ˆå™¨ä¸­æœç´¢è¯¥ç­¾åï¼Œç„¶åæŸ¥çœ‹ï¼š\nä½•æ—¶å‘ç”Ÿ åŒ…å«åœ¨å“ªä¸ªåŒºå—ä¸­ äº¤æ˜“è´¹ç”¨ ä»¥åŠæ›´å¤šï¼ å®Œæ•´ä»£ç  åˆ›å»ºä¸€ä¸ªåä¸ºtransfer.tsçš„æ–‡ä»¶ï¼š\nimport { Connection, Transaction, SystemProgram, sendAndConfirmTransaction, PublicKey, } from \u0026quot;@solana/web3.js\u0026quot;; import \u0026quot;dotenv/config\u0026quot;; import { getKeypairFromEnvironment } from \u0026quot;@solana-developers/helpers\u0026quot;; const suppliedToPubkey = \u0026quot;CpuER4CRpfkLmXAdk3LDbh7urNqWyLL2gzyxoycmEeZc\u0026quot;; if (!suppliedToPubkey) { console.log(`Please provide a public key to send to`); process.exit(1); } const senderKeypair = getKeypairFromEnvironment(\u0026quot;SECRET_KEY\u0026quot;); console.log(`suppliedToPubkey: ${suppliedToPubkey}`); const toPubkey = new PublicKey(suppliedToPubkey); const connection = new Connection(\u0026quot;https://api.devnet.solana.com\u0026quot;, \u0026quot;confirmed\u0026quot;); console.log( `âœ… Loaded our own keypair, the destination public key, and connected to Solana`, ); è¿è¡Œè„šæœ¬ä»¥ç¡®ä¿å®ƒè¿æ¥ã€åŠ è½½å¯†é’¥å¯¹å¹¶åŠ è½½ï¼š\nnpx esrun transfer.ts æ·»åŠ ä»¥ä¸‹å†…å®¹ä»¥å®Œæˆäº¤æ˜“å¹¶å‘é€ï¼š\nconsole.log( `âœ… Loaded our own keypair, the destination public key, and connected to Solana`, ); const transaction = new Transaction(); const LAMPORTS_TO_SEND = 5000; const sendSolInstruction = SystemProgram.transfer({ fromPubkey: senderKeypair.publicKey, toPubkey, lamports: LAMPORTS_TO_SEND, }); transaction.add(sendSolInstruction); const signature = await sendAndConfirmTransaction(connection, transaction, [ senderKeypair, ]); console.log( `ğŸ’¸ Finished! Sent ${LAMPORTS_TO_SEND} to the address ${toPubkey}. `, ); console.log(`Transaction signature is ${signature}!`); æ‰§è¡Œè„šæœ¬è¿›è¡Œäº¤æ˜“\nnpx esrun transfer.ts ä½¿ç”¨è‡ªå®šä¹‰é“¾ä¸Šç¨‹åº åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ¥è‡ª @solana/web3.js çš„ SystemProgram.transfer() å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªç”¨äº System ç¨‹åºæ¥è½¬ç§» SOL çš„æŒ‡ä»¤ã€‚\nç„¶è€Œï¼Œå½“ä¸å…¶ä»–ç¨‹åºäº¤äº’æ—¶ï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨åˆ›å»ºæŒ‡ä»¤ã€‚ä½¿ç”¨ @solana/web3.jsï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ TransactionInstruction æ„é€ å‡½æ•°æ¥åˆ›å»ºæŒ‡ä»¤ï¼š\nconst instruction = new TransactionInstruction({ programId: PublicKey; keys: [ { pubkey: Pubkey, isSigner: boolean, isWritable: boolean, }, ], data?: Buffer; }); TransactionInstruction() æ¥å— 3 ä¸ªå­—æ®µï¼š\nprogramId å­—æ®µçš„å«ä¹‰éå¸¸æ˜ç¡®ï¼šå®ƒæ˜¯ç¨‹åºçš„å…¬é’¥ï¼ˆä¹Ÿç§°ä¸ºâ€œåœ°å€â€æˆ–â€œç¨‹åº IDâ€ï¼‰ã€‚\nkeys æ˜¯ä¸€ä¸ªè´¦æˆ·æ•°ç»„ï¼Œä»¥åŠè¿™äº›è´¦æˆ·åœ¨äº¤æ˜“æœŸé—´å°†å¦‚ä½•è¢«ä½¿ç”¨ã€‚æ‚¨éœ€è¦äº†è§£æ‚¨æ­£åœ¨è°ƒç”¨çš„ç¨‹åºçš„è¡Œä¸ºï¼Œå¹¶ç¡®ä¿åœ¨æ•°ç»„ä¸­æä¾›æ‰€æœ‰å¿…è¦çš„è´¦æˆ·ã€‚\npubkey - è´¦æˆ·çš„å…¬é’¥ isSigner - ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥è´¦æˆ·æ˜¯å¦æ˜¯äº¤æ˜“çš„ç­¾åè€… isWritable - ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥è´¦æˆ·åœ¨äº¤æ˜“æ‰§è¡ŒæœŸé—´æ˜¯å¦ä¼šè¢«å†™å…¥ ä¸€ä¸ªå¯é€‰çš„ Bufferï¼ŒåŒ…å«è¦ä¼ é€’ç»™ç¨‹åºçš„æ•°æ®ã€‚æˆ‘ä»¬ç°åœ¨å°†å¿½ç•¥ data å­—æ®µï¼Œä½†åœ¨ä»¥åçš„æ–‡ç« ä¸­ä¼šé‡æ–°è®¨è®ºå®ƒã€‚\nåˆ›å»ºæŒ‡ä»¤åï¼Œæˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°äº¤æ˜“ä¸­ï¼Œå°†äº¤æ˜“å‘é€åˆ°æˆ‘ä»¬çš„ RPC è¿›è¡Œå¤„ç†å’Œç¡®è®¤ï¼Œç„¶åæŸ¥çœ‹äº¤æ˜“ç­¾åã€‚\nconst transaction = new web3.Transaction().add(instruction); const signature = await web3.sendAndConfirmTransaction( connection, transaction, [payer], ); console.log(`âœ… Success! Transaction signature is: ${signature}`); ç¼–å†™ ping è®¡æ•°å™¨ç¨‹åºçš„äº¤æ˜“ æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè„šæœ¬ï¼Œç”¨äº ping ä¸€ä¸ªé“¾ä¸Šç¨‹åºï¼Œè¯¥ç¨‹åºæ¯æ¬¡è¢« ping æ—¶éƒ½ä¼šé€’å¢ä¸€ä¸ªè®¡æ•°å™¨ã€‚è¯¥ç¨‹åºä½äº Solana Devnet ä¸Šï¼Œåœ°å€ä¸º ChT1B39WKLS8qUrkLvFDXMhEJ4F1XZzwUNHUt4AU9aVaã€‚è¯¥ç¨‹åºå°†å…¶æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªç‰¹å®šè´¦æˆ·ä¸­ï¼Œåœ°å€ä¸º Ah9K7dQ8EHaZqcAsgBW8w37yN2eAy3koFmUn4x3CJtodã€‚\nåŸºç¡€æ¡†æ¶ # æˆ‘ä»¬å°†ä½¿ç”¨ä¹‹å‰åœ¨â€œæ•°æ®å†™å…¥ç®€ä»‹â€ä¸­åˆ›å»ºçš„ç›¸åŒçš„åŒ…å’Œ .env æ–‡ä»¶ã€‚\nå°†æ–‡ä»¶å‘½åä¸º send-ping-transaction.tsï¼š\nimport * as web3 from \u0026quot;@solana/web3.js\u0026quot;; import \u0026quot;dotenv/config\u0026quot;; import { getKeypairFromEnvironment, airdropIfRequired, } from \u0026quot;@solana-developers/helpers\u0026quot;; const payer = getKeypairFromEnvironment(\u0026quot;SECRET_KEY\u0026quot;); const connection = new web3.Connection(web3.clusterApiUrl(\u0026quot;devnet\u0026quot;)); const newBalance = await airdropIfRequired( connection, payer.publicKey, 1 * web3.LAMPORTS_PER_SOL, 0.5 * web3.LAMPORTS_PER_SOL, ); è¿™å°†è¿æ¥åˆ° Solana Devnet ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¯·æ±‚ä¸€äº›æµ‹è¯•ç”¨çš„ Lamportsã€‚\nPing ç¨‹åº ç°åœ¨è®©æˆ‘ä»¬ä¸ Ping ç¨‹åºäº¤äº’ï¼ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ï¼š\nåˆ›å»ºä¸€ç¬”äº¤æ˜“ åˆ›å»ºä¸€æ¡æŒ‡ä»¤ å°†æŒ‡ä»¤æ·»åŠ åˆ°äº¤æ˜“ä¸­ å‘é€äº¤æ˜“ è®°ä½ï¼Œè¿™é‡Œæœ€å…·æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†æ˜¯åœ¨æŒ‡ä»¤ä¸­åŒ…å«æ­£ç¡®çš„ä¿¡æ¯ã€‚æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬è¦è°ƒç”¨çš„ç¨‹åºçš„åœ°å€ã€‚æˆ‘ä»¬ä¹ŸçŸ¥é“è¯¥ç¨‹åºå°†æ•°æ®å†™å…¥ä¸€ä¸ªå•ç‹¬çš„è´¦æˆ·ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“è¯¥è´¦æˆ·çš„åœ°å€ã€‚è®©æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªåœ°å€çš„å­—ç¬¦ä¸²ç‰ˆæœ¬ä½œä¸ºå¸¸é‡æ·»åŠ åˆ°æ–‡ä»¶çš„é¡¶éƒ¨ï¼š\nconst PING_PROGRAM_ADDRESS = \u0026quot;ChT1B39WKLS8qUrkLvFDXMhEJ4F1XZzwUNHUt4AU9aVa\u0026quot;; const PING_PROGRAM_DATA_ADDRESS = \u0026quot;Ah9K7dQ8EHaZqcAsgBW8w37yN2eAy3koFmUn4x3CJtod\u0026quot;; ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„äº¤æ˜“ï¼Œç„¶ååˆå§‹åŒ–ä¸€ä¸ªç¨‹åºè´¦æˆ·çš„å…¬é’¥ï¼Œä»¥åŠå¦ä¸€ä¸ªæ•°æ®è´¦æˆ·çš„å…¬é’¥ã€‚\nconst transaction = new web3.Transaction(); const programId = new web3.PublicKey(PING_PROGRAM_ADDRESS); const pingProgramDataId = new web3.PublicKey(PING_PROGRAM_DATA_ADDRESS); æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºæŒ‡ä»¤ã€‚è®°ä½ï¼ŒæŒ‡ä»¤éœ€è¦åŒ…å« Ping ç¨‹åºçš„å…¬é’¥ï¼Œè¿˜éœ€è¦åŒ…å«ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰å°†è¦è¯»å–æˆ–å†™å…¥çš„è´¦æˆ·ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ç¨‹åºä¸­ï¼Œåªéœ€è¦ä¸Šé¢æåˆ°çš„æ•°æ®è´¦æˆ·ã€‚\nconst transaction = new web3.Transaction(); const programId = new web3.PublicKey(PING_PROGRAM_ADDRESS); const pingProgramDataId = new web3.PublicKey(PING_PROGRAM_DATA_ADDRESS); const instruction = new web3.TransactionInstruction({ keys: [ { pubkey: pingProgramDataId, isSigner: false, isWritable: true, }, ], programId, }); æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å°†è¿™æ¡æŒ‡ä»¤æ·»åŠ åˆ°æˆ‘ä»¬åˆ›å»ºçš„äº¤æ˜“ä¸­ã€‚ç„¶åï¼Œé€šè¿‡ä¼ å…¥è¿æ¥ã€äº¤æ˜“å’Œä»˜æ¬¾äººæ¥è°ƒç”¨ sendAndConfirmTransaction()ã€‚æœ€åï¼Œè®©æˆ‘ä»¬è®°å½•è¯¥å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨ Solana Explorer ä¸ŠæŸ¥æ‰¾å®ƒã€‚\ntransaction.add(instruction); const signature = await web3.sendAndConfirmTransaction( connection, transaction, [payer], ); console.log(`âœ… Transaction completed! Signature is ${signature}`); è¿è¡Œ ping å®¢æˆ·ç«¯å¹¶æ£€æŸ¥ Solana æµè§ˆå™¨ ç°åœ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œä»£ç ï¼š\nnpx esrun send-ping-transaction.ts å¯èƒ½éœ€è¦ä¸€ä¸¤åˆ†é’Ÿï¼Œä½†ä½ åº”è¯¥ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nâœ… Transaction completed! Signature is 4Kpb4EQ3RPBfqQDNZzKFc2MJo4F7vAajoaNQdLmsAhZ4UF9fvMUTaNmqERXQPu6oxjSSviL7sDbTLdy4Vrk7qXbS å¤åˆ¶äº¤æ˜“ç­¾åã€‚ç„¶åè®¿é—®Devnetä¸Šçš„ Solana æµè§ˆå™¨ã€‚å°†ç­¾åç²˜è´´åˆ° Solana æµè§ˆå™¨é¡¶éƒ¨çš„æœç´¢æ ä¸­ï¼ˆç¡®ä¿ä½ å·²è¿æ¥åˆ°å¼€å‘ç½‘ï¼‰å¹¶æŒ‰å›è½¦é”®ã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°æœ‰å…³äº¤æ˜“çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚å¦‚æœä½ ä¸€ç›´æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œé‚£ä¹ˆä½ å°†çœ‹åˆ°ç¨‹åºæ—¥å¿—ï¼Œå…¶ä¸­æ˜¾ç¤ºäº†ç¨‹åºè¢« ping çš„æ¬¡æ•°ï¼ŒåŒ…æ‹¬ä½ çš„ pingã€‚\næ»šåŠ¨æµè§ˆæµè§ˆå™¨å¹¶æŸ¥çœ‹ä½ æ‰€çœ‹åˆ°çš„å†…å®¹ï¼š\nè´¦æˆ·è¾“å…¥å°†åŒ…æ‹¬ï¼š ä½ çš„ä»˜æ¬¾äººåœ°å€ - äº¤æ˜“ä¸­æ‰£é™¤ 5000 lamports ping ç¨‹åºçš„ç¨‹åºåœ°å€ ping ç¨‹åºçš„æ•°æ®åœ°å€ æŒ‡ä»¤éƒ¨åˆ†å°†åŒ…å«ä¸€æ¡æ²¡æœ‰æ•°æ®çš„æŒ‡ä»¤ - ping ç¨‹åºæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç¨‹åºï¼Œå› æ­¤å®ƒä¸éœ€è¦ä»»ä½•æ•°æ®ã€‚ ç¨‹åºæŒ‡ä»¤æ—¥å¿—æ˜¾ç¤º ping ç¨‹åºçš„æ—¥å¿—ã€‚ å¦‚æœä½ å¸Œæœ›å°†æ¥æ›´å®¹æ˜“åœ¨ Solana æµè§ˆå™¨ä¸­æŸ¥çœ‹äº¤æ˜“ï¼Œåªéœ€å°†ä½ çš„ console.log æ›´æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š\nconsole.log( `You can view your transaction on Solana Explorer at:\\nhttps://explorer.solana.com/tx/${signature}?cluster=devnet`, ); å°±è¿™æ ·ï¼Œä½ å°±åœ¨ Solana ç½‘ç»œä¸Šè°ƒç”¨ç¨‹åºå¹¶åœ¨é“¾ä¸Šå†™å…¥æ•°æ®äº†ï¼\n","id":0,"section":"posts","summary":"\u003cp\u003eéšç€å·æ™®å¸ï¼ˆ\u003ca href=\"https://solscan.io/token/6p6xgHyF7AeE6TZkSmFsko444wqoP15icUSqi2jfGiPN\"\u003eOFFICIAL TRUMP\u003c/a\u003eï¼‰çš„èµ°çº¢ï¼ŒSOLï¼ˆ\u003ca href=\"https://solana.com/zh\"\u003eSOLANA\u003c/a\u003eï¼‰ ä¹Ÿé‡æ–°å›åˆ°å¤§ä¼—è§†é‡ã€‚å€Ÿæ­¤æœºä¼šæˆ‘å°†å†™ä¸€ä¸ªå…³äºSOLå¼€å‘çš„ä¸“é¢˜æ•™ç¨‹ä»¥ä¾›å‚è€ƒï¼Œå¸®åŠ©å¤§å®¶ç†è§£ SOL ä¸Šçš„æ™ºèƒ½åˆçº¦å¼€å‘ä¸ä»£å¸é“¸é€ ã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬èŠ‚æˆ‘å°†ä»å¯¹ç§°å’Œä¸å¯¹ç§°åŠ å¯†ç®—æ³•å¼€å§‹è®²èµ·ï¼Œç„¶åç”±æµ…å…¥æ·±åˆ°æœ€åçš„å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰é“¾ä¸Šç¨‹åºã€‚\u003c/p\u003e","tags":["SOL","Solana","web3"],"title":"Solana é“¾å¼€å‘å®æˆ˜ï¼ˆä¸€ï¼‰","uri":"https://www.ganymedenil.com/2025/01/23/solana-tutorial-1.html","year":"2025"},{"content":"Gemma æ˜¯ä¸€ä¸ªåŸºäº Google DeepMind çš„ Gemini1 ç ”ç©¶å’ŒæŠ€æœ¯çš„è½»é‡çº§ã€æœ€å…ˆè¿›çš„å¼€æ”¾å¤§å‹è¯­è¨€æ¨¡å‹å®¶æ—ã€‚æœ¬æ•™ç¨‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Google DeepMind çš„ gemma åº“æ¥æ‰§è¡Œ Gemma 2B Instruct æ¨¡å‹çš„åŸºæœ¬é‡‡æ ·/æ¨ç†ï¼Œè¯¥åº“æ˜¯ç”¨ JAX2ï¼ˆä¸€ä¸ªé«˜æ€§èƒ½æ•°å€¼è®¡ç®—åº“ï¼‰ã€Flax3ï¼ˆåŸºäº JAX çš„ç¥ç»ç½‘ç»œåº“ï¼‰ã€Orbax4ï¼ˆä¸€ä¸ªåŸºäº JAX çš„ç”¨äºè®­ç»ƒå·¥å…·å¦‚æ£€æŸ¥ç‚¹çš„åº“ï¼‰å’Œ SentencePiece5ï¼ˆä¸€ä¸ªåˆ†è¯å™¨/åˆè¯å™¨åº“ï¼‰ç¼–å†™çš„ã€‚å°½ç®¡åœ¨è¿™ä¸ªç¬”è®°æœ¬ä¸­æ²¡æœ‰ç›´æ¥ä½¿ç”¨ Flaxï¼Œä½† Flax è¢«ç”¨äºåˆ›å»º Gemmaã€‚\nè®¾ç½® 1. è®¾ç½® Kaggle ä¸Šçš„ Gemma è®¿é—®æƒé™ è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨é¦–å…ˆéœ€è¦æŒ‰ç…§ Gemma è®¾ç½®6è¯´æ˜æ“ä½œï¼Œè¿™äº›è¯´æ˜å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\nåœ¨ kaggle.com7 ä¸Šè·å–å¯¹ Gemma çš„è®¿é—®æƒé™ã€‚ é€‰æ‹©ä¸€ä¸ªå…·æœ‰è¶³å¤Ÿèµ„æºçš„ Colab è¿è¡Œç¯å¢ƒæ¥è¿è¡Œ Gemma æ¨¡å‹ã€‚ ç”Ÿæˆå¹¶é…ç½® Kaggle ç”¨æˆ·åå’Œ API å¯†é’¥ã€‚ å®Œæˆ Gemma è®¾ç½®åï¼Œç»§ç»­è¿›è¡Œä¸‹ä¸€éƒ¨åˆ†ï¼Œæ‚¨å°†ä¸ºæ‚¨çš„ Colab ç¯å¢ƒè®¾ç½®ç¯å¢ƒå˜é‡ã€‚\n2. è®¾ç½®ç¯å¢ƒå˜é‡ ä¸º KAGGLE_USERNAME å’Œ KAGGLE_KEY è®¾ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨å‡ºç°â€œæˆæƒè®¿é—®ï¼Ÿâ€çš„æç¤ºæ—¶ï¼ŒåŒæ„æä¾›å¯†é’¥è®¿é—®ã€‚\nfrom kaggle_secrets import UserSecretsClient user_secrets = UserSecretsClient() secret_value_0 = user_secrets.get_secret(\u0026quot;KAGGLE_KEY \u0026quot;) secret_value_1 = user_secrets.get_secret(\u0026quot;KAGGLE_USERNAME\u0026quot;) 3. å®‰è£… gemma åº“ æœ¬ç¬”è®°æœ¬ç€é‡äºä½¿ç”¨å…è´¹çš„ Colab GPUã€‚è¦å¯ç”¨ç¡¬ä»¶åŠ é€Ÿï¼Œè¯·ç‚¹å‡»ç¼–è¾‘ \u0026gt; ç¬”è®°æœ¬è®¾ç½® \u0026gt; é€‰æ‹© T4 GPU \u0026gt; ä¿å­˜ã€‚\næ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦ä» github.com/google-deepmind/gemma å®‰è£… Google DeepMind çš„ gemma åº“ã€‚å¦‚æœæ‚¨é‡åˆ°å…³äºâ€œpip çš„ä¾èµ–è§£æå™¨â€çš„é”™è¯¯ï¼Œé€šå¸¸å¯ä»¥å¿½ç•¥å®ƒã€‚\næ³¨æ„ï¼šé€šè¿‡å®‰è£… gemmaï¼Œæ‚¨è¿˜å°†å®‰è£… flaxã€core jaxã€optaxï¼ˆåŸºäº JAX çš„æ¢¯åº¦å¤„ç†å’Œä¼˜åŒ–åº“ï¼‰ã€orbax å’Œ sentencepieceã€‚\n!pip install -q git+https://github.com/google-deepmind/gemma.git åŠ è½½å¹¶å‡†å¤‡ Gemma æ¨¡å‹ ä½¿ç”¨ kagglehub.model_download åŠ è½½ Gemma æ¨¡å‹ï¼Œè¯¥å‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼š\nhandleï¼šæ¥è‡ª Kaggle çš„æ¨¡å‹å¥æŸ„ pathï¼šï¼ˆå¯é€‰å­—ç¬¦ä¸²ï¼‰æœ¬åœ°è·¯å¾„ force_downloadï¼šï¼ˆå¯é€‰å¸ƒå°”å€¼ï¼‰å¼ºåˆ¶é‡æ–°ä¸‹è½½æ¨¡å‹ æ³¨æ„ï¼šgemma-2b-it æ¨¡å‹çš„å¤§å°çº¦ä¸º 3.7Gbã€‚\nGEMMA_VARIANT = '2b-it' # @param ['2b', '2b-it'] {type:\u0026quot;string\u0026quot;} import kagglehub GEMMA_PATH = kagglehub.model_download(f'google/gemma/flax/{GEMMA_VARIANT}') print('GEMMA_PATH:', GEMMA_PATH) GEMMA_PATH: /kaggle/input/gemma/flax/2b-it/2 æ³¨æ„ï¼šä¸Šé¢è¾“å‡ºçš„è·¯å¾„æ˜¯æ¨¡å‹æƒé‡å’Œä»¤ç‰Œå™¨åœ¨æœ¬åœ°ä¿å­˜çš„åœ°æ–¹ï¼Œä¹‹åæˆ‘ä»¬è¿˜ä¼šéœ€è¦ã€‚\næ£€æŸ¥æ¨¡å‹æƒé‡å’Œåˆ†è¯å™¨çš„ä½ç½®ï¼Œç„¶åè®¾ç½®è·¯å¾„å˜é‡ã€‚åˆ†è¯å™¨ç›®å½•å°†ä½äºæ‚¨ä¸‹è½½æ¨¡å‹çš„ä¸»ç›®å½•ä¸­ï¼Œè€Œæ¨¡å‹æƒé‡å°†ä½äºä¸€ä¸ªå­ç›®å½•ä¸­ã€‚ä¾‹å¦‚ï¼š\nåˆ†è¯å™¨çš„ tokenizer.model æ–‡ä»¶å°†ä½äº /LOCAL/PATH/TO/gemma/flax/2b-it/2ã€‚ æ¨¡å‹çš„æ£€æŸ¥ç‚¹å°†ä½äº /LOCAL/PATH/TO/gemma/flax/2b-it/2/2b-itã€‚ åœ¨è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ­£ç¡®è®¾ç½®è¿™äº›è·¯å¾„ï¼Œä»¥ä¾¿æ‚¨çš„ä»£ç èƒ½å¤Ÿæ­£ç¡®è®¿é—®å’ŒåŠ è½½æ¨¡å‹åŠå…¶ç»„ä»¶ã€‚\nCKPT_PATH = os.path.join(GEMMA_PATH, GEMMA_VARIANT) TOKENIZER_PATH = os.path.join(GEMMA_PATH, 'tokenizer.model') print('CKPT_PATH:', CKPT_PATH) print('TOKENIZER_PATH:', TOKENIZER_PATH) CKPT_PATH: /kaggle/input/gemma/flax/2b-it/2/2b-it TOKENIZER_PATH: /kaggle/input/gemma/flax/2b-it/2/tokenizer.model æ‰§è¡ŒæŠ½æ ·/æ¨ç† åŠ è½½å’Œæ ¼å¼åŒ– Gemma æ¨¡å‹æ£€æŸ¥ç‚¹ï¼Œä½¿ç”¨ gemma.params.load_and_format_params æ–¹æ³•ï¼š\nfrom gemma import params as params_lib params = params_lib.load_and_format_params(CKPT_PATH) åŠ è½½ä½¿ç”¨ sentencepiece.SentencePieceProcessor æ„å»ºçš„ Gemma åˆ†è¯å™¨ï¼š\nimport sentencepiece as spm vocab = spm.SentencePieceProcessor() vocab.Load(TOKENIZER_PATH) True è¦ä» Gemma æ¨¡å‹æ£€æŸ¥ç‚¹è‡ªåŠ¨åŠ è½½æ­£ç¡®çš„é…ç½®ï¼Œè¯·ä½¿ç”¨ gemma.transformer.TransformerConfigã€‚cache_size å‚æ•°æ˜¯ Gemma Transformer ç¼“å­˜ä¸­çš„æ—¶é—´æ­¥æ•°ã€‚ä¹‹åï¼Œä½¿ç”¨ gemma.transformer.Transformerï¼ˆç»§æ‰¿è‡ª flax.linen.Moduleï¼‰å®ä¾‹åŒ– Gemma æ¨¡å‹ä¸º transformerã€‚\næ³¨æ„ï¼šç”±äºå½“å‰ Gemma ç‰ˆæœ¬ä¸­å­˜åœ¨æœªä½¿ç”¨çš„ä»¤ç‰Œï¼Œè¯æ±‡é‡æ¯”è¾“å…¥åµŒå…¥çš„æ•°é‡å°ã€‚\nfrom gemma import transformer as transformer_lib transformer_config = transformer_lib.TransformerConfig.from_params( params=params, cache_size=1024 ) transformer = transformer_lib.Transformer(transformer_config) åˆ›å»ºä¸€ä¸ªé‡‡æ ·å™¨ï¼Œä½¿ç”¨ gemma.sampler.Sampler åœ¨ Gemma æ¨¡å‹çš„æ£€æŸ¥ç‚¹/æƒé‡å’Œåˆ†è¯å™¨ä¹‹ä¸Šï¼š\nfrom gemma import sampler as sampler_lib sampler = sampler_lib.Sampler( transformer=transformer, vocab=vocab, params=params['transformer'], ) åœ¨ input_batch ä¸­ç¼–å†™ä¸€ä¸ªæç¤ºï¼Œå¹¶æ‰§è¡Œæ¨ç†ã€‚å¯ä»¥è°ƒæ•´ total_generation_stepsï¼ˆç”Ÿæˆå“åº”æ—¶æ‰§è¡Œçš„æ­¥æ•° â€”â€” æœ¬ä¾‹ä¸­ä½¿ç”¨100ä»¥ä¿å­˜ä¸»æœºå†…å­˜ï¼‰ã€‚\næ³¨æ„ï¼šå¦‚æœå†…å­˜ä¸è¶³ï¼Œè¯·ç‚¹å‡» Runtime \u0026gt; Disconnect and delete runtimeï¼Œç„¶åé€‰æ‹© Runtime \u0026gt; Run allã€‚\nprompt = [ \u0026quot;\\n# What is the meaning of life?\u0026quot;, ] reply = sampler(input_strings=prompt, total_generation_steps=100, ) for input_string, out_string in zip(prompt, reply.text): print(f\u0026quot;Prompt:\\n{input_string}\\nOutput:\\n{out_string}\u0026quot;) Prompt: # What is the meaning of life? Output: The question of what the meaning of life is one that has occupied the minds of philosophers, theologians, and individuals for centuries. There is no single, universally accepted answer, but there are many different perspectives on this complex and multifaceted question. **Some common perspectives on the meaning of life include:** * **Biological perspective:** From a biological standpoint, the meaning of life is to survive and reproduce. * **Existential perspective:** Existentialists believe that life is not inherently meaningful and that ï¼ˆå¯é€‰ï¼‰å¦‚æœå·²å®Œæˆç¬”è®°æœ¬å¹¶æƒ³å°è¯•å…¶ä»–æç¤ºï¼Œè¿è¡Œæ­¤å•å…ƒä»¥é‡Šæ”¾å†…å­˜ã€‚ä¹‹åï¼Œå¯ä»¥åœ¨ç¬¬ä¸‰æ­¥å†æ¬¡å®ä¾‹åŒ–é‡‡æ ·å™¨ï¼Œå¹¶åœ¨ç¬¬å››æ­¥è‡ªå®šä¹‰å¹¶è¿è¡Œæç¤ºã€‚\ndel sampler æ¥æº æœ¬æ–‡ç¿»è¯‘è‡ª Gemma JAX inference https://www.kaggle.com/code/windmaple/gemma-jax-inference\nGoogle DeepMind çš„ Gemini https://github.com/google-deepmind/gemma\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nJAX https://jax.readthedocs.io/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nFlax https://flax.readthedocs.io/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nOrbax https://orbax.readthedocs.io/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nSentencePiece https://github.com/google/sentencepiece\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma è®¾ç½® https://ai.google.dev/gemma/docs/setup\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nkaggle gemma æ¨¡å‹ https://www.kaggle.com/models/google/gemma/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","id":1,"section":"posts","summary":"\u003cp\u003eGemma æ˜¯ä¸€ä¸ªåŸºäº Google DeepMind çš„ Gemini\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003e ç ”ç©¶å’ŒæŠ€æœ¯çš„è½»é‡çº§ã€æœ€å…ˆè¿›çš„å¼€æ”¾å¤§å‹è¯­è¨€æ¨¡å‹å®¶æ—ã€‚æœ¬æ•™ç¨‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Google DeepMind çš„ gemma åº“æ¥æ‰§è¡Œ Gemma 2B Instruct æ¨¡å‹çš„åŸºæœ¬é‡‡æ ·/æ¨ç†ï¼Œè¯¥åº“æ˜¯ç”¨ JAX\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e2\u003c/a\u003e\u003c/sup\u003eï¼ˆä¸€ä¸ªé«˜æ€§èƒ½æ•°å€¼è®¡ç®—åº“ï¼‰ã€Flax\u003csup id=\"fnref:3\"\u003e\u003ca href=\"#fn:3\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e3\u003c/a\u003e\u003c/sup\u003eï¼ˆåŸºäº JAX çš„ç¥ç»ç½‘ç»œåº“ï¼‰ã€Orbax\u003csup id=\"fnref:4\"\u003e\u003ca href=\"#fn:4\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e4\u003c/a\u003e\u003c/sup\u003eï¼ˆä¸€ä¸ªåŸºäº JAX çš„ç”¨äºè®­ç»ƒå·¥å…·å¦‚æ£€æŸ¥ç‚¹çš„åº“ï¼‰å’Œ SentencePiece\u003csup id=\"fnref:5\"\u003e\u003ca href=\"#fn:5\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e5\u003c/a\u003e\u003c/sup\u003eï¼ˆä¸€ä¸ªåˆ†è¯å™¨/åˆè¯å™¨åº“ï¼‰ç¼–å†™çš„ã€‚å°½ç®¡åœ¨è¿™ä¸ªç¬”è®°æœ¬ä¸­æ²¡æœ‰ç›´æ¥ä½¿ç”¨ Flaxï¼Œä½† Flax è¢«ç”¨äºåˆ›å»º Gemmaã€‚\u003c/p\u003e","tags":["gemma","JAX"],"title":"Gemma JAX æ¨ç†","uri":"https://www.ganymedenil.com/2024/04/20/Gemma-JAX-inference.html","year":"2024"},{"content":"Gemma æ˜¯ä¸€ä¸ªè½»é‡çº§ã€å…ˆè¿›çš„å¼€æ”¾æ¨¡å‹å®¶æ—ï¼Œç”±ç”¨äºåˆ›å»º Google Gemini æ¨¡å‹çš„ç ”ç©¶å’ŒæŠ€æœ¯æ„å»ºã€‚Gemma å¯ä»¥è¿›ä¸€æ­¥å¾®è°ƒä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚ä½†æ˜¯ï¼Œåƒ Gemma è¿™æ ·çš„å¤§å‹è¯­è¨€æ¨¡å‹å¯èƒ½ä¼šéå¸¸å¤§ï¼Œæœ‰äº›å¯èƒ½ä¸é€‚åˆåœ¨å•ä¸ªåŠ é€Ÿå™¨ä¸Šè¿›è¡Œå¾®è°ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ç§ä¸€èˆ¬æ–¹æ³•æ¥å¯¹å®ƒä»¬è¿›è¡Œå¾®è°ƒï¼š\nå‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆPEFTï¼‰ï¼Œæ—¨åœ¨é€šè¿‡ç‰ºç‰²ä¸€äº›ä¿çœŸåº¦æ¥ç¼©å°æœ‰æ•ˆæ¨¡å‹å¤§å°ã€‚LoRA å±äºè¿™ä¸€ç±»åˆ«ï¼Œåœ¨ Keras ä¸­ä½¿ç”¨ LoRA å¾®è°ƒ Gemma æ¨¡å‹1çš„æ•™ç¨‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ KerasNLP åœ¨å•ä¸ª GPU ä¸Šä½¿ç”¨ LoRA å¾®è°ƒ Gemma 2B æ¨¡å‹ gemma_2b_enã€‚\nä½¿ç”¨æ¨¡å‹å¹¶è¡Œæ€§çš„å…¨å‚æ•°å¾®è°ƒã€‚æ¨¡å‹å¹¶è¡Œæ€§å°†å•ä¸ªæ¨¡å‹çš„æƒé‡åˆ†å¸ƒåœ¨å¤šä¸ªè®¾å¤‡ä¸Šï¼Œå¹¶å®ç°æ°´å¹³æ‰©å±•ã€‚æ‚¨å¯ä»¥åœ¨è¿™ä¸ª KerasæŒ‡å—2ä¸­äº†è§£æ›´å¤šå…³äºåˆ†å¸ƒå¼è®­ç»ƒçš„ä¿¡æ¯ã€‚\næœ¬æ•™ç¨‹æŒ‡å¯¼æ‚¨å¦‚ä½•ä½¿ç”¨ Keras ä¸ JAX åç«¯ï¼Œé€šè¿‡ LoRA å’Œæ¨¡å‹å¹¶è¡Œåˆ†å¸ƒå¼è®­ç»ƒåœ¨ Google çš„å¼ é‡å¤„ç†å•å…ƒï¼ˆTPUï¼‰ä¸Šå¾®è°ƒ Gemma 7B æ¨¡å‹ã€‚è¯·æ³¨æ„ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­å¯ä»¥å…³é—­ LoRAï¼Œè¿›è¡Œè¾ƒæ…¢ä½†æ›´å‡†ç¡®çš„å…¨å‚æ•°è°ƒæ•´ã€‚\nä½¿ç”¨åŠ é€Ÿå™¨ æŠ€æœ¯ä¸Šï¼Œæ‚¨å¯ä»¥åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨ TPU æˆ– GPUã€‚\nå…³äº TPU ç¯å¢ƒçš„è¯´æ˜ Google æä¾›äº†3ç§TPUäº§å“ï¼š\nColab3 æä¾›çš„ TPU v2 å¯¹äºæœ¬æ•™ç¨‹æ¥è¯´ä¸å¤Ÿç”¨ã€‚ Kaggle4 å…è´¹æä¾› TPU v3ï¼Œé€‚ç”¨äºæœ¬æ•™ç¨‹ã€‚ Cloud TPU5 æä¾› TPU v3 å’Œæ›´æ–°ä¸€ä»£çš„ TPUã€‚è®¾ç½®å®ƒçš„ä¸€ç§æ–¹å¼æ˜¯ï¼š åˆ›å»ºä¸€ä¸ªæ–°çš„ TPU VM6 ä¸ºæ‚¨æ‰“ç®—ä½¿ç”¨çš„ Jupyter æœåŠ¡å™¨ç«¯å£è®¾ç½®SSHç«¯å£è½¬å‘7 åœ¨ TPU VM ä¸Šå®‰è£… Jupyter å¹¶å¯åŠ¨ï¼Œç„¶åé€šè¿‡â€œè¿æ¥åˆ°æœ¬åœ°è¿è¡Œæ—¶â€è¿æ¥åˆ° Colab å…³äºå¤š GPU è®¾ç½®çš„è¯´æ˜ è™½ç„¶æœ¬æ•™ç¨‹ä¾§é‡äº TPU çš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œä½†å¦‚æœæ‚¨æœ‰å¤š GPU æœºå™¨ï¼Œå¯ä»¥è½»æ¾åœ°æ ¹æ®è‡ªå·±çš„éœ€è¦è°ƒæ•´å®ƒã€‚\nå¦‚æœæ‚¨å€¾å‘äºé€šè¿‡ Colab å·¥ä½œï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ Colab è¿æ¥èœå•ä¸­çš„â€œè¿æ¥åˆ°è‡ªå®šä¹‰ GCE VMâ€ä¸º Colab é…ç½®å¤š GPU VMã€‚\næˆ‘ä»¬å°†é‡ç‚¹æ”¾åœ¨ä½¿ç”¨ Kaggle æä¾›çš„å…è´¹ TPU ä¸Šã€‚\nå¼€å§‹ä¹‹å‰ Gemma è®¾ç½® è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨é¦–å…ˆéœ€è¦æŒ‰ç…§ Gemma è®¾ç½®8çš„è¯´æ˜å®Œæˆè®¾ç½®ã€‚Gemma è®¾ç½®è¯´æ˜å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\nGemma æ¨¡å‹ç”± Kaggle æ‰˜ç®¡ã€‚è¦ä½¿ç”¨ Gemmaï¼Œè¯·åœ¨ Kaggle ä¸Šè¯·æ±‚è®¿é—®æƒé™ï¼š\nåœ¨ kaggle.com9 ç™»å½•æˆ–æ³¨å†Œã€‚ æ‰“å¼€ Gemma æ¨¡å‹å¡ç‰‡10å¹¶é€‰æ‹©â€œè¯·æ±‚è®¿é—®æƒé™â€ã€‚ å®ŒæˆåŒæ„è¡¨æ ¼å¹¶æ¥å—æ¡æ¬¾å’Œæ¡ä»¶ã€‚ å®‰è£… å®‰è£… Keras å’Œ KerasNLPã€‚\n# å®‰è£…æœ€æ–°çš„ Keras 3ã€‚æ›´å¤šä¿¡æ¯æŸ¥çœ‹ https://keras.io/getting_started/ã€‚ !pip install -q tensorflow-cpu !pip install -q -U keras-nlp tensorflow-hub !pip install -q -U keras\u0026gt;=3 !pip install -U tensorflow-text è®¾ç½® Keras JAX åç«¯ å¯¼å…¥ JAX å¹¶åœ¨ TPU ä¸Šè¿è¡Œå¥å…¨æ€§æ£€æŸ¥ã€‚ Kaggle æä¾› TPUv3-8 è®¾å¤‡ï¼Œè¯¥è®¾å¤‡å…·æœ‰ 8 ä¸ª TPU æ ¸å¿ƒï¼Œæ¯ä¸ªæ ¸å¿ƒæœ‰ 16GB å†…å­˜ã€‚\nimport jax jax.devices() [TpuDevice(id=0, process_index=0, coords=(0,0,0), core_on_chip=0), TpuDevice(id=1, process_index=0, coords=(0,0,0), core_on_chip=1), TpuDevice(id=2, process_index=0, coords=(1,0,0), core_on_chip=0), TpuDevice(id=3, process_index=0, coords=(1,0,0), core_on_chip=1), TpuDevice(id=4, process_index=0, coords=(0,1,0), core_on_chip=0), TpuDevice(id=5, process_index=0, coords=(0,1,0), core_on_chip=1), TpuDevice(id=6, process_index=0, coords=(1,1,0), core_on_chip=0), TpuDevice(id=7, process_index=0, coords=(1,1,0), core_on_chip=1)] import os # Keras 3 åˆ†å¸ƒå¼ API ç›®å‰ä»…é’ˆå¯¹ JAX åç«¯å®ç° os.environ[\u0026quot;KERAS_BACKEND\u0026quot;] = \u0026quot;jax\u0026quot; # é¢„åˆ†é… 90% çš„ TPU å†…å­˜ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å†…å­˜ç¢ç‰‡å’Œåˆ†é…å¼€é”€ os.environ[\u0026quot;XLA_PYTHON_CLIENT_MEM_FRACTION\u0026quot;] = \u0026quot;0.9\u0026quot; åŠ è½½æ¨¡å‹ import keras import keras_nlp åœ¨ NVIDIA GPU ä¸Šè¿›è¡Œæ··åˆç²¾åº¦è®­ç»ƒçš„è¯´æ˜ åœ¨ NVIDIA GPU ä¸Šè®­ç»ƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ··åˆç²¾åº¦ï¼ˆkeras.mixed_precision.set_global_policy('mixed_bfloat16')ï¼‰æ¥åŠ é€Ÿè®­ç»ƒï¼Œå¯¹è®­ç»ƒè´¨é‡çš„å½±å“æœ€å°ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå»ºè®®å¼€å¯æ··åˆç²¾åº¦ï¼Œå› ä¸ºå®ƒæ—¢èŠ‚çœå†…å­˜åˆèŠ‚çœæ—¶é—´ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œåœ¨å°æ‰¹é‡å¤§å°ä¸‹ï¼Œå®ƒå¯èƒ½ä¼šä½¿å†…å­˜ä½¿ç”¨é‡å¢åŠ 1.5å€ï¼ˆæƒé‡å°†è¢«åŠ è½½ä¸¤æ¬¡ï¼Œä¸€æ¬¡ä¸ºåŠç²¾åº¦ï¼Œä¸€æ¬¡ä¸ºå…¨ç²¾åº¦ï¼‰ã€‚\nå¯¹äºæ¨ç†ï¼ŒåŠç²¾åº¦ï¼ˆkeras.config.set_floatx(\u0026quot;bfloat16\u0026quot;)ï¼‰å°†ä¼šèµ·ä½œç”¨å¹¶èŠ‚çœå†…å­˜ï¼Œè€Œæ··åˆç²¾åº¦åˆ™ä¸é€‚ç”¨ã€‚\n# å¦‚æœæ‚¨æƒ³åœ¨ GPU ä¸Šå¯ç”¨æ··åˆç²¾åº¦è®­ç»ƒï¼Œè¯·å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„è¡Œ # keras.mixed_precision.set_global_policy('mixed_bfloat16') è¦åœ¨ TPUä¸Šåˆ†å¸ƒå¼åŠ è½½æ¨¡å‹åŠå…¶æƒé‡å’Œå¼ é‡ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„DeviceMeshã€‚DeviceMesh ä»£è¡¨äº†ä¸€ç»„ä¸ºåˆ†å¸ƒå¼è®¡ç®—é…ç½®çš„ç¡¬ä»¶è®¾å¤‡ï¼Œè¿™åœ¨ Keras 3 ä¸­ä½œä¸ºç»Ÿä¸€åˆ†å¸ƒå¼APIçš„ä¸€éƒ¨åˆ†è¢«å¼•å…¥ã€‚\nåˆ†å¸ƒå¼ API æ”¯æŒæ•°æ®å’Œæ¨¡å‹å¹¶è¡Œæ€§ï¼Œå…è®¸åœ¨å¤šä¸ªåŠ é€Ÿå™¨å’Œä¸»æœºä¸Šé«˜æ•ˆåœ°æ‰©å±•æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚å®ƒåˆ©ç”¨åº•å±‚æ¡†æ¶ï¼ˆä¾‹å¦‚JAXï¼‰æ ¹æ®åˆ†ç‰‡æŒ‡ä»¤é€šè¿‡ç§°ä¸ºå•ç¨‹åºå¤šæ•°æ®ï¼ˆSPMDï¼‰æ‰©å±•çš„è¿‡ç¨‹åˆ†å¸ƒç¨‹åºå’Œå¼ é‡ã€‚æ¬²äº†è§£æ›´å¤šè¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹æ–°çš„ Keras 3 åˆ†å¸ƒå¼APIæŒ‡å—11ã€‚\n# è¦åˆ›å»ºä¸€ä¸ªå½¢çŠ¶ä¸ºï¼ˆ1, 8ï¼‰çš„DeviceMeshï¼Œä»¥ä¾¿åœ¨æ‰€æœ‰8ä¸ªTPUsä¸Šåˆ†ç‰‡æƒé‡ã€‚ device_mesh = keras.distribution.DeviceMesh( (1, 8), [\u0026quot;batch\u0026quot;, \u0026quot;model\u0026quot;], devices=keras.distribution.list_devices()) æ¥è‡ªåˆ†å¸ƒå¼ API çš„ LayoutMap æŒ‡å®šäº†å¦‚ä½•ä½¿ç”¨å­—ç¬¦ä¸²é”®å¯¹æƒé‡å’Œå¼ é‡è¿›è¡Œåˆ†ç‰‡æˆ–å¤åˆ¶ï¼Œä¾‹å¦‚ä¸‹é¢çš„ token_embedding/embeddingsï¼Œè¿™äº›é”®è¢«å½“ä½œæ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å¼ é‡è·¯å¾„ã€‚åŒ¹é…åˆ°çš„å¼ é‡å°†æ ¹æ®æ¨¡å‹ç»´åº¦ï¼ˆ8 ä¸ª TPUï¼‰è¿›è¡Œåˆ†ç‰‡ï¼›å…¶ä»–çš„åˆ™ä¼šè¢«å®Œå…¨å¤åˆ¶ã€‚\nmodel_dim = \u0026quot;model\u0026quot; layout_map = keras.distribution.LayoutMap(device_mesh) # ä¸â€œtoken_embedding/embeddingsâ€åŒ¹é…çš„æƒé‡å°†åœ¨ 8 ä¸ª TPU ä¸Šè¿›è¡Œåˆ†ç‰‡ layout_map[\u0026quot;token_embedding/embeddings\u0026quot;] = (None, model_dim) # ç”¨äºåŒ¹é…è§£ç å™¨ä¸­çš„æŸ¥è¯¢ã€é”®å’Œå€¼çŸ©é˜µçš„æ­£åˆ™è¡¨è¾¾å¼ # æ³¨æ„åŠ›å±‚ layout_map[\u0026quot;decoder_block.*attention.*(query|key|value).*kernel\u0026quot;] = ( None, model_dim, None) layout_map[\u0026quot;decoder_block.*attention_output.*kernel\u0026quot;] = ( None, None, model_dim) layout_map[\u0026quot;decoder_block.*ffw_gating.*kernel\u0026quot;] = (model_dim, None) layout_map[\u0026quot;decoder_block.*ffw_linear.*kernel\u0026quot;] = (None, model_dim) ModelParallel å…è®¸æ‚¨åœ¨ DeviceMesh ä¸Šçš„æ‰€æœ‰è®¾å¤‡ä¹‹é—´åˆ†ç‰‡æ¨¡å‹æƒé‡æˆ–æ¿€æ´»å¼ é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€äº› Gemma 7B æ¨¡å‹çš„æƒé‡æ ¹æ®ä¸Šé¢å®šä¹‰çš„ layout_map åœ¨ 8 ä¸ª TPU èŠ¯ç‰‡ä¹‹é—´è¿›è¡Œäº†åˆ†ç‰‡ã€‚ç°åœ¨ä»¥åˆ†å¸ƒå¼æ–¹å¼åŠ è½½æ¨¡å‹ã€‚\nmodel_parallel = keras.distribution.ModelParallel( device_mesh, layout_map, batch_dim_name=\u0026quot;batch\u0026quot;) keras.distribution.set_distribution(model_parallel) gemma_lm = keras_nlp.models.GemmaCausalLM.from_preset(\u0026quot;gemma_7b_en\u0026quot;) ç°åœ¨éªŒè¯æ¨¡å‹æ˜¯å¦å·²æ­£ç¡®åˆ†åŒºã€‚ æˆ‘ä»¬ä»¥decoder_block_1ä¸ºä¾‹ã€‚\ndecoder_block_1 = gemma_lm.backbone.get_layer('decoder_block_1') print(type(decoder_block_1)) for variable in decoder_block_1.weights: print(f'{variable.path:\u0026lt;58} {str(variable.shape):\u0026lt;16} {str(variable.value.sharding.spec)}') \u0026lt;class 'keras_nlp.src.models.gemma.gemma_decoder_block.GemmaDecoderBlock'\u0026gt; decoder_block_1/pre_attention_norm/scale (3072,) PartitionSpec(None,) decoder_block_1/attention/query/kernel (16, 3072, 256) PartitionSpec(None, 'model', None) decoder_block_1/attention/key/kernel (16, 3072, 256) PartitionSpec(None, 'model', None) decoder_block_1/attention/value/kernel (16, 3072, 256) PartitionSpec(None, 'model', None) decoder_block_1/attention/attention_output/kernel (16, 256, 3072) PartitionSpec(None, None, 'model') decoder_block_1/pre_ffw_norm/scale (3072,) PartitionSpec(None,) decoder_block_1/ffw_gating/kernel (3072, 24576) PartitionSpec('model', None) decoder_block_1/ffw_gating_2/kernel (3072, 24576) PartitionSpec('model', None) decoder_block_1/ffw_linear/kernel (24576, 3072) PartitionSpec(None, 'model') å¾®è°ƒå‰æ¨ç† gemma_lm.generate(\u0026quot;Best comedy movies in the 90s \u0026quot;, max_length=64) 'Best comedy movies in the 90s 1. The Naked Gun 2Â½: The Smell of Fear (1991) 2. Wayneâ€™s World (1992) 3. The Naked Gun 33â…“: The Final Insult (1994)' è¯¥æ¨¡å‹ç”Ÿæˆäº† 90 å¹´ä»£å€¼å¾—è§‚çœ‹çš„ç²¾å½©å–œå‰§ç”µå½±åˆ—è¡¨ã€‚ ç°åœ¨æˆ‘ä»¬å¾®è°ƒ Gemma æ¨¡å‹æ¥æ”¹å˜è¾“å‡ºé£æ ¼ã€‚\nä½¿ç”¨ IMDBæ•°æ®å¾®è°ƒ import tensorflow_datasets as tfds imdb_train = tfds.load( \u0026quot;imdb_reviews\u0026quot;, split=\u0026quot;train\u0026quot;, as_supervised=True, batch_size=2, ) # ä¸¢å¼ƒæ ‡ç­¾ imdb_train = imdb_train.map(lambda x, y: x) imdb_train.unbatch().take(1).get_single_element().numpy() # ä½¿ç”¨æ•°æ®é›†çš„å­é›†æ¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ã€‚ imdb_train = imdb_train.take(2000) ä½¿ç”¨ä½ç§©é€‚åº”ï¼ˆLoRAï¼‰12è¿›è¡Œå¾®è°ƒã€‚LoRA æ˜¯ä¸€ç§å¾®è°ƒæŠ€æœ¯ï¼Œé€šè¿‡å†»ç»“æ¨¡å‹çš„å…¨éƒ¨æƒé‡å¹¶åœ¨æ¨¡å‹ä¸­æ’å…¥è¾ƒå°‘æ•°é‡çš„æ–°å¯è®­ç»ƒæƒé‡ï¼Œå¤§å¤§å‡å°‘äº†ä¸‹æ¸¸ä»»åŠ¡çš„å¯è®­ç»ƒå‚æ•°æ•°é‡ã€‚åŸºæœ¬ä¸Šï¼ŒLoRA é€šè¿‡ä¸¤ä¸ªè¾ƒå°çš„ä½ç§©çŸ©é˜µ AxB è¿›è¡Œé‡æ–°å‚æ•°åŒ–ï¼Œä»¥è¿›è¡Œè®­ç»ƒï¼Œè¿™ç§æŠ€æœ¯ä½¿è®­ç»ƒæ›´åŠ å¿«é€Ÿå’Œå†…å­˜é«˜æ•ˆã€‚\n# ä¸ºæ¨¡å‹å¯ç”¨ LoRA å¹¶å°† LoRA ç§©è®¾ç½®ä¸º 4ã€‚ gemma_lm.backbone.enable_lora(rank=4) # å¯¹ IMDb ç”µå½±è¯„è®ºæ•°æ®é›†è¿›è¡Œå¾®è°ƒã€‚ # å°†è¾“å…¥åºåˆ—é•¿åº¦é™åˆ¶ä¸º 128 ä»¥æ§åˆ¶å†…å­˜ä½¿ç”¨ã€‚ gemma_lm.preprocessor.sequence_length = 128 # ä½¿ç”¨ AdamWï¼ˆtransformer æ¨¡å‹çš„å¸¸è§ä¼˜åŒ–å™¨ï¼‰ã€‚ optimizer = keras.optimizers.AdamW( learning_rate=5e-5, weight_decay=0.01, ) # ä»è¡°å‡ï¼ˆdecayï¼‰ä¸­æ’é™¤ layernorm å’Œåç½®é¡¹ã€‚ optimizer.exclude_from_weight_decay(var_names=[\u0026quot;bias\u0026quot;, \u0026quot;scale\u0026quot;]) gemma_lm.compile( loss=keras.losses.SparseCategoricalCrossentropy(from_logits=True), optimizer=optimizer, weighted_metrics=[keras.metrics.SparseCategoricalAccuracy()], ) gemma_lm.summary() gemma_lm.fit(imdb_train, epochs=1) è¯·æ³¨æ„ï¼Œå¯ç”¨ LoRA ä¼šæ˜¾ç€å‡å°‘å¯è®­ç»ƒå‚æ•°çš„æ•°é‡ï¼Œä» 70 äº¿ä¸ªå‡å°‘åˆ°ä»… 1100 ä¸‡ä¸ªã€‚\nå¾®è°ƒåæ¨ç† gemma_lm.generate(\u0026quot;Best comedy movies in the 90s \u0026quot;, max_length=64) 'Best comedy movies in the 90s 1990-1999. 10. Austin Powers - International Man of Mystery (1997) 9. The Wedding Singer (1998) 8. The Cable Guy (1996) 7' ç»è¿‡å¾®è°ƒåï¼Œè¯¥æ¨¡å‹å·²ç»äº†è§£äº†ç”µå½±è¯„è®ºçš„é£æ ¼ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨ 90 å¹´ä»£å–œå‰§ç”µå½±çš„èƒŒæ™¯ä¸‹ç”Ÿæˆè¯¥é£æ ¼çš„è¾“å‡ºã€‚\næ¥æº æœ¬æ–‡ç¿»è¯‘è‡ª Keras Gemma distributed finetuning and inference https://www.kaggle.com/code/nilaychauhan/keras-gemma-distributed-finetuning-and-inference\nåœ¨ Keras ä¸­ä½¿ç”¨ LoRA å¾®è°ƒ Gemma æ¨¡å‹ https://ganymedenil.com/2024/03/30/Fine-tune-Gemma-model-%20in-Keras-using-LoRA.html\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nKerasæŒ‡å— https://keras.io/guides/distribution/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nColab https://colab.sandbox.google.com/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nKaggle https://www.kaggle.com/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nCloud TPU https://cloud.google.com/tpu?hl=en\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nTPU VM https://cloud.google.com/tpu/docs/managing-tpus-tpu-vm#tpu-vms\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nSSHç«¯å£è½¬å‘ https://cloud.google.com/solutions/connecting-securely#port-forwarding-over-ssh\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma è®¾ç½® https://ai.google.dev/gemma/docs/setup\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nkaggle.com https://www.kaggle.com/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma æ¨¡å‹å¡ç‰‡ https://www.kaggle.com/models/google/gemma\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nKeras 3 åˆ†å¸ƒå¼APIæŒ‡å— https://keras.io/guides/distribution/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nä½ç§©é€‚åº” https://arxiv.org/abs/2106.09685\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","id":2,"section":"posts","summary":"\u003cp\u003eGemma æ˜¯ä¸€ä¸ªè½»é‡çº§ã€å…ˆè¿›çš„å¼€æ”¾æ¨¡å‹å®¶æ—ï¼Œç”±ç”¨äºåˆ›å»º Google Gemini æ¨¡å‹çš„ç ”ç©¶å’ŒæŠ€æœ¯æ„å»ºã€‚Gemma å¯ä»¥è¿›ä¸€æ­¥å¾®è°ƒä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚ä½†æ˜¯ï¼Œåƒ Gemma è¿™æ ·çš„å¤§å‹è¯­è¨€æ¨¡å‹å¯èƒ½ä¼šéå¸¸å¤§ï¼Œæœ‰äº›å¯èƒ½ä¸é€‚åˆåœ¨å•ä¸ªåŠ é€Ÿå™¨ä¸Šè¿›è¡Œå¾®è°ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸¤ç§ä¸€èˆ¬æ–¹æ³•æ¥å¯¹å®ƒä»¬è¿›è¡Œå¾®è°ƒï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eå‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆPEFTï¼‰ï¼Œæ—¨åœ¨é€šè¿‡ç‰ºç‰²ä¸€äº›ä¿çœŸåº¦æ¥ç¼©å°æœ‰æ•ˆæ¨¡å‹å¤§å°ã€‚LoRA å±äºè¿™ä¸€ç±»åˆ«ï¼Œåœ¨ Keras ä¸­ä½¿ç”¨ LoRA å¾®è°ƒ Gemma æ¨¡å‹\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003eçš„æ•™ç¨‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ KerasNLP åœ¨å•ä¸ª GPU ä¸Šä½¿ç”¨ LoRA å¾®è°ƒ Gemma 2B æ¨¡å‹ gemma_2b_enã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eä½¿ç”¨æ¨¡å‹å¹¶è¡Œæ€§çš„å…¨å‚æ•°å¾®è°ƒã€‚æ¨¡å‹å¹¶è¡Œæ€§å°†å•ä¸ªæ¨¡å‹çš„æƒé‡åˆ†å¸ƒåœ¨å¤šä¸ªè®¾å¤‡ä¸Šï¼Œå¹¶å®ç°æ°´å¹³æ‰©å±•ã€‚æ‚¨å¯ä»¥åœ¨è¿™ä¸ª KerasæŒ‡å—\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e2\u003c/a\u003e\u003c/sup\u003eä¸­äº†è§£æ›´å¤šå…³äºåˆ†å¸ƒå¼è®­ç»ƒçš„ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eæœ¬æ•™ç¨‹æŒ‡å¯¼æ‚¨å¦‚ä½•ä½¿ç”¨ Keras ä¸ JAX åç«¯ï¼Œé€šè¿‡ LoRA å’Œæ¨¡å‹å¹¶è¡Œåˆ†å¸ƒå¼è®­ç»ƒåœ¨ Google çš„å¼ é‡å¤„ç†å•å…ƒï¼ˆTPUï¼‰ä¸Šå¾®è°ƒ Gemma 7B æ¨¡å‹ã€‚è¯·æ³¨æ„ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­å¯ä»¥å…³é—­ LoRAï¼Œè¿›è¡Œè¾ƒæ…¢ä½†æ›´å‡†ç¡®çš„å…¨å‚æ•°è°ƒæ•´ã€‚\u003c/p\u003e","tags":["gemma","kerasNLP"],"title":"åœ¨ä½¿ç”¨ Keras è¿›è¡Œ Gemma æ¨¡å‹çš„åˆ†å¸ƒå¼å¾®è°ƒå’Œæ¨ç†","uri":"https://www.ganymedenil.com/2024/03/30/Keras-Gemma-distributed-finetuning-and-inference.html","year":"2024"},{"content":"å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¦‚ Gemma å·²è¢«è¯æ˜åœ¨å¤šç§è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ä¸Šæœ‰æ•ˆã€‚LLMé¦–å…ˆé€šè¿‡è‡ªç›‘ç£æ–¹å¼åœ¨å¤§é‡æ–‡æœ¬è¯­æ–™ä¸Šè¿›è¡Œé¢„è®­ç»ƒã€‚é¢„è®­ç»ƒå¸®åŠ© LLM å­¦ä¹ é€šç”¨çŸ¥è¯†ï¼Œä¾‹å¦‚å•è¯ä¹‹é—´çš„ç»Ÿè®¡å…³ç³»ã€‚ç„¶åï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šé¢†åŸŸçš„æ•°æ®å¯¹ LLM è¿›è¡Œå¾®è°ƒï¼Œä»¥æ‰§è¡Œä¸‹æ¸¸ä»»åŠ¡ï¼ˆå¦‚æƒ…æ„Ÿåˆ†æï¼‰ã€‚\nLLM çš„å¤§å°æå¤§ï¼ˆå‚æ•°æ•°é‡è¾¾åˆ°æ•°ç™¾ä¸‡ï¼‰ã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œä¸éœ€è¦è¿›è¡Œå®Œå…¨å¾®è°ƒï¼ˆæ›´æ–°æ¨¡å‹ä¸­çš„æ‰€æœ‰å‚æ•°ï¼‰ï¼Œå› ä¸ºå…¸å‹çš„å¾®è°ƒæ•°æ®é›†ç›¸å¯¹äºé¢„è®­ç»ƒæ•°æ®é›†è¦å°å¾—å¤šã€‚\nä½ç§©é€‚åº”ï¼ˆLoRAï¼‰1æ˜¯ä¸€ç§å¾®è°ƒæŠ€æœ¯ï¼Œé€šè¿‡å†»ç»“æ¨¡å‹çš„æƒé‡å¹¶åœ¨æ¨¡å‹ä¸­æ’å…¥è¾ƒå°‘æ•°é‡çš„æ–°æƒé‡ï¼Œå¤§å¤§å‡å°‘äº†ä¸‹æ¸¸ä»»åŠ¡çš„å¯è®­ç»ƒå‚æ•°æ•°é‡ã€‚è¿™ä½¿å¾—ä½¿ç”¨ LoRA è¿›è¡Œè®­ç»ƒæ›´å¿«ã€æ›´èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸”ç”Ÿæˆçš„æ¨¡å‹æƒé‡æ›´å°ï¼ˆå‡ ç™¾MBï¼‰ï¼ŒåŒæ—¶ä¿æŒäº†æ¨¡å‹è¾“å‡ºçš„è´¨é‡ã€‚\næœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨ä½¿ç”¨ KerasNLP å¯¹ Gemma 2B æ¨¡å‹è¿›è¡Œ LoRA å¾®è°ƒï¼Œä½¿ç”¨çš„æ˜¯ Databricks Dolly 15kæ•°æ®é›†2ã€‚è¯¥æ•°æ®é›†åŒ…å«15,000ä¸ªé«˜è´¨é‡çš„äººç±»ç”Ÿæˆçš„æç¤º/å“åº”å¯¹ï¼Œä¸“é—¨ç”¨äºå¾®è°ƒ LLMã€‚\nè®¾ç½® Gemma è®¾ç½® è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨é¦–å…ˆéœ€è¦æŒ‰ç…§ Gemma è®¾ç½®3çš„è¯´æ˜å®Œæˆè®¾ç½®ã€‚Gemma è®¾ç½®è¯´æ˜å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\nGemma æ¨¡å‹ç”± Kaggle æ‰˜ç®¡ã€‚è¦ä½¿ç”¨ Gemmaï¼Œè¯·åœ¨ Kaggle ä¸Šè¯·æ±‚è®¿é—®æƒé™ï¼š\nåœ¨ kaggle.com4 ç™»å½•æˆ–æ³¨å†Œã€‚ æ‰“å¼€ Gemma æ¨¡å‹å¡ç‰‡5å¹¶é€‰æ‹©â€œè¯·æ±‚è®¿é—®æƒé™â€ã€‚ å®ŒæˆåŒæ„è¡¨æ ¼å¹¶æ¥å—æ¡æ¬¾å’Œæ¡ä»¶ã€‚ å®‰è£…ä¾èµ– å®‰è£… Keras ã€ KerasNLP å’Œå…¶ä»–ä¾èµ–ã€‚\n# å®‰è£…æœ€æ–°çš„ Keras 3ã€‚æ›´å¤šä¿¡æ¯æŸ¥çœ‹ https://keras.io/getting_started/ã€‚ !pip install -q -U keras-nlp !pip install -q -U keras\u0026gt;=3 é€‰æ‹©ä¸€ä¸ªåç«¯ Keras æ˜¯ä¸€ä¸ªé«˜çº§çš„ã€å¤šæ¡†æ¶çš„æ·±åº¦å­¦ä¹ APIï¼Œè®¾è®¡ä¸Šæ³¨é‡ç®€å•æ€§å’Œæ˜“ç”¨æ€§ã€‚Keras 3 å…è®¸æ‚¨é€‰æ‹©åç«¯ï¼šTensorFlowã€JAXæˆ– PyTorchã€‚è¿™ä¸‰ä¸ªåç«¯å¯¹äºæœ¬æ•™ç¨‹éƒ½é€‚ç”¨ã€‚\nåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ JAX ä½œä¸ºåç«¯ã€‚\nimport os os.environ[\u0026quot;KERAS_BACKEND\u0026quot;] = \u0026quot;jax\u0026quot; # æˆ–è€… \u0026quot;tensorflow\u0026quot; ã€ \u0026quot;torch\u0026quot;ã€‚ # åœ¨ä½¿ç”¨JAXåç«¯æ—¶ï¼Œé¿å…å†…å­˜ç¢ç‰‡åŒ–ã€‚ os.environ[\u0026quot;XLA_PYTHON_CLIENT_MEM_FRACTION\u0026quot;]=\u0026quot;1.00\u0026quot; å¯¼å…¥åŒ… å¯¼å…¥ Keras å’Œ KerasNLPã€‚\nimport keras import keras_nlp åŠ è½½æ•°æ®é›† é¢„å¤„ç†æ•°æ®æ˜¯å¾®è°ƒæ¨¡å‹çš„é‡è¦æ­¥éª¤ï¼Œå°¤å…¶æ˜¯å½“ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹æ—¶ã€‚æœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯1000ä¸ªè®­ç»ƒç¤ºä¾‹çš„å­é›†ï¼Œä»¥ä¾¿æ›´å¿«åœ°æ‰§è¡Œã€‚å¦‚æœæƒ³è¦è·å¾—æ›´é«˜è´¨é‡çš„å¾®è°ƒæ•ˆæœï¼Œå»ºè®®ä½¿ç”¨æ›´å¤šçš„è®­ç»ƒæ•°æ®ã€‚\nimport json data = [] with open('/kaggle/input/databricks-dolly-15k/databricks-dolly-15k.jsonl') as file: for line in file: features = json.loads(line) # è¿‡æ»¤æ‰å¸¦æœ‰ä¸Šä¸‹æ–‡çš„ç¤ºä¾‹ï¼Œä»¥ä¿æŒç®€å•ã€‚ if features[\u0026quot;context\u0026quot;]: continue # å°†æ•´ä¸ªç¤ºä¾‹æ ¼å¼åŒ–ä¸ºå•ä¸ªå­—ç¬¦ä¸²ã€‚ template = \u0026quot;Instruction:\\n{instruction}\\n\\nResponse:\\n{response}\u0026quot; data.append(template.format(**features)) # ä»…ä½¿ç”¨ 1000 ä¸ªè®­ç»ƒç¤ºä¾‹ï¼Œä»¥ä¿æŒå¿«é€Ÿã€‚ data = data[:1000] åŠ è½½æ¨¡å‹ KerasNLP æä¾›äº†è®¸å¤šæµè¡Œæ¨¡å‹æ¶æ„6çš„å®ç°ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ GemmaCausalLM åˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå› æœè¯­è¨€å»ºæ¨¡çš„ç«¯åˆ°ç«¯ Gemma æ¨¡å‹ã€‚å› æœè¯­è¨€æ¨¡å‹åŸºäºå‰é¢çš„ä»¤ç‰Œé¢„æµ‹ä¸‹ä¸€ä¸ªä»¤ç‰Œã€‚\nä½¿ç”¨ from_preset æ–¹æ³•åˆ›å»ºæ¨¡å‹ï¼š\ngemma_lm = keras_nlp.models.GemmaCausalLM.from_preset(\u0026quot;gemma_2b_en\u0026quot;) gemma_lm.summary() Preprocessor: \u0026quot;gemma_causal_lm_preprocessor\u0026quot; Tokenizer (type) Vocab # gemma_tokenizer (GemmaTokenizer) 256,000 Model: \u0026quot;gemma_causal_lm\u0026quot; Layer (type) Output Shape Param # Connected to padding_mask (InputLayer) (None, None) 0 - token_ids (InputLayer) (None, None) 0 - gemma_backbone (GemmaBackbone) (None, None, 2048) 2,506,172,416 padding_mask[0][0], token_ids[0][0] token_embedding (ReversibleEmbedding) (None, None, 256000) 524,288,000 gemma_backbone[0][0] Total params: 2,506,172,416 (9.34 GB) Trainable params: 2,506,172,416 (9.34 GB) Non-trainable params: 0 (0.00 B) from_preset æ–¹æ³•ä»é¢„è®¾çš„æ¶æ„å’Œæƒé‡ä¸­å®ä¾‹åŒ–æ¨¡å‹ã€‚åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸² \u0026ldquo;gemma_2b_en\u0026rdquo; æŒ‡å®šäº†é¢„è®¾çš„æ¶æ„ â€”â€” ä¸€ä¸ªæ‹¥æœ‰ 20 äº¿å‚æ•°çš„ Gemma æ¨¡å‹ã€‚\næ³¨æ„ï¼šGemma ä¹Ÿæä¾›äº†ä¸€ä¸ªæœ‰ 70 äº¿å‚æ•°çš„æ¨¡å‹ã€‚è¦åœ¨ Colab ä¸­è¿è¡Œæ›´å¤§çš„æ¨¡å‹ï¼Œæ‚¨éœ€è¦è®¿é—®ä»˜è´¹è®¡åˆ’ä¸­æä¾›çš„é«˜çº§ GPUã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥åœ¨ Kaggle æˆ– Google Cloud ä¸Šå¯¹ Gemma 7B æ¨¡å‹è¿›è¡Œåˆ†å¸ƒå¼è°ƒä¼˜7ã€‚\nåœ¨å¾®è°ƒä¹‹å‰çš„æ¨ç† åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†ç”¨å„ç§æç¤ºæŸ¥è¯¢æ¨¡å‹ï¼Œä»¥æŸ¥çœ‹å…¶å¦‚ä½•å“åº”ã€‚\næ¬§æ´²æ—…è¡Œæç¤º æŸ¥è¯¢æ¨¡å‹ä»¥è·å–å…³äºæ¬§æ´²æ—…è¡Œåº”åšäº›ä»€ä¹ˆçš„å»ºè®®ã€‚\nprompt = template.format( instruction=\u0026quot;What should I do on a trip to Europe?\u0026quot;, response=\u0026quot;\u0026quot;, ) print(gemma_lm.generate(prompt, max_length=256)) Instruction: What should I do on a trip to Europe? Response: 1. Take a trip to Europe. 2. Take a trip to Europe. 3. Take a trip to Europe. 4. Take a trip to Europe. 5. Take a trip to Europe. 6. Take a trip to Europe. 7. Take a trip to Europe. 8. Take a trip to Europe. 9. Take a trip to Europe. 10. Take a trip to Europe. 11. Take a trip to Europe. 12. Take a trip to Europe. 13. Take a trip to Europe. 14. Take a trip to Europe. 15. Take a trip to Europe. 16. Take a trip to Europe. 17. Take a trip to Europe. 18. Take a trip to Europe. 19. Take a trip to Europe. 20. Take a trip to Europe. 21. Take a trip to Europe. 22. Take a trip to Europe. 23. Take a trip to Europe. 24. Take a trip to Europe. 25. Take a trip to è¯¥æ¨¡å‹åªæ˜¯é‡å¤æ‰“å°â€œTake a trip to Europeâ€ã€‚\nELI5 å…‰åˆä½œç”¨æç¤º æç¤ºæ¨¡å‹ç”¨ 5 å²å„¿ç«¥èƒ½å¤Ÿç†è§£çš„ç®€å•æœ¯è¯­è§£é‡Šå…‰åˆä½œç”¨ã€‚\nprompt = template.format( instruction=\u0026quot;Explain the process of photosynthesis in a way that a child could understand.\u0026quot;, response=\u0026quot;\u0026quot;, ) print(gemma_lm.generate(prompt, max_length=256)) Instruction: Explain the process of photosynthesis in a way that a child could understand. Response: Photosynthesis is the process by which plants use the energy from the sun to convert water and carbon dioxide into oxygen and glucose. The process begins with the absorption of light energy by chlorophyll molecules in the leaves of plants. The energy from the light is used to split water molecules into hydrogen and oxygen. The oxygen is released into the atmosphere, while the hydrogen is used to make glucose. The glucose is then used by the plant to make energy and grow. Explanation: Photosynthesis is the process by which plants use the energy from the sun to convert water and carbon dioxide into oxygen and glucose. The process begins with the absorption of light energy by chlorophyll molecules in the leaves of plants. The energy from the light is used to split water molecules into hydrogen and oxygen. The oxygen is released into the atmosphere, while the hydrogen is used to make glucose. The glucose is then used by the plant to make energy and grow. Explanation: Photosynthesis is the process by which plants use the energy from the sun to convert water and carbon dioxide into oxygen and glucose. The process begins with the absorption of light energy by chlorophyll molecules in the leaves of plants. The energy from å›ç­”ä¸­åŒ…å«å¯¹å„¿ç«¥æ¥è¯´å¯èƒ½ä¸å®¹æ˜“ç†è§£çš„å•è¯ï¼Œä¾‹å¦‚å¶ç»¿ç´ ã€è‘¡è„ç³–ç­‰ã€‚\nLoRA å¾®è°ƒ è¦ä»æ¨¡å‹ä¸­è·å¾—æ›´å¥½çš„å“åº”ï¼Œå¯ä»¥ä½¿ç”¨ Databricks Dolly 15k æ•°æ®é›†é€šè¿‡ä½ç§©é€‚åº”ï¼ˆLoRAï¼‰å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚\nLoRA ç§©å†³å®šäº†æ·»åŠ åˆ° LLM åŸå§‹æƒé‡ä¸­çš„å¯è®­ç»ƒçŸ©é˜µçš„ç»´åº¦ã€‚å®ƒæ§åˆ¶ç€å¾®è°ƒè°ƒæ•´çš„è¡¨è¾¾æ€§å’Œç²¾åº¦ã€‚\næ›´é«˜çš„ç§©æ„å‘³ç€å¯ä»¥è¿›è¡Œæ›´è¯¦ç»†çš„æ›´æ”¹ï¼Œä½†ä¹Ÿæ„å‘³ç€æœ‰æ›´å¤šçš„å¯è®­ç»ƒå‚æ•°ã€‚è¾ƒä½çš„ç§©æ„å‘³ç€è®¡ç®—å¼€é”€è¾ƒå°ï¼Œä½†å¯èƒ½å¯¼è‡´é€‚åº”æ€§ä¸å¤Ÿç²¾ç¡®ã€‚\næœ¬æ•™ç¨‹ä½¿ç”¨çš„ LoRA ç§©ä¸º 4ã€‚åœ¨å®è·µä¸­ï¼Œä»ç›¸å¯¹è¾ƒå°çš„ç§©å¼€å§‹ï¼ˆä¾‹å¦‚ 4ã€8ã€16ï¼‰æ˜¯è®¡ç®—ä¸Šé«˜æ•ˆçš„è¯•éªŒæ–¹æ³•ã€‚ä½¿ç”¨è¿™ä¸ªç§©è®­ç»ƒæ‚¨çš„æ¨¡å‹ï¼Œå¹¶è¯„ä¼°åœ¨æ‚¨çš„ä»»åŠ¡ä¸Šçš„æ€§èƒ½æ”¹è¿›ã€‚é€æ¸å¢åŠ åç»­è¯•éªŒçš„ç§©ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½è¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚\n# ä¸ºæ¨¡å‹å¯ç”¨ LoRA å¹¶å°† LoRA ç§©è®¾ç½®ä¸º 4ã€‚ gemma_lm.backbone.enable_lora(rank=4) gemma_lm.summary() Preprocessor: \u0026quot;gemma_causal_lm_preprocessor\u0026quot; Tokenizer (type) Vocab # gemma_tokenizer (GemmaTokenizer) 256,000 Model: \u0026quot;gemma_causal_lm\u0026quot; Layer (type) Output Shape Param # Connected to padding_mask (InputLayer) (None, None) 0 - token_ids (InputLayer) (None, None) 0 - gemma_backbone (GemmaBackbone) (None, None, 2048) 2,507,536,384 padding_mask[0][0], token_ids[0][0] token_embedding (ReversibleEmbedding) (None, None, 256000) 524,288,000 gemma_backbone[0][0] Total params: 2,507,536,384 (9.34 GB) Trainable params: 1,363,968 (5.20 MB) Non-trainable params: 2,506,172,416 (9.34 GB) è¯·æ³¨æ„ï¼Œå¯ç”¨ LoRA ä¼šæ˜¾ç€å‡å°‘å¯è®­ç»ƒå‚æ•°çš„æ•°é‡ï¼ˆä» 25 äº¿å‡å°‘åˆ° 130 ä¸‡ï¼‰ã€‚\n# å°†è¾“å…¥åºåˆ—é•¿åº¦é™åˆ¶ä¸º 512ï¼ˆä»¥æ§åˆ¶å†…å­˜ä½¿ç”¨ï¼‰ã€‚ gemma_lm.preprocessor.sequence_length = 512 # ä½¿ç”¨ AdamWï¼ˆtransformer æ¨¡å‹çš„å¸¸è§ä¼˜åŒ–å™¨ï¼‰ã€‚ optimizer = keras.optimizers.AdamW( learning_rate=5e-5, weight_decay=0.01, ) # ä»è¡°å‡ï¼ˆdecayï¼‰ä¸­æ’é™¤ layernorm å’Œåç½®é¡¹ã€‚ optimizer.exclude_from_weight_decay(var_names=[\u0026quot;bias\u0026quot;, \u0026quot;scale\u0026quot;]) gemma_lm.compile( loss=keras.losses.SparseCategoricalCrossentropy(from_logits=True), optimizer=optimizer, weighted_metrics=[keras.metrics.SparseCategoricalAccuracy()], ) gemma_lm.fit(data, epochs=1, batch_size=1) å¾®è°ƒä¹‹åçš„æ¨ç† å¾®è°ƒåï¼Œæ¨¡å‹çš„å“åº”ä¼šéµå¾ªæç¤ºä¸­æä¾›çš„æŒ‡ä»¤ã€‚\næ¬§æ´²æ—…è¡Œæç¤º prompt = template.format( instruction=\u0026quot;What should I do on a trip to Europe?\u0026quot;, response=\u0026quot;\u0026quot;, ) print(gemma_lm.generate(prompt, max_length=256)) Instruction: What should I do on a trip to Europe? Response: You should plan to see the most famous sights in Europe. The Eiffel Tower, the Acropolis, and the Colosseum are just a few. You should also plan on seeing as many countries as possible. There are so many amazing places in Europe, it is a shame to not see them all. Additional Information: Europe is a very interesting place to visit for many reasons, not least of which is that there are so many different places to see. å¾®è°ƒåçš„æ¨¡å‹ç°åœ¨å¯ä»¥æ¨èåœ¨æ¬§æ´²è®¿é—®çš„åœ°æ–¹äº†ã€‚\nELI5 å…‰åˆä½œç”¨æç¤º prompt = template.format( instruction=\u0026quot;Explain the process of photosynthesis in a way that a child could understand.\u0026quot;, response=\u0026quot;\u0026quot;, ) print(gemma_lm.generate(prompt, max_length=256)) Instruction: Explain the process of photosynthesis in a way that a child could understand. Response: Photosynthesis is a process in which plants and photosynthetic organisms (such as algae, cyanobacteria, and some bacteria and archaea) use light energy to convert water and carbon dioxide into sugar and release oxygen. This process requires chlorophyll, water, carbon dioxide, and energy. The chlorophyll captures the light energy and uses it to power a reaction that converts the carbon from carbon dioxide into organic molecules (such as sugar) that can be used for energy. The process also generates oxygen as a by-product. è¯¥æ¨¡å‹ç°åœ¨ç”¨ç®€å•çš„æœ¯è¯­è§£é‡Šäº†å…‰åˆä½œç”¨ã€‚\nè¯·æ³¨æ„ï¼Œå‡ºäºæ¼”ç¤ºç›®çš„ï¼Œæœ¬æ•™ç¨‹ä»…åœ¨æ•°æ®é›†çš„å°å­é›†ä¸Šå¯¹æ¨¡å‹è¿›è¡Œäº†ä¸€æ¬¡è¿­ä»£ï¼ˆepochï¼‰çš„å¾®è°ƒï¼Œå¹¶ä¸”ä½¿ç”¨äº†è¾ƒä½çš„ LoRA ç§©å€¼ã€‚è¦ä»å¾®è°ƒåçš„æ¨¡å‹ä¸­è·å¾—æ›´å¥½çš„å“åº”ï¼Œæ‚¨å¯ä»¥å°è¯•ï¼š\nå¢åŠ å¾®è°ƒæ•°æ®é›†çš„å¤§å°ã€‚ å¢åŠ è®­ç»ƒæ­¥éª¤ï¼ˆè¿­ä»£æ¬¡æ•°ï¼‰ã€‚ è®¾ç½®æ›´é«˜çš„ LoRA ç§©ã€‚ ä¿®æ”¹è¶…å‚æ•°å€¼ï¼Œå¦‚å­¦ä¹ ç‡ï¼ˆlearning_rateï¼‰å’Œæƒé‡è¡°å‡ï¼ˆweight_decayï¼‰ã€‚ æ¥æº æœ¬æ–‡ç¿»è¯‘è‡ª Fine-tune Gemma models in Keras using LoRA https://www.kaggle.com/code/nilaychauhan/fine-tune-gemma-models-in-keras-using-lora\nä½ç§©é€‚åº”ï¼ˆLoRAï¼‰https://arxiv.org/abs/2106.09685\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nDatabricks Dolly 15kæ•°æ®é›† https://www.kaggle.com/datasets/databricks/databricks-dolly-15k\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma è®¾ç½® https://ai.google.dev/gemma/docs/setup\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nkaggle.com https://www.kaggle.com/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma æ¨¡å‹å¡ç‰‡ https://www.kaggle.com/models/google/gemma\u0026#160;\u0026#x21a9;\u0026#xfe0e;\næ¨¡å‹æ¶æ„ https://keras.io/api/keras_nlp/models/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma 7B æ¨¡å‹è¿›è¡Œåˆ†å¸ƒå¼è°ƒä¼˜ https://ai.google.dev/gemma/docs/distributed_tuning\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","id":3,"section":"posts","summary":"\u003cp\u003eå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å¦‚ Gemma å·²è¢«è¯æ˜åœ¨å¤šç§è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ä¸Šæœ‰æ•ˆã€‚LLMé¦–å…ˆé€šè¿‡è‡ªç›‘ç£æ–¹å¼åœ¨å¤§é‡æ–‡æœ¬è¯­æ–™ä¸Šè¿›è¡Œé¢„è®­ç»ƒã€‚é¢„è®­ç»ƒå¸®åŠ© LLM å­¦ä¹ é€šç”¨çŸ¥è¯†ï¼Œä¾‹å¦‚å•è¯ä¹‹é—´çš„ç»Ÿè®¡å…³ç³»ã€‚ç„¶åï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šé¢†åŸŸçš„æ•°æ®å¯¹ LLM è¿›è¡Œå¾®è°ƒï¼Œä»¥æ‰§è¡Œä¸‹æ¸¸ä»»åŠ¡ï¼ˆå¦‚æƒ…æ„Ÿåˆ†æï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003eLLM çš„å¤§å°æå¤§ï¼ˆå‚æ•°æ•°é‡è¾¾åˆ°æ•°ç™¾ä¸‡ï¼‰ã€‚å¯¹äºå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œä¸éœ€è¦è¿›è¡Œå®Œå…¨å¾®è°ƒï¼ˆæ›´æ–°æ¨¡å‹ä¸­çš„æ‰€æœ‰å‚æ•°ï¼‰ï¼Œå› ä¸ºå…¸å‹çš„å¾®è°ƒæ•°æ®é›†ç›¸å¯¹äºé¢„è®­ç»ƒæ•°æ®é›†è¦å°å¾—å¤šã€‚\u003c/p\u003e\n\u003cp\u003eä½ç§©é€‚åº”ï¼ˆLoRAï¼‰\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003eæ˜¯ä¸€ç§å¾®è°ƒæŠ€æœ¯ï¼Œé€šè¿‡å†»ç»“æ¨¡å‹çš„æƒé‡å¹¶åœ¨æ¨¡å‹ä¸­æ’å…¥è¾ƒå°‘æ•°é‡çš„æ–°æƒé‡ï¼Œå¤§å¤§å‡å°‘äº†ä¸‹æ¸¸ä»»åŠ¡çš„å¯è®­ç»ƒå‚æ•°æ•°é‡ã€‚è¿™ä½¿å¾—ä½¿ç”¨ LoRA è¿›è¡Œè®­ç»ƒæ›´å¿«ã€æ›´èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸”ç”Ÿæˆçš„æ¨¡å‹æƒé‡æ›´å°ï¼ˆå‡ ç™¾MBï¼‰ï¼ŒåŒæ—¶ä¿æŒäº†æ¨¡å‹è¾“å‡ºçš„è´¨é‡ã€‚\u003c/p\u003e\n\u003cp\u003eæœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨ä½¿ç”¨ KerasNLP å¯¹ Gemma 2B æ¨¡å‹è¿›è¡Œ LoRA å¾®è°ƒï¼Œä½¿ç”¨çš„æ˜¯ Databricks Dolly 15kæ•°æ®é›†\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e2\u003c/a\u003e\u003c/sup\u003eã€‚è¯¥æ•°æ®é›†åŒ…å«15,000ä¸ªé«˜è´¨é‡çš„äººç±»ç”Ÿæˆçš„æç¤º/å“åº”å¯¹ï¼Œä¸“é—¨ç”¨äºå¾®è°ƒ LLMã€‚\u003c/p\u003e","tags":["gemma","kerasNLP"],"title":"åœ¨ Keras ä¸­ä½¿ç”¨ LoRA å¾®è°ƒ Gemma æ¨¡å‹","uri":"https://www.ganymedenil.com/2024/03/30/Fine-tune-Gemma-model-in-Keras-using-LoRA.html","year":"2024"},{"content":"æœ¬æ•™ç¨‹å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ KerasNLP1 å¼€å§‹ä½¿ç”¨ Gemmaã€‚Gemma æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€é‡‡ç”¨æœ€æ–°æŠ€æœ¯çš„å¼€æ”¾æ¨¡å‹å®¶æ—ï¼Œè¿™äº›æŠ€æœ¯æºäºåˆ›å»º Gemini æ¨¡å‹çš„åŒä¸€ç ”ç©¶å’ŒæŠ€æœ¯ã€‚KerasNLP æ˜¯ä¸€ä¸ªè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æ¨¡å‹çš„é›†åˆï¼Œè¿™äº›æ¨¡å‹ä½¿ç”¨ Keras2 å®ç°ï¼Œå¹¶èƒ½åœ¨ JAXã€PyTorch å’Œ TensorFlow ä¸Šè¿è¡Œã€‚\nåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ Gemma ç”Ÿæˆå¯¹å‡ ä¸ªæç¤ºçš„æ–‡æœ¬å“åº”ã€‚å¦‚æœæ‚¨å¯¹ Keras ä¸ç†Ÿæ‚‰ï¼Œå¯èƒ½ä¼šæƒ³åœ¨å¼€å§‹å‰é˜…è¯»ã€Š Keras å…¥é—¨3ã€‹ï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ã€‚é€šè¿‡æœ¬æ•™ç¨‹çš„å­¦ä¹ ï¼Œæ‚¨å°†æ›´åŠ äº†è§£ Kerasã€‚\nè®¾ç½® Gemma è®¾ç½® è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œæ‚¨é¦–å…ˆéœ€è¦æŒ‰ç…§ Gemma è®¾ç½®4çš„è¯´æ˜å®Œæˆè®¾ç½®ã€‚Gemma è®¾ç½®è¯´æ˜å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š\nGemma æ¨¡å‹ç”± Kaggle æ‰˜ç®¡ã€‚è¦ä½¿ç”¨ Gemmaï¼Œè¯·åœ¨ Kaggle ä¸Šè¯·æ±‚è®¿é—®æƒé™ï¼š\nåœ¨ kaggle.com5 ç™»å½•æˆ–æ³¨å†Œã€‚ æ‰“å¼€ Gemma æ¨¡å‹å¡ç‰‡6å¹¶é€‰æ‹©â€œè¯·æ±‚è®¿é—®æƒé™â€ã€‚ å®ŒæˆåŒæ„è¡¨æ ¼å¹¶æ¥å—æ¡æ¬¾å’Œæ¡ä»¶ã€‚ å®‰è£…ä¾èµ– å®‰è£… Keras å’Œ KerasNLP\n# å®‰è£…æœ€æ–°çš„ Keras 3ã€‚æ›´å¤šä¿¡æ¯æŸ¥çœ‹ https://keras.io/getting_started/ã€‚ !pip install -q -U keras-nlp !pip install -q -U keras\u0026gt;=3 å¯¼å…¥åŒ… å¯¼å…¥ Keras å’Œ KerasNLPã€‚\nimport keras import keras_nlp é€‰æ‹©ä¸€ä¸ªåç«¯ Keras æ˜¯ä¸€ä¸ªé«˜çº§çš„ã€å¤šæ¡†æ¶çš„æ·±åº¦å­¦ä¹ APIï¼Œè®¾è®¡ä¸Šæ³¨é‡ç®€å•æ€§å’Œæ˜“ç”¨æ€§ã€‚Keras 3 7å…è®¸æ‚¨é€‰æ‹©åç«¯ï¼šTensorFlowã€JAXæˆ– PyTorchã€‚è¿™ä¸‰ä¸ªåç«¯å¯¹äºæœ¬æ•™ç¨‹éƒ½é€‚ç”¨ã€‚\nimport os os.environ[\u0026quot;KERAS_BACKEND\u0026quot;] = \u0026quot;jax\u0026quot; # æˆ–è€… \u0026quot;tensorflow\u0026quot; ã€ \u0026quot;torch\u0026quot;ã€‚ åˆ›å»ºæ¨¡å‹ KerasNLP æä¾›äº†è®¸å¤šæµè¡Œæ¨¡å‹æ¶æ„8çš„å®ç°ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ GemmaCausalLM åˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„ Gemma æ¨¡å‹ï¼Œç”¨äºå› æœè¯­è¨€å»ºæ¨¡ã€‚å› æœè¯­è¨€æ¨¡å‹åŸºäºä¹‹å‰çš„ token é¢„æµ‹ä¸‹ä¸€ä¸ª tokenã€‚\nä½¿ç”¨from_presetæ–¹æ³•åˆ›å»ºæ¨¡å‹ï¼š\ngemma_lm = keras_nlp.models.GemmaCausalLM.from_preset(\u0026quot;gemma_2b_en\u0026quot;) from_presetæ–¹æ³•é€šè¿‡é¢„è®¾çš„æ¶æ„å’Œæƒé‡æ¥å®ä¾‹åŒ–æ¨¡å‹ã€‚åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²\u0026quot;gemma_2b_en\u0026quot;æŒ‡å®šäº†é¢„è®¾çš„æ¶æ„ï¼šä¸€ä¸ªæ‹¥æœ‰20äº¿å‚æ•°çš„ Gemma æ¨¡å‹ã€‚ï¼ˆä¹Ÿæä¾›äº†ä¸€ä¸ªæœ‰70äº¿å‚æ•°çš„ Gemma æ¨¡å‹ã€‚è¦åœ¨ Colabä¸Šè¿è¡Œæ›´å¤§çš„æ¨¡å‹ï¼Œæ‚¨éœ€è¦è®¿é—®ä»˜è´¹è®¡åˆ’ä¸­æä¾›çš„é«˜çº§GPUã€‚æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨Kaggle æˆ– Google Cloud ä¸Šè¿›è¡Œ Gemma 7B æ¨¡å‹çš„åˆ†å¸ƒå¼è°ƒä¼˜9ã€‚ï¼‰\nä½¿ç”¨summaryæ–¹æ³•å¯ä»¥è·å–æ›´å¤šå…³äºæ¨¡å‹çš„ä¿¡æ¯ï¼š\ngemma_lm.summary() Preprocessor: \u0026quot;gemma_causal_lm_preprocessor\u0026quot; Tokenizer (type) Vocab # gemma_tokenizer (GemmaTokenizer) 256,000 Model: \u0026quot;gemma_causal_lm\u0026quot; Layer (type) Output Shape Param # Connected to padding_mask (InputLayer) (None, None) 0 - token_ids (InputLayer) (None, None) 0 - gemma_backbone (GemmaBackbone) (None, None, 2048) 2,506,172,416 padding_mask[0][0], token_ids[0][0] token_embedding (ReversibleEmbedding) (None, None, 256000) 524,288,000 gemma_backbone[0][0] Total params: 2,506,172,416 (9.34 GB) Trainable params: 2,506,172,416 (9.34 GB) Non-trainable params: 0 (0.00 B) ä»æ‘˜è¦ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¯¥æ¨¡å‹å…·æœ‰25äº¿å¯è®­ç»ƒçš„å‚æ•°ã€‚\nç”Ÿæˆæ–‡æœ¬ ç°åœ¨æ˜¯æ—¶å€™ç”Ÿæˆä¸€äº›æ–‡æœ¬äº†ï¼æ¨¡å‹æœ‰ä¸€ä¸ªgenerateæ–¹æ³•ï¼Œå¯ä»¥åŸºäºä¸€ä¸ªæç¤ºæ¥ç”Ÿæˆæ–‡æœ¬ã€‚å¯é€‰çš„max_lengthå‚æ•°æŒ‡å®šäº†ç”Ÿæˆåºåˆ—çš„æœ€å¤§é•¿åº¦ã€‚\nå°è¯•ä½¿ç”¨æç¤ºâ€œWhat is the meaning of life?â€æ¥è¯•ä¸€è¯•ã€‚\ngemma_lm.generate(\u0026quot;What is the meaning of life?\u0026quot;, max_length=64) 'What is the meaning of life?\\n\\nThe question is one of the most important questions in the world.\\n\\nItâ€™s the question that has been asked by philosophers, theologians, and scientists for centuries.\\n\\nAnd itâ€™s the question that has been asked by people who are looking for answers to their own lives' è°ƒç”¨generateæ–¹æ³•æ—¶ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„æç¤ºã€‚\ngemma_lm.generate(\u0026quot;How does the brain work?\u0026quot;, max_length=64) 'How does the brain work?\\n\\nThe brain is the most complex organ in the human body. It is responsible for controlling all of the bodyâ€™s functions, including breathing, heart rate, digestion, and more. The brain is also responsible for thinking, feeling, and making decisions.\\n\\nThe brain is made up' å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ JAX æˆ– TensorFlow åç«¯ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°ç¬¬äºŒæ¬¡è°ƒç”¨generateæ–¹æ³•å‡ ä¹ç«‹å³è¿”å›ç»“æœã€‚è¿™æ˜¯å› ä¸ºæ¯æ¬¡å¯¹ç»™å®šæ‰¹é‡å¤§å°å’Œmax_lengthçš„generateè°ƒç”¨éƒ½ä¼šç”¨XLAç¼–è¯‘ã€‚ç¬¬ä¸€æ¬¡è¿è¡Œæˆæœ¬è¾ƒé«˜ï¼Œä½†åç»­è¿è¡Œä¼šå¿«å¾—å¤šã€‚\næ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ—è¡¨ä½œä¸ºè¾“å…¥æ¥æä¾›æ‰¹é‡çš„æç¤ºï¼š\ngemma_lm.generate( [\u0026quot;What is the meaning of life?\u0026quot;, \u0026quot;How does the brain work?\u0026quot;], max_length=64) ['What is the meaning of life?\\n\\nThe question is one of the most important questions in the world.\\n\\nItâ€™s the question that has been asked by philosophers, theologians, and scientists for centuries.\\n\\nAnd itâ€™s the question that has been asked by people who are looking for answers to their own lives', 'How does the brain work?\\n\\nThe brain is the most complex organ in the human body. It is responsible for controlling all of the bodyâ€™s functions, including breathing, heart rate, digestion, and more. The brain is also responsible for thinking, feeling, and making decisions.\\n\\nThe brain is made up'] å¯é€‰æ“ä½œï¼šå°è¯•ä¸åŒçš„é‡‡æ ·å™¨ æ‚¨å¯ä»¥é€šè¿‡åœ¨compile()ä¸Šè®¾ç½®samplerå‚æ•°æ¥æ§åˆ¶ GemmaCausalLM çš„ç”Ÿæˆç­–ç•¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨â€œgreedyâ€ï¼ˆè´ªå©ªï¼‰é‡‡æ ·10ã€‚\nä½œä¸ºå®éªŒï¼Œå°è¯•è®¾ç½®ä¸€ä¸ªâ€œtop_kâ€11ç­–ç•¥ï¼š\ngemma_lm.compile(sampler=\u0026quot;top_k\u0026quot;) gemma_lm.generate(\u0026quot;What is the meaning of life?\u0026quot;, max_length=64) 'What is the meaning of life? That is a question that has been asked for centuries and has yet to be answered. However, there are some people who believe they know the answer and they are willing to share it with the rest of us. In this essay, I will explore the meaning of life from their perspective' è™½ç„¶é»˜è®¤çš„è´ªå©ªç®—æ³•æ€»æ˜¯é€‰æ‹©æ¦‚ç‡æœ€å¤§çš„tokenï¼Œä½†top-Kç®—æ³•ä¼šä»æ¦‚ç‡æœ€é«˜çš„Kä¸ªtokenä¸­éšæœºæŒ‘é€‰ä¸‹ä¸€ä¸ªtokenã€‚\næ‚¨ä¸å¿…ç‰¹åˆ«æŒ‡å®šä¸€ä¸ªé‡‡æ ·å™¨ï¼Œå¦‚æœæœ€åçš„ä»£ç ç‰‡æ®µå¯¹æ‚¨çš„ä½¿ç”¨æ¡ˆä¾‹æ²¡æœ‰å¸®åŠ©ï¼Œå¯ä»¥å¿½ç•¥å®ƒã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå¯ç”¨çš„é‡‡æ ·å™¨ï¼Œè¯·å‚é˜…â€œé‡‡æ ·å™¨â€12ä¸€èŠ‚ã€‚\næ¥æº æœ¬æ–‡ç¿»è¯‘è‡ª Get started with Gemma using KerasNLP https://www.kaggle.com/code/nilaychauhan/get-started-with-gemma-using-kerasnlp/notebook\nKerasNLP https://keras.io/keras_nlp/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nKeras https://keras.io/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nKeras å…¥é—¨ https://keras.io/getting_started/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma è®¾ç½® https://ai.google.dev/gemma/docs/setup\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nkaggle.com https://www.kaggle.com/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma æ¨¡å‹å¡ç‰‡ https://www.kaggle.com/models/google/gemma\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nKeras 3 https://keras.io/keras_3\u0026#160;\u0026#x21a9;\u0026#xfe0e;\næ¨¡å‹æ¶æ„ https://keras.io/api/keras_nlp/models/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma 7B æ¨¡å‹çš„åˆ†å¸ƒå¼è°ƒä¼˜ https://ai.google.dev/gemma/docs/distributed_tuning\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ngreedy é‡‡æ · https://keras.io/api/keras_nlp/samplers/greedy_sampler/#greedysampler-class\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ntop_k é‡‡æ · https://keras.io/api/keras_nlp/samplers/top_k_sampler/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\né‡‡æ ·å™¨ https://keras.io/api/keras_nlp/samplers/\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","id":4,"section":"posts","summary":"\u003cp\u003eæœ¬æ•™ç¨‹å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ KerasNLP\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003e  å¼€å§‹ä½¿ç”¨ Gemmaã€‚Gemma æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€é‡‡ç”¨æœ€æ–°æŠ€æœ¯çš„å¼€æ”¾æ¨¡å‹å®¶æ—ï¼Œè¿™äº›æŠ€æœ¯æºäºåˆ›å»º Gemini æ¨¡å‹çš„åŒä¸€ç ”ç©¶å’ŒæŠ€æœ¯ã€‚KerasNLP æ˜¯ä¸€ä¸ªè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æ¨¡å‹çš„é›†åˆï¼Œè¿™äº›æ¨¡å‹ä½¿ç”¨ Keras\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e2\u003c/a\u003e\u003c/sup\u003e å®ç°ï¼Œå¹¶èƒ½åœ¨ JAXã€PyTorch å’Œ TensorFlow ä¸Šè¿è¡Œã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ Gemma ç”Ÿæˆå¯¹å‡ ä¸ªæç¤ºçš„æ–‡æœ¬å“åº”ã€‚å¦‚æœæ‚¨å¯¹ Keras ä¸ç†Ÿæ‚‰ï¼Œå¯èƒ½ä¼šæƒ³åœ¨å¼€å§‹å‰é˜…è¯»ã€Š Keras å…¥é—¨\u003csup id=\"fnref:3\"\u003e\u003ca href=\"#fn:3\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e3\u003c/a\u003e\u003c/sup\u003eã€‹ï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ã€‚é€šè¿‡æœ¬æ•™ç¨‹çš„å­¦ä¹ ï¼Œæ‚¨å°†æ›´åŠ äº†è§£ Kerasã€‚\u003c/p\u003e","tags":["gemma","kerasNLP"],"title":"ä½¿ç”¨ KerasNLP å¿«é€Ÿå¼€å§‹ Gemma","uri":"https://www.ganymedenil.com/2024/03/30/Get-started-with-Gemma-using-KerasNLP.html","year":"2024"},{"content":"æœ¬æ–‡æˆ‘å°†ä½¿ç”¨ Google çš„ Gemma-2b æ¨¡å‹æ¥å¾®è°ƒä¸€ä¸ªåŸºäºITç§‘æŠ€æ–°é—»æ­£æ–‡æ¥ç”Ÿæˆå¯¹åº”æ ‡é¢˜çš„æ¨¡å‹ã€‚å¹¶ä¸”æˆ‘å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨é«˜åº¦é›†æˆçš„è®­ç»ƒæ¡†æ¶æ¥è¿›è¡Œå¿«é€Ÿå¾®è°ƒã€‚\nå¼€å§‹å‰ ä¸ºäº†å°½å¯èƒ½ç®€åŒ–æ•´ä¸ªæµç¨‹ï¼Œæˆ‘å°†ä½¿ç”¨ linux-cn æ•°æ®é›†1ä½œä¸ºæœ¬æ¬¡è®­ç»ƒä»»åŠ¡çš„è®­ç»ƒæ•°æ®ã€‚\næ¨¡å‹é€‰æ‹©ä½¿ç”¨ Gemma-2b2ï¼Œåœ¨ç›®å‰è¿™ä¸ªä»»åŠ¡ä¸­ 2b çº§åˆ«çš„å‚æ•°æ¨¡å‹å·²ç»å®Œå…¨èƒ½æ»¡è¶³å½“å‰çš„éœ€æ±‚ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ 7b çš„æ¨¡å‹ã€‚\næˆ‘ä»¬åœ¨è¿™é‡Œå°†ç›´æ¥ä½¿ç”¨ LLaMA-Factory3 è®­ç»ƒæ¡†æ¶æ¥ç›´æ¥å®Œæˆç›‘ç£å¾®è°ƒéƒ¨åˆ†å·¥ä½œã€‚å½“ç„¶è¯¥æ¡†æ¶ä¸ä»…æ”¯æŒç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰ä¹Ÿæ”¯æŒé¢„è®­ç»ƒï¼ˆPTï¼‰ã€å¥–åŠ±æ¨¡å‹ï¼ˆRMï¼‰ä»¥åŠ PPO/DPO çš„è®­ç»ƒã€‚\næ•°æ®æ•´ç† linux-cn æ•°æ®é›†æœ¬èº«å·²ç»è¿›è¡Œäº†æ•°æ®çš„æ¸…æ´—å’Œæ ¼å¼åŒ–ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬éœ€è¦çš„å­—æ®µæå–å‡ºåæ¥åæ ¹æ®ä¸€å®šæ ¼å¼è½¬æ¢ä¸º LLaMA-Factory ç›‘ç£å¾®è°ƒæ ¼å¼å³å¯ã€‚\nåœ¨æœ¬ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æ•°æ®é›†ä¸­çš„â€œtitleâ€å’Œâ€œcontentâ€ä¸¤ä¸ªå­—æ®µå³å¯ã€‚è€Œ LLaMA-Factory ç›‘ç£å¾®è°ƒæ ¼å¼æ˜¯å¦‚ä¸‹æ ¼å¼çš„jsonæ–‡ä»¶ã€‚\n[ { \u0026quot;instruction\u0026quot;: \u0026quot;What are the three primary colors?\u0026quot;, \u0026quot;input\u0026quot;: \u0026quot;\u0026quot;, \u0026quot;output\u0026quot;: \u0026quot;The three primary colors are red, blue, and yellow. These colors are called primary because they cannot be created by mixing other colors and all other colors can be made by combining them in various proportions. In the additive color system, used for light, the primary colors are red, green, and blue (RGB).\u0026quot;, }, ... ] å› ä¸ºæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨çš„æ˜¯é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®šä¸€ä¸ª prompt templateã€‚æŒ‡å®š prompt template çš„ä¸€ä¸ªå¥½å¤„æ˜¯ä½ å¦‚æœå¸Œæœ›åŒæ—¶è®­ç»ƒå¤šä¸ªä¸åŒç±»å‹çš„ä»»åŠ¡ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä¸åŒä»»åŠ¡ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚\nå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š\nimport json result = [] prompt_template = \u0026quot;\u0026quot;\u0026quot;Generate a title for the article: {content} --- Title: \u0026quot;\u0026quot;\u0026quot; with open('archve.jsonl', 'r') as f: for line in f: p = json.loads(line) result.append({ \u0026quot;instruction\u0026quot;: prompt_template.replace(\u0026quot;{content}\u0026quot;, p['content']), \u0026quot;input\u0026quot;: \u0026quot;\u0026quot;, \u0026quot;output\u0026quot;: p['title'] }) with open('itnews_data.json', 'w') as f: json.dump(result, f,ensure_ascii=False, indent=4) å®Œæˆè¿™ä¸€æ­¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹äº†ã€‚ä½†å¾€å¾€è€—è´¹æ—¶é—´æœ€é•¿ä»¥åŠæœ€å¤´ç–¼çš„ä¹Ÿæ˜¯æ•°æ®æ”¶é›†å’Œæ•°æ®æ•´ç†è¿™ä¸€éƒ¨åˆ†ã€‚\næ¨¡å‹å¾®è°ƒ é¦–å…ˆä½ éœ€è¦ä¿è¯ LLaMA-Factory æ¡†æ¶å·²ç»åœ¨ä½ æœ¬åœ°å·²ç» ready äº†ã€‚å³ä½ å·²ç»ä¸‹è½½äº†è¯¥é¡¹ç›®å¹¶ä¸”å·²ç»è¿›è¡Œäº†é¡¹ç›®çš„å®‰è£…ã€‚\nå…·ä½“å¦‚ä½•å®‰è£…ä½ å¯ä»¥æŸ¥çœ‹è¯¥é¡¹ç›®çš„ READMEï¼Œæœ¬æ–‡ä¸å†è¿‡å¤šèµ˜è¿°ã€‚\né¦–å…ˆæˆ‘ä»¬éœ€è¦å°†æ•°æ®é›†ç§»åŠ¨åˆ°æ¡†æ¶çš„ data ç›®å½•ä¸­ï¼Œç„¶ååœ¨ dataset_info.json ä¸­æ·»åŠ æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®é›†ã€‚\nä»¥ä¸‹æ˜¯æœ¬æ–‡å®ä¾‹æ‰€æ·»åŠ çš„æ•°æ®é›†ä¿¡æ¯ï¼š\n\u0026quot;itnews\u0026quot;: { \u0026quot;file_name\u0026quot;: \u0026quot;itnews_data.json\u0026quot;, }, å½“ç„¶ä¸åŒç±»å‹çš„ä»»åŠ¡è¯¥æ¡†æ¶ä¼šæœ‰ä¸åŒçš„æ•°æ®é›†æ ¼å¼è¦æ±‚ï¼Œä½ å¯ä»¥å‚è€ƒé¡¹ç›®ä¸­ dataset_info.json çš„README 4ã€‚\nç„¶åæˆ‘ä»¬åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥å¼€å§‹å¾®è°ƒäº†,æœ¬æ–‡æ˜¯åœ¨å•å¼ A100ï¼ˆ80Gï¼‰ä¸Šè¿›è¡Œçš„å¾®è°ƒã€‚\nCUDA_VISIBLE_DEVICES=0 python src/train_bash.py \\ --stage sft \\ --do_train True \\ --model_name_or_path google/gemma-2b \\ --finetuning_type lora \\ --template default \\ --dataset itnews \\ --use_unsloth \\ --cutoff_len 8192 \\ --learning_rate 5e-05 \\ --num_train_epochs 10.0 \\ --max_samples 10000 \\ --per_device_train_batch_size 4 \\ --per_device_eval_batch_size 4 \\ --gradient_accumulation_steps 4 \\ --lr_scheduler_type cosine \\ --max_grad_norm 1.0 \\ --logging_steps 10 \\ --save_steps 100 \\ --eval_steps 100 \\ --evaluation_strategy steps \\ --warmup_steps 0 \\ --output_dir saves/Gemma-2B/lora/train_v1 \\ --bf16 True \\ --lora_rank 8 \\ --lora_dropout 0.1 \\ --lora_target q_proj,v_proj \\ --val_size 0.1 \\ --load_best_model_at_end True \\ --plot_loss True \\ --report_to \u0026quot;tensorboard\u0026quot; åœ¨è¿™é‡Œæˆ‘éœ€è¦å¯¹å…¶ä¸­çš„å‡ ä¸ªå‚æ•°è¿›è¡Œç®€çŸ­çš„ä»‹ç»ï¼š\n--stage å³ä»»åŠ¡ç±»å‹ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æœ¬æ–‡åšçš„æ˜¯ç›‘ç£å¾®è°ƒæ‰€ä»¥æ˜¯ sftï¼Œå¦‚æœæ˜¯å…¶ä»–ä»»åŠ¡ä½ éœ€è¦æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚\n--dataset å³æ•°æ®é›†ï¼Œè¿™é‡Œçš„åç§°å°±æ˜¯æˆ‘ä»¬åœ¨ dataset_info.json æ–‡ä»¶ä¸­æŒ‡å®šçš„æ•°æ®é›†åç§°ã€‚\n--use_unsloth è¿™æ˜¯ä¸€ä¸ªè®­ç»ƒåŠ é€Ÿå™¨ï¼Œå®˜æ–¹å®£ç§°åœ¨ Gemma 7b ä¸Šæ‹¥æœ‰ 2.4x çš„åŠ é€Ÿï¼Œå¹¶ä¸”èŠ‚çœè¶…ä¸€åŠçš„æ˜¾å­˜ã€‚åœ¨ä½¿ç”¨è¿™ä¸ªä¹‹å‰ä½ éœ€è¦æŒ‰ç…§å®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£…5ã€‚\n--cutoff_len æ–‡æœ¬ä»¤ç‰ŒåŒ–åè¾“å…¥åˆ°æ¨¡å‹çš„æˆªæ­¢é•¿åº¦ï¼Œå› ä¸ºæœ¬æ–‡ä½¿ç”¨çš„ Gemma 2b æ¨¡å‹ï¼Œå®ƒçš„æœ€å¤§é•¿åº¦æ˜¯ 8192 ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘è®¾ç½®çš„æ˜¯ 8192ã€‚ä½†è¯·è®°ä½æ›´é•¿çš„ä¸Šä¸‹æ–‡ä¹Ÿéœ€è¦æ›´å¤šçš„ GPU æ˜¾å­˜ï¼\n--max_samples è®¾ç½®æ•°æ®é›†åŠ è½½çš„æœ€å¤§æ¡æ•°ã€‚æœ¬å‚æ•°ä¸»è¦ç”¨ä½œè°ƒè¯•ç›®çš„æ—¶éå¸¸å¥½ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ä½ ä¸ç¡®å®š cutoff_len å’Œ batch_sizeçš„æ—¶å€™ï¼Œä½ å¯ä»¥åŠ è½½å¾ˆå°çš„ä¸€éƒ¨åˆ†æ•°æ®è¿›è¡Œæµ‹è¯•ï¼Œç„¶åæŸ¥çœ‹ä½ æ˜¾å­˜çš„ä½¿ç”¨æƒ…å†µã€‚\n--learning_rate --num_train_epochs å­¦ä¹ ç‡å’Œè®­ç»ƒå‘¨æœŸï¼Œè¿™æ˜¯ä¸€ä¸ªç»éªŒå€¼ï¼Œä¸€èˆ¬é€šè¿‡æŸ¥çœ‹æ¨¡å‹çš„ loss æ¥è°ƒæ•´ï¼Œå½“ç„¶åœ¨ LLM æ¨¡å‹è®­ç»ƒä¸­ï¼Œæœ¬å‚æ•°ä¸»è¦ä»¥æ¨¡å‹æ˜¯å¦ç¬¦åˆä»»åŠ¡éœ€æ±‚è€Œå†³å®šï¼Œä¹Ÿå°±æ˜¯è¯´å®Œç¾çš„ loss å¯èƒ½å¹¶ä¸æ»¡è¶³éœ€æ±‚ã€‚\n--per_device_train_batch_size --per_device_eval_batch_size --gradient_accumulation_steps è¿™ä¸‰ä¸ªå‚æ•°éœ€è¦æ ¹æ®ä½ çš„æ˜¾å­˜å¤§å°ä»¥åŠæ˜¯å¦ä½¿ç”¨å¤šä¸ªGPUç­‰æ¡ä»¶è¿›è¡Œä¸åŒçš„è°ƒæ•´ã€‚\n--output_dir æ¨¡å‹ä¿å­˜çš„ç›®å½•ã€‚\næ›´å¤šçš„å‚æ•°è§£é‡Šå¯ä»¥æŸ¥çœ‹é¡¹ç›®è¯´æ˜6ï¼Œä»¥åŠ transformers Trainer çš„è¯´æ˜7ã€‚\næ¨¡å‹ä½¿ç”¨ åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ transformers æ¥æ‰§è¡Œã€‚\nfrom transformers import AutoModelForCausalLM, AutoTokenizer,BitsAndBytesConfig peft_model_id = \u0026quot;checkpoint-2000\u0026quot; model = AutoModelForCausalLM.from_pretrained(peft_model_id,device_map=\u0026quot;cuda\u0026quot;) tokenizer = AutoTokenizer.from_pretrained(\u0026quot;google/gemma-2b\u0026quot;) input_text = \u0026quot;\u0026quot;\u0026quot; Generate a title for the article: {content} --- Title: \u0026quot;\u0026quot;\u0026quot; # å›ºå®šæ ¼å¼ encoding = tokenizer(input_text, return_tensors=\u0026quot;pt\u0026quot;).to(\u0026quot;cuda\u0026quot;) outputs = model.generate(**encoding,max_length=8192,temperature=0.2,do_sample=True) generated_ids = outputs[:, encoding.input_ids.shape[1]:] generated_texts = tokenizer.batch_decode(generated_ids, skip_special_tokens=True) print(generated_texts[0]) æˆ‘é€šè¿‡ä½¿ç”¨æˆ‘è‡ªå·±çš„ä¸€ç¯‡å·®ä¸å¤š 5000 tokens å…³äºå¾®æœåŠ¡çš„æ–‡ç« è¿›è¡Œæµ‹è¯•ï¼Œå¹¶ä¸”è¿™ç¯‡æ–‡ç« æ²¡æœ‰å‡ºç°åœ¨æ•°æ®é›†ä¸­8ã€‚\nåœ¨ä½¿ç”¨ç›¸åŒ prompt çš„æƒ…å†µä¸‹çš„è¾“å‡ºï¼š\ngemma-2b-it\n\u0026gt; å¾®æœåŠ¡æ¶æ„ æ¦‚è¿° å¾®æœåŠ¡æ¶æ„çš„å®šä¹‰ å¾®æœåŠ¡æ¶æ„çš„å®šä¹‰ å¾®æœåŠ¡æ¶æ„çš„å®šä¹‰ å¾®æœåŠ¡æ¶æ„çš„å®šä¹‰ å¾®æœåŠ¡æ¶æ„çš„å®šä¹‰ å¾®æœåŠ¡æ¶æ„çš„å®šä¹‰ ... lora\n\u0026gt; å¾®æœåŠ¡æ¶æ„çš„ä¼˜åŠ¿ é€šè¿‡ç®€å•çš„æµ‹è¯•ï¼Œä¸éš¾å‘ç°æ¨¡å‹åœ¨å¾®è°ƒåï¼Œå…¶è¿”å›æ ¼å¼ä¸Šæ›´åŠ ç¨³å®šï¼Œå¹¶ä¸”æ›´åŠ ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ã€‚\næ€»ç»“ å¦‚æœä½ ä¸æƒ³è®­ç»ƒï¼Œä½†åˆå¸Œæœ›å°è¯•æœ¬æ–‡ä¸­çš„æ¨¡å‹ï¼Œä½ å¯ä»¥åœ¨ huggingface ä¸Šæœç´¢ gemma-2b-technology-news-title-generation-loraï¼Œæ‰¾åˆ°ä»100-2200 steps çš„æ‰€æœ‰ checkpoint 9ã€‚\næœ¬æ–‡ä½¿ç”¨äº†ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹å¼æ¥è®­ç»ƒç¬¦åˆè‡ªå·±éœ€æ±‚çš„æ¨¡å‹ã€‚åœ¨çœŸå®çš„ä¼ä¸šåœºæ™¯ä¸­å¾€å¾€è¿˜æ¶‰åŠå¦‚ä½•ç”Ÿæˆç¬¦åˆéœ€æ±‚çš„æ•°æ®é›†ï¼Œé›†ç¾¤è®­ç»ƒï¼Œæ¨¡å‹çš„ABæµ‹è¯•ï¼Œä¼ä¸šçº§éƒ¨ç½²ç­‰é—®é¢˜ã€‚æˆ‘ä¼šåœ¨æœªæ¥çš„æ–‡ç« ä¸­å’Œå¤§å®¶åˆ†äº«ã€‚\nLinux-cn æ•°æ®é›† https://huggingface.co/datasets/linux-cn/archive\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nGemma-2b æ¨¡å‹ huggingface: https://huggingface.co/google/gemma-2b | kaggle: https://www.kaggle.com/models/google/gemma\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nLLaMA-Factory https://github.com/hiyouga/LLaMA-Factory\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ndataset_info è¯´æ˜ https://github.com/hiyouga/LLaMA-Factory/tree/main/data\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nunsloth https://github.com/unslothai/unsloth\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ndata args https://github.com/hiyouga/LLaMA-Factory/blob/main/src/llmtuner/hparams/data_args.py\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ntransformers Trainer https://huggingface.co/docs/transformers/main_classes/trainer#transformers.TrainingArguments\u0026#160;\u0026#x21a9;\u0026#xfe0e;\næˆ‘çš„å¾®æœåŠ¡æ€»ç»“ https://ganymedenil.com/2022/04/22/what-are-microservices.html\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ntechnology news title generation lora https://huggingface.co/GanymedeNil/gemma-2b-technology-news-title-generation-lora\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","id":5,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡æˆ‘å°†ä½¿ç”¨ Google çš„ Gemma-2b æ¨¡å‹æ¥å¾®è°ƒä¸€ä¸ªåŸºäºITç§‘æŠ€æ–°é—»æ­£æ–‡æ¥ç”Ÿæˆå¯¹åº”æ ‡é¢˜çš„æ¨¡å‹ã€‚å¹¶ä¸”æˆ‘å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨é«˜åº¦é›†æˆçš„è®­ç»ƒæ¡†æ¶æ¥è¿›è¡Œå¿«é€Ÿå¾®è°ƒã€‚\u003c/p\u003e","tags":["gemma","LLM"],"title":"Google Gemma 2B å¾®è°ƒå®æˆ˜ï¼ˆITç§‘æŠ€æ–°é—»æ ‡é¢˜ç”Ÿæˆï¼‰","uri":"https://www.ganymedenil.com/2024/03/24/Google-Gemma-2B-fine-tuning-practice-IT-technology-news-headline-generation.html","year":"2024"},{"content":"æˆ‘æœ¬èº«æ˜¯ä¸€ä¸ªä¸å¤ªå†™æ€»ç»“ç±»å†…å®¹çš„äººï¼Œä½†è¿™æ¬¡è·Ÿé£å†™ä¸€å›ï¼Œæ€»ç»“æˆ‘è¿™ä¸€å¹´AIç›¸å…³çš„æŠ€æœ¯æ€»ç»“å’Œæˆ‘æ•´ä½“çš„æ€è€ƒã€‚\næ—¶é—´çº¿ æˆ‘è·ƒè·ƒæ¬²è¯•è¦è¿›AIçš„å‘è¦è¿½æº¯åˆ°22å¹´åº•ï¼ŒOpenAI æ¨å‡º GPT-3.5 çš„æ—¶å€™ï¼Œå½“æ—¶å…¶å®å¹¶ä¸å¤ªäº†è§£ OpenAI è¿™å®¶å…¬å¸ï¼Œå½“æ—¶è¿˜æ˜¯å¬å®Œã€Švol.440 ç§‘æŠ€ä¹±ç‚–ï¼šChatGPT çš„æƒŠå–œä¸æ„æ–™ä¹‹å†…ã€‹è¿™æœŸæ’­å®¢çš„æ—¶å€™è®©æˆ‘æ„Ÿè§‰ï¼Œ2023å¹´å¯ä»¥ææAIã€‚\n2023å¹´2æœˆä¸­æ—¬ï¼Œæˆ‘å¼€å§‹åœ¨æ¨ç‰¹å’Œå³åˆ»ä¸Šåˆ†äº«æˆ‘å¯¹å¤§é¢„è¨€æ¨¡å‹çš„è§è§£ã€‚\n2023å¹´3æœˆåˆï¼Œæˆ‘å¼€å§‹å°è¯•ä½¿ç”¨ GPT-3.5 æ¥å£åšä¸€äº›äº‹æƒ…ï¼Œåˆšå¥½å½“æ—¶æˆ‘åœ¨ç ”ç©¶ã€Šé»˜æ²™ä¸œè¯Šç–—æ‰‹å†Œã€‹ï¼Œå°±æƒ³èƒ½ä¸èƒ½åšä¸€ä¸ªé€šè¿‡æè¿°ç—‡çŠ¶ç„¶ååŒ¹é…ç›¸å…³ç—…ç—‡çš„demoã€‚åšå®Œæˆ‘å°±å‘æ¨ä¸Šäº†ï¼Œç«Ÿç„¶æ„å¤–çš„ç«äº†ã€‚ä½†å½“æ—¶è€ƒè™‘åˆ° OpenAI æœ¬èº«å¯¹äºåŒ»ç–—é—®è¯Šåœºæ™¯çš„çº¦æŸä»¥åŠå¯èƒ½å¸¦æ¥çš„æ½œåœ¨é£é™©ï¼Œæˆ‘å°±æŠŠæœåŠ¡å…³åœäº†ã€‚ä½†å› ä¸ºé‚£æ¡æ¨ç«äº†ï¼Œä¹Ÿé™†ç»­æœ‰äººé—®æˆ‘æ˜¯å¦‚ä½•å®ç°çš„ã€‚è€ƒè™‘å†ä¸‰ï¼Œå†ä¸ç‰µæ‰¯å„ç§å·²çŸ¥é£é™©ï¼ˆç‰ˆæƒã€åŒ»ç–—é£é™©ç­‰ï¼‰ï¼Œä½œä¸ºè¿˜ç®—æœ‰ç‚¹å¼€æºç²¾ç¥çš„ç¨‹åºå‘˜ï¼Œæˆ‘å°±æŠŠè¿™ä¸ªç®€å•çš„demoï¼Œåšæˆäº†ä¸€ä¸ªå¼€æºçš„è§£å†³æ–¹æ¡ˆâ€”â€”ã€ŠåŸºäºå‘é‡æ•°æ®åº“ä¸GPT3.5çš„é€šç”¨æœ¬åœ°çŸ¥è¯†åº“æ–¹æ¡ˆã€‹ã€‚åç»­ä¹Ÿè·Ÿæ–°äº†ä¸€äº›å¸¸è§é—®é¢˜çš„è§£ã€‚\nå½“æ—¶æƒ³ç€èƒ½ä¸èƒ½æä¸€ä¸ªæœ¬åœ°çš„ Embedding æ¨¡å‹ï¼Œæ¯•ç«Ÿå¦‚æœè¦åšä¸€ä¸ªå¯ç”¨çš„çŸ¥è¯†åº“éœ€è¦å°†å¤§é‡çš„æ–‡æœ¬è½¬ä¸ºå‘é‡ï¼Œå¦‚æœç”¨ OpenAI çš„æ¥å£è™½ç„¶æ•ˆæœå¾ˆå¥½ï¼Œä½†è¿˜æ˜¯å¾ˆè´µã€‚ç„¶åæƒ³ç€æ‰¾ä¸ªæœ¬åœ°æ¨¡å‹ï¼Œæ•ˆæœèƒ½å·®ä¸å¤šå°±å¯ä»¥ã€‚æ‰¾äº†ä¸€åœˆä¹‹åå‘ç°ä¸­æ–‡åœºæ™¯ä¸‹å¼€æºçš„æ¨¡å‹å¹¶æ²¡æœ‰å¤šå°‘ï¼Œè€Œä¸”æ•ˆæœä¹Ÿä¸€èˆ¬ã€‚ä½œä¸ºä¸€ä¸ªåœ¨å…¬å¸æè¿‡å‡ å¹´åŸºç¡€æ¶æ„çš„äººæ¥è¯´ï¼Œæ²¡æœ‰å¥½ç”¨çš„è½®å­é‚£å°±é€ ä¸€ä¸ªã€‚ç„¶åå°±å¼€å§‹ç€æ‰‹å¾®è°ƒç¬¬ä¸€ä¸ªæ¨¡å‹ï¼Œå½“æ—¶å®Œå…¨å°ç™½ï¼Œä½†è¿˜å¥½æœ‰å¾ˆå¤šå¼€æºé¡¹ç›®ï¼Œæ•‘æˆ‘ä¸€å‘½ã€‚å½“æ—¶ä¸ºäº†åšå¯¹æ¯”å®éªŒï¼Œå…¶å®è®­ç»ƒäº†å¥½å‡ ä¸ªæ¨¡å‹ç”¨æ¥åšå¯¹æ¯”æµ‹è¯•ï¼Œä½†æœ€åè¿˜æ˜¯ text2vec-large-chinese è¿™ä¸ªæ•ˆæœç›¸å¯¹è¾ƒå¥½ï¼ˆå½“æ—¶çœŸå®æ„Ÿå—åˆ°äº†æ‘„å½±åœˆå¸¸è¯´çš„â€œåº•å¤§ä¸€çº§å‹æ­»äººâ€ï¼Œå®Œå…¨å¯ä»¥æŠŠè¿™å¥è¯å¥—ç”¨åœ¨AIæ¨¡å‹ä¸Šï¼‰ã€‚åæ¥å› ä¸ºçŸ¥è¯†åº“é¡¹ç›®çš„ star ä¸Šæ¥åè¿™ä¸ªæ¨¡å‹åœ¨ huggingface çš„å¥å­ç›¸ä¼¼åº¦ä»»åŠ¡ä¸­ä¸€åº¦æ’åœ¨å‰ä¸‰ï¼ˆå†™æœ¬æ–‡çš„æ—¶å€™æˆ‘åˆå»çœ‹äº†ä¸€ä¸‹è¿˜åœ¨å‰åï¼‰ã€‚\n2023å¹´3æœˆä¸­æ—¬ï¼Œæˆ‘è‡ªå·±æœ‰ä¸€ä¸ªéœ€æ±‚å°±æ˜¯æƒ³èƒ½æ–¹ä¾¿çš„å¯¹é•¿éŸ³é¢‘è¿›è¡Œé™å™ªã€‚å½“æ—¶ä½¿ç”¨äº† adobe å‡ºçš„å…è´¹æœåŠ¡ Enhanceï¼Œæ•ˆæœè™½å¥½ä½†æ˜¯å¯¹äºé•¿éŸ³é¢‘å¾€å¾€ä¼šç›´æ¥ä¸å“åº”ã€‚æˆ‘è¿™é€ è½®å­çš„çƒ­æƒ…ä¸€ä¸‹å­åˆä¸Šæ¥äº†ï¼Œç„¶åå°±æœ‰äº†åŸºäºæ·±åº¦å­¦ä¹ çš„è¯­éŸ³å¢å¼ºå·¥å…·ï¼Œä¸€å¼€å§‹æ‰¾äº†ä¸ªéœ€è¦GPUçš„æ¨¡å‹ï¼Œæ•ˆæœå¾ˆå¥½ä½†æ— å¥ˆæˆ‘å¾ˆç©·ï¼Œä¹°ä¸èµ·GPUã€‚ç„¶ååˆå°† github ç¿»äº†ä¸ªåº•æœå¤©æ‰¾åˆ°äº†ä¸ªä¸éœ€è¦ GPU çš„æ¨¡å‹ï¼Œæ•ˆæœä¹Ÿè¿˜ä¸é”™ï¼Œå¤„ç†é€Ÿåº¦ä¹Ÿè¿˜å¯ä»¥ã€‚ç„¶åå°±å°è£…äº†ä¸€ä¸‹ï¼Œæ»¡è¶³äº†æˆ‘è‡ªå·±çš„éœ€æ±‚ï¼Œç‹¬ä¹ä¹ä¸å¦‚ä¼—ä¹ä¹ï¼Œå†æ¬¡é€‰æ‹©äº†å¼€æºã€‚\n2023å¹´3æœˆåº•å¼€å§‹ï¼Œå› ä¸ºé¡¹ç›®çš„å½±å“åŠ›ï¼Œé™†ç»­æœ‰ä¸€äº›ä¼ä¸šå’Œä¸ªäººå¼€å§‹æ‰¾æˆ‘èŠåŸºäº LLM çš„åº”ç”¨åœºæ™¯ã€‚èŠäº†å¾ˆå¤šå½“æ—¶å‘ç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¤§é‡çš„åˆåˆ›å…¬å¸ä¹Ÿå¥½ä¸ªäººä¹Ÿå¥½ï¼Œåšçš„é¡¹ç›®éƒ½æ²¡æœ‰ä¸€ä¸ªä¸»ä½“å»æ”¯æ’‘ã€‚è¦ä¸å°±åš GPT å¥—å£³ï¼Œè¦ä¸å°±æ˜¯å•çº¯åšåŸºäºOpenAIçš„çŸ¥è¯†åº“å†…å®¹çš„é—®ç­”ï¼ˆå¯¹Bç«¯æˆ–è€…Cç«¯ï¼‰ã€‚å½“æ—¶æˆ‘ç»™ä»–ä»¬ä¸¾çš„Bç«¯çš„ä¾‹å­æ˜¯zendeskï¼ˆå› ä¸ºæˆ‘åœ¨å…¬å¸è´Ÿè´£è¿‡2å¹´å¤šçš„CRMç³»ç»Ÿï¼Œå¯¹è¿™å®¶å…¬å¸çš„å·¥å•å’ŒQAç³»ç»Ÿå°è±¡æ¯”è¾ƒæ·±åˆ»ï¼‰ï¼Œå¯¹äºå®ƒè€Œè¨€é›†æˆ LLM æ˜¯è¿Ÿæ—©çš„äº‹ï¼Œå¹¶ä¸”å®ƒæœ¬èº«æ‹¥æœ‰å¤§é‡çš„ä¼ä¸šå®¢æˆ·ï¼Œä¹Ÿæœ‰å¤§é‡çš„æ–‡æœ¬åŒ–å†…å®¹çš„ç§¯ç´¯ã€‚è€Œä½œä¸ºä¸€ä¸ªæ–°èµ·çš„é¡¹ç›®ï¼Œå¾ˆéš¾å»è·Ÿè¿™ç±»å…¬å¸å»ç«äº‰ç›¸ä¼¼çš„å¸‚åœºï¼Œè€Œä¸”å¦‚æœéƒ½æ˜¯å¥—å£³ OpenAI å¤§å®¶æœ¬è´¨åŠŸèƒ½ä¹Ÿä¸ä¼šæ‹‰å¼€å¤ªå¤§çš„å·®è·ã€‚ç¬¬äºŒä¸ªä¾‹å­æ˜¯é’ˆå¯¹Cç«¯ï¼Œå½“æ—¶å°±æœ‰ä¼ è¨€å¾®è½¯è¦åœ¨æ“ä½œç³»ç»Ÿå±‚çº§é›†æˆå¤§æ¨¡å‹èƒ½åŠ›ï¼Œé‚£ä¹ˆé’ˆå¯¹ä¸ªäººå¸‚åœºçš„æ–‡æ¡£é—®ç­”æœåŠ¡ä¹Ÿå°±å¯èƒ½ä¼šå½¢æˆå†²å‡»ã€‚ä¸ªäººå¸‚åœºé’ˆå¯¹LLMèƒ½åŠ›çš„ä»˜è´¹æ„æ„¿æˆ‘ä¸ªäººçš„è§‚å¯Ÿå±äºâ€œæˆ‘èƒ½ç™½å«–å¹²ä»€ä¹ˆè¿˜è¦ä»˜è´¹â€ã€‚\n2023å¹´4æœˆåˆï¼Œå’Œã€Šæ´¥æ´¥ä¹é“ã€‹æ’­å®¢ä¸€æ‹æ—¢åˆå°è¯•é€šè¿‡OpenAI æœ¬èº«å¯¹äºè¯­è¨€çš„ç†è§£èƒ½åŠ›ï¼Œå°†281ä¸ªèŠ‚ç›®å­—å¹•æå–ä¸ºQAæ•°æ®é›†ï¼ˆJinJinLeDao QA Datasetï¼‰ã€‚ä¹Ÿç®—æ˜¯å¯¹å¤§è¯­è¨€æ¨¡å‹çš„å¦ä¸€ç§ä½¿ç”¨æ–¹å¼çš„æ¢ç´¢ã€‚\n2023å¹´4æœˆåº•å¼€å§‹æŠ˜è…¾ASRï¼ˆè¯­éŸ³è½¬æ–‡æœ¬ï¼‰ä»»åŠ¡ï¼Œå¹¶ä¸”å¸Œæœ›çœŸæ­£è½åœ°ä¸€ä¸ªåŸºäºæœ¬åœ°AIæ¨¡å‹çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆã€‚è™½ç„¶éƒ½æ˜¯ç”¨Whisperï¼Œä½†å¦‚ä½•æå‡è´¨é‡å’Œè½¬è¯‘é€Ÿåº¦å˜æˆäº†ä¸€ä¸ªéš¾é¢˜ã€‚æ¥ä¸‹æ¥å‡ ä¸ªæœˆçš„çŠ¶æ€å°±æ˜¯çœ‹è®ºæ–‡ï¼Œçœ‹å¼€æºé¡¹ç›®çš„ä¼˜åŒ–å®ç°ä»¥åŠè¿›è¡Œå¤§é‡çš„æµ‹è¯•å’Œè°ƒæ•´ã€‚æœ€åæ‰¾äº†ä¸€ä¸ªç›¸å¯¹åˆé€‚çš„ pipline å°±æ˜¯ä¸²è”æˆ–å¹¶è”å¤šä¸ªæ¨¡å‹ï¼Œå¹¶ä¸”ä½¿ç”¨é‰´åˆ«æ¨¡å‹è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ä½†å› ä¸ºæ•´ä¸ªæœåŠ¡æµé‡Œé¢æœ‰å¤§é‡çš„æ¨¡å‹ï¼Œå¹¶ä¸”æœ‰äº›æ¨¡å‹ä½“ç§¯åˆç‰¹åˆ«å¤§ï¼Œå¯¼è‡´éƒ¨ç½²éš¾åº¦ä¸Šå‡ï¼Œä½†è¿˜å¥½ç»„å†…æœ‰å¤§ä½¬æš‚ä¸”è§£å†³äº†ï¼ŒæŠ˜è…¾äº†è¿™å‡ ä¸ªæœˆä¸‹æ¥æœåŠ¡æ•´ä½“è¿˜ç®—ç¨³å®šã€‚\næœŸé—´è¿˜å»æ´¥æ´¥ä¹é“æ’­å®¢èŠäº†èŠ OpenAI çš„å‘å¸ƒä¼šã€Šç¼–ç äººå£°ï¼šå‡ åƒå—é’±æ¢æ¥çš„ OpenAI æ–°åŠŸèƒ½ä½“éªŒæŠ¥å‘Šã€‹ã€‚å¼ºçƒˆæ¨ä»‹å¤§å®¶å»è®¢é˜…æ´¥æ´¥ä¹é“æ’­å®¢å®‡å®™çš„ç›¸å…³èŠ‚ç›®ï¼\næœ€è¿‘è¿™ä¸¤ä¸ªæœˆå¼€å§‹æŠ˜è…¾æ”¯æŒè¯­éŸ³å…‹éš†çš„TTSæœ¬åœ°åŒ–è§£å†³æ–¹æ¡ˆï¼Œç›®å‰çœ‹æ•´ä½“è¿˜å¯ä»¥ï¼Œä½†å¦‚ä½•èƒ½è¿›è¡Œâ€œæ— äººå€¼å®ˆâ€çº§åˆ«çš„é•¿æ–‡æœ¬TTSç”Ÿæˆï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢å’Œè§£å†³ï¼ŒæœŸæœ›å¹´å‰èƒ½è§£å†³å§ã€‚\nå†™åœ¨æœ€å æˆ‘å…¶å®è¿˜æ˜¯å¾ˆæ„¿æ„èŠ±é’±æŠ•èµ„è‡ªå·±ï¼Œå°¤å…¶æ˜¯çŸ¥è¯†ä¸Šçš„ï¼Œä»Šå¹´AIä¸Šçš„æŠ•å…¥æ¯”æˆ‘ä»¥å‰åœ¨ä»»ä½•å…¶ä»–æŠ€æœ¯ä¸ŠæŠ•èµ„éƒ½è¦å¤§çš„å¤šï¼ˆæˆ‘éƒ½ä¸æ•¢çœ‹æˆ‘çš„ä½™é¢\u0026hellip;ï¼‰ã€‚ç§Ÿçº¿ä¸ŠGPUè®­ç»ƒæ¨¡å‹ï¼Œä¹°ç›¸å…³ä¹¦ç±å’Œè¯¾ç¨‹ï¼Œå°è¯•å„ç§AIç›¸å…³ä»˜è´¹æœåŠ¡ï¼Œä»¥åŠä¸ºäº†æ–¹ä¾¿è°ƒè¯•æ”’äº†ä¸€ä¸ªæœ¬åœ°å¼€å‘æœºã€‚ä»Šå¹´ä¹Ÿè¦æ„Ÿè°¢æœ‹å‹ä»¬çš„èµåŠ©å’Œä»˜è´¹å’¨è¯¢ï¼Œå¸®æˆ‘æŠ¹æ‰äº†éƒ¨åˆ†çš„æˆæœ¬ã€‚ä½†ä»ä»Šå¹´ä¸€å¹´æ¥çœ‹ä¸ªäººæ AI å±€é™æ€§è¿˜æ˜¯å¤ªå¤§ï¼Œæœ‰å¾ˆå¤šæƒ³å°è¯•çš„å› ä¸ºè¦æŠ•å…¥æ¯”è¾ƒå¤šçš„æˆæœ¬è€Œæ— æ³•è¿›è¡Œã€‚æ˜å¹´å¯èƒ½æ‰¾ä¸ªæ AIGC çš„å…¬å¸æç‚¹æ­£äº‹ï¼Ÿä¹Ÿæœªå¯çŸ¥ã€‚\n","id":6,"section":"posts","summary":"\u003cp\u003eæˆ‘æœ¬èº«æ˜¯ä¸€ä¸ªä¸å¤ªå†™æ€»ç»“ç±»å†…å®¹çš„äººï¼Œä½†è¿™æ¬¡è·Ÿé£å†™ä¸€å›ï¼Œæ€»ç»“æˆ‘è¿™ä¸€å¹´AIç›¸å…³çš„æŠ€æœ¯æ€»ç»“å’Œæˆ‘æ•´ä½“çš„æ€è€ƒã€‚\u003c/p\u003e","tags":["æ€»ç»“"],"title":"2023å¹´ç»ˆç»ˆç»“","uri":"https://www.ganymedenil.com/2023/12/25/2023-summary.html","year":"2023"},{"content":"æˆ‘å°†ä»¥é˜¿é‡Œäº‘ç«ä»·å®ä¾‹æ¥é…ç½®ä½¿ç”¨ GPU çš„ Docker ç¯å¢ƒï¼Œå¸Œæœ›è¿™ä¸ªä¾‹å­èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚\nå‡†å¤‡å·¥ä½œ é¦–å…ˆä½ éœ€è¦å‡†å¤‡ä¸€å°æ‹¥æœ‰GPUçš„å®ä¾‹ï¼Œåœ¨è¿™é‡Œæˆ‘å°†ä½¿ç”¨é˜¿é‡Œäº‘çš„ç«ä»·å®ä¾‹æ¥åšæ¼”ç¤ºï¼Œå› ä¸ºå®ƒå¯¹äºçŸ­æœŸä½¿ç”¨GPUæ›´åŠ åˆ’ç®—ã€‚\næ³¨æ„ï¼Œæœ¬ç¯‡æ–‡ç« å°†æ•™ä½ æ‰‹åŠ¨è¿›è¡ŒGPUé©±åŠ¨çš„é…ç½®ï¼Œæ‰€ä»¥åœ¨è´­ä¹°æ—¶é€‰æ‹©ç³»ç»Ÿçš„æ—¶å€™ä¸è¦é€‰æ‹©è‡ªåŠ¨å®‰è£…GPUé©±åŠ¨ã€‚\nå…·ä½“å…³äºç«ä»·å®ä¾‹å¦‚ä½•è´­ä¹°å’Œé…ç½®ï¼Œè¯·å‚è€ƒå„ä¸ªäº‘å¹³å°çš„ä»‹ç»ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚\nä¸»æœºé…ç½® åœ¨è¿™é‡Œæˆ‘ä¹°äº†ä¸€å°é…æœ‰Ubuntu 22.04å’Œä¸€å—T4æ˜¾å¡çš„å®ä¾‹ä½œä¸ºæ¼”ç¤ºã€‚\næ˜¾å¡é©±åŠ¨å®‰è£… ç°åœ¨æˆ‘ä»¬éœ€è¦å®‰è£… NVIDIA çš„é©±åŠ¨ï¼Œåœ¨è¿™é‡Œä¸‹è½½é©±åŠ¨ã€‚ é€‰æ‹©ä½ çš„æ˜¾å¡å’ŒCUDA Toolkitç‰ˆæœ¬ï¼Œä»¥åŠä½ çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œå°±èƒ½å¾—åˆ°ç›¸åº”çš„é©±åŠ¨ä¸‹è½½ã€‚ åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘çš„æ˜¾å¡é€‰æ‹©çš„æ˜¯ Tesla T4 ï¼Œç³»ç»Ÿé€‰æ‹© Linux64-bitï¼ŒCUDA Toolkit é€‰æ‹© 12.0ã€‚ ç‚¹å‡»æœç´¢åå°±èƒ½å¾—åˆ°å¯¹åº”çš„é©±åŠ¨ï¼Œç‚¹å‡»ä¸‹è½½åå°±å¾—åˆ°äº†å¯¹åº”çš„é©±åŠ¨ã€‚ æŠŠé©±åŠ¨æ–‡ä»¶ä¸Šä¼ åˆ°ä½ çš„å®ä¾‹ä¸Šï¼Œå¹¶ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š $chmod 755 NVIDIA-Linux-x86_64-525.85.12.run $sudo ./NVIDIA-Linux-x86_64-525.85.12.run --no-cc-version-check è„šæœ¬ä¸­çš„ç‰ˆæœ¬å·å¯èƒ½ä¼šéšæœ‰æ‰€å˜åŒ–ï¼Œè¯·ä»¥ä½ ä¸‹è½½çš„é©±åŠ¨ä¸ºå‡†ã€‚\nå®‰è£…å®Œåæ‰§è¡Œ nvidia-smi å‘½ä»¤æ˜¾ç¤ºå¦‚ä¸‹å°±æ˜¯å®‰è£…å®Œæˆäº†ï¼š\nFri Mar 3 15:17:34 2023 +-----------------------------------------------------------------------------+ | NVIDIA-SMI 525.85.12 Driver Version: 525.85.12 CUDA Version: 12.0 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | | | | MIG M. | |===============================+======================+======================| | 0 Tesla T4 Off | 00000000:00:07.0 Off | 0 | | N/A 57C P0 30W / 70W | 2MiB / 15360MiB | 7% Default | | | | N/A | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: | | GPU GI CI PID Type Process name GPU Memory | | ID ID Usage | |=============================================================================| | No running processes found | +-----------------------------------------------------------------------------+ Docker å®‰è£… å¯ä»¥ä½¿ç”¨ Docker çš„å®˜æ–¹è„šæœ¬åœ¨ Ubuntu ä¸Šè®¾ç½® Docker-CEï¼š\ncurl https://get.docker.com | sh \\ \u0026amp;\u0026amp; sudo systemctl --now enable docker è¯·æŒ‰ç…§å®˜æ–¹è¯´æ˜äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œå®‰è£…åæ“ä½œã€‚\nå®‰è£… NVIDIA Container Toolkit åœ¨çº¿å®‰è£… è®¾ç½®è½¯ä»¶åŒ…ä»“åº“å’ŒGPGå¯†é’¥\n$ distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \\ \u0026amp;\u0026amp; curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\ \u0026amp;\u0026amp; curl -s -L https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.list | \\ sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\ sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list åœ¨æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ä¹‹åï¼Œå®‰è£… nvidia-container-toolkit åŒ…ï¼ˆä»¥åŠä¾èµ–é¡¹ï¼‰ã€‚\n$ sudo apt-get update $ sudo apt-get install -y nvidia-container-toolkit ç¦»çº¿å®‰è£… ç¦»çº¿å®‰è£…åŒ…éƒ½åœ¨ä»¥ä¸‹ä»“åº“å’Œåˆ†æ”¯ä¸‹ï¼š https://github.com/NVIDIA/libnvidia-container/tree/gh-pages\nä»¥ ubuntu22.04ä¸ºä¾‹ï¼Œç‚¹å¼€å¯¹åº”çš„ç›®å½•ï¼Œå¦‚æœæ˜¾ç¤ºçš„æ˜¯ Symbolic Linkï¼Œåˆ™è¡¨ç¤ºæ˜¯ä¸ªè½¯é“¾ï¼Œä¾‹å¦‚æˆ‘è¿™ç‚¹å¼€åæ˜¯ stable/ubuntu22.04ï¼Œåˆ™ä»£è¡¨è½¯é“¾åˆ°è¿™ä¸ªç›®å½•ï¼Œè¿›è¡Œè·³è½¬åå‘ç°è¿˜æ˜¯ä¸€ä¸ª Symbolic Link ï¼Œé‡Œé¢æ˜¯ ubuntu18.04ï¼Œç»§ç»­è·³è½¬ï¼Œç°åœ¨å‡ºç°äº†ç³»ç»Ÿçš„é€‰æ‹©ï¼Œè¿™é‡Œæˆ‘é€‰æ‹© amd64ï¼Œè¿›å»åçš„ç›®å½•é‡Œå°±æ˜¯å¯¹åº”çš„å®‰è£…åŒ…äº†ã€‚\nåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦é€‰æ‹©å¦‚ä¸‹çš„å®‰è£…åŒ…ï¼š\nnvidia-container-toolkit-base_xxxx-1_amd64 nvidia-container-toolkit_1.xxxx-1_amd64 libnvidia-container1_1.xxxx-1_amd64 libnvidia-container-tools_1.xxxx-1_amd64 xxxxä»£è¡¨å¯¹åº”çš„ CUDA ç‰ˆæœ¬ï¼Œåœ¨æˆ‘çš„è¿™ä¸ªå®ä¾‹ä¸­ xxxxï¼Œå°±æ˜¯12.0ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºå®‰è£…ï¼š\ndpkg -i libnvidia-container1_1.12.0-1_amd64.deb dpkg -i libnvidia-container-tools_1.12.0-1_amd64.deb dpkg -i nvidia-container-toolkit-base_1.12.0-1_amd64.deb dpkg -i nvidia-container-toolkit_1.12.0-1_amd64.deb é…ç½®Dockerå®ˆæŠ¤ç¨‹åºï¼Œä½¿å…¶èƒ½å¤Ÿè¯†åˆ«NVIDIA Container Runtimeï¼š\n$ sudo nvidia-ctk runtime configure --runtime=docker åœ¨è®¾ç½®é»˜è®¤ runtime åï¼Œé‡æ–°å¯åŠ¨Dockerå®ˆæŠ¤ç¨‹åºä»¥å®Œæˆå®‰è£…ã€‚\n$ sudo systemctl restart docker æµ‹è¯• æœ€åï¼Œé€šè¿‡è¿è¡Œä¸€ä¸ªåŸºæœ¬çš„CUDAå®¹å™¨æ¥æµ‹è¯•æ˜¯å¦é…ç½®å®Œæˆï¼š\n$ sudo docker run --rm --runtime=nvidia --gpus all nvidia/cuda:12.0.1-runtime-ubuntu22.04 nvidia-smi è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºå°±ä»£è¡¨ä½ çš„å®¹å™¨ä»¥åŠæ”¯æŒGPUï¼š\nFri Mar 3 07:47:04 2023 +-----------------------------------------------------------------------------+ | NVIDIA-SMI 525.85.12 Driver Version: 525.85.12 CUDA Version: 12.0 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | | | | MIG M. | |===============================+======================+======================| | 0 Tesla T4 Off | 00000000:00:07.0 Off | 0 | | N/A 37C P0 27W / 70W | 2MiB / 15360MiB | 7% Default | | | | N/A | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: | | GPU GI CI PID Type Process name GPU Memory | | ID ID Usage | |=============================================================================| | No running processes found | +-----------------------------------------------------------------------------+ ","id":7,"section":"posts","summary":"\u003cp\u003eæˆ‘å°†ä»¥é˜¿é‡Œäº‘ç«ä»·å®ä¾‹æ¥é…ç½®ä½¿ç”¨ GPU çš„ Docker ç¯å¢ƒï¼Œå¸Œæœ›è¿™ä¸ªä¾‹å­èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚\u003c/p\u003e","tags":["docker"],"title":"é…ç½® Docker ä½¿ç”¨ GPU","uri":"https://www.ganymedenil.com/2023/03/03/configuring-docker-to-use-gpus.html","year":"2023"},{"content":"Nuxt 3åœ¨å¼•å…¥ wavesurfer.js æ—¶ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« å°†å®Œæ•´ä»‹ç»å¦‚ä½•æ­£ç¡®å¼•ç”¨ wavesurfer.jsã€‚\nå®‰è£… wavesurfer.js åœ¨é¡¹ç›®ä¸­å®‰è£… wavesurfer.js\nnpm install --save wavesurfer.js å¸¸è§„æ–¹å¼å¼•å…¥ å¦‚æœä½ çš„æ ¹ç›®å½•ä¸­æ²¡æœ‰ components ç›®å½•åˆ™éœ€è¦åˆ›å»ºè¯¥ç›®å½•ï¼Œå¹¶åœ¨æ­¤ç›®å½•ä¸­åˆ›å»º WaveSurfer.vue å†…å®¹å¦‚ä¸‹ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div ref=\u0026quot;wavesurferMain\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; import WaveSurfer from 'wavesurfer.js' const props = defineProps({ src:{ type:String, required:true }, options:{ type:Object, } }); const wavesurferMain = ref(null); const waveSurfer = ref(null); let options = props.options; let wsOptions = Object.assign({ container: wavesurferMain.value }, options); waveSurfer.value = new WaveSurfer.create(wsOptions); waveSurfer.value.load(props.src); \u0026lt;/script\u0026gt; ç„¶åæˆ‘ä»¬é›†æˆè¯¥ç»„ä»¶ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å°†åœ¨ app.vue ç›´æ¥å¼•ç”¨ï¼Œå¹¶ä¸”æˆ‘å°†æµ‹è¯•éŸ³é¢‘æ–‡ä»¶ demo.wavï¼Œæ”¾åœ¨æ ¹ç›®å½•çš„public ä¸­ã€‚\n\u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;WaveSurfer src=\u0026quot;/demo.wav\u0026quot;:options=\u0026quot;waveSurferOption\u0026quot; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const waveSurferOption = { height: 340, progressColor: '#e03639', waveColor: '#e7e7e7', cursorColor: '#FFDDDD', barWidth: 2, mediaControls: true, backend: 'MediaElement', scrollParent:true, xhr: { mode: 'no-cors' } }; \u0026lt;/script\u0026gt; ç°åœ¨æ‰§è¡Œ npm run dev ï¼Œé¡µé¢å°†æŠ¥é”™ self is not definedã€‚ è¿™æ˜¯å› ä¸ºåœ¨ setup è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒDOM èŠ‚ç‚¹å¹¶æœªåˆ›å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨mounted é˜¶æ®µè¿›è¡Œå¯¼å…¥ã€‚\næ­£ç¡®çš„å¼•å…¥æ–¹å¼ æ›´æ”¹ WaveSurfer.vue æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div ref=\u0026quot;wavesurferMain\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const props = defineProps({ src:{ type:String, required:true }, options:{ type:Object, } }); const wavesurferMain = ref(null); const waveSurfer = ref(null); onMounted(async ()=\u0026gt;{ const WaveSurfer = (await import('wavesurfer.js')).default; const options = props.options; const wsOptions = Object.assign({ container: wavesurferMain.value }, options); waveSurfer.value = new WaveSurfer.create(wsOptions); waveSurfer.value.load(props.src); }); \u0026lt;/script\u0026gt; ç°åœ¨ä½ åº”è¯¥èƒ½çœ‹åˆ°å·²ç»å¯ä»¥æ­£å¸¸åŠ è½½äº†ã€‚\nåŠ è½½æ’ä»¶ åŠ è½½æ–¹å¼å’Œæ’ä»¶ä¸€æ ·ï¼Œå®˜æ–¹çš„æ’ä»¶åœ¨ wavesurfer.js/dist/plugin ç›®å½•ä¸‹ï¼Œè¿™ä¸ªä¾‹å­å°†åŠ è½½æ—¶é—´çº¿æ’ä»¶å¦‚ä¸‹ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div ref=\u0026quot;wavesurferMain\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div ref=\u0026quot;waveTimeline\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const props = defineProps({ src:{ type:String, required:true }, options:{ type:Object, } }); const wavesurferMain = ref(null); const waveTimeline = ref(null); const waveSurfer = ref(null); onMounted(async ()=\u0026gt;{ const WaveSurfer = (await import('wavesurfer.js')).default; const Timeline = (await import('wavesurfer.js/dist/plugin/wavesurfer.timeline')).default; const options = props.options; const wsOptions = Object.assign({ container: wavesurferMain.value, plugins:[ Timeline.create({container:waveTimeline.value}) ] }, options); waveSurfer.value = new WaveSurfer.create(wsOptions); waveSurfer.value.load(props.src); }); \u0026lt;/script\u0026gt; åŠ è½½æ³¢å½¢æ•°æ® å¦‚æœéŸ³é¢‘æ–‡ä»¶è¿‡å¤§ï¼Œä½¿ç”¨æ’ä»¶åŸç”Ÿçš„æ³¢å½¢ç”Ÿæˆæ–¹å¼ä¼šéå¸¸æ…¢ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡æœåŠ¡ç«¯ç”Ÿæˆæ³¢å½¢æ•°æ®ï¼Œå¹¶è®©æ’ä»¶ç›´æ¥é€šè¿‡æ³¢å½¢æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚å…·ä½“ç”Ÿæˆæ–¹å¼å¯ä»¥å‚è€ƒå®˜æ–¹çš„è§£å†³æ–¹æ¡ˆFAQã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œç”Ÿæˆæ³¢å½¢æ•°æ®æ–‡ä»¶åï¼Œæˆ‘æŠŠå®ƒç§»åŠ¨åˆ°é¡¹ç›®çš„publicä¸­ï¼Œæ›´æ”¹ WaveSurfer.vue å†…å®¹å¦‚ä¸‹ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div ref=\u0026quot;wavesurferMain\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div ref=\u0026quot;waveTimeline\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const props = defineProps({ src:{ type:String, required:true }, peaksData:{ type:String, }, options:{ type:Object, } }); const wavesurferMain = ref(null); const waveTimeline = ref(null); const waveSurfer = ref(null); onMounted(async ()=\u0026gt;{ const WaveSurfer = (await import('wavesurfer.js')).default; const Timeline = (await import('wavesurfer.js/dist/plugin/wavesurfer.timeline')).default; const options = props.options; const wsOptions = Object.assign({ container: wavesurferMain.value, plugins:[ Timeline.create({container:waveTimeline.value}) ] }, options); waveSurfer.value = new WaveSurfer.create(wsOptions); fetch(props.peaksData) .then(response =\u0026gt; { if (!response.ok) { throw new Error(\u0026quot;HTTP error \u0026quot; + response.status); } return response.json(); }) .then(peaks =\u0026gt; { waveSurfer.value.load(props.src,peaks.data); }) .catch((e) =\u0026gt; { console.error('error', e); }); }); \u0026lt;/script\u0026gt; åœ¨ app.vue ä¸­å˜æ›´å¦‚ä¸‹ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;WaveSurfer src=\u0026quot;/demo.wav\u0026quot; peaks-data=\u0026quot;/demo.json\u0026quot; :options=\u0026quot;waveSurferOption\u0026quot; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const waveSurferOption = { height: 340, progressColor: '#e03639', waveColor: '#e7e7e7', cursorColor: '#FFDDDD', barWidth: 2, mediaControls: false, backend: 'MediaElement', scrollParent:true, xhr: { mode: 'no-cors' } } \u0026lt;/script\u0026gt; æš´éœ²æ’ä»¶çš„æ–¹æ³• ç°åœ¨æˆ‘ä»¬åªæ˜¯æ­£å¸¸åˆå§‹åŒ–æ’ä»¶å¹¶è®©å®ƒåŠ è½½äº†éŸ³é¢‘æ–‡ä»¶ï¼Œç›®å‰æˆ‘ä»¬å¹¶ä¸èƒ½æ“ä½œå®ƒã€‚ å› ä¸º Vue3 ä¸­ï¼Œé»˜è®¤å¹¶ä¸ä¼šæš´éœ² \u0026lt;script setup\u0026gt; ä¸­å£°æ˜çš„ç»‘å®šã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ defineExpose æ¥æš´éœ²å¯¹åº”çš„å±æ€§ã€‚WaveSurfer.vue å¦‚ä¸‹å˜æ›´ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div ref=\u0026quot;wavesurferMain\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div ref=\u0026quot;waveTimeline\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const props = defineProps({ src:{ type:String, required:true }, peaksData:{ type:String, }, options:{ type:Object, } }); const wavesurferMain = ref(null); const waveTimeline = ref(null); const waveSurfer = ref(null); onMounted(async ()=\u0026gt;{ // çœç•¥é€»è¾‘ }); defineExpose( { waveSurfer } ) \u0026lt;/script\u0026gt; åœ¨ app.vue ä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨ï¼š\n\u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;WaveSurfer ref=\u0026quot;refWaveSurfer\u0026quot; src=\u0026quot;/demo.wav\u0026quot; peaks-data=\u0026quot;/demo.json\u0026quot; :options=\u0026quot;waveSurferOption\u0026quot;/\u0026gt; \u0026lt;button @click=\u0026quot;play\u0026quot;\u0026gt;play\u0026lt;/button\u0026gt; \u0026lt;button @click=\u0026quot;pause\u0026quot;\u0026gt;pause\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script setup\u0026gt; const waveSurferOption = { height: 340, progressColor: '#e03639', waveColor: '#e7e7e7', cursorColor: '#FFDDDD', barWidth: 2, mediaControls: false, backend: 'MediaElement', scrollParent:true, xhr: { mode: 'no-cors' } } const refWaveSurfer = ref(null); function play() { refWaveSurfer.value.waveSurfer.play(); // è°ƒç”¨æ’­æ”¾æ–¹æ³• } function pause(){ refWaveSurfer.value.waveSurfer.pause(); // è°ƒç”¨æš‚åœæ–¹æ³• } \u0026lt;/script\u0026gt; é¡¹ç›® ä½ å¯ä»¥åœ¨ä»¥ä¸‹ä»“åº“çœ‹åˆ°å®Œæ•´çš„ç¤ºä¾‹ https://github.com/AnyStudy/nuxt-3-wavesurfer-demo\n","id":8,"section":"posts","summary":"\u003cp\u003eNuxt 3åœ¨å¼•å…¥ wavesurfer.js æ—¶ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« å°†å®Œæ•´ä»‹ç»å¦‚ä½•æ­£ç¡®å¼•ç”¨ wavesurfer.jsã€‚\u003c/p\u003e","tags":["nuxt"],"title":"å¦‚ä½•åœ¨ Nuxt 3 ä¸­ä½¿ç”¨ wavesurfer.js","uri":"https://www.ganymedenil.com/2023/01/13/how-to-use-wavesurferjs-in-nuxt3.html","year":"2023"},{"content":"Goæ˜¯ä¸€ç§éå¸¸å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå…·æœ‰å†…ç½®çš„å¹¶å‘æ”¯æŒå’Œä¼—å¤šå…¶ä»–ä¼˜ç§€çš„ç‰¹æ€§ã€‚åœ¨ä¼—å¤šç°ä»£è¯­è¨€ä¸­ï¼ŒGoåœ¨åŸºæœ¬è¯­è¨€è®¾è®¡æ–¹é¢æ ¼å¤–å‡ºä¼—ã€‚\né¦–å…ˆï¼ŒGoæ˜¯ä¸€ç§éå¸¸ç®€æ´çš„è¯­è¨€ï¼Œå®ƒçš„ç®€æ´æ€§ä½¿å…¶ä¸åƒLuaè¿™æ ·çš„ç®€å•è¯­è¨€ç›¸ä¼¼ã€‚Goè®¾è®¡æ—¶ååˆ†æ³¨é‡ç®€æ´ä¸»ä¹‰ \u0026hellip;\nå‰è¨€ Goæ˜¯ä¸€ç§éå¸¸å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå…·æœ‰å†…ç½®çš„å¹¶å‘æ”¯æŒå’Œä¼—å¤šå…¶ä»–ä¼˜ç§€çš„ç‰¹æ€§ã€‚åœ¨ä¼—å¤šç°ä»£è¯­è¨€ä¸­ï¼ŒGoåœ¨åŸºæœ¬è¯­è¨€è®¾è®¡æ–¹é¢æ ¼å¤–å‡ºä¼—ã€‚\né¦–å…ˆï¼ŒGoæ˜¯ä¸€ç§éå¸¸ç®€æ´çš„è¯­è¨€ï¼Œå®ƒçš„ç®€æ´æ€§ä½¿å…¶ä¸åƒLuaè¿™æ ·çš„ç®€å•è¯­è¨€ç›¸ä¼¼ã€‚Goè®¾è®¡æ—¶ååˆ†æ³¨é‡ç®€æ´ä¸»ä¹‰ã€‚\nå…¶æ¬¡ï¼ŒGoéå¸¸é‡è§†è¯­è¨€çš„ç¨³å®šæ€§ï¼Œä¸è®¸å¤šå…¶ä»–è¯­è¨€å½¢æˆäº†é²œæ˜çš„å¯¹æ¯”ã€‚Goæ›´åƒCè¯­è¨€ï¼Œè‡ªä»40å¤šå¹´å‰åˆ›å»ºä»¥æ¥å‡ ä¹æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚\næœ€è¿‘Go 1.18ä¸­å¼•å…¥çš„æ³›å‹æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œä½†è¿™æ˜¾ç„¶æ˜¯å¿…è¦çš„æ”¹å˜ã€‚\nç¬¬ä¸‰ï¼Œåœ¨æ ‡å‡†åº“æ–¹é¢ï¼ŒGoæ˜¯ä¸€ç§\u0026quot;ç»¼åˆæ€§\u0026quot;ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæä¾›äº†å¼€å‘ä¸“ä¸šè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè€Œæ— éœ€è¿‡å¤šä¾èµ–å¤–éƒ¨åº“ã€‚\næœ¬ä¹¦æ˜¯Goç¼–ç¨‹è¯­è¨€çš„\u0026quot;è¿·ä½ \u0026quot;è¯­è¨€å‚è€ƒæ‰‹å†Œï¼Œå®ƒæ¦‚è¿°äº†ç°ä»£Goç¼–ç¨‹è¯­è¨€ï¼ˆ1.18å’Œ1.19ï¼‰çš„æ‰€æœ‰åŸºæœ¬åŠŸèƒ½ã€‚è™½ç„¶å®ƒæ˜¯ä½œä¸ºå‚è€ƒæ‰‹å†Œè€Œå†™çš„ï¼Œä½†ä½ å‡ ä¹å¯ä»¥ä»å¤´åˆ°å°¾é˜…è¯»å®ƒï¼Œå¹¶ä¸”åº”è¯¥èƒ½å¤Ÿäº†è§£Goè¯­è¨€çš„æ•´ä½“æ¦‚å¿µï¼ˆä½†ä¸ä¸€å®šæ˜¯æ‰€æœ‰çš„ç»†èŠ‚ï¼‰ã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸æ•™ç¨‹é£æ ¼çš„ä¹¦ç±ä¸åŒï¼Œæœ¬ä¹¦æœ‰å¤§é‡äº¤å‰å¼•ç”¨ï¼Œå¦‚æœæ‚¨ä¹‹å‰æ²¡æœ‰ä½¿ç”¨Goç¼–ç¨‹çš„ç»éªŒï¼Œå¯èƒ½ä¼šå‘ç°å¾ˆéš¾é˜…è¯»æœ¬ä¹¦çš„æŸäº›éƒ¨åˆ†ã€‚\næœ¬ä¹¦ä¹Ÿæ˜¯æˆ‘åœ¨2022å¹´è‡ªç”±èŒä¸šæœŸé—´ç¿»è¯‘çš„ä¸€æœ¬ä¹¦ï¼Œå€Ÿæ­¤æœºä¼šå·©å›ºè‡ªå·±å¯¹Goçš„ç›¸å…³çŸ¥è¯†ã€‚\né˜…è¯»åœ°å€ å†™ç»™å¤§å¿™äººçœ‹çš„Goè¯­è¨€å¿«é€ŸæŒ‡å—\n","id":9,"section":"posts","summary":"\u003cp\u003eGoæ˜¯ä¸€ç§éå¸¸å—æ¬¢è¿çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒå…·æœ‰å†…ç½®çš„å¹¶å‘æ”¯æŒå’Œä¼—å¤šå…¶ä»–ä¼˜ç§€çš„ç‰¹æ€§ã€‚åœ¨ä¼—å¤šç°ä»£è¯­è¨€ä¸­ï¼ŒGoåœ¨åŸºæœ¬è¯­è¨€è®¾è®¡æ–¹é¢æ ¼å¤–å‡ºä¼—ã€‚\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆï¼ŒGoæ˜¯ä¸€ç§éå¸¸ç®€æ´çš„è¯­è¨€ï¼Œå®ƒçš„ç®€æ´æ€§ä½¿å…¶ä¸åƒLuaè¿™æ ·çš„ç®€å•è¯­è¨€ç›¸ä¼¼ã€‚Goè®¾è®¡æ—¶ååˆ†æ³¨é‡ç®€æ´ä¸»ä¹‰ \u0026hellip;\u003c/p\u003e","tags":["go"],"title":"å†™ç»™å¤§å¿™äººçœ‹çš„Goè¯­è¨€å¿«é€ŸæŒ‡å—ï¼ˆä¸­æ–‡ç¿»è¯‘ï¼‰","uri":"https://www.ganymedenil.com/2023/01/04/a-quick-guide-to-the-go-programming-language-for-busy-coders.html","year":"2023"},{"content":"slog æ˜¯ Go å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªå®éªŒæ€§æ—¥å¿—åŒ…ï¼Œå®ƒæä¾›äº†ç»“æ„åŒ–æ—¥å¿—è®°å½•çš„åŠŸèƒ½ã€‚ æ³¨æ„ï¼šå½“å‰è¯¥åŒ…è¿˜æœªåœ¨GoåŸºç¡€åº“ä¸­åŒ…å«ã€‚\nå®‰è£… åˆ›å»ºæ–°çš„ Go é¡¹ç›®æˆ–è€…ä½¿ç”¨ç°æœ‰çš„é¡¹ç›®é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚\ngo get golang.org/x/exp/slog ä½¿ç”¨ package main import \u0026quot;golang.org/x/exp/slog\u0026quot; func main() { slog.Info(\u0026quot;Go is best language!\u0026quot;) } è¾“å‡ºï¼š\n$ go run main.go 2022/12/21 11:16:00 INFO Go is best language! é»˜è®¤æƒ…å†µä¸‹ï¼Œè¾“å‡ºåŒ…æ‹¬æ—¶é—´ã€æ—¥å¿—çº§åˆ«å’Œæ¶ˆæ¯ã€‚\nä»¥ä¸‹æ˜¯å¯ç”¨çš„æ—¥å¿—çº§åˆ«ã€‚\nDebug Info Warn Error ç»“æ„åŒ–æ—¥å¿—è®°å½• slog æ˜¯ä¸€ä¸ªç»“æ„åŒ–æ—¥å¿—è®°å½•å·¥å…·ï¼Œæ”¯æŒä¸¤ç§è®°å½•æ ¼å¼ï¼štext å’Œ jsonã€‚\nText Handler é¦–å…ˆåˆ›å»ºä¸€ä¸ª text handler å’Œ ä¸€ä¸ª new loggerã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { textHandler := slog.NewTextHandler(os.Stdout) logger := slog.New(textHandler) logger.Info(\u0026quot;Go is the best language!\u0026quot;) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:20:52.919+08:00 level=INFO msg=\u0026quot;Go is the best language!\u0026quot; æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ—¥å¿—æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼è¾“å‡ºã€‚è¿™é€šå¸¸ç§°ä¸º logfmt æ ¼å¼ã€‚\nè®¸å¤šæ—¥å¿—åˆ†æå·¥å…·éƒ½å¯ä»¥å¤„ç†logfmtæ ¼å¼çš„æ—¥å¿—ã€‚Logfmt ä¹Ÿæ˜¯äººç±»å¯è¯»çš„ä¸€ç§æ—¥å¿—æ ¼å¼ã€‚\nJSON Handler ä½ è¿˜å¯ä»¥è¾“å‡º JSON æ ¼å¼çš„æ—¥å¿—ã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { jsonHandler := slog.NewJSONHandler(os.Stdout) // ğŸ‘ˆ logger := slog.New(jsonHandler) logger.Info(\u0026quot;Go is the best language!\u0026quot;) } è¾“å‡ºï¼š\n$ go run main.go {\u0026quot;time\u0026quot;:\u0026quot;2022-12-21T11:26:08.355317+08:00\u0026quot;,\u0026quot;level\u0026quot;:\u0026quot;INFO\u0026quot;,\u0026quot;msg\u0026quot;:\u0026quot;Go is the best language!\u0026quot;} æ¯ä¸ªæ—¥å¿—éƒ½è®°å½•ä¸ºä¸€ä¸ª json å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å±æ€§ã€‚\nå±æ€§ slog æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„è®°å½•å™¨ï¼Œæä¾›äº†æŒ‡å®šå±æ€§çš„èƒ½åŠ›ã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { textHandler := slog.NewTextHandler(os.Stdout) logger := slog.New(textHandler) logger.Info(\u0026quot;Usage Statistics\u0026quot;, slog.Int(\u0026quot;current-memory\u0026quot;, 50)) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:28:27.209+08:00 level=INFO msg=\u0026quot;Usage Statistics\u0026quot; current-memory=50 åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ . æ·»åŠ äº†ä¸€ä¸ªæ•´æ•°å±æ€§slog.Intã€‚\nä»¥ä¸‹æ˜¯å„ç±»æ”¯æŒçš„å±æ€§ï¼š\nString Int64 Int Uint64 Float64 Bool Time Duration ä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ ä»»æ„æ•°é‡çš„å±æ€§ã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { textHandler := slog.NewTextHandler(os.Stdout) logger := slog.New(textHandler) logger.Info(\u0026quot;Usage Statistics\u0026quot;, slog.Int(\u0026quot;current-memory\u0026quot;, 50), slog.Int(\u0026quot;min-memory\u0026quot;, 20), slog.Int(\u0026quot;max-memory\u0026quot;, 80), slog.Int(\u0026quot;cpu\u0026quot;, 10), slog.String(\u0026quot;app-version\u0026quot;, \u0026quot;v0.0.1-beta\u0026quot;), ) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:31:12.469+08:00 level=INFO msg=\u0026quot;Usage Statistics\u0026quot; current-memory=50 min-memory=20 max-memory=80 cpu=10 app-version=v0.0.1-beta åˆ†ç»„å±æ€§ ä½ å¯ä»¥å°†å±æ€§åˆ†ç»„åœ¨ä¸€ä¸ªé”®ä¸‹ã€‚ä¾‹å¦‚ï¼Œæ‰€æœ‰å†…å­˜å±æ€§éƒ½å¯ä»¥åˆ†ç»„åœ¨ memory é”®ä¸‹ã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { textHandler := slog.NewTextHandler(os.Stdout) logger := slog.New(textHandler) logger.Info(\u0026quot;Usage Statistics\u0026quot;, slog.Group(\u0026quot;memory\u0026quot;, slog.Int(\u0026quot;current\u0026quot;, 50), slog.Int(\u0026quot;min\u0026quot;, 20), slog.Int(\u0026quot;max\u0026quot;, 80)), slog.Int(\u0026quot;cpu\u0026quot;, 10), slog.String(\u0026quot;app-version\u0026quot;, \u0026quot;v0.0.1-beta\u0026quot;), ) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:33:38.016+08:00 level=INFO msg=\u0026quot;Usage Statistics\u0026quot; memory.current=50 memory.min=20 memory.max=80 cpu=10 app-version=v0.0.1-beta ä½¿ç”¨ JsonHandler è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºã€‚\n$ go run main.go | jq { \u0026quot;time\u0026quot;: \u0026quot;2022-12-21T11:35:24.648829+08:00\u0026quot;, \u0026quot;level\u0026quot;: \u0026quot;INFO\u0026quot;, \u0026quot;msg\u0026quot;: \u0026quot;Usage Statistics\u0026quot;, \u0026quot;memory\u0026quot;: { \u0026quot;current\u0026quot;: 50, \u0026quot;min\u0026quot;: 20, \u0026quot;max\u0026quot;: 80 }, \u0026quot;cpu\u0026quot;: 10, \u0026quot;app-version\u0026quot;: \u0026quot;v0.0.1-beta\u0026quot; } å…¬å…±å±æ€§ å‡è®¾ä½ å¸Œæœ›æ‹¥æœ‰ä¸€ä¸ªåº”åŒ…å«åœ¨æ‰€æœ‰æ­£åœ¨ç”Ÿæˆçš„æ—¥å¿—ä¸­çš„å±æ€§ï¼Œæ­¤ç±»å±æ€§çš„ç¤ºä¾‹åŒ…æ‹¬æœåŠ¡åç§°ã€åº”ç”¨ç¨‹åºç‰ˆæœ¬ã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { textHandler := slog.NewTextHandler(os.Stdout). WithAttrs([]slog.Attr{slog.String(\u0026quot;app-version\u0026quot;, \u0026quot;v0.0.1-beta\u0026quot;)}) // ğŸ‘ˆ ä¸ºæ‰€æœ‰æ—¥å¿—æ·»åŠ å±æ€§ logger := slog.New(textHandler) logger.Info(\u0026quot;Generating statistics\u0026quot;) logger.Info(\u0026quot;Usage Statistics\u0026quot;, slog.Group(\u0026quot;memory\u0026quot;, slog.Int(\u0026quot;current\u0026quot;, 50), slog.Int(\u0026quot;min\u0026quot;, 20), slog.Int(\u0026quot;max\u0026quot;, 80)), slog.Int(\u0026quot;cpu\u0026quot;, 10), ) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:37:26.363+08:00 level=INFO msg=\u0026quot;Generating statistics\u0026quot; app-version=v0.0.1-beta time=2022-12-21T11:37:26.363+08:00 level=INFO msg=\u0026quot;Usage Statistics\u0026quot; app-version=v0.0.1-beta memory.current=50 memory.min=20 memory.max=80 cpu=10 ä½ å¯ä»¥çœ‹åˆ° app-version ä¸¤ä¸ªæ—¥å¿—ä¸­éƒ½åŒ…å«è¯¥å±æ€§ã€‚åœ¨å¤„ç†ç¨‹åºä¸Šä½¿ç”¨å‡½æ•°æŒ‡å®šçš„å±æ€§WithAttrså°†åŒ…å«åœ¨æ‰€æœ‰æ—¥å¿—ä¸­ã€‚\nåœ¨ context ä¸­ä¼ é€’ logger ç†æƒ³æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›åˆ›å»ºä¸€ä¸ªå…·æœ‰ç‰¹å®šé…ç½®å’Œå±æ€§çš„è®°å½•å™¨ï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚\nslogå…·æœ‰å†…ç½®å‡½æ•°ï¼Œå¯è®©è®©ä½ åœ¨contextä¸­ä½¿ç”¨ã€‚\npackage main import ( \u0026quot;context\u0026quot; \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { textHandler := slog.NewTextHandler(os.Stdout). WithAttrs([]slog.Attr{slog.String(\u0026quot;app-version\u0026quot;, \u0026quot;v0.0.1-beta\u0026quot;)}) logger := slog.New(textHandler) ctx := slog.NewContext(context.Background(), logger) // ğŸ‘ˆ context containing logger sendUsageStatus(ctx) } func sendUsageStatus(ctx context.Context) { logger := slog.FromContext(ctx) // ğŸ‘ˆ grab logger from context logger.Info(\u0026quot;Generating statistics\u0026quot;) logger.Info(\u0026quot;Usage Statistics\u0026quot;, slog.Group(\u0026quot;memory\u0026quot;, slog.Int(\u0026quot;current\u0026quot;, 50), slog.Int(\u0026quot;min\u0026quot;, 20), slog.Int(\u0026quot;max\u0026quot;, 80)), slog.Int(\u0026quot;cpu\u0026quot;, 10), ) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:41:28.333+08:00 level=INFO msg=\u0026quot;Generating statistics\u0026quot; app-version=v0.0.1-beta time=2022-12-21T11:41:28.334+08:00 level=INFO msg=\u0026quot;Usage Statistics\u0026quot; app-version=v0.0.1-beta memory.current=50 memory.min=20 memory.max=80 cpu=10 NewContextåˆ›å»ºä¸€ä¸ªåŒ…å« logger çš„ æ–°çš„ contextã€‚\nFromContextä» contex tä¸­è·å– loggerã€‚å¦‚æœ context ä¸åŒ…å« loggerï¼Œå®ƒä¼šè¿”å›default loggerã€‚\næ—¥å¿—çº§åˆ« å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é»˜è®¤ loggerï¼Œå®ƒä¸ä¼šè®°å½•è°ƒè¯•æ—¥å¿—ï¼Œå› ä¸ºé»˜è®¤æ—¥å¿—çº§åˆ«ä¸ºInfo.\nä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ loggerï¼Œå¹¶å°†é»˜è®¤æ—¥å¿—çº§åˆ«è®¾ç½®ä¸ºDebugä»¥æ˜¾ç¤ºè°ƒè¯•æ—¥å¿—ã€‚\npackage main import ( \u0026quot;os\u0026quot; \u0026quot;golang.org/x/exp/slog\u0026quot;) func main() { opts := slog.HandlerOptions{ Level: slog.LevelDebug, } textHandler := opts.NewTextHandler(os.Stdout) logger := slog.New(textHandler) logger.Debug(\u0026quot;Debug\u0026quot;) logger.Info(\u0026quot;Info\u0026quot;) logger.Warn(\u0026quot;Warn\u0026quot;) } è¾“å‡ºï¼š\n$ go run main.go time=2022-12-21T11:45:23.466+08:00 level=DEBUG msg=Debug time=2022-12-21T11:45:23.466+08:00 level=INFO msg=Info time=2022-12-21T11:45:23.466+08:00 level=WARN msg=Warn æœ¬æ–‡æ¥æº Logging in Go with slog - https://thedevelopercafe.com/articles/logging-in-go-with-slog-a7bb489755c2\næœ¬æ–‡ä½œè€…çš„å…¶ä»– Go è¯­è¨€æ–‡ç« ä¹Ÿéå¸¸å€¼å¾—ä¸€è¯»ã€‚\n","id":10,"section":"posts","summary":"\u003cp\u003e\u003cstrong\u003eslog\u003c/strong\u003e æ˜¯ Go å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªå®éªŒæ€§æ—¥å¿—åŒ…ï¼Œå®ƒæä¾›äº†ç»“æ„åŒ–æ—¥å¿—è®°å½•çš„åŠŸèƒ½ã€‚\n\u003cstrong\u003eæ³¨æ„ï¼šå½“å‰è¯¥åŒ…è¿˜æœªåœ¨GoåŸºç¡€åº“ä¸­åŒ…å«ã€‚\u003c/strong\u003e\u003c/p\u003e","tags":["go"],"title":"Go slog æ—¥å¿—åŒ…å°é²œ","uri":"https://www.ganymedenil.com/2022/12/21/go-standard-library-by-slog-early.html","year":"2022"},{"content":"ä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯åœ¨å†™ä¸€ä¸ªå…³äºè™šæ‹Ÿè´§å¸è´¦æˆ·ç›‘æ§çš„é¡¹ç›®æ—¶ä½¿ç”¨ Ticker çš„é—®é¢˜ã€‚\nTicker çš„é—®é¢˜ å¦‚æœç”¨è¿‡ Ticker çš„æœ‹å‹ä¼šçŸ¥é“ï¼Œåˆ›å»º Ticker åå¹¶ä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯ä¼šç­‰å¾…ä¸€ä¸ªæ—¶é—´ dï¼Œè¿™å°±æ˜¯åˆ›å»ºæ—¶çš„é—´éš”æ—¶é—´ã€‚å¦‚æœé—´éš”æ—¶é—´å¾ˆçŸ­è¿™åŸºæœ¬ä¸Šä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå¯¹é¦–æ¬¡æ‰§è¡Œæ—¶é—´æœ‰è¦æ±‚ï¼Œå°±ä¼šå¾ˆéº»çƒ¦ã€‚ä¾‹å¦‚ä»¥ä¸‹è¿™ä¸ªæ¡ˆä¾‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;sync\u0026quot; \u0026quot;time\u0026quot; ) func main() { ts := time.NewTicker(5 * time.Second) fmt.Println(\u0026quot;start_time#\u0026quot;, time.Now().Unix()) chanClose := make(chan struct{}) var wg sync.WaitGroup wg.Add(1) go func() { defer wg.Done() for { select { case \u0026lt;-chanClose: return case \u0026lt;-ts.C: fmt.Println(\u0026quot;run_time#\u0026quot;, time.Now().Unix()) } } }() go func() { time.Sleep(10 * time.Second) chanClose \u0026lt;- struct{}{} ts.Stop() }() wg.Wait() } å®ƒå°†è¿”å›ä»¥ä¸‹å†…å®¹ï¼š\nstart_time# 1656860176 run_time# 1656860181 run_time# 1656860186 ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºæˆ‘ä»¬åœ¨äº‹ä¾‹ä¸­è®¾äº†ä¸€ä¸ªå¾ˆçŸ­çš„æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»ä»£ç å¯åŠ¨åˆ°çœŸæ­£å®šæ—¶å™¨è§¦å‘ï¼Œä»£ç ç­‰å¾…äº†5ç§’ï¼Œå°±æ˜¯time.NewTicker åˆ›å»ºæ—¶æˆ‘ä»¬ä¼ çš„å‚æ•°æ—¶é—´ã€‚ä½†å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªæ—¶é—´æ”¹æˆ1ä¸ªå°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…1ä¸ªå°æ—¶æ‰ä¼šçœŸæ­£å¼€å§‹æ‰§è¡Œã€‚\nå¯»æ‰¾è§£å†³æ–¹æ¡ˆ åœ¨æˆ‘çš„é¡¹ç›®ä¸­éœ€è¦å®šæ—¶å™¨é©¬ä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘é€šè¿‡æœç´¢æœåˆ°äº† Go å®˜æ–¹ä»“åº“ Issues ä¸­æåˆ°è¿‡è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆ â€œtime: create ticker with instant first tickâ€ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªäº‹ä¾‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;sync\u0026quot; \u0026quot;time\u0026quot; ) func main() { ts := time.NewTicker(5 * time.Second) fmt.Println(\u0026quot;start_time#\u0026quot;, time.Now().Unix()) var wg sync.WaitGroup wg.Add(1) go func() { for ; true; \u0026lt;-ts.C { fmt.Println(\u0026quot;run_time#\u0026quot;, time.Now().Unix()) } }() go func() { time.Sleep(10 * time.Second) ts.Stop() wg.Done() }() wg.Wait() } ä¸Šè¿°çš„æ‰§è¡Œåè¿”å›å†…å®¹ï¼š\nstart_time# 1656860889 run_time# 1656860889 run_time# 1656860894 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¦–æ¬¡å®šæ—¶å™¨è§¦å‘ä»»åŠ¡çš„æ—¶é—´å˜æˆäº†ç¨‹åºæ‰§è¡Œçš„å¼€å§‹æ—¶é—´ï¼åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™ç§æ–¹å¼æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨é€€å‡ºæ¡ä»¶ï¼Œåœ¨è¿™é‡Œæ˜¯ main goroutine ç›´æ¥é€€å‡ºã€‚ç¬¬ä¸€ä¸ª goroutine å…¶å®ç›´åˆ° main é€€å‡ºå‰ä¸€ç›´æ˜¯å µå¡çŠ¶æ€ã€‚å¦‚æœä½ çš„é¡¹ç›®ä¸­å¤šæ¬¡ä½¿ç”¨è¿™ç§å½¢å¼çš„å®šæ—¶å™¨ï¼Œæ¯ä¸€ä¸ªéƒ½ä¼šæœ‰ä¸€ä¸ªå µå¡çš„ goroutineï¼Œè™½ç„¶ä¸ä¼šå¯¹ä½ ç¨‹åºé€ æˆ panicï¼Œä½†æˆ‘è¿˜æ˜¯æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ã€‚\næˆ‘çš„ç‰ˆæœ¬ å…ˆä¸Šä»£ç ï¼š\npackage ticktock import ( \u0026quot;time\u0026quot; ) // è¿™ä¸ªç»“æ„ä½“å†…å®¹æ˜¯ä¸ºäº†å…¼å®¹ Ticker çš„ä½¿ç”¨æ–¹å¼ type tickerStart struct { C chan time.Time ticker *time.Ticker close chan struct{} } func NewTickerStart(d time.Duration) *tickerStart { // è¿™é‡Œæˆ‘ä»¬åˆ›å»ºçš„ channel è®¾äº†ä¸€ä¸ª bufferï¼ŒåŸå› æ˜¯æˆ‘ä»¬éœ€è¦ // åœ¨ä¸‹é¢ Start æ–¹æ³•ä¸­åŠæ—¶æ¨é€å½“å‰æ—¶é—´è€Œä¸è‡³äºå µå¡ã€‚ // c := make(chan time.Time, 1) return \u0026amp;tickerStart{ticker: time.NewTicker(d), C: c, close: make(chan struct{})} } // è¿™æ˜¯æˆ‘ä»¬æ ¸å¿ƒçš„æ–¹æ³• func (ts *tickerStart) Start() { ts.C \u0026lt;- time.Now() // é¦–æ¬¡è§¦å‘å…³é”® go func() { for { select { case _, ok := \u0026lt;-ts.close: // ç”¨äºå…³é—­è¿™ä¸ª goroutine if !ok { return } case t := \u0026lt;-ts.ticker.C: // æŠŠgoåŸç”Ÿå®šæ—¶å™¨ push çš„æ—¶é—´æ¨é€åˆ°æˆ‘ä»¬å®šä¹‰çš„ time channel ä¸­ ts.C \u0026lt;- t } } }() } // å…¼å®¹ ticker func (ts *tickerStart) Reset(d time.Duration) { ts.ticker.Reset(d) } // å…¼å®¹ ticker func (ts *tickerStart) Stop() { ts.ticker.Stop() close(ts.close) } ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;sync\u0026quot; \u0026quot;time\u0026quot; \u0026quot;ticktock\u0026quot; ) func main() { fmt.Println(\u0026quot;start_time#\u0026quot;, time.Now().Unix()) chanClose := make(chan struct{}) tts := ticktock.NewTickerStart(5 * time.Second) tts.Start() var wg sync.WaitGroup wg.Add(1) go func() { defer wg.Done() for { select { case \u0026lt;-chanClose: return case \u0026lt;-tts.C: fmt.Println(\u0026quot;run_time#\u0026quot;, time.Now().Unix()) } } }() go func() { time.Sleep(10 * time.Second) chanClose \u0026lt;- struct{}{} tts.Stop() }() wg.Wait() } æ‰§è¡Œè¿”å›å†…å®¹å¦‚ä¸‹ï¼š\nstart_time# 1656861872 run_time# 1656861872 run_time# 1656861877 å¯ä»¥çœ‹åˆ°ï¼Œå’Œæˆ‘ä»¬æƒ³è¦çš„ä¸€è‡´ã€‚ä½†å’Œå®˜æ–¹ç»™å‡ºçš„ä¸åŒæˆ‘ä»¬ä¸ä¼šå µå¡ goroutine ã€‚\næœ€å è¿™æ˜¯æˆ‘åœ¨å†™è™šæ‹Ÿè´§å¸è´¦æˆ·ç›‘æ§é¡¹ç›®ä¸­ç¢°åˆ°çš„å…¶ä¸­ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿä¼šåœ¨åç»­çš„æ–‡ç« ä¸­å†™ä¸€å†™æˆ‘ç¢°åˆ°çš„å…¶ä»–é—®é¢˜ã€‚å½“ç„¶è¿™ä¸ªé¡¹ç›®ä¼šå¼€æºï¼Œå¯ä»¥å…³æ³¨æˆ‘çš„ github GanymedeNil\u0026rsquo;s githubã€‚\næœ€åçš„æœ€å é¡ºä¾¿ç»™è‡ªå·±å®£ä¼ ä¸€ä¸‹ï¼Œå¦‚æœä½ å¯¹æˆ‘æ„Ÿå…´è¶£æˆ–è€…æƒ³å’Œæˆ‘èŠèŠå¯ä»¥åŠ æˆ‘å¾®ä¿¡ ganymede-nilå’Œä¸‹è½½æˆ‘çš„ç®€å†ï¼Œæ‰¾å·¥ä½œä¸­ï¼Œæ³¨æ˜åŠ æˆ‘çš„ç†ç”±ï¼Œé˜²æ­¢è¢«æˆ‘å½“ä½œè¥é”€äººå‘˜ğŸ˜Šã€‚\n","id":11,"section":"posts","summary":"\u003cp\u003eä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯åœ¨å†™ä¸€ä¸ªå…³äºè™šæ‹Ÿè´§å¸è´¦æˆ·ç›‘æ§çš„é¡¹ç›®æ—¶ä½¿ç”¨ Ticker çš„é—®é¢˜ã€‚\u003c/p\u003e","tags":["go"],"title":"æ”¯æŒé¦–æ¬¡è§¦å‘çš„ Go Ticker","uri":"https://www.ganymedenil.com/2022/07/04/support-for-first-trigger-go-ticker.html","year":"2022"},{"content":"å¾®æœåŠ¡æ˜¯å›´ç»•ä¸šåŠ¡é¢†åŸŸå»ºæ¨¡å¯ç‹¬ç«‹å‘å¸ƒçš„æœåŠ¡ã€‚æœåŠ¡å°è£…äº†å¯¹åº”åŠŸèƒ½å¹¶å¯ä»¥é€šè¿‡ç½‘ç»œè¢«å…¶ä»–æœåŠ¡è®¿é—®ã€‚ä»å¤–éƒ¨æ¥çœ‹ï¼Œå•ä¸ªå¾®æœåŠ¡è¢«è§†ä¸ºä¸€ä¸ªé»‘ç›’å­ã€‚å®ƒä½¿ç”¨æœ€åˆé€‚çš„åè®®åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œç«¯ç‚¹(ä¾‹å¦‚ï¼Œé˜Ÿåˆ—æˆ–REST API)ä¸Šæ‰¿è½½ä¸šåŠ¡åŠŸèƒ½ã€‚æ¶ˆè´¹è€…ï¼Œæ— è®ºä»–ä»¬æ˜¯å…¶ä»–å¾®æœåŠ¡è¿˜æ˜¯å…¶ä»–ç±»å‹çš„ç¨‹åº\u0026hellip;\nå¾®æœåŠ¡æ¦‚è§ˆ å¾®æœåŠ¡æ˜¯å›´ç»•ä¸šåŠ¡é¢†åŸŸå»ºæ¨¡å¯ç‹¬ç«‹å‘å¸ƒçš„æœåŠ¡ã€‚æœåŠ¡å°è£…äº†å¯¹åº”åŠŸèƒ½å¹¶å¯ä»¥é€šè¿‡ç½‘ç»œè¢«å…¶ä»–æœåŠ¡è®¿é—®ã€‚\nä»å¤–éƒ¨æ¥çœ‹ï¼Œå•ä¸ªå¾®æœåŠ¡è¢«è§†ä¸ºä¸€ä¸ªé»‘ç›’å­ã€‚å®ƒä½¿ç”¨æœ€åˆé€‚çš„åè®®åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œç«¯ç‚¹(ä¾‹å¦‚ï¼Œé˜Ÿåˆ—æˆ–REST API)ä¸Šæ‰¿è½½ä¸šåŠ¡åŠŸèƒ½ã€‚æ¶ˆè´¹è€…ï¼Œæ— è®ºä»–ä»¬æ˜¯å…¶ä»–å¾®æœåŠ¡è¿˜æ˜¯å…¶ä»–ç±»å‹çš„ç¨‹åºï¼Œéƒ½é€šè¿‡è¿™äº›è”ç½‘çš„ç«¯ç‚¹æ¥è®¿é—®è¿™ä¸ªåŠŸèƒ½ã€‚å†…éƒ¨å®ç°ç»†èŠ‚(å¦‚ç¼–å†™æœåŠ¡çš„æŠ€æœ¯æˆ–å­˜å‚¨æ•°æ®çš„æ–¹å¼)å®Œå…¨å¯¹å¤–éƒ¨ä¸–ç•Œéšè—ã€‚è¿™æ„å‘³ç€å¾®æœåŠ¡æ¶æ„åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹é¿å…ä½¿ç”¨å…±äº«æ•°æ®åº“;ç›¸åï¼Œæ¯ä¸ªå¾®æœåŠ¡åœ¨éœ€è¦çš„åœ°æ–¹å°è£…è‡ªå·±çš„æ•°æ®åº“ã€‚\nä¿¡æ¯éšè—æŒ‡çš„æ˜¯å°½å¯èƒ½å°‘çš„å¯¹å¤–éƒ¨æ¥å£æš´éœ²æœåŠ¡ä¿¡æ¯ã€‚å¾®æœåŠ¡å…¬å¼€çš„ç½‘ç»œæ¥å£åªè¦å‘åå…¼å®¹ï¼Œå°±å¯ä»¥è‡ªç”±çš„å¯¹æœåŠ¡å†…éƒ¨è¿›è¡Œæ›´æ”¹ã€‚è¿™ä¹Ÿç¬¦åˆç³»ç»Ÿçš„é«˜å†…èšä½è€¦åˆè®¾è®¡æ€è·¯ã€‚\nå¾®æœåŠ¡çš„å…³é”®æ¦‚å¿µ ç‹¬ç«‹å¯éƒ¨ç½² æˆ‘ä»¬å¯ä»¥å¯¹å¾®æœåŠ¡è¿›è¡Œæ›´æ”¹ã€éƒ¨ç½²å¹¶å°†æ›´æ”¹å‘å¸ƒç»™æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œè€Œæ— éœ€éƒ¨ç½²ä»»ä½•å…¶ä»–å¾®æœåŠ¡ã€‚\nå›´ç»•ä¸šåŠ¡é¢†åŸŸå»ºæ¨¡ å¯¹äºå¾®æœåŠ¡æ¶æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨åƒé¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ€æƒ³æ¥å®šä¹‰æˆ‘ä»¬çš„æœåŠ¡è¾¹ç•Œã€‚é€šè¿‡å›´ç»•ä¸šåŠ¡é¢†åŸŸå»ºæ¨¡æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°æ¨å‡ºæ–°åŠŸèƒ½å¹¶ä»¥ä¸åŒæ–¹å¼é‡ç»„å¾®æœåŠ¡ï¼Œä»è€Œä¸ºæˆ‘ä»¬çš„ç”¨æˆ·æä¾›æ–°åŠŸèƒ½ã€‚\nå¯¹äºå¾®æœåŠ¡ï¼Œæˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘ä¸šåŠ¡åŠŸèƒ½çš„é«˜å†…èšæ€§ï¼Œè€Œä¸æ˜¯æŠ€æœ¯åŠŸèƒ½çš„é«˜å†…èšæ€§ã€‚\næ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€ å¾®æœåŠ¡åº”è¯¥é¿å…ä½¿ç”¨å…±äº«æ•°æ®åº“ã€‚\néšè—å¾®æœåŠ¡ä¸­çš„å†…éƒ¨çŠ¶æ€ç±»ä¼¼äºé¢å‘å¯¹è±¡ï¼ˆOOï¼‰ç¼–ç¨‹ä¸­çš„å°è£…å®è·µã€‚\nå°ºå¯¸ Thoughtworks çš„æŠ€æœ¯æ€»ç›‘ James Lewis æ›¾è¯´è¿‡â€œå¾®æœåŠ¡åº”è¯¥å’Œä½ çš„è„‘è¢‹ä¸€æ ·å¤§â€ã€‚\nå¾®æœåŠ¡æ¨¡å¼ï¼ˆManning Publicationsï¼‰çš„ä½œè€… Chris Richardson æ›¾ç»è¯´è¿‡çš„â€”â€”å¾®æœåŠ¡çš„ç›®æ ‡æ˜¯â€œå°½å¯èƒ½å°åœ°æ¥å£â€ ã€‚ å°ºå¯¸å¹¶ä¸éœ€è¦å¤ªæ‹…å¿ƒï¼Œæ¯”è¿™ä¸ªæ›´éœ€è¦å…³æ³¨çš„ä¸¤ä»¶äº‹\nä½ å¯ä»¥å¤„ç†å¤šå°‘ä¸ªå¾®æœåŠ¡ å¢é‡è¿ç§»åˆ°å¾®æœåŠ¡æ¶æ„ çµæ´»æ€§ James Lewis è¯´è¿‡ â€œmicroservices buy you options.â€ã€‚è¿™å¥è¯å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå¾®æœåŠ¡æ¶æ„æ˜¯æœ‰æˆæœ¬çš„ï¼Œä½ å¿…é¡»å†³å®šä»˜å‡ºçš„æˆæœ¬æ˜¯å¦å€¼å¾—ä½ é€‰æ‹©çš„é€‰é¡¹ã€‚\nè¶Šå‘å¾®æœåŠ¡æ¼”è¿›ï¼Œåˆ™çµæ´»æ€§ä¼šå¤§å¹…æå‡ï¼Œè€Œè¿™ä¹Ÿä¼šå¢åŠ æ›´å¤šçš„ç—›ç‚¹ã€‚æ‰€ä»¥å¼ºçƒˆæå€¡é€æ­¥é‡‡ç”¨å¾®æœåŠ¡ã€‚ç„¶åæ—¶åˆ»è¯„ä¼°å¼•å…¥å¾®æœåŠ¡çš„å½±å“ï¼Œå¹¶åœ¨éœ€è¦æ—¶åœä¸‹æ¥ã€‚\næ¶æ„å’Œç»„ç»‡çš„ä¸€è‡´æ€§ ä¸€èˆ¬çš„Webä¸šåŠ¡éƒ½ä¼šæœ‰ä¸€ä¸ªä¸‰å±‚æ¶æ„â€”â€”å‰ç«¯å›¢é˜Ÿçš„UIã€åç«¯è´Ÿè´£çš„ä¸šåŠ¡é€»è¾‘å±‚ä»¥åŠè´Ÿè´£ç®¡ç†æ•°æ®å­˜å‚¨çš„DBAã€‚\nå¦‚æœéœ€è¦å¼€å‘ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦æ‹†åˆ†éœ€æ±‚åˆ°ä¸‰ä¸ªå›¢é˜Ÿï¼Œç„¶åéœ€è¦å„ä¸ªå›¢é˜Ÿä»¥æ­£ç¡®çš„é¡ºåºè¿›è¡Œéƒ¨ç½²ã€‚è¿™æ˜¯ä¸€ç§ç›¸å…³æŠ€æœ¯å†…èšåº¦é«˜ä½†ä¸šåŠ¡åŠŸèƒ½å†…èšåº¦ä½çš„æ¶æ„ã€‚\nè¿™ç§ç»„ç»‡æ–¹å¼åœ¨å¾®æœåŠ¡åœºæ™¯ä¸‹å˜çš„ä¸å¤ªé€‚ç”¨ï¼Œæˆ‘ä»¬éœ€è¦å‚ç›´ä¸šåŠ¡çº¿åˆ†è§£ç»„ç»‡å’Œæ¶æ„ã€‚\nè¿™æ ·å˜æ›´åï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡é¢†åŸŸæˆä¸ºæ¨åŠ¨æˆ‘ä»¬ç³»ç»Ÿæ¶æ„çš„ä¸»è¦åŠ›é‡ï¼Œèƒ½å¤Ÿæ›´å®¹æ˜“åœ°è¿›è¡Œæ›´æ”¹ï¼Œå¹¶ä½¿æˆ‘ä»¬æ›´å®¹æ˜“å°†å›¢é˜Ÿä¸ç»„ç»‡å†…çš„ä¸šåŠ¡çº¿ä¿æŒä¸€è‡´ã€‚\nTeam Topologies å‡ºå“çš„ã€Šé«˜æ•ˆèƒ½å›¢é˜Ÿæ¨¡å¼ï¼šæ”¯æŒè½¯ä»¶å¿«é€Ÿäº¤ä»˜çš„ç»„ç»‡æ¶æ„ã€‹ä¸€ä¹¦ä¸­å°±ä»‹ç»äº†è¿™ç§ç»„ç»‡æ–¹å¼çš„æ¦‚å¿µï¼š A stream-aligned team is a team aligned to a single, valuable stream of work\u0026hellip;[T]he team is empowered to build and deliver customer or user value as quickly, safely, and independently as possible, without requiring hand-offs to other teams to perform parts of the work.\nå•ä½“ Single-Process Monolith Ruby on Rails çš„åˆ›å»ºè€… David Heinemeier Hansson æœ‰æ•ˆåœ°è¯æ˜äº†è¿™ç§æ¶æ„å¯¹å°å‹ç»„ç»‡æœ‰æ„ä¹‰ã€‚\nModular Monolith å¯¹äºè®¸å¤šç»„ç»‡æ¥è¯´ï¼Œæ¨¡å—åŒ–å•ä½“å¯ä»¥æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å¦‚æœæ¨¡å—è¾¹ç•Œå®šä¹‰è‰¯å¥½ï¼Œå®ƒå¯ä»¥æ”¯æŒé«˜åº¦çš„å¹¶è¡Œå·¥ä½œï¼ŒåŒ\næ—¶é€šè¿‡ä½¿ç”¨æ›´ç®€å•çš„éƒ¨ç½²æ‹“æ‰‘æ¥é¿å…æ›´åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„çš„æŒ‘æˆ˜ã€‚ æ¨¡å—åŒ–å•ä½“æ¶æ„çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯æ•°æ®åº“å¾€å¾€ç¼ºä¹æˆ‘ä»¬åœ¨ä»£ç çº§åˆ«çš„æ‹†åˆ†ï¼Œå¦‚æœä½ æƒ³åœ¨æœªæ¥æ‹†åˆ†å•ä½“æ¶æ„ï¼Œåˆ™ä¼šé¢ä¸´é‡å¤§æŒ‘æˆ˜ã€‚\næˆ‘ä»¬ä¹Ÿçœ‹åˆ°è¿‡ä¸€äº›å›¢é˜Ÿé€šè¿‡å°†æ•°æ®åº“æŒ‰ç…§ä¸æ¨¡å—ç›¸åŒçš„æ–¹å¼æ¥æ‹†åˆ†è¿›ä¸€æ­¥æ¨åŠ¨æ¨¡å—åŒ–å•ä½“çš„æƒ³æ³•\nDistributed Monolith åˆ†å¸ƒå¼å•ä½“æ˜¯ä¸€ä¸ªç”±å¤šä¸ªæœåŠ¡ç»„æˆçš„ç³»ç»Ÿï¼Œä½†æ— è®ºå‡ºäºä½•ç§åŸå› ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½å¿…é¡»éƒ¨ç½²åœ¨ä¸€èµ·ã€‚åˆ†å¸ƒå¼å•ä½“æ¶æ„å¯èƒ½å¾ˆç¬¦åˆ SOA çš„å®šä¹‰ï¼Œä½†å¾€å¾€æ— æ³•å…‘ç° SOA çš„æ‰¿è¯ºã€‚ä»¥æˆ‘çš„ç»éªŒï¼Œåˆ†å¸ƒå¼å•ä½“å…·æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰€æœ‰ç¼ºç‚¹ï¼Œä¹Ÿå…·æœ‰å•ä½“çš„ç¼ºç‚¹ï¼Œä½†æ²¡æœ‰è¶³å¤Ÿçš„ä¼˜ç‚¹ã€‚\nåˆ†å¸ƒå¼å•ä½“é€šå¸¸å‡ºç°åœ¨æ²¡æœ‰è¶³å¤Ÿå…³æ³¨ä¿¡æ¯éšè—å’Œä¸šåŠ¡åŠŸèƒ½å‡èšåŠ›ç­‰æ¦‚å¿µçš„ç¯å¢ƒä¸­ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œé«˜åº¦è€¦åˆçš„ä½“ç³»ç»“æ„ä¼šå¯¼è‡´æ›´æ”¹è·¨è¶ŠæœåŠ¡è¾¹ç•Œï¼Œè€Œçœ‹ä¼¼æ— å®³çš„æœ¬åœ°èŒƒå›´å†…çš„æ›´æ”¹ä¼šç ´åç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚\nå•ä½“å’Œäº¤ä»˜ç«äº‰ ä¸åŒçš„å¼€å‘äººå‘˜æƒ³è¦æ›´æ”¹åŒä¸€æ®µä»£ç ï¼Œä¸åŒçš„å›¢é˜Ÿæƒ³è¦åœ¨ä¸åŒçš„æ—¶é—´æ¨å‡ºåŠŸèƒ½ï¼ˆæˆ–å»¶è¿Ÿéƒ¨ç½²ï¼‰ï¼Œä»¥åŠå›´ç»•è°æ‹¥æœ‰ä»€ä¹ˆä»¥åŠè°åšå†³å®šçš„æ··ä¹±å±€é¢ã€‚å¤§é‡ç ”ç©¶è¡¨æ˜ï¼Œæ‰€æœ‰æƒç•Œé™æ··æ·†çš„æŒ‘æˆ˜ã€‚æ­¤é—®é¢˜ç§°ä¸ºäº¤ä»˜ç«äº‰ã€‚\næ‹¥æœ‰ä¸€ä¸ªå•ä½“å¹¶ä¸æ„å‘³ç€ä½ è‚¯å®šä¼šé¢ä¸´äº¤ä»˜ç«äº‰çš„æŒ‘æˆ˜ï¼Œå°±åƒæ‹¥æœ‰ä¸€ä¸ªå¾®æœåŠ¡æ¶æ„æ„å‘³ç€ä½ æ°¸è¿œä¸ä¼šé¢ä¸´è¿™ä¸ªé—®é¢˜ä¸€æ ·ã€‚ä½†æ˜¯å¾®æœåŠ¡æ¶æ„ç¡®å®ä¸ºæ‚¨æä¾›äº†æ›´å…·ä½“çš„è¾¹ç•Œï¼Œå¯ä»¥å›´ç»•è¿™äº›è¾¹ç•Œåœ¨ç³»ç»Ÿä¸­ç»˜åˆ¶æ‰€æœ‰æƒçš„åˆ†ç•Œçº¿ï¼Œä»è€Œåœ¨å‡å°‘æ­¤é—®é¢˜æ—¶ä¸ºä½ æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚\nå•ä½“çš„ä¼˜åŠ¿ å•ä½“ä¹Ÿæœ‰å¾ˆå¤šä¼˜ç‚¹ã€‚æ›´ç®€å•çš„éƒ¨ç½²æ‹“æ‰‘å¯ä»¥é¿å…è®¸å¤šä¸åˆ†å¸ƒå¼ç³»ç»Ÿç›¸å…³çš„é™·é˜±ã€‚è¿™å¯ä»¥ä½¿å¼€å‘äººå‘˜çš„å·¥ä½œæµç¨‹æ›´åŠ ç®€å•ï¼Œç›‘æ§ã€æ•…éšœæ’é™¤å’Œç«¯åˆ°ç«¯æµ‹è¯•ç­‰ä¹Ÿå¯ä»¥å¤§å¤§ç®€åŒ–ã€‚\nå•ä½“åº”ç”¨è¿˜å¯ä»¥ç®€åŒ–å•ä½“åº”ç”¨å†…éƒ¨çš„ä»£ç é‡ç”¨ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é‡ç”¨ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å†³å®šæ˜¯è¦å¤åˆ¶ä»£ç ã€æ‹†åˆ†åº“è¿˜æ˜¯å°†å…±äº«åŠŸèƒ½æ¨é€åˆ°æœåŠ¡ä¸­ã€‚æœ‰äº†å•ä½“ï¼Œæˆ‘ä»¬çš„é€‰æ‹©å°±ç®€å•å¤šäº†ï¼Œå¾ˆå¤šäººå–œæ¬¢è¿™ç§ç®€å•â€”â€”æ‰€æœ‰çš„ä»£ç éƒ½åœ¨é‚£é‡Œï¼›ç”¨å®ƒï¼\nå…³äºä»£ç é‡ç”¨çš„é—®é¢˜ï¼Œè°·æ­Œæå‡ºçš„å•ä¸€ä»“åº“ï¼ˆæ‰€æœ‰é¡¹ç›®åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼‰å…¶å®å¯ä»¥è§£å†³ï¼Œä½†æ˜¯è¿™ä¹Ÿå°±å¯¼è‡´å¼€å‘æµç¨‹å˜çš„æ›´å¤æ‚ã€‚\næŠ€æœ¯é‡‡ç”¨ å½“ä½ å‡çº§ä½ çš„å¾®æœåŠ¡æ¶æ„æ—¶ï¼Œä½ åº”è¯¥ä¸æ–­åœ°å¯»æ‰¾ç”±æ—¥ç›Šåˆ†æ•£çš„ç³»ç»Ÿå¼•èµ·çš„é—®é¢˜ï¼Œç„¶åå¯»æ‰¾å¯èƒ½æœ‰å¸®åŠ©çš„æŠ€æœ¯ã€‚è€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±å¼€å§‹ä½¿ç”¨å„ç§æ–°çš„æŠ€æœ¯ã€‚\næ—¥å¿—èšåˆä¸åˆ†å¸ƒå¼è·Ÿè¸ª éšç€ä½ ç®¡ç†çš„å¾®æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œä½ å°±å¾ˆéš¾äº†è§£ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„è¡¨ç°ã€‚è¿™ä¹Ÿä¼šå¯¼è‡´çº¿ä¸Šæ•…éšœæ’é™¤å˜å¾—æ›´åŠ å›°éš¾ã€‚æˆ‘ä»¬ä¸»å¼ æ—¥å¿—èšåˆç³»ç»Ÿä½œä¸ºé‡‡ç”¨å¾®æœåŠ¡æ¶æ„çš„å…ˆå†³æ¡ä»¶ã€‚\nè¿™äº›ç³»ç»Ÿå…è®¸ä½ æ”¶é›†å’Œæ±‡æ€»æ‰€æœ‰æœåŠ¡çš„æ—¥å¿—ï¼Œä¸ºä½ æä¾›ä¸€ä¸ªå¯ä»¥åˆ†ææ—¥å¿—çš„ä¸­å¿ƒä½ç½®ï¼Œç”šè‡³æˆä¸ºä¸»åŠ¨è­¦æŠ¥æœºåˆ¶çš„ä¸€éƒ¨åˆ†ã€‚è¯¥é¢†åŸŸçš„è®¸å¤šé€‰æ‹©å¯æ»¡è¶³å¤šç§æƒ…å†µã€‚\nä½ å¯ä»¥é€šè¿‡å®ç°ç›¸å…³ ID ä½¿è¿™äº›æ—¥å¿—èšåˆå·¥å…·æ›´åŠ æœ‰ç”¨ï¼Œå…¶ä¸­å•ä¸ª ID ç”¨äºä¸€ç»„ç›¸å…³çš„æœåŠ¡è°ƒç”¨ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·äº¤äº’è€Œè§¦å‘çš„è°ƒç”¨é“¾ã€‚é€šè¿‡å°†æ­¤ ID è®°å½•ä¸ºæ¯ä¸ªæ—¥å¿—æ¡ç›®çš„ä¸€éƒ¨åˆ†ï¼Œéš”ç¦»ä¸ç»™å®šè°ƒç”¨æµç›¸å…³è”çš„æ—¥å¿—å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œè¿™åè¿‡æ¥åˆä½¿æ•…éšœæ’é™¤æ›´åŠ å®¹æ˜“ã€‚\nä½ çš„ç³»ç»Ÿå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå› æ­¤å¿…é¡»è€ƒè™‘ä¸€äº›å·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥è®©ä½ æ›´å¥½åœ°æ¢ç´¢ç³»ç»Ÿæ­£åœ¨åšä»€ä¹ˆï¼Œæä¾›è·¨å¤šä¸ªæœåŠ¡åˆ†æè·Ÿè¸ªã€æ£€æµ‹ç“¶é¢ˆä»¥åŠæä¾›ç»™ä½ ä¸äº†è§£çš„ç³»ç»Ÿé—®é¢˜çš„èƒ½åŠ›ã€‚å¼€æºå·¥å…·å¯ä»¥æä¾›å…¶ä¸­ä¸€äº›åŠŸèƒ½ã€‚ä¸€ä¸ªä¾‹å­æ˜¯Jaegerï¼Œå®ƒä¸“æ³¨äºç­‰å¼çš„åˆ†å¸ƒå¼è·Ÿè¸ªæ–¹é¢ã€‚\nå®¹å™¨å’Œ Kubernetes ä¸è¦æ€¥äºé‡‡ç”¨ Kubernetesï¼Œç”šè‡³æ˜¯å®¹å™¨ã€‚ä¸æ›´ä¼ ç»Ÿçš„éƒ¨ç½²æŠ€æœ¯ç›¸æ¯”ï¼Œå®ƒä»¬ç»å¯¹å…·æœ‰æ˜¾ç€ä¼˜åŠ¿ï¼Œä½†å¦‚æœä½ åªæœ‰å‡ ä¸ªå¾®æœåŠ¡ï¼Œåˆ™å¾ˆéš¾è¯æ˜é‡‡ç”¨å®ƒä»¬çš„åˆç†æ€§ã€‚åœ¨ç®¡ç†éƒ¨ç½²çš„å¼€é”€å¼€å§‹å˜å¾—ä»¤äººå¤´ç–¼ä¹‹åï¼Œå¼€å§‹è€ƒè™‘æœåŠ¡çš„å®¹å™¨åŒ–å’Œ Kubernetes çš„ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æœ€ç»ˆè¿™æ ·åšäº†ï¼Œè¯·å°½æœ€å¤§åŠªåŠ›ç¡®ä¿æœ‰ä¸“ä¸šäººå£«æ­£åœ¨ä¸ºä½ ç»´æŠ¤ Kubernetes é›†ç¾¤ï¼Œå¯èƒ½æ˜¯é€šè¿‡ä½¿ç”¨å…¬å…±äº‘æä¾›å•†ä¸Šçš„æ‰˜ç®¡æœåŠ¡ã€‚è¿è¡Œä½ è‡ªå·±çš„ Kubernetes é›†ç¾¤å¯èƒ½éœ€è¦å¤§é‡å·¥ä½œï¼\næµå¼ä¼ è¾“ Apache Kafkaå·²æˆä¸ºå¾®æœåŠ¡ç¯å¢ƒä¸­æµæ•°æ®çš„é€‰æ‹©ï¼Œè¿™æ˜¯æœ‰å……åˆ†ç†ç”±çš„ã€‚æ¶ˆæ¯æŒä¹…æ€§ã€å‹ç¼©ä»¥åŠå¤„ç†å¤§é‡æ¶ˆæ¯çš„æ‰©å±•èƒ½åŠ›ç­‰åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚Kafka å·²å¼€å§‹ä»¥ KSQLDB çš„å½¢å¼æ·»åŠ æµå¤„ç†åŠŸèƒ½ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å°†å…¶ä¸Apache Flinkç­‰ä¸“ç”¨æµå¤„ç†è§£å†³æ–¹æ¡ˆä¸€èµ·ä½¿ç”¨ã€‚Debeziumæ˜¯ä¸€ç§å¼€æºå·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©é€šè¿‡ Kafka ä»ç°æœ‰æ•°æ®æºæµå¼ä¼ è¾“æ•°æ®ï¼Œå¸®åŠ©ä¼ ç»Ÿæ•°æ®æºå¯ä»¥æˆä¸ºåŸºäºæµçš„æ¶æ„çš„ä¸€éƒ¨åˆ†ã€‚\nå…¬å…±äº‘å’Œæ— æœåŠ¡å™¨ å…¬å…±äº‘æä¾›å•†æä¾›å¤§é‡æ‰˜ç®¡æœåŠ¡ï¼Œä»æ‰˜ç®¡æ•°æ®åº“å®ä¾‹æˆ– Kubernetes é›†ç¾¤åˆ°æ¶ˆæ¯é˜Ÿåˆ—æˆ–åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚é€šè¿‡ä½¿ç”¨è¿™äº›æ‰˜ç®¡æœåŠ¡ï¼Œä½ å¯ä»¥å°†å¤§é‡å·¥ä½œè½¬å«ç»™å¯ä»¥æ›´å¥½åœ°å¤„ç†è¿™äº›ä»»åŠ¡çš„ç¬¬ä¸‰æ–¹ã€‚\nåŠŸèƒ½å³æœåŠ¡ (FaaS) å¹³å°ç‰¹åˆ«å—å…³æ³¨ï¼Œå› ä¸ºå®ƒä»¬å›´ç»•ä»£ç éƒ¨ç½²æä¾›äº†å¾ˆå¥½çš„æŠ½è±¡ã€‚ä½ ä¸å¿…æ‹…å¿ƒéœ€è¦å¤šå°‘å°æœåŠ¡å™¨æ¥è¿è¡ŒæœåŠ¡ï¼Œåªéœ€éƒ¨ç½²ä»£ç å¹¶è®©åº•å±‚å¹³å°æŒ‰éœ€å¤„ç†ä»£ç å®ä¾‹ã€‚\nå¾®æœåŠ¡çš„ä¼˜åŠ¿ æŠ€æœ¯å¼‚è´¨æ€§ ä¸€ä¸ªç”±å¤šä¸ªå¾®æœåŠ¡åä½œç»„æˆçš„ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šåœ¨æ¯ä¸ªå¾®æœåŠ¡å†…éƒ¨ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸ºæ¯é¡¹å·¥ä½œé€‰æ‹©æ­£ç¡®çš„å·¥å…·ï¼Œè€Œä¸å¿…é€‰æ‹©ä¸€ç§æ›´æ ‡å‡†åŒ–ã€ä¸€åˆ€åˆ‡çš„æ–¹æ³•ã€‚ å¾®æœåŠ¡å¯ä»¥è®©ä½ æ›´è½»æ¾åœ°æ‹¥æŠ±ä¸åŒçš„æŠ€æœ¯\nå€ŸåŠ©å¾®æœåŠ¡ï¼Œæˆ‘ä»¬è¿˜èƒ½å¤Ÿæ›´å¿«åœ°é‡‡ç”¨æŠ€æœ¯å¹¶äº†è§£æ–°çš„è¿›æ­¥å¦‚ä½•å¸®åŠ©æˆ‘ä»¬ã€‚å°è¯•å’Œé‡‡ç”¨æ–°æŠ€æœ¯çš„æœ€å¤§éšœç¢ä¹‹ä¸€æ˜¯ä¸ä¹‹ç›¸å…³çš„é£é™©ã€‚å¯¹äºå•ä½“åº”ç”¨ç¨‹åºï¼Œå¦‚æœæˆ‘æƒ³å°è¯•ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ã€æ•°æ®åº“æˆ–æ¡†æ¶ï¼Œä»»ä½•æ›´æ”¹éƒ½ä¼šå½±å“æˆ‘çš„å¤§éƒ¨åˆ†ç³»ç»Ÿã€‚æœ‰äº†ä¸€ä¸ªç”±å¤šç§æœåŠ¡ç»„æˆçš„ç³»ç»Ÿï¼Œæˆ‘æœ‰å¤šä¸ªæ–°åœ°æ–¹å¯ä»¥å°è¯•ä¸€é¡¹æ–°æŠ€æœ¯ã€‚æˆ‘å¯ä»¥é€‰æ‹©é£é™©æœ€ä½çš„å¾®æœåŠ¡å¹¶åœ¨é‚£é‡Œä½¿ç”¨è¯¥æŠ€æœ¯ï¼Œå› ä¸ºæˆ‘çŸ¥é“æˆ‘å¯ä»¥é™åˆ¶ä»»ä½•æ½œåœ¨çš„è´Ÿé¢å½±å“ã€‚è®¸å¤šç»„ç»‡å‘ç°è¿™ç§æ›´å¿«åœ°å¸æ”¶æ–°æŠ€æœ¯çš„èƒ½åŠ›æ˜¯ä¸€ä¸ªçœŸæ­£çš„ä¼˜åŠ¿ã€‚\né²æ£’æ€§ ä¸€ç§æé«˜åº”ç”¨ç¨‹åºç¨³å¥æ€§çš„å…³é”®æ¦‚å¿µæ˜¯éš”æ¿ã€‚ç³»ç»Ÿçš„ä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šå‘ç”Ÿæ•…éšœï¼Œä½†åªè¦è¯¥æ•…éšœæ²¡æœ‰çº§è”ï¼Œä½ å°±å¯ä»¥éš”ç¦»é—®é¢˜ï¼Œç³»ç»Ÿçš„å…¶ä½™éƒ¨åˆ†å¯ä»¥ç»§ç»­å·¥ä½œã€‚æœåŠ¡è¾¹ç•Œæˆä¸ºæ˜æ˜¾çš„éš”æ¿ã€‚åœ¨å•ä½“æœåŠ¡ä¸­ï¼Œå¦‚æœæœåŠ¡å¤±è´¥ï¼Œä¸€åˆ‡éƒ½ä¼šåœæ­¢å·¥ä½œã€‚ä½¿ç”¨å•ä½“ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤šå°æœºå™¨ä¸Šè¿è¡Œä»¥å‡å°‘å¤±è´¥çš„æœºä¼šï¼Œä½†æ˜¯ä½¿ç”¨å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºç³»ç»Ÿæ¥å¤„ç†æŸäº›ç»„æˆæœåŠ¡çš„å®Œå…¨æ•…éšœå¹¶ç›¸åº”åœ°è¿›è¡Œé™çº§ã€‚\nç„¶è€Œï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦å°å¿ƒã€‚ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„å¾®æœåŠ¡ç³»ç»Ÿèƒ½å¤Ÿæ­£ç¡®åœ°æ¥å—è¿™ç§æ”¹è¿›çš„å¥å£®æ€§ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£åˆ†å¸ƒå¼ç³»ç»Ÿå¿…é¡»å¤„ç†çš„æ–°æ•…éšœæºã€‚ç½‘ç»œä¼šå¤±è´¥ï¼Œæœºå™¨ä¹Ÿä¼šå¤±è´¥ã€‚æˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•å¤„ç†æ­¤ç±»æ•…éšœä»¥åŠè¿™äº›æ•…éšœå°†å¯¹æˆ‘ä»¬è½¯ä»¶çš„æœ€ç»ˆç”¨æˆ·äº§ç”Ÿçš„å½±å“ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚\nç¼©æ”¾ åœ¨ä¸€ä¸ªå¤§å‹çš„å•ä½“æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€èµ·æ‰©å±•æ‰€æœ‰å†…å®¹ã€‚ä¹Ÿè®¸æˆ‘ä»¬æ•´ä¸ªç³»ç»Ÿçš„ä¸€å°éƒ¨åˆ†åœ¨æ€§èƒ½ä¸Šå—åˆ°é™åˆ¶ï¼Œä½†å¦‚æœè¿™ç§è¡Œä¸ºè¢«é”å®šåœ¨ä¸€ä¸ªå·¨å¤§çš„å•ä½“åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰ä¸œè¥¿éƒ½ä½œä¸ºä¸€ä¸ªæ•´ä½“æ¥å¤„ç†ã€‚ä½¿ç”¨å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åªæ‰©å±•é‚£äº›éœ€è¦æ‰©å±•çš„æœåŠ¡ï¼Œå…è®¸æˆ‘ä»¬åœ¨æ›´å°ã€æ›´ä¸å¼ºå¤§çš„ç¡¬ä»¶ä¸Šè¿è¡Œç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚\næ˜“äºéƒ¨ç½² å¯¹ç™¾ä¸‡è¡Œå•ä½“åº”ç”¨ç¨‹åºçš„å•è¡Œæ›´æ”¹éœ€è¦éƒ¨ç½²æ•´ä¸ªåº”ç”¨ç¨‹åºæ‰èƒ½å‘å¸ƒæ›´æ”¹ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå½±å“å¤§ã€é£é™©é«˜çš„éƒ¨ç½²ã€‚åœ¨å®è·µä¸­ï¼Œç”±äºå¯ä»¥ç†è§£åˆ°çš„ææƒ§ï¼Œè¯¸å¦‚æ­¤ç±»çš„éƒ¨ç½²æœ€ç»ˆå¾ˆå°‘å‘ç”Ÿã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„æ›´æ”¹ä¼šåœ¨ä¸åŒç‰ˆæœ¬ä¹‹é—´ç»§ç»­ç´¯ç§¯ï¼Œç›´åˆ°æˆ‘ä»¬è¿›å…¥ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨ç¨‹åºçš„æ–°ç‰ˆæœ¬å‘ç”Ÿå¤§é‡æ›´æ”¹ã€‚ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚è¶Šå¤§ï¼Œæˆ‘ä»¬å‡ºé”™çš„é£é™©å°±è¶Šé«˜ï¼\nä½¿ç”¨å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å•ä¸ªæœåŠ¡è¿›è¡Œæ›´æ”¹å¹¶ç‹¬ç«‹äºç³»ç»Ÿçš„å…¶ä½™éƒ¨åˆ†è¿›è¡Œéƒ¨ç½²ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«åœ°éƒ¨ç½²æˆ‘ä»¬çš„ä»£ç ã€‚å¦‚æœç¡®å®å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå°†å…¶éš”ç¦»åˆ°å•ä¸ªæœåŠ¡ï¼Œä»è€Œè½»æ¾å®ç°å¿«é€Ÿå›æ»šã€‚è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ›´å¿«åœ°å°†æˆ‘ä»¬çš„æ–°åŠŸèƒ½æä¾›ç»™å®¢æˆ·ã€‚\nç»„ç»‡åè°ƒ æˆ‘ä»¬ä¸­çš„è®¸å¤šäººéƒ½ç»å†è¿‡ä¸å¤§å‹å›¢é˜Ÿå’Œå¤§å‹ä»£ç åº“ç›¸å…³çš„é—®é¢˜ã€‚å½“å›¢é˜Ÿåˆ†æ•£æ—¶ï¼Œè¿™äº›é—®é¢˜å¯èƒ½ä¼šåŠ å‰§ã€‚æˆ‘ä»¬è¿˜çŸ¥é“ï¼Œå¤„ç†è¾ƒå°ä»£ç åº“çš„è¾ƒå°å›¢é˜Ÿå¾€å¾€æ›´æœ‰æ•ˆç‡ã€‚\nå¾®æœåŠ¡ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°ä½¿æˆ‘ä»¬çš„æ¶æ„ä¸æˆ‘ä»¬çš„ç»„ç»‡ä¿æŒä¸€è‡´ï¼Œå¸®åŠ©æˆ‘ä»¬æœ€å¤§é™åº¦åœ°å‡å°‘åœ¨ä»»ä½•ä¸€ä¸ªä»£ç åº“ä¸Šå·¥ä½œçš„äººæ•°ï¼Œä»è€Œè¾¾åˆ°å›¢é˜Ÿè§„æ¨¡å’Œç”Ÿäº§åŠ›çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚å¾®æœåŠ¡è¿˜å…è®¸æˆ‘ä»¬éšç€ç»„ç»‡çš„å˜åŒ–è€Œæ”¹å˜æœåŠ¡çš„æ‰€æœ‰æƒâ€”â€”ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨æœªæ¥ä¿æŒæ¶æ„å’Œç»„ç»‡ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚\nå¯ç»„åˆæ€§ ä½¿ç”¨å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å…è®¸æˆ‘ä»¬çš„åŠŸèƒ½ä»¥ä¸åŒçš„æ–¹å¼ç”¨äºä¸åŒçš„ç›®çš„ã€‚å½“æˆ‘ä»¬è€ƒè™‘æ¶ˆè´¹è€…å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬çš„è½¯ä»¶æ—¶ï¼Œè¿™ä¸€ç‚¹å°¤å…¶é‡è¦ã€‚\nå¾®æœåŠ¡çš„åŠ£åŠ¿ å¼€å‘è€…ä½“éªŒ è¶Šæ¥è¶Šå¤šçš„æœåŠ¡ï¼Œè¿™è®©æœ¬åœ°å¼€å‘å˜çš„å¤æ‚ï¼Œæœ¬åœ°ç¯å¢ƒèƒ½è¿è¡ŒæœåŠ¡çš„æ•°é‡æ˜¯æœ‰é™çš„ æç«¯è§£å†³æ–¹æ¡ˆâ€œäº‘ä¸Šå¼€å‘â€ï¼Œä½†è¿™ä¼šå¯¼è‡´åé¦ˆå‘¨æœŸå—åˆ°å¾ˆå¤§å½±å“\né’ˆå¯¹äºå¾®æœåŠ¡å¼€å‘éƒ¨åˆ†è§£å†³æ–¹æ¡ˆç¡®å®å¾ˆå°‘ï¼Œæˆ‘äº†è§£çš„æ–¹æ¡ˆæ¯”å¦‚å»ºç«‹å†…ç½‘ç½‘å…³æ‰“é€šå¼€å‘ç½‘ç»œä¸ä¼ä¸šç½‘ç»œï¼Œç„¶åæ¥è¿›è¡Œå¼€å‘ã€‚ä½†è¿™ä¹Ÿåªæ˜¯è§£å†³äº†ç½‘ç»œé—®é¢˜ã€‚ä¹‹å‰äº†è§£è¿‡äº‘åŸç”Ÿå·¥å…·Nocalhostï¼Œå¯ä»¥ç¼©çŸ­æ•´ä¸ªå¼€å‘åé¦ˆå‘¨æœŸï¼Œå¹¶ä¸”å¯ä»¥å’ŒIDEç›´æ¥é›†æˆã€‚\næŠ€æœ¯è¿‡è½½ å¾®æœåŠ¡å¾ˆå¯èƒ½è®©ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™æ¯ä¸ªå¾®æœåŠ¡ã€åœ¨ä¸åŒçš„è¿è¡Œæ—¶ä¸Šè¿è¡Œæˆ–ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“â€”â€”ä½†è¿™äº›åªæ˜¯é€‰é¡¹ï¼Œè€Œä¸æ˜¯è¦æ±‚ã€‚ä½ å¿…é¡»ä»”ç»†å¹³è¡¡ä½ ä½¿ç”¨çš„æŠ€æœ¯çš„å¹¿åº¦å’Œå¤æ‚æ€§ä¸å„ç§æŠ€æœ¯å¯èƒ½å¸¦æ¥çš„æˆæœ¬ã€‚\nå½“ä½ å¼€å§‹é‡‡ç”¨å¾®æœåŠ¡æ—¶ï¼Œä¸€äº›åŸºæœ¬æŒ‘æˆ˜æ˜¯ä¸å¯é¿å…çš„ï¼šä½ éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ¥äº†è§£å›´ç»•æ•°æ®ä¸€è‡´æ€§ã€å»¶è¿Ÿã€æœåŠ¡å»ºæ¨¡ç­‰é—®é¢˜ã€‚å¦‚æœä½ è¯•å›¾äº†è§£è¿™äº›æƒ³æ³•å¦‚ä½•æ”¹å˜ä½ å¯¹è½¯ä»¶å¼€å‘çš„çœ‹æ³•ï¼ŒåŒæ—¶ä½ æ­£åœ¨æ¥å—å¤§é‡æ–°æŠ€æœ¯ï¼Œé‚£ä¹ˆä½ å°†é‡åˆ°å›°éš¾ã€‚è¿˜éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå°è¯•äº†è§£æ‰€æœ‰è¿™äº›æ–°æŠ€æœ¯æ‰€å°†å ç”¨ä½ å¤§é‡çš„æ—¶é—´ï¼ŒåŒæ—¶ä¹Ÿå°†å‡å°‘åŠŸèƒ½å®é™…äº¤ä»˜ç»™ç”¨æˆ·çš„æ—¶é—´ã€‚\néšç€ä½ å¢åŠ å¾®æœåŠ¡æ¶æ„çš„å¤æ‚æ€§ï¼Œè¯·è€ƒè™‘æ ¹æ®éœ€è¦å¼•å…¥æ–°æŠ€æœ¯ã€‚å½“ä½ æ‹¥æœ‰ä¸‰ä¸ªæœåŠ¡æ—¶ï¼Œä½ ä¸éœ€è¦ Kubernetes é›†ç¾¤ï¼é™¤äº†ç¡®ä¿ä½ ä¸ä¼šå› è¿™äº›æ–°å·¥å…·çš„å¤æ‚æ€§è€Œä¸å ªé‡è´Ÿä¹‹å¤–ï¼Œè¿™ç§é€æ¸å¢åŠ çš„é¢å¤–å¥½å¤„æ˜¯ä½¿ä½ èƒ½å¤Ÿè·å¾—æ–°çš„æ›´å¥½çš„åšäº‹æ–¹å¼ï¼Œè¿™äº›æ–¹å¼æ— ç–‘ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå‡ºç°ã€‚\næˆæœ¬ çŸ­æœŸæ¥çœ‹ï¼Œä½ ä¼šçœ‹åˆ°å› ä¸ºå¼•å…¥å¾®æœåŠ¡ä½ çš„æˆæœ¬ä¼šéšä¹‹å¢åŠ ã€‚ å…¶æ¬¡å­¦ä¹ æ–°çš„æŠ€æœ¯å’Œæ€æƒ³ä»¥åŠå›¢é˜Ÿå·¥ä½œæ–¹å¼çš„å˜æ›´éƒ½éœ€è¦æ—¶é—´ã€‚è¿™å°†å¯¼è‡´æ–°åŠŸèƒ½äº¤ä»˜å˜ç¼“ï¼Œä½ æˆ–è®¸éœ€è¦æ›´å¤šçš„äººå‘˜æ¥æŠµæ¶ˆè¿™ä¸€æˆæœ¬ã€‚\næ ¹æ®ç»éªŒï¼Œå¯¹äºä¸€ä¸ªä¸»è¦å…³æ³¨é™ä½æˆæœ¬çš„ç»„ç»‡æ¥è¯´ï¼Œå¾®æœåŠ¡æ˜¯ä¸€ä¸ªéå¸¸ç³Ÿç³•çš„é€‰æ‹©ï¼Œå› ä¸ºå†³ç­–è€…å°†å§‹ç»ˆæœ‰å‰Šå‡é™ˆæœ¬çš„å¿ƒæ€ï¼Œè€ŒITè¢«è§†ä¸ºæˆæœ¬ä¸­å¿ƒè€Œä¸æ˜¯åˆ©æ¶¦ä¸­å¿ƒã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ å¯ä»¥ä½¿ç”¨è¿™ä¸€æ¶æ„æ¥æ¥è§¦æ›´å¤šçš„å®¢æˆ·æˆ–å¹¶è¡Œå¼€å‘æ›´å¤šåŠŸèƒ½ï¼Œé‚£ä¹ˆå¾®æœåŠ¡å¯ä»¥å¸®ä½ èµšåˆ°æ›´å¤šçš„é’±ã€‚å¾®æœåŠ¡æ˜¯å¢åŠ åˆ©æ¶¦çš„ä¸€ç§æ–¹å¼å—ï¼Ÿä¹Ÿè®¸ã€‚é‚£å¾®æœåŠ¡æ˜¯é™ä½æˆæœ¬çš„æ–¹æ³•å—ï¼ŸåŸºæœ¬ä¸å¯èƒ½ã€‚\næŠ¥è¡¨ å¯¹äºå•ä½“ç³»ç»Ÿï¼Œé€šå¸¸åªæœ‰ä¸€ä¸ªæ•°æ®åº“ã€‚è¿™å°±æ„å‘³ç€æƒ³è¦åˆ†ææ‰€æœ‰æ•°æ®ï¼Œåªéœ€è¦å¯¹è¿™ä¸ªæ•°æ®åº“ï¼ˆä¹Ÿå¯èƒ½é’ˆå¯¹åªè¯»å‰¯æœ¬ï¼‰è¿›è¡ŒæŠ¥è¡¨çš„ç”Ÿæˆã€‚\né€šè¿‡å¾®æœåŠ¡æ¶æ„ï¼Œæˆ‘ä»¬æ‰“ç ´äº†è¿™ç§å•ä½“æ¶æ„ã€‚è¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬ä¸å†éœ€è¦ç”ŸæˆæŠ¥è¡¨ï¼›æˆ‘ä»¬åªæ˜¯è®©å®ƒå˜å¾—æ›´åŠ å›°éš¾ï¼Œå› ä¸ºç°åœ¨æˆ‘ä»¬çš„æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªé€»è¾‘éš”ç¦»çš„æ¨¡å¼ä¸­ã€‚ æ›´ç°ä»£çš„æŠ¥è¡¨ç”Ÿæˆçš„æ–¹æ³•ï¼Œä¾‹å¦‚ä½¿ç”¨æµå¼ä¼ è¾“æ¥å…è®¸å¯¹å¤§é‡æ•°æ®è¿›è¡Œå®æ—¶ä¼ è¾“ï¼Œè¿™å¯ä»¥å¾ˆå¥½åœ°ä¸å¾®æœåŠ¡æ¶æ„é…åˆä½¿ç”¨ï¼Œä½†é€šå¸¸éœ€è¦é‡‡ç”¨æ–°çš„æƒ³æ³•å’Œç›¸å…³æŠ€æœ¯ã€‚æˆ–è€…ï¼Œå¯èƒ½åªéœ€å°†å¾®æœåŠ¡ä¸­çš„æ•°æ®å‘å¸ƒåˆ°ä¸­å¤®æŠ¥è¡¨æ•°æ®åº“ï¼ˆæˆ–è€…å¯èƒ½æ˜¯ä¸å¤ªç»“æ„åŒ–çš„æ•°æ®æ¹–ï¼‰ä¸­ã€‚\nç›‘æ§å’Œæ•…éšœæ’é™¤ å¯¹äºä¸€ä¸ªæ ‡å‡†çš„å•ä½“åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ç›¸å½“ç®€å•çš„è¿›è¡Œç›‘æ§ã€‚æˆ‘ä»¬è¦æ‹…å¿ƒçš„æœºå™¨æ•°é‡å¾ˆå°‘ï¼Œåº”ç”¨ç¨‹åºçš„æ•…éšœæ¨¡å¼ä¹Ÿå¾ˆå•ä¸€â€”â€”åº”ç”¨ç¨‹åºé€šå¸¸è¦ä¹ˆå…¨éƒ¨å¯åŠ¨ï¼Œè¦ä¹ˆå…¨éƒ¨å…³é—­ã€‚ä½¿ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæœåŠ¡å®ä¾‹å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬æ˜¯å¦äº†è§£å…¶å½±å“ï¼Ÿ\nå¯¹äºå•ä½“ç³»ç»Ÿï¼Œå¦‚æœæˆ‘ä»¬çš„ CPU é•¿æ—¶é—´å¡åœ¨ 100%ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ã€‚æ‹¥æœ‰æ•°åæˆ–æ•°ç™¾ä¸ªè¿›ç¨‹çš„å¾®æœåŠ¡æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥è¯´åŒæ ·çš„è¯å—ï¼Ÿå½“åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¡åœ¨ 100% CPU æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦éœ€è¦åœ¨å‡Œæ™¨ 3 ç‚¹å«é†’æŸäººï¼Ÿ\nå®‰å…¨ ç°åœ¨ï¼Œæ›´å¤šä¿¡æ¯é€šè¿‡æˆ‘ä»¬çš„æœåŠ¡ä¹‹é—´çš„ç½‘ç»œæµåŠ¨ã€‚è¿™å¯èƒ½ä½¿æˆ‘ä»¬çš„æ•°æ®æ›´å®¹æ˜“åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«è§‚å¯Ÿåˆ°ï¼Œå¹¶ä¸”å¯èƒ½è¢«ä½œä¸ºä¸­é—´äººæ”»å‡»çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ“çºµã€‚è¿™æ„å‘³ç€æ‚¨å¯èƒ½éœ€è¦æ›´åŠ å°å¿ƒåœ°ä¿æŠ¤ä¼ è¾“ä¸­çš„æ•°æ®ï¼Œå¹¶ç¡®ä¿æ‚¨çš„å¾®æœåŠ¡ç«¯ç‚¹å—åˆ°ä¿æŠ¤ï¼Œä»¥ä¾¿åªæœ‰æˆæƒæ–¹æ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚\næµ‹è¯• å¯¹äºä»»ä½•ç±»å‹çš„è‡ªåŠ¨åŒ–åŠŸèƒ½æµ‹è¯•ï¼Œä½ éƒ½æœ‰ä¸€ä¸ªå¾®å¦™çš„å¹³è¡¡è¡Œä¸ºã€‚æµ‹è¯•æ‰§è¡Œçš„åŠŸèƒ½è¶Šå¤šï¼ˆå³æµ‹è¯•èŒƒå›´è¶Šå¹¿ï¼‰ï¼Œä½ å¯¹åº”ç”¨ç¨‹åºçš„ä¿¡å¿ƒå°±è¶Šå¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œæµ‹è¯•çš„èŒƒå›´è¶Šå¤§ï¼Œè®¾ç½®æµ‹è¯•æ•°æ®å’Œæ”¯æŒçš„å·¥å…·å°±è¶Šå›°éš¾ï¼Œæµ‹è¯•è¿è¡Œçš„æ—¶é—´å°±è¶Šé•¿ï¼Œå½“å®ƒå¤±è´¥æ—¶å°±è¶Šéš¾å¼„æ¸…æ¥šä»€ä¹ˆæ˜¯åçš„ã€‚\nå°±å…¶æ¶µç›–çš„åŠŸèƒ½è€Œè¨€ï¼Œä»»ä½•ç±»å‹ç³»ç»Ÿçš„ç«¯åˆ°ç«¯æµ‹è¯•éƒ½å¤„äºè§„æ¨¡çš„æç«¯ï¼Œè€Œä¸”æˆ‘ä»¬ä¹ æƒ¯äºå®ƒä»¬åœ¨ç¼–å†™å’Œç»´æŠ¤æ–¹é¢æ¯”å°èŒƒå›´çš„å•å…ƒæµ‹è¯•æ›´æœ‰é—®é¢˜ã€‚ä½†æ˜¯ï¼Œè¿™é€šå¸¸æ˜¯å€¼å¾—çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›é€šè¿‡ç«¯åˆ°ç«¯æµ‹è¯•ä»¥ä¸ç”¨æˆ·ç›¸åŒçš„æ–¹å¼ä½¿ç”¨æˆ‘ä»¬çš„ç³»ç»Ÿæ¥è·å¾—ä¿¡å¿ƒã€‚\nä½†æ˜¯ä½¿ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæˆ‘ä»¬ç«¯åˆ°ç«¯æµ‹è¯•çš„èŒƒå›´å˜å¾—éå¸¸å¤§ã€‚æˆ‘ä»¬ç°åœ¨éœ€è¦è·¨å¤šä¸ªè¿›ç¨‹è¿è¡Œæµ‹è¯•ï¼Œæ‰€æœ‰è¿™äº›éƒ½éœ€è¦é’ˆå¯¹æµ‹è¯•åœºæ™¯è¿›è¡Œéƒ¨ç½²å’Œé€‚å½“é…ç½®ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸ºç¯å¢ƒé—®é¢˜ï¼ˆä¾‹å¦‚æœåŠ¡å®ä¾‹æ­»äº¡æˆ–éƒ¨ç½²å¤±è´¥çš„ç½‘ç»œè¶…æ—¶ï¼‰å¯¼è‡´æˆ‘ä»¬çš„æµ‹è¯•å¤±è´¥æ—¶å‘ç”Ÿçš„è¯¯æŠ¥åšå¥½å‡†å¤‡ã€‚\nè¿™äº›åŠ›é‡æ„å‘³ç€ï¼Œéšç€ä½ çš„å¾®æœåŠ¡æ¶æ„çš„å‘å±•ï¼Œä½ åœ¨ç«¯åˆ°ç«¯æµ‹è¯•æ–¹é¢çš„æŠ•èµ„å›æŠ¥å°†é€æ¸å‡å°‘ã€‚æµ‹è¯•å°†èŠ±è´¹æ›´å¤šï¼Œä½†æ— æ³•ç»™ä½ ä¸è¿‡å»ç›¸åŒçš„ä¿¡å¿ƒã€‚è¿™å°†æ¨åŠ¨ä½ èµ°å‘æ–°çš„æµ‹è¯•å½¢å¼ï¼Œä¾‹å¦‚åˆåŒé©±åŠ¨æµ‹è¯•æˆ–ç”Ÿäº§æµ‹è¯•ï¼Œä»¥åŠæ¢ç´¢æ¸è¿›å¼äº¤ä»˜æŠ€æœ¯ï¼Œä¾‹å¦‚å¹¶è¡Œè¿è¡Œæˆ–é‡‘ä¸é›€å‘å¸ƒã€‚\nå»¶è¿Ÿ ä»¥å‰å¯èƒ½åœ¨ä¸€ä¸ªå¤„ç†å™¨ä¸Šæœ¬åœ°å®Œæˆçš„å¤„ç†ç°åœ¨æœ€ç»ˆå¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå•ç‹¬çš„å¾®æœåŠ¡ã€‚ä»¥å‰ä»…åœ¨å•ä¸ªè¿›ç¨‹ä¸­æµåŠ¨çš„ä¿¡æ¯ç°åœ¨éœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œåºåˆ—åŒ–ã€ä¼ è¾“å’Œååºåˆ—åŒ–ï¼Œä½ å¯èƒ½æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´é¢‘ç¹åœ°ä½¿ç”¨è¿™äº›ç½‘ç»œã€‚æ‰€æœ‰è¿™äº›éƒ½å¯èƒ½å¯¼è‡´ç³»ç»Ÿå»¶è¿Ÿæ¶åŒ–ã€‚\nå°½ç®¡åœ¨è®¾è®¡æˆ–ç¼–ç é˜¶æ®µå¾ˆéš¾è¡¡é‡å¯¹æ“ä½œå»¶è¿Ÿçš„ç¡®åˆ‡å½±å“ï¼Œä½†è¿™æ˜¯ä»¥å¢é‡æ–¹å¼è¿›è¡Œä»»ä½•å¾®æœåŠ¡è¿ç§»å¾ˆé‡è¦çš„å¦ä¸€ä¸ªåŸå› ã€‚åšä¸€ä¸ªå°çš„æ”¹å˜ï¼Œç„¶åè¡¡é‡å½±å“ã€‚è¿™å‡è®¾ä½ æœ‰æŸç§æ–¹æ³•å¯ä»¥æµ‹é‡ä½ å…³å¿ƒçš„æ“ä½œçš„ç«¯åˆ°ç«¯å»¶è¿Ÿâ€”â€”åƒ Jaeger è¿™æ ·çš„åˆ†å¸ƒå¼è·Ÿè¸ªå·¥å…·å¯ä»¥åœ¨è¿™é‡Œæä¾›å¸®åŠ©ã€‚ä½†æ˜¯ä½ è¿˜éœ€è¦äº†è§£ è¿™äº›æ“ä½œå¯æ¥å—çš„å»¶è¿Ÿæ—¶é—´ã€‚æœ‰æ—¶è®©æ“ä½œå˜æ…¢æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ï¼Œåªè¦å®ƒä»ç„¶è¶³å¤Ÿå¿«ï¼\næ•°æ®ä¸€è‡´æ€§ åœ¨å•ä¸ªæ•°æ®åº“ä¸­å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„å•ä½“ç³»ç»Ÿåˆ°åœ¨ä¸åŒæ•°æ®åº“ä¸­ç®¡ç†å¤šä¸ªè¿›ç¨‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¿™å¯¹æ•°æ®çš„ä¸€è‡´æ€§é€ æˆäº†æ½œåœ¨çš„æŒ‘æˆ˜ã€‚å°½ç®¡è¿‡å»ä½ å¯èƒ½ä¾èµ–æ•°æ®åº“äº‹åŠ¡æ¥ç®¡ç†çŠ¶æ€æ›´æ”¹ï¼Œä½†ä½ éœ€è¦äº†è§£åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å®¹æ˜“æä¾›ç±»ä¼¼çš„å®‰å…¨æ€§ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡çš„ä½¿ç”¨è¢«è¯æ˜åœ¨åè°ƒçŠ¶æ€æ›´æ”¹æ–¹é¢å­˜åœ¨å¾ˆå¤§é—®é¢˜ã€‚\nç›¸åï¼Œä½ å¯èƒ½éœ€è¦å¼€å§‹ä½¿ç”¨ sagas å’Œæœ€ç»ˆä¸€è‡´æ€§ç­‰æ¦‚å¿µæ¥ç®¡ç†å’Œæ¨ç†ç³»ç»Ÿä¸­çš„çŠ¶æ€ã€‚è¿™äº›æƒ³æ³•å¯èƒ½éœ€è¦ä»æ ¹æœ¬ä¸Šæ”¹å˜ä½ å¯¹ç³»ç»Ÿä¸­æ•°æ®çš„æ€è€ƒæ–¹å¼ï¼Œè¿™åœ¨è¿ç§»ç°æœ‰ç³»ç»Ÿæ—¶å¯èƒ½ä¼šéå¸¸ä»¤äººç”Ÿç•ã€‚å†ä¸€æ¬¡ï¼Œè¿™æ˜¯å¦ä¸€ä¸ªåœ¨åˆ†è§£åº”ç”¨ç¨‹åºæ—¶è¦è°¨æ…çš„å¥½ç†ç”±ã€‚é‡‡ç”¨å¢é‡æ–¹æ³•è¿›è¡Œåˆ†è§£ï¼Œä»¥ä¾¿ä½ èƒ½å¤Ÿè¯„ä¼°æ›´æ”¹å¯¹ç”Ÿäº§ä½“ç³»ç»“æ„çš„å½±å“ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚\næˆ‘åº”è¯¥ä½¿ç”¨å¾®æœåŠ¡å— å®ƒä»¬å¯èƒ½ä¸é€‚åˆä¸ºè°å·¥ä½œ å¾®æœåŠ¡æ¶æ„å¯¹äºå…¨æ–°çš„äº§å“æˆ–åˆåˆ›å…¬å¸æ¥è¯´å¾€å¾€æ˜¯ä¸€ä¸ªç³Ÿç³•çš„é€‰æ‹©ã€‚\nå¾€å¾€å…¨æ–°çš„äº§å“æˆ–åˆåˆ›å…¬å¸åœ¨å‰æœŸä¸šåŠ¡æ”¹åŠ¨ä¼šéå¸¸é¢‘ç¹ï¼ŒæœåŠ¡è¾¹ç•Œæ— æ³•ç¡®å®šï¼ŒåŸŸæ¨¡å‹ä¹Ÿæ— æ³•å¾ˆå¥½çš„å»ºç«‹ï¼Œä½†è¿™æ˜¯å¾®æœåŠ¡çš„å‰ç½®æ¡ä»¶ã€‚ å¾®æœåŠ¡å¸¦æ¥äº†æ–°å·¥ä½œå’Œå¤æ‚æ€§ï¼Œè¿™ä¼šå ç”¨å®è´µçš„å¼€å‘èµ„æºã€‚å›¢é˜Ÿè¶Šå°ï¼Œè¿™ç§æˆæœ¬å°±è¶Šæ˜æ˜¾ã€‚ å®ƒä»¬åœ¨å“ªé‡Œå·¥ä½œçš„æ›´å¥½ ç»„ç»‡é‡‡ç”¨å¾®æœåŠ¡çš„æœ€å¤§åŸå› å¯èƒ½æ˜¯å…è®¸æ›´å¤šçš„å¼€å‘äººå‘˜åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸Šå·¥ä½œï¼Œè€Œä¸ä¼šäº’ç›¸å¦¨ç¢ã€‚æ­£ç¡®è®¾ç½®æ¶æ„å’Œç»„ç»‡è¾¹ç•Œï¼Œè®©æ›´å¤šäººå½¼æ­¤ç‹¬ç«‹å·¥ä½œï¼Œä»è€Œå‡å°‘äº¤ä»˜äº‰ç”¨ã€‚ä¸€å®¶äº”äººåˆ›ä¸šå…¬å¸å¯èƒ½ä¼šè§‰å¾—å¾®æœåŠ¡æ¶æ„å¾ˆéº»çƒ¦ã€‚ä¸€ä¸ªå¿«é€Ÿå¢é•¿çš„ 100 äººè§„æ¨¡åŒ–ä¼ä¸šå¯èƒ½ä¼šå‘ç°ï¼Œå®ƒçš„å¢é•¿æ›´å®¹æ˜“é€‚åº”ä¸å…¶äº§å“å¼€å‘å·¥ä½œé€‚å½“åè°ƒçš„å¾®æœåŠ¡æ¶æ„ã€‚\nè½¯ä»¶å³æœåŠ¡ (SaaS)ï¼Œè¿™ç±»éå¸¸é€‚åˆå¾®æœåŠ¡æ¶æ„ã€‚è¿™äº›äº§å“é€šå¸¸éœ€è¦ 24-7 å°æ—¶è¿è¡Œï¼Œè¿™åœ¨æ¨å‡ºå˜æ›´æ—¶ä¼šå¸¦æ¥æŒ‘æˆ˜ã€‚å¾®æœåŠ¡æ¶æ„çš„ç‹¬ç«‹å¯å‘å¸ƒæ€§æ˜¯è¯¥é¢†åŸŸçš„ä¸€å¤§ç¦éŸ³ã€‚æ­¤å¤–ï¼Œå¾®æœåŠ¡å¯ä»¥æ ¹æ®éœ€è¦æ‰©å¤§æˆ–ç¼©å°ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ ä¸ºç³»ç»Ÿçš„è´Ÿè½½ç‰¹æ€§å»ºç«‹ä¸€ä¸ªåˆç†çš„åŸºçº¿æ—¶ï¼Œä½ å°†è·å¾—æ›´å¤šæ§åˆ¶æƒï¼Œä»¥ç¡®ä¿ä½ å¯ä»¥ä»¥æœ€å…·æˆæœ¬æ•ˆç›Šçš„æ–¹å¼æ‰©å±•æ‚¨çš„ç³»ç»Ÿã€‚\nå¾®æœåŠ¡ä¸æŠ€æœ¯æ— å…³çš„ç‰¹æ€§ç¡®ä¿å¯ä»¥å……åˆ†åˆ©ç”¨äº‘å¹³å°ã€‚å…¬å…±äº‘ä¾›åº”å•†ä¸ºä½ çš„ä»£ç æä¾›å¹¿æ³›çš„æœåŠ¡å’Œéƒ¨ç½²æœºåˆ¶ã€‚ä½ å¯ä»¥æ›´è½»æ¾åœ°å°†ç‰¹å®šæœåŠ¡çš„è¦æ±‚ä¸æœ€èƒ½å¸®åŠ©ä½ å®æ–½å®ƒä»¬çš„äº‘æœåŠ¡ç›¸åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½å†³å®šå°†ä¸€ä¸ªæœåŠ¡éƒ¨ç½²ä¸ºä¸€ç»„åŠŸèƒ½ï¼Œå¦å¤–éƒ¨ç½²ä¸ºæ‰˜ç®¡è™šæ‹Ÿæœº (VM)ï¼Œè¿˜å¯ä»¥éƒ¨ç½²åœ¨æ‰˜ç®¡å¹³å°å³æœåŠ¡ (PaaS) å¹³å°ä¸Šã€‚\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé‡‡ç”¨å¹¿æ³›çš„æŠ€æœ¯é€šå¸¸ä¼šæˆä¸ºä¸€ä¸ªé—®é¢˜ï¼Œä½†èƒ½å¤Ÿè½»æ¾å°è¯•æ–°æŠ€æœ¯æ˜¯å¿«é€Ÿè¯†åˆ«å¯èƒ½äº§ç”Ÿæ•ˆç›Šçš„å¥½æ–¹æ³•ã€‚FaaS å¹³å°çš„æ—¥ç›Šæ™®åŠå°±æ˜¯è¿™æ ·ä¸€ä¸ªä¾‹å­ã€‚å¯¹äºé€‚å½“çš„å·¥ä½œè´Ÿè½½ï¼ŒFaaS å¹³å°å¯ä»¥å¤§å¤§å‡å°‘è¿è¥å¼€é”€ï¼Œä½†ç›®å‰ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ç§é€‚ç”¨äºæ‰€æœ‰æƒ…å†µçš„éƒ¨ç½²æœºåˆ¶ã€‚\nå¾®æœåŠ¡è¿˜ä¸ºå¸Œæœ›é€šè¿‡å„ç§æ–°æ¸ é“ä¸ºå®¢æˆ·æä¾›æœåŠ¡çš„ç»„ç»‡å¸¦æ¥äº†æ˜æ˜¾çš„å¥½å¤„ã€‚è®¸å¤šæ•°å­—åŒ–è½¬å‹å·¥ä½œä¼¼ä¹éƒ½æ¶‰åŠå°è¯•è§£é”éšè—åœ¨ç°æœ‰ç³»ç»Ÿä¸­çš„åŠŸèƒ½ã€‚æˆ‘ä»¬çš„æ„¿æœ›æ˜¯åˆ›é€ æ–°çš„å®¢æˆ·ä½“éªŒï¼Œé€šè¿‡ä»»ä½•æœ€æœ‰æ„ä¹‰çš„äº¤äº’æœºåˆ¶æ¥æ”¯æŒç”¨æˆ·çš„éœ€æ±‚ã€‚ æœ€é‡è¦çš„æ˜¯ï¼Œå¾®æœåŠ¡æ¶æ„å¯ä»¥åœ¨ä½ ç»§ç»­å‘å±•ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›å¾ˆå¤§çš„çµæ´»æ€§ã€‚å½“ç„¶ï¼Œè¿™ç§çµæ´»æ€§æ˜¯æœ‰ä»£ä»·çš„ï¼Œä½†å¦‚æœä½ æƒ³åœ¨æœªæ¥å¯èƒ½æƒ³è¦åšå‡ºçš„æ”¹å˜æ–¹é¢ä¿æŒå¼€æ”¾çš„é€‰æ‹©ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªå€¼å¾—ä»˜å‡ºçš„ä»£ä»·ã€‚\næ¦‚æ‹¬ å¾®æœåŠ¡æ¶æ„å¯ä»¥ä¸ºä½ åœ¨æŠ€æœ¯é€‰æ‹©ã€å¤„ç†å¥å£®æ€§å’Œæ‰©å±•æ€§ã€ç»„ç»‡å›¢é˜Ÿç­‰æ–¹é¢æä¾›æå¤§çš„çµæ´»æ€§ã€‚è¿™ç§çµæ´»æ€§æ˜¯è®¸å¤šäººé‡‡ç”¨å¾®æœåŠ¡æ¶æ„çš„éƒ¨åˆ†åŸå› ã€‚ä½†æ˜¯å¾®æœåŠ¡å¸¦æ¥äº†å¾ˆå¤§ç¨‹åº¦çš„å¤æ‚æ€§ï¼Œä½ éœ€è¦ç¡®ä¿è¿™ç§å¤æ‚æ€§æ˜¯åˆç†çš„ã€‚å¯¹äºè®¸å¤šäººæ¥è¯´ï¼Œå®ƒä»¬å·²æˆä¸ºé»˜è®¤çš„ç³»ç»Ÿæ¶æ„ï¼Œå‡ ä¹å¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»ç„¶è®¤ä¸ºå®ƒä»¬æ˜¯ä¸€ç§æ¶æ„é€‰æ‹©ï¼Œå¿…é¡»æ ¹æ®ä½ è¦è§£å†³çš„é—®é¢˜æ¥è¯æ˜å…¶ä½¿ç”¨æ˜¯åˆç†çš„ï¼›é€šå¸¸ï¼Œæ›´ç®€å•çš„æ–¹æ³•å¯ä»¥æ›´è½»æ¾åœ°äº¤ä»˜ã€‚\nå°½ç®¡å¦‚æ­¤ï¼Œè®¸å¤šç»„ç»‡ï¼Œå°¤å…¶æ˜¯å¤§å‹ç»„ç»‡ï¼Œå·²ç»å±•ç¤ºäº†å¾®æœåŠ¡çš„æœ‰æ•ˆæ€§ã€‚å½“å¾®æœåŠ¡çš„æ ¸å¿ƒæ¦‚å¿µè¢«æ­£ç¡®ç†è§£å’Œå®æ–½æ—¶ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©åˆ›å»ºæˆæƒã€é«˜æ•ˆçš„æ¶æ„ï¼Œä»è€Œå¸®åŠ©ç³»ç»Ÿå˜å¾—ä¸ä»…ä»…æ˜¯å…¶éƒ¨åˆ†çš„æ€»å’Œã€‚\n","id":12,"section":"posts","summary":"\u003cp\u003eå¾®æœåŠ¡æ˜¯å›´ç»•ä¸šåŠ¡é¢†åŸŸå»ºæ¨¡å¯ç‹¬ç«‹å‘å¸ƒçš„æœåŠ¡ã€‚æœåŠ¡å°è£…äº†å¯¹åº”åŠŸèƒ½å¹¶å¯ä»¥é€šè¿‡ç½‘ç»œè¢«å…¶ä»–æœåŠ¡è®¿é—®ã€‚ä»å¤–éƒ¨æ¥çœ‹ï¼Œå•ä¸ªå¾®æœåŠ¡è¢«è§†ä¸ºä¸€ä¸ªé»‘ç›’å­ã€‚å®ƒä½¿ç”¨æœ€åˆé€‚çš„åè®®åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œç«¯ç‚¹(ä¾‹å¦‚ï¼Œé˜Ÿåˆ—æˆ–REST API)ä¸Šæ‰¿è½½ä¸šåŠ¡åŠŸèƒ½ã€‚æ¶ˆè´¹è€…ï¼Œæ— è®ºä»–ä»¬æ˜¯å…¶ä»–å¾®æœåŠ¡è¿˜æ˜¯å…¶ä»–ç±»å‹çš„ç¨‹åº\u0026hellip;\u003c/p\u003e","tags":null,"title":"æˆ‘çš„å¾®æœåŠ¡æ€»ç»“","uri":"https://www.ganymedenil.com/2022/04/22/what-are-microservices.html","year":"2022"},{"content":"0x1 æ¦‚è¿° æˆ‘åœ¨å…¥é—¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘æ—¶ï¼Œé¦–å…ˆæˆ‘å°±é¢ä¸´äº†ä¸€ä¸ªé€‰æ‹©ï¼ŒHardhat Vs Truffle Vs Remixï¼Œæˆ‘åº”è¯¥é€‰æ‹©å“ªä¸ªå¼€å‘å·¥å…·ã€‚æˆ‘å°±åœ¨è°·æ­Œä¸Šæœç´¢å¾ˆå¤šå¯¹æ¯”ï¼Œå…¶ä¸­éœåˆ©ç»´å°”Â·ç“¦å°”è¿ªå…¹ çš„ ã€ŠHardhat Vs Truffle Vs Remix - Which Is The Best For Blockchain Development?ã€‹ è¿™ç¯‡æ–‡ç« å¾ˆåŠæ—¶çš„å¸®åŠ©äº†æˆ‘ï¼Œå¹¶ä¸”OpenZeppelinã€Aaveã€BitGoã€1inchç­‰éƒ½åœ¨ä½¿ç”¨è¯¥å¼€å‘å·¥å…·ï¼Œè€Œä¸”æˆ‘åœ¨æ·±å…¥äº†è§£å®˜æ–¹æ–‡æ¡£åå‘ç°æ–‡æ¡£æ•´ä½“å¾ˆæ¸…æ™°å¹¶ä¸”æœ‰æ¡ç†ï¼Œè€Œæˆ‘åˆæœ‰ä¸€å®šçš„å‰ç«¯å¼€å‘ç»éªŒï¼Œæ‰€ä»¥åœ¨å¼€å‘å·¥å…·çš„é€‰å‹ä¸Šæˆ‘é€‰æ‹©äº† Hardhat ã€‚å¦‚æœä½ æ²¡æœ‰å‰ç«¯ç»éªŒï¼Œå¸Œæœ›åœ¨å‰æœŸå­¦ä¹ çš„æ—¶å€™æ›´å…³æ³¨åˆçº¦æœ¬èº«ï¼Œé‚£ä¹ˆæˆ‘ä¼šæ¨è Remix ä½œä¸ºå‰æœŸå­¦ä¹ çš„å¼€å‘å·¥å…·ã€‚ è¿™æ˜¯æˆ‘åŸºäº Hardhat å®˜æ–¹æ•™ç¨‹å†™çš„ç¬¬ä¸€ç¯‡ä»¥å¤ªåŠåˆçº¦å’Œ dApp å¼€å‘æŒ‡å—ï¼Œæœªæ¥æˆ‘ä¹Ÿä¼šæŒç»­åˆ†äº«æ‰€å­¦ã€‚\n0x2 æ­å»ºç¯å¢ƒ é¦–å…ˆ Hardhat æ˜¯åŸºäº JavaScript ç¼–å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦å®‰è£… Node.js ç¯å¢ƒã€‚\nå®‰è£… Node.js å¦‚æœä½ å·²ç»å®‰è£…äº† Node.js ä½ å¯ä»¥è·³è¿‡è¿™ä¸ªéƒ¨åˆ†ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ¥ä¸‹æ¥ä¼šä»‹ç»å¦‚ä½•åœ¨ Ubuntuã€MacOSå’Œ Windows ä¸Šå®‰è£…å®ƒã€‚\nLinux Ubuntu å°†ä»¥ä¸‹å‘½ä»¤å¤åˆ¶ç²˜è´´åˆ°ç»ˆç«¯ï¼š\nsudo apt update sudo apt install curl git curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash - sudo apt install nodejs MacOS ç¡®ä¿ä½ å·²ç»å®‰è£…äº† git ,å¦‚æœæ²¡æœ‰å®‰è£…å¯ä»¥å‚è€ƒ atlassian å†™çš„ ã€ŠInstall Gitã€‹ã€‚ åœ¨ MacOS ä¸Šå®‰è£… Node.js æœ‰å¤šç§æ–¹æ³•ã€‚æˆ‘é€‰æ‹©äº†ä½¿ç”¨ Node ç‰ˆæœ¬ç®¡ç†å™¨ï¼ˆnvmï¼‰ã€‚å°†ä»¥ä¸‹å‘½ä»¤å¤åˆ¶ç²˜è´´åˆ°ç»ˆç«¯ï¼š\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash nvm install --lts nvm use stable nvm alias default stable npm install npm --global # å‡çº§ npm åˆ°æœ€æ–°ç‰ˆæœ¬ Windows Windows å¯ä»¥ç›´æ¥åˆ° Node.js å®˜ç½‘ï¼Œä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…å³å¯å®Œæˆå®‰è£…ã€‚\n0x3 åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›® æˆ‘ä»¬å°†ä½¿ç”¨ npm CLI æ¥å®‰è£… Hardhatã€‚ æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nmkdir hardhat-tutorial cd hardhat-tutorial npm init --yes npm install --save-dev hardhat å®‰è£… Hardhat çš„è¿‡ç¨‹ä¸­ä¼šå®‰è£… Ethereum JavaScript ä¾èµ–é¡¹ï¼Œæ‰€ä»¥è¯·è€å¿ƒç­‰å¾…ã€‚ åœ¨å®‰è£… Hardhat çš„åŒä¸€ç›®å½•ä¸‹è¿è¡Œï¼š\nnpx hardhat ä½¿ç”¨é”®ç›˜é€‰æ‹© Create an empty hardhat.config.js å¹¶æŒ‰ä¸‹å›è½¦é”®ã€‚\n$ npx hardhat 888 888 888 888 888 888 888 888 888 888 888 888 888 888 888 8888888888 8888b. 888d888 .d88888 88888b. 8888b. 888888 888 888 \u0026quot;88b 888P\u0026quot; d88\u0026quot; 888 888 \u0026quot;88b \u0026quot;88b 888 888 888 .d888888 888 888 888 888 888 .d888888 888 888 888 888 888 888 Y88b 888 888 888 888 888 Y88b. 888 888 \u0026quot;Y888888 888 \u0026quot;Y88888 888 888 \u0026quot;Y888888 \u0026quot;Y888 ğŸ‘· Welcome to Hardhat v2.9.1 ğŸ‘·â€ ? What do you want to do? â€¦ Create a basic sample project Create an advanced sample project Create an advanced sample project that uses TypeScript â¯ Create an empty hardhat.config.js Quit å½“ Hardhat è¿è¡Œæ—¶ï¼Œå®ƒä¼šä»å½“å‰å·¥ä½œç›®å½•å¼€å§‹æœç´¢æœ€è¿‘çš„ hardhat.config.js æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶é€šå¸¸åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œä¸€ä¸ªç©ºçš„ hardhat.config.js å°±è¶³ä»¥è®© Hardhat å·¥ä½œã€‚æœªæ¥æˆ‘ä»¬å¯¹ Hardhat çš„å…¨éƒ¨è®¾ç½®éƒ½ä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚\nHardhat æ¶æ„ Hardhat åŸºäºä»»åŠ¡å’Œæ’ä»¶çš„ç†å¿µè®¾è®¡ã€‚è€Œ Hardhat çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½æ¥è‡ªæ’ä»¶ï¼Œä½œä¸ºå¼€å‘äººå‘˜ï¼Œä½ å¯ä»¥è‡ªç”±é€‰æ‹©è¦ä½¿ç”¨çš„æ’ä»¶ã€‚\nä»»åŠ¡ æ¯æ¬¡ä» CLI è¿è¡Œ Hardhat æ—¶ï¼Œä½ éƒ½åœ¨è¿è¡Œä¸€é¡¹ä»»åŠ¡ã€‚ä¾‹å¦‚ npx hardhat compile å‘½ä»¤å°±æ˜¯è¿è¡Œ compile ä»»åŠ¡ã€‚è¦æŸ¥çœ‹é¡¹ç›®å½“å‰å¯ç”¨çš„ä»»åŠ¡ï¼Œåªæ‰§è¡Œ npx hardhatã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡å¸®åŠ©å‘½ä»¤äº†è§£å…¶ä»–ä»»åŠ¡ npx hardhat help [task]ã€‚\nå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ä»»åŠ¡ï¼Œå‚è€ƒåˆ›å»ºä»»åŠ¡ã€‚\næ’ä»¶ åœ¨ä½ æœ€ç»ˆä½¿ç”¨ä»€ä¹ˆå·¥å…·æ–¹é¢ï¼ŒHardhat å¹¶ä¸ä¼šé™åˆ¶ä½ ï¼Œä½†å®ƒç¡®å®å¸¦æœ‰ä¸€äº›å†…ç½®çš„é»˜è®¤è®¾ç½®ã€‚æ‰€æœ‰è¿™äº›ä¹Ÿéƒ½å¯ä»¥è¢«é‡å†™ã€‚ åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Ethers.js å’Œ Waffle æ’ä»¶ã€‚å®ƒä»¬å°†å…è®¸ä½ ä¸ä»¥å¤ªåŠäº¤äº’å¹¶æµ‹è¯•ä½ çš„åˆçº¦ã€‚ç¨åæˆ‘ä»¬å°†è§£é‡Šå®ƒä»¬æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚è¦å®‰è£…å®ƒä»¬ï¼Œä½ åªéœ€åœ¨é¡¹ç›®ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\nnpm install --save-dev @nomiclabs/hardhat-ethers ethers @nomiclabs/hardhat-waffle ethereum-waffle chai æˆ‘ä»¬éœ€è¦æ·»åŠ ä»¥ä¸‹ä»£ç \nrequire(\u0026quot;@nomiclabs/hardhat-waffle\u0026quot;); åˆ°å¦‚ä¸‹ä½ç½®ï¼Œçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·ï¼š\nrequire(\u0026quot;@nomiclabs/hardhat-waffle\u0026quot;); /** * @type import('hardhat/config').HardhatUserConfig */ module.exports = { solidity: \u0026quot;0.7.3\u0026quot;, }; æˆ‘ä»¬åªéœ€è¦å¼•ç”¨ hardhat-waffleã€‚\n0x4 ç¼–å†™ä¸ç¼–è¯‘åˆçº¦ æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„æ™ºèƒ½åˆçº¦æ¥å®ç°ä»£å¸è½¬ç§»ã€‚ä»£å¸åˆçº¦æœ€å¸¸ç”¨äºäº¤æ¢å’Œå­˜å‚¨ä»·å€¼ã€‚æˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ–‡ä¸­å±•å¼€è¯¦ç»†è°ˆè€ƒåˆçº¦ä¸­çš„ Solidity ä»£ç ï¼Œä½†æ˜¯æˆ‘ä»¬å®ç°äº†ä¸€äº›ä½ åº”è¯¥ä¹‹å¤§çš„é€»è¾‘ï¼š\nä»£å¸çš„æ€»ä¾›åº”é‡æ—¶å›ºå®šçš„ï¼Œæ— æ³•è¢«æ”¹å˜ æ•´ä¸ªä¾›åº”é‡åˆ†é…åˆ°éƒ¨ç½²åˆçº¦çš„åœ°å€ ä»»ä½•äººéƒ½å¯ä»¥æ”¶åˆ°ä»£å¸ ä»»ä½•æ‹¥æœ‰è‡³å°‘ä¸€ä¸ªä»£å¸çš„äººéƒ½å¯ä»¥è½¬ç§»ä»£å¸ ä»£å¸æ˜¯ä¸å¯åˆ†å‰²çš„ã€‚ä½ å¯ä»¥è½¬ç§»1ã€2ã€3æˆ–è€…37ä¸ªä»£å¸ï¼Œä½†ä¸èƒ½è½¬ç§»2.5ä¸ª ä½ å¯èƒ½å¬è¯´è¿‡ ERC20ï¼Œå®ƒæ˜¯ä»¥å¤ªåŠä¸­çš„ä»£å¸æ ‡å‡†ã€‚DAIã€USDCã€MKRå’ŒZRXç­‰ä»£å¸éµå¾ª ERC20 æ ‡å‡†ï¼Œè¿™ä½¿å¾—å®ƒä»¬éƒ½å¯ä»¥ä¸ä»»ä½•å¯ä»¥å¤„ç† ERC20 ä»£å¸çš„è½¯ä»¶å…¼å®¹ã€‚ä¸ºç®€å•èµ·è§ï¼Œæˆ‘ä»¬è¦æ„å»ºçš„ä»£å¸æ²¡æœ‰éµå¾ª ERC20ã€‚\nç¼–å†™æ™ºèƒ½åˆçº¦ é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºæ–°ç›®å½• contractsï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º Token.solã€‚ å°†ä¸‹é¢çš„ä»£ç ç²˜è´´åˆ°è¯¥æ–‡ä»¶ä¸­ï¼ŒèŠ±ä¸€ç‚¹æ—¶é—´é˜…è¯»ä»£ç ã€‚å®ƒå¾ˆç®€å•ï¼Œå¹¶ä¸”å……æ»¡äº†è§£é‡Š Solidity åŸºç¡€çŸ¥è¯†çš„å¤‡æ³¨ã€‚\nè¦è·å¾—è¯­æ³•é«˜äº®ï¼Œä½ åº”è¯¥åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ·»åŠ  Solidity è¯­è¨€çš„æ”¯æŒã€‚åªéœ€å¯»æ‰¾ Solidity æˆ– Ethereum æ’ä»¶ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ Visual Studio Code æˆ– Sublime Text 3ã€‚\n// Solidity æ–‡ä»¶ ç¬¬ä¸€è¡Œä»£ç éƒ½ä¼šæ˜¯ pragma // Solidity ç¼–è¯‘å™¨å°†ä½¿ç”¨å®ƒæ¥éªŒè¯å¯¹åº”çš„ç‰ˆæœ¬ pragma solidity ^0.7.0; // è¿™æ˜¯æ™ºèƒ½åˆçº¦çš„ä¸»è¦ç»„æˆéƒ¨åˆ† contract Token { // ä¸€äº›å­—ç¬¦ä¸²ç±»å‹å˜é‡æ¥æ ‡è¯†ä»£å¸ // `public` ä¿®é¥°ç¬¦ä½¿å˜é‡åœ¨åˆçº¦å¤–éƒ¨å¯è¯» string public name = \u0026quot;My Hardhat Token\u0026quot;; string public symbol = \u0026quot;MHT\u0026quot;; // å­˜å‚¨åœ¨æ— ç¬¦å·æ•´å‹å˜é‡ä¸­çš„å›ºå®šæ•°é‡ä»£å¸ uint256 public totalSupply = 1000000; // åœ°å€ç±»å‹å˜é‡ç”¨äºå­˜å‚¨ä»¥å¤ªåŠè´¦æˆ· address public owner; // `mapping` æ˜¯ä¸€ä¸ªé”®/å€¼æ˜ å°„ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå­˜å‚¨æ¯ä¸ªå¸æˆ·ä½™é¢ mapping(address =\u0026gt; uint256) balances; /** * åˆçº¦åˆå§‹åŒ– * * `constructor` åªåœ¨åˆçº¦åˆ›å»ºæ—¶æ‰§è¡Œ */ constructor() { // totalSupply è¢«åˆ†é…ç»™äº¤æ˜“å‘é€æ–¹ï¼Œå³éƒ¨ç½²åˆçº¦çš„å¸æˆ· balances[msg.sender] = totalSupply; owner = msg.sender; } /** * ä¼ é€’ä»£å¸çš„å‡½æ•° * * `external` ä¿®é¥°ç¬¦ä½¿å‡½æ•°åªèƒ½ä»åˆçº¦å¤–éƒ¨è°ƒç”¨ */ function transfer(address to, uint256 amount) external { // æ£€æŸ¥äº¤æ˜“å‘é€æ–¹æ˜¯å¦æœ‰è¶³å¤Ÿçš„ä»£å¸ // å¦‚æœ `require` çš„ç¬¬ä¸€ä¸ªå‚æ•°è®¡ç®—ç»“æœä¸º `false``,åˆ™æ•´ä¸ªäº¤æ˜“ä¼šæ¢å¤ require(balances[msg.sender] \u0026gt;= amount, \u0026quot;Not enough tokens\u0026quot;); // è½¬ç§»é‡‘é¢ balances[msg.sender] -= amount; balances[to] += amount; } /** * è¯»å–ç»™å®šå¸æˆ·çš„ä»£å¸ä½™é¢ * * `view` ä¿®é¥°ç¬¦è¡¨ç¤ºå®ƒä¸ä¿®æ”¹åˆçº¦çš„çŠ¶æ€ï¼Œè¿™å…è®¸æˆ‘ä»¬åœ¨ä¸æ‰§è¡Œäº¤æ˜“çš„æƒ…å†µä¸‹è°ƒç”¨å®ƒ */ function balanceOf(address account) external view returns (uint256) { return balances[account]; } } *.sol æ˜¯ Solidity çš„æ–‡ä»¶ç±»å‹ã€‚æˆ‘ä»¬å»ºè®®å°†æ–‡ä»¶åä¸å…¶åŒ…å«çš„åˆçº¦ç›¸åŒ¹é…ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„åšæ³•ã€‚\nç¼–è¯‘åˆåŒ ç¼–è¯‘åˆçº¦ï¼Œåœ¨ä½ çš„ç»ˆç«¯ä¸­æ‰§è¡Œnpx hardhat compileã€‚è¯¥ compile ä»»åŠ¡æ˜¯å†…ç½®ä»»åŠ¡ä¹‹ä¸€ã€‚\n$ npx hardhat compile Compiling 1 file with 0.7.3 Compilation finished successfully åˆçº¦å·²ç»ç¼–è¯‘æˆåŠŸï¼Œç°åœ¨ä½ å°±å¯ä»¥ä½¿ç”¨äº†ã€‚\n0x5 æµ‹è¯•åˆçº¦ åœ¨æ„å»ºæ™ºèƒ½åˆçº¦æ—¶ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»£ç å°†ç›´æ¥æ“ä½œç”¨æˆ·çš„é’±ï¼ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Hardhat ç½‘ç»œï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºå¼€å‘è€Œè®¾è®¡çš„æœ¬åœ°ä»¥å¤ªåŠç½‘ç»œï¼Œå®ƒå†…ç½®åœ¨ Hardhat å·¥å…·ä¸­ï¼Œå¹¶ä¸”æ˜¯é»˜è®¤ç½‘ç»œã€‚ä½ æ— éœ€è®¾ç½®ä»»ä½•å†…å®¹å³å¯ä½¿ç”¨å®ƒã€‚åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ ethers.js ä¸æˆ‘ä»¬åœ¨ä¸ŠèŠ‚ä¸­æ„å»ºçš„ä»¥å¤ªåŠåˆçº¦è¿›è¡Œäº¤äº’ï¼Œå¹¶ä¸”ä½¿ç”¨ Mocha ä½œä¸ºæˆ‘ä»¬çš„æµ‹è¯•è¿è¡Œæ—¶ã€‚\nç¼–å†™æµ‹è¯• åœ¨æˆ‘ä»¬çš„é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºåä¸ºtestçš„ç›®å½•ï¼Œå¹¶åœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸ºToken.jsçš„æ–‡ä»¶ã€‚ æˆ‘ä»¬ä»ä¸‹é¢çš„ä»£ç å¼€å§‹ã€‚æˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥è§£é‡Šå…¶ä¸­çš„å«ä¹‰ï¼Œä½†ç°åœ¨ä½ åªéœ€å°†å…¶ç²˜è´´åˆ° Token.js ä¸­ï¼š\nconst { expect } = require(\u0026quot;chai\u0026quot;); describe(\u0026quot;Token contract\u0026quot;, function () { it(\u0026quot;Deployment should assign the total supply of tokens to the owner\u0026quot;, async function () { const [owner] = await ethers.getSigners(); const Token = await ethers.getContractFactory(\u0026quot;Token\u0026quot;); const hardhatToken = await Token.deploy(); const ownerBalance = await hardhatToken.balanceOf(owner.address); expect(await hardhatToken.totalSupply()).to.equal(ownerBalance); }); }); åœ¨ä½ çš„ç»ˆç«¯ä¸Šè¿è¡Œ npx hardhat testï¼Œä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š\nnpx hardhat test Token contract âœ“ Deployment should assign the total supply of tokens to the owner (654ms) 1 passing (663ms) è¿™æ„å‘³ç€æµ‹è¯•é€šè¿‡äº†ã€‚ç°åœ¨è®©æˆ‘ä»¬è§£é‡Šæ¯ä¸€è¡Œï¼š\nconst [owner] = await ethers.getSigners(); Signer ä»£è¡¨ ethers.js ä¸­ä»¥å¤ªåŠçš„å¯¹è±¡ã€‚ å®ƒç”¨äºå‘åˆçº¦å’Œå…¶ä»–è´¦æˆ·å‘é€äº¤æ˜“ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¾—åˆ°äº†æ‰€è¿æ¥èŠ‚ç‚¹ä¸­çš„è´¦æˆ·åˆ—è¡¨ï¼Œåœ¨æœ¬ä¾‹ä¸­æ—¶Hardhat ç½‘ç»œï¼Œå¹¶ä¸”åªä¿ç•™ç¬¬ä¸€ä¸ªã€‚\nè¯¥etherså˜é‡åœ¨å…¨å±€èŒƒå›´å†…å¯ç”¨ã€‚ä½ å¯ä»¥åœ¨é¡¶éƒ¨æ·»åŠ è¿™ä¹ˆä¸€è¡Œï¼š\nconst { ethers } = require(\u0026quot;hardhat\u0026quot;); è¦äº†è§£æ›´å¤šå…³äºSingerçš„ä¿¡æ¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹ Signers æ–‡æ¡£ã€‚\nconst Token = await ethers.getContractFactory(\u0026quot;Token\u0026quot;); åœ¨ ethers.js ä¸­ï¼ŒContractFactory æ˜¯ä¸€ä¸ªç”¨äºéƒ¨ç½²æ–°æ™ºèƒ½åˆçº¦çš„æŠ½è±¡ï¼Œæ‰€ä»¥è¿™é‡Œçš„ Tokenæ˜¯æˆ‘ä»¬çš„ä»£å¸åˆçº¦å·¥å‚çš„å®ä¾‹ã€‚\nconst hardhatToken = await Token.deploy(); åœ¨ ContractFactory ä¸Šè°ƒç”¨deploy()å°†å¼€å§‹éƒ¨ç½²ï¼Œå¹¶è¿”å›Contractè§£æåçš„ Promiseã€‚è¿™æ˜¯ä¸ºä½ çš„æ¯ä¸ªæ™ºèƒ½åˆçº¦åŠŸèƒ½æä¾›æ–¹æ³•çš„å¯¹è±¡ã€‚\nconst ownerBalance = await hardhatToken.balanceOf(owner.address); ä¸€æ—¦éƒ¨ç½²äº†åˆçº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨hardhatTokenä¸Šè°ƒç”¨æˆ‘ä»¬çš„åˆçº¦æ–¹æ³•ï¼Œå¹¶é€šè¿‡è°ƒç”¨balanceOf()æ¥è·å–ç›¸åº”æ‰€æœ‰è€…å¸æˆ·çš„ä½™é¢ã€‚\nè¯·è®°ä½ï¼Œè·å¾—æ•´ä¸ªä¾›åº”é‡çš„ä»£å¸æ‰€æœ‰è€…æ˜¯è¿›è¡Œéƒ¨ç½²çš„è´¦æˆ·ï¼Œå½“ä½¿ç”¨hardhat-ethersæ’ä»¶æ—¶ï¼ŒContractFactoryå’ŒContractå®ä¾‹é»˜è®¤è¿æ¥åˆ°ç¬¬ä¸€ä¸ªç­¾åè€…ã€‚è¿™æ„å‘³ç€ownerå˜é‡ä¸­çš„è´¦æˆ·æ‰§è¡Œäº†éƒ¨ç½²ï¼Œè€ŒbalanceOf()åº”è¯¥è¿”å›æ•´ä¸ªä¾›åº”é‡ã€‚\nexpect(await hardhatToken.totalSupply()).to.equal(ownerBalance); åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨æˆ‘ä»¬çš„Contractå®ä¾‹æ¥è°ƒç”¨ Solidity ä»£ç ä¸­çš„æ™ºèƒ½åˆçº¦å‡½æ•°ã€‚totalSupply()è¿”å›ä»£å¸çš„ä¾›åº”é‡ï¼Œæˆ‘ä»¬æ£€æŸ¥å®ƒæ˜¯å¦ç­‰äºownerBalanceï¼Œæ­£å¦‚å®ƒåº”è¯¥åšçš„é‚£æ ·ã€‚\nä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Chaiï¼Œè¿™æ˜¯ä¸€ä¸ªæ–­è¨€åº“ã€‚è¿™äº›æ–­è¨€å‡½æ•°è¢«ç§°ä¸º \u0026ldquo;åŒ¹é…å™¨\u0026rdquo;ï¼Œè€Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„å‡½æ•°å®é™…ä¸Šæ¥è‡ª Waffleã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨hardhat-waffleæ’ä»¶ï¼Œå®ƒä½¿æˆ‘ä»¬æ›´å®¹æ˜“ä»Ethereum æ–­è¨€å€¼ã€‚è¯·æŸ¥çœ‹ Waffle æ–‡æ¡£ä¸­çš„è¿™ä¸€èŠ‚ï¼Œäº†è§£æ•´ä¸ªä»¥å¤ªåŠç‰¹å®šåŒ¹é…å™¨çš„åˆ—è¡¨ã€‚\nä½¿ç”¨å…¶ä»–å¸æˆ· å¦‚æœä½ éœ€è¦ä»é»˜è®¤è´¦æˆ·ï¼ˆæˆ–ethers.jsä¸­çš„Signerï¼‰ä»¥å¤–çš„è´¦æˆ·å‘é€äº¤æ˜“æ¥æµ‹è¯•ä½ çš„ä»£ç ï¼Œä½ å¯ä»¥ä½¿ç”¨ethers.js Contractä¸­çš„connect()æ–¹æ³•å°†å…¶è¿æ¥åˆ°ä¸€ä¸ªä¸åŒçš„è´¦æˆ·ã€‚åƒè¿™æ ·ï¼š\nconst { expect } = require(\u0026quot;chai\u0026quot;); describe(\u0026quot;Transactions\u0026quot;, function() { it(\u0026quot;Should transfer tokens between accounts\u0026quot;, async function() { const [owner, addr1, addr2] = await ethers.getSigners(); const Token = await ethers.getContractFactory(\u0026quot;Token\u0026quot;); const hardhatToken = await Token.deploy(); // ä»æ‰€æœ‰è€…è½¬ç§»50ä¸ªä»£å¸åˆ°addr1 await hardhatToken.transfer(addr1.address, 50); expect(await hardhatToken.balanceOf(addr1.address)).to.equal(50); // ä»addr1è½¬ç§»50ä¸ªä»£å¸åˆ°addr2 await hardhatToken.connect(addr1).transfer(addr2.address, 50); expect(await hardhatToken.balanceOf(addr2.address)).to.equal(50); }); }); å®Œå…¨è¦†ç›– ç°åœ¨æˆ‘ä»¬å·²ç»ä»‹ç»äº†æµ‹è¯•åˆçº¦æ‰€éœ€çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå®Œæ•´çš„ä»£å¸æµ‹è¯•å¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ Mocha ä»¥åŠå¦‚ä½•æ„å»ºæµ‹è¯•çš„å¤§é‡é™„åŠ ä¿¡æ¯ã€‚æˆ‘ä»¬å»ºè®®é€šè¯»ã€‚\n// æˆ‘ä»¬åœ¨è¿™é‡Œå¯¼å…¥Chaiä»¥ä½¿ç”¨å®ƒçš„æ–­è¨€å‡½æ•° const { expect } = require(\u0026quot;chai\u0026quot;); // `describe` æ˜¯ä¸€ä¸ªMochaå‡½æ•°ï¼Œå®ƒå…è®¸æ‚¨ç»„ç»‡æµ‹è¯• // å®é™…ä¸Šå¹¶ä¸éœ€è¦è¿™æ ·åšï¼Œä½†æ˜¯ç»„ç»‡æµ‹è¯•ä¼šä½¿è°ƒè¯•å˜å¾—æ›´å®¹æ˜“ã€‚æ‰€æœ‰çš„Mochaå‡½æ•°éƒ½å¯ä»¥åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä½¿ç”¨ // `describe` å‚æ•°ä¸ºä¸€ä¸ªæµ‹è¯•åç§°å’Œä¸€ä¸ªå›è°ƒå‡½æ•° // å›è°ƒå¿…é¡»å®šä¹‰è¯¥éƒ¨åˆ†çš„æµ‹è¯•ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°ä¸èƒ½æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•° describe(\u0026quot;Token contract\u0026quot;, function () { // Mocha æœ‰å››ä¸ªå‡½æ•°å¯ä»¥è®©ä½ èƒ½åœ¨æ•´ä¸ªæµ‹è¯•ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œä¸åŒçš„æ“ä½œï¼Œ // å®ƒä»¬æ˜¯ï¼š `before`, `beforeEach`, `after`, `afterEach` // å®ƒä»¬åœ¨è®¾ç½®æµ‹è¯•ç¯å¢ƒå’Œè¿è¡Œåæ¸…ç†ç¯å¢ƒæ–¹é¢éå¸¸æœ‰ç”¨ // ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼æ˜¯å£°æ˜ä¸€äº›å˜é‡ï¼Œå¹¶åœ¨ `before` å’Œ `beforeEach` å›è°ƒä¸­åˆ†é…å®ƒä»¬ let Token; let hardhatToken; let owner; let addr1; let addr2; let addrs; // `beforeEach` å°†åœ¨æ¯æ¬¡æµ‹è¯•ä¹‹å‰è¿è¡Œï¼Œæ¯æ¬¡é‡æ–°éƒ¨ç½²åˆçº¦ã€‚å®ƒæ¥æ”¶å›è°ƒï¼Œå¯ä»¥æ˜¯å¼‚æ­¥çš„ beforeEach(async function () { // åœ¨è¿™é‡Œè·å– ContractFactory å’Œç­¾åè€… Token = await ethers.getContractFactory(\u0026quot;Token\u0026quot;); [owner, addr1, addr2, ...addrs] = await ethers.getSigners(); // è¦éƒ¨ç½²æˆ‘ä»¬çš„åˆçº¦ï¼Œåªéœ€è°ƒç”¨ Token.deploy() å¹¶ç­‰å¾…å®ƒè¢« deployed()ï¼Œä¸€æ—¦å®ƒçš„äº¤æ˜“è¢«æŒ–æ˜ï¼Œå°±ä¼šå‘ç”Ÿéƒ¨ç½² hardhatToken = await Token.deploy(); }); // ä½ å¯ä»¥åµŒå¥— describe è°ƒç”¨æ¥åˆ›å»ºå°ç»“ describe(\u0026quot;Deployment\u0026quot;, function () { // `it` æ˜¯ MoCha å‡½æ•°ï¼Œè¿™æ˜¯ç”¨æ¥å®šä¹‰æµ‹è¯•çš„å·¥å…·ã€‚å®ƒæ¥æ”¶æµ‹è¯•åå’Œå›è°ƒå‡½æ•° // å¦‚æœå›è°ƒå‡½æ•°æ˜¯ä¸€æ­¥çš„ï¼ŒMocha å°† `await` it(\u0026quot;Should set the right owner\u0026quot;, async function () { // Expect æ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¹¶å°†å…¶åŒ…è£…åœ¨Assertionå¯¹è±¡ä¸­ã€‚è¿™äº›å¯¹è±¡æœ‰å¾ˆå¤šå®ç”¨æ–¹æ³•æ¥æ–­è¨€å€¼ // è¿™ä¸ªæµ‹è¯•æœŸæœ›å­˜å‚¨åœ¨åˆçº¦ä¸­çš„æ‰€æœ‰è€…å˜é‡ç­‰äºæˆ‘ä»¬éƒ¨ç½²åˆçº¦æ—¶å€™çš„æ‰€æœ‰è€… expect(await hardhatToken.owner()).to.equal(owner.address); }); it(\u0026quot;Should assign the total supply of tokens to the owner\u0026quot;, async function () { const ownerBalance = await hardhatToken.balanceOf(owner.address); expect(await hardhatToken.totalSupply()).to.equal(ownerBalance); }); }); describe(\u0026quot;Transactions\u0026quot;, function () { it(\u0026quot;Should transfer tokens between accounts\u0026quot;, async function () { // å°†50ä¸ªä»£å¸ä»æ‰€æœ‰è€…è½¬ç§»åˆ° addr1 await hardhatToken.transfer(addr1.address, 50); const addr1Balance = await hardhatToken.balanceOf(addr1.address); expect(addr1Balance).to.equal(50); // å°†50ä¸ªä»£å¸ä» addr1 è½¬ç§»åˆ° addr2 // æˆ‘ä»¬ä½¿ç”¨.connect(ç­¾åè€…)ä»å¦ä¸€ä¸ªå¸æˆ·å‘é€äº¤æ˜“ await hardhatToken.connect(addr1).transfer(addr2.address, 50); const addr2Balance = await hardhatToken.balanceOf(addr2.address); expect(addr2Balance).to.equal(50); }); it(\u0026quot;Should fail if sender doesnâ€™t have enough tokens\u0026quot;, async function () { const initialOwnerBalance = await hardhatToken.balanceOf(owner.address); // å°è¯•ä» addr1 (0 ä»£å¸)å‘é€1ä¸ªä»£è¡¨ç»™æ‰€æœ‰è€…(1000000 ä»£å¸)ã€‚ // `require`å°†è®¡ç®—ä¸º false å¹¶æ¢å¤äº¤æ˜“ await expect( hardhatToken.connect(addr1).transfer(owner.address, 1) ).to.be.revertedWith(\u0026quot;Not enough tokens\u0026quot;); // æ‰€æœ‰è€…ä½™é¢ä¸åº”è¯¥æ”¹å˜ expect(await hardhatToken.balanceOf(owner.address)).to.equal( initialOwnerBalance ); }); it(\u0026quot;Should update balances after transfers\u0026quot;, async function () { const initialOwnerBalance = await hardhatToken.balanceOf(owner.address); // å°†100ä¸ªä»£å¸ä»æ‰€æœ‰è€…è½¬ç§»åˆ° addr1 await hardhatToken.transfer(addr1.address, 100); // å°†å¦å¤–50ä¸ªä»£å¸ä»æ‰€æœ‰è€…è½¬ç§»åˆ°addr2 await hardhatToken.transfer(addr2.address, 50); // æ£€æŸ¥ä½™é¢ const finalOwnerBalance = await hardhatToken.balanceOf(owner.address); expect(finalOwnerBalance).to.equal(initialOwnerBalance.sub(150)); const addr1Balance = await hardhatToken.balanceOf(addr1.address); expect(addr1Balance).to.equal(100); const addr2Balance = await hardhatToken.balanceOf(addr2.address); expect(addr2Balance).to.equal(50); }); }); }); è¿™å°±æ˜¯npx hardhat testå®Œæ•´æµ‹è¯•å¥—ä»¶çš„è¾“å‡ºï¼Œæ˜¯è¿™æ ·çš„ï¼š\n$ npx hardhat test Token contract Deployment âœ“ Should set the right owner âœ“ Should assign the total supply of tokens to the owner Transactions âœ“ Should transfer tokens between accounts (199ms) âœ“ Should fail if sender doesnâ€™t have enough tokens âœ“ Should update balances after transfers (111ms) 5 passing (1s) è¯·è®°ä½ï¼Œå½“ä½ è¿è¡Œnpx hardhat testæ—¶ï¼Œå¦‚æœä½ çš„åˆçº¦è‡ªä¸Šæ¬¡è¿è¡Œæµ‹è¯•ä»¥æ¥å‘ç”Ÿæ›´æ”¹ï¼Œåˆ™å°†ç¼–è¯‘å®ƒä»¬ã€‚\n0x6 ä½¿ç”¨ Hardhat ç½‘ç»œè¿›è¡Œè°ƒè¯• Hardhat å†…ç½®äº†Hardhat ç½‘ç»œï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºå¼€å‘è€Œè®¾è®¡çš„æœ¬åœ°ä»¥å¤ªåŠç½‘ç»œã€‚å®ƒå…è®¸ä½ éƒ¨ç½²åˆçº¦ã€è¿è¡Œæµ‹è¯•å’Œè°ƒè¯•ä»£ç ã€‚è¿™æ˜¯ Hardhat è¿æ¥çš„é»˜è®¤ç½‘ç»œï¼Œå› æ­¤ä½ æ— éœ€è¿›è¡Œä»»ä½•è®¾ç½®å³å¯ä½¿å…¶æ­£å¸¸å·¥ä½œã€‚åªéœ€è¿è¡Œä½ çš„æµ‹è¯•ã€‚\nSolidity console.log åœ¨ Hardhat ç½‘ç»œä¸Šè¿è¡Œåˆçº¦å’Œæµ‹è¯•æ—¶ï¼Œä½ å¯ä»¥åœ¨ Solidity ä»£ç ä¸­ä½¿ç”¨console.log()æ¥æ‰“å°æ—¥å¿—æ¶ˆæ¯ä¸åˆçº¦å˜é‡ã€‚è¦ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»åœ¨ä½ çš„åˆçº¦ä»£ç ä¸­å¯¼å…¥ hardhat/console.solã€‚\npragma solidity ^0.8.0; import \u0026quot;hardhat/console.sol\u0026quot;; contract Token { //... } åƒåœ¨ JavaScript ä¸­ä½¿ç”¨console.logé‚£æ ·åœ¨transfer()å‡½æ•°æ·»åŠ ä¸€äº›å†…å®¹ï¼š\nfunction transfer(address to, uint256 amount) external { console.log(\u0026quot;Sender balance is %s tokens\u0026quot;, balances[msg.sender]); console.log(\u0026quot;Trying to send %s tokens to %s\u0026quot;, amount, to); require(balances[msg.sender] \u0026gt;= amount, \u0026quot;Not enough tokens\u0026quot;); balances[msg.sender] -= amount; balances[to] += amount; } è¿è¡Œæµ‹è¯•æ—¶å°†æ˜¾ç¤ºæ—¥å¿—è¾“å‡ºï¼š\n$ npx hardhat test Token contract Deployment âœ“ Should set the right owner âœ“ Should assign the total supply of tokens to the owner Transactions Sender balance is 1000 tokens Trying to send 50 tokens to 0xead9c93b79ae7c1591b1fb5323bd777e86e150d4 Sender balance is 50 tokens Trying to send 50 tokens to 0xe5904695748fe4a84b40b3fc79de2277660bd1d3 âœ“ Should transfer tokens between accounts (373ms) âœ“ Should fail if sender doesnâ€™t have enough tokens Sender balance is 1000 tokens Trying to send 100 tokens to 0xead9c93b79ae7c1591b1fb5323bd777e86e150d4 Sender balance is 900 tokens Trying to send 100 tokens to 0xe5904695748fe4a84b40b3fc79de2277660bd1d3 âœ“ Should update balances after transfers (187ms) 5 passing (2s) æŸ¥çœ‹æ–‡æ¡£ä»¥äº†è§£æœ‰å…³æ­¤åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ã€‚\n0x7 éƒ¨ç½²åˆ°çœŸå®ç½‘ç»œ ä¸€æ—¦ä½ å‡†å¤‡å¥½ä¸å…¶ä»–äººåˆ†äº«ä½ çš„ dAppï¼Œä½ å¯èƒ½æƒ³è¦åšçš„å°±æ˜¯éƒ¨ç½²åˆ°çœŸå®çš„ç½‘ç»œã€‚è¿™æ ·ï¼Œå…¶ä»–äººå°±å¯ä»¥è®¿é—®ä½ çš„ dAppäº†ã€‚\næ¶‰åŠçœŸé’±äº¤æ˜“çš„ä»¥å¤ªåŠç½‘ç»œï¼Œè¢«ç§°ä¸ºâ€œmainnetâ€ï¼Œç„¶è€Œè¿˜æœ‰å…¶ä»–ä¸ä¸çœŸé’±äº¤æ˜“çš„ç½‘ç»œï¼Œä½†å´èƒ½å¾ˆå¥½çš„æ¨¡æ‹Ÿç°å®ä¸–ç•Œçš„åœºæ™¯ï¼Œä¹Ÿå¯ä»¥è¢«å…¶ä»–äººè®¿é—®çš„ç½‘ç»œç§°ä¸ºâ€œtestnetsâ€ã€‚ä»¥å¤ªåŠæœ‰å¤šä¸ªæµ‹è¯•ç½‘:Ropstenã€Kovanã€Rinkebyå’ŒGoerliã€‚æˆ‘ä»¬å»ºè®®å°†åˆçº¦éƒ¨ç½²åˆ° Ropsten æµ‹è¯•ç½‘ã€‚\nåœ¨è½¯ä»¶å±‚é¢ï¼Œéƒ¨ç½²åˆ°æµ‹è¯•ç½‘ä¸éƒ¨ç½²åˆ°ä¸»ç½‘æ˜¯ä¸€æ ·çš„ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯ä½ è¿æ¥åˆ°å“ªä¸ªç½‘ç»œã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ether.jséƒ¨ç½²åˆçº¦çš„ä»£ç æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚\nä½¿ç”¨çš„ä¸»è¦æ¦‚å¿µæ˜¯Signerã€ContractFactoryå’ŒContractï¼Œæˆ‘ä»¬åœ¨æµ‹è¯•éƒ¨åˆ†ä¸­è§£é‡Šè¿‡ã€‚ä¸æµ‹è¯•ç›¸æ¯”ï¼Œæ²¡æœ‰ä»€ä¹ˆæ–°äº‹æƒ…éœ€è¦åšï¼Œå› ä¸ºå½“åœ¨æµ‹è¯•åˆçº¦æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨å‘ä½ çš„å¼€å‘ç½‘ç»œè¿›è¡Œéƒ¨ç½²ã€‚è¿™ä½¿å¾—ä»£ç éå¸¸ç›¸ä¼¼ã€‚\nè®©æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½• scriptsï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ°deploy.jsæ–‡ä»¶ä¸­ï¼š\nasync function main() { const [deployer] = await ethers.getSigners(); console.log(\u0026quot;Deploying contracts with the account:\u0026quot;, deployer.address); console.log(\u0026quot;Account balance:\u0026quot;, (await deployer.getBalance()).toString()); const Token = await ethers.getContractFactory(\u0026quot;Token\u0026quot;); const token = await Token.deploy(); console.log(\u0026quot;Token address:\u0026quot;, token.address); } main() .then(() =\u0026gt; process.exit(0)) .catch((error) =\u0026gt; { console.error(error); process.exit(1); è¦åœ¨è¿è¡Œä»»ä½•ä»»åŠ¡æ—¶æŒ‡å®š Hardhat è¿æ¥åˆ°ç‰¹å®šçš„ä»¥å¤ªåŠç½‘ç»œï¼Œå¯ä»¥ä½¿ç”¨--networkå‚æ•°ã€‚åƒè¿™æ ·ï¼š\nnpx hardhat run scripts/deploy.js --network \u0026lt;network-name\u0026gt; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸å¸¦--networkå‚æ•°è¿è¡Œå®ƒä¼šä½¿ä»£ç é’ˆåœ¨Hardhat ç½‘ç»œçš„åµŒå…¥å¼å®ä¾‹è¿è¡Œï¼Œå› æ­¤å½“ Hardhat å®Œæˆè¿è¡Œæ—¶ï¼Œéƒ¨ç½²å®é™…ä¸Šä¼šä¸¢å¤±ï¼Œä½†æµ‹è¯•æˆ‘ä»¬çš„éƒ¨ç½²ä»£ç æ˜¯å¦æœ‰æ•ˆä»ç„¶å¾ˆæœ‰ç”¨ï¼š\n$ npx hardhat run scripts/deploy.js Deploying contracts with the account: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 Account balance: 10000000000000000000000 Token address: 0x5FbDB2315678afecb367f032d93F642f64180aa3 éƒ¨ç½²åˆ°è¿œç¨‹ç½‘ç»œ è¦éƒ¨ç½²åˆ°è¿œç¨‹ç½‘ç»œï¼ˆä¾‹å¦‚ä¸»ç½‘æˆ–ä»»ä½•æµ‹è¯•ç½‘ï¼‰ï¼Œä½ éœ€è¦åœ¨hardhat.config.jsæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªnetworkæ¡ç›®ã€‚æˆ‘ä»¬å°†åœ¨æ­¤ç¤ºä¾‹ä¸­ä½¿ç”¨ Ropstenï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä»¥ç±»ä¼¼åœ°æ–¹å¼æ·»åŠ ä»»ä½•ç½‘ç»œï¼š\nrequire(\u0026quot;@nomiclabs/hardhat-waffle\u0026quot;); // ç™»å½•https://www.alchemyapi.ioï¼Œæ³¨å†Œï¼Œ // åœ¨å…¶ä»ªè¡¨æ¿ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå¹¶å°†â€œKEYâ€æ›¿æ¢ä¸ºå…¶å¯†é’¥ const ALCHEMY_API_KEY = \u0026quot;KEY\u0026quot;; // ä» Metamask å¯¼å‡ºä½ çš„ç§é’¥ï¼Œæ‰“å¼€Metamaskï¼Œå¹¶è¿›å…¥å¸æˆ·è¯¦ç»†ä¿¡æ¯\u0026gt;å¯¼å‡ºç§é’¥ // åƒä¸‡æ³¨æ„ï¼Œæ°¸è¿œä¸è¦æŠŠçœŸå®çš„Etherè½¬åˆ°æµ‹è¯•å¸æˆ· const ROPSTEN_PRIVATE_KEY = \u0026quot;YOUR ROPSTEN PRIVATE KEY\u0026quot;; module.exports = { solidity: \u0026quot;0.7.3\u0026quot;, networks: { ropsten: { url: `https://eth-ropsten.alchemyapi.io/v2/${ALCHEMY_API_KEY}`, accounts: [`${ROPSTEN_PRIVATE_KEY}`] } } }; æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨Alchemyï¼Œä½†æŒ‡å‘ä»»ä½•ä»¥å¤ªåŠèŠ‚ç‚¹æˆ–ç½‘å…³çš„urléƒ½å¯ä»¥å·¥ä½œã€‚\nè¦éƒ¨ç½²åœ¨Ropstenç½‘ç»œä¸Šï¼Œä½ éœ€è¦å°†Ropsten-ETHå‘é€åˆ°å°†è¦è¿›è¡Œéƒ¨ç½²çš„åœ°å€ã€‚ä½ å¯ä»¥ä»æµ‹è¯•ç½‘çš„æ°´é¾™å¤´ä¸Šå¾—åˆ°ä¸€äº›ETHï¼Œè¿™æ˜¯ä¸€ç§å…è´¹åˆ†å‘æµ‹è¯•ETHçš„æœåŠ¡ã€‚è¿™æ˜¯Ropstençš„ä¸€ä¸ªæ°´é¾™å¤´ï¼Œä½ å¿…é¡»åœ¨äº¤æ˜“ä¹‹å‰å°†Metamaskçš„ç½‘ç»œæ›´æ”¹ä¸ºRopstenã€‚ æœ€åï¼Œè¿è¡Œï¼š\nnpx hardhat run scripts/deploy.js --network ropsten å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°å·²éƒ¨ç½²çš„åˆçº¦åœ°å€ã€‚\n0x8 æ¨¡ç‰ˆé¡¹ç›® å¦‚æœä½ æƒ³å¿«é€Ÿå¼€å§‹ä½¿ç”¨ä½ çš„dAppï¼Œäº¦æˆ–è€…æƒ³é€šè¿‡å‰ç«¯æŸ¥çœ‹æ•´ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹demoé¡¹ç›®åº“ã€‚ https://github.com/nomiclabs/hardhat-hackathon-boilerplate\nåŒ…æ‹¬äº›ä»€ä¹ˆ æˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„ Solidity åˆçº¦ ä½¿ç”¨ ethers.js å’Œ Waffle çš„æµ‹è¯•å¥—ä»¶ ä½¿ç”¨ ethers.js ä¸åˆçº¦äº¤äº’çš„æœ€å°å‰ç«¯ Solidity åˆçº¦å’Œæµ‹è¯• åœ¨ repo çš„æ ¹ç›®å½•ä¸­ï¼Œæ‚¨ä¼šæ‰¾åˆ°æˆ‘ä»¬é€šè¿‡æœ¬æ•™ç¨‹ä¸åˆçº¦ä¸€èµ·æ„å»ºçš„Hardhaté¡¹ç›®ã€‚Tokenåˆ·æ–°ä½ å¯¹å®ƒå®ç°çš„è®°å¿†ï¼š\nä»£å¸çš„æ€»ä¾›åº”é‡æ˜¯å›ºå®šçš„ï¼Œæ— æ³•æ›´æ”¹ æ•´ä¸ªä¾›åº”åˆ†é…åˆ°éƒ¨ç½²åˆçº¦çš„åœ°å€ ä»»ä½•äººéƒ½å¯ä»¥æ”¶åˆ°ä»£å¸ ä»»ä½•æ‹¥æœ‰è‡³å°‘ä¸€ä¸ªä»£å¸çš„äººéƒ½å¯ä»¥è½¬ç§»ä»£å¸ ä»£å¸æ˜¯ä¸å¯åˆ†å‰²çš„ã€‚ä½ å¯ä»¥è½¬ç§» 1ã€2ã€3 æˆ– 37 ä¸ªä»£å¸ï¼Œä½†ä¸èƒ½è½¬ç§» 2.5 ä¸ª å‰ç«¯åº”ç”¨ ä½ ä¼šå‘ç°ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºï¼Œfrontendå®ƒå…è®¸ç”¨æˆ·åšä¸¤ä»¶äº‹ï¼š\næ£€æŸ¥å·²è¿æ¥é’±åŒ…çš„ä½™é¢ å°†ä»£å¸å‘é€åˆ°åœ°å€ è¿™æ˜¯ä¸€ä¸ªå•ç‹¬çš„ npm é¡¹ç›®ï¼Œå®ƒæ˜¯ä½¿ç”¨create-react-appåˆ›å»ºçš„ï¼Œæ‰€ä»¥è¿™æ„å‘³ç€å®ƒä½¿ç”¨äº† webpack å’Œ babelã€‚ å‰ç«¯æ–‡ä»¶æ¶æ„ `src/``åŒ…å«æ‰€æœ‰ä»£ç  src/componentsåŒ…å«ååº”ç»„ä»¶ Dapp.jsæ˜¯å”¯ä¸€å…·æœ‰ä¸šåŠ¡é€»è¾‘çš„æ–‡ä»¶ã€‚å¦‚æœä½ å°†å…¶ç”¨ä½œæ¨¡ç‰ˆï¼Œä½ å¯ä»¥åœ¨æ­¤å¤„ç”¨ä½ è‡ªå·±çš„ä»£ç æ›¿æ¢ å…¶ä»–æ‰€æœ‰ç»„ä»¶éƒ½åªå‘ˆç° HTMLï¼Œæ²¡æœ‰é€»è¾‘ã€‚ src/contractsæœ‰åˆçº¦çš„ ABI å’Œåœ°å€ï¼Œè¿™äº›æ˜¯ç”±éƒ¨ç½²è„šæœ¬è‡ªåŠ¨ç”Ÿæˆçš„ å¦‚ä½•ä½¿ç”¨å®ƒ é¦–å…ˆå…‹éš†è¯¥åº“ï¼Œç„¶åéƒ¨ç½²åˆçº¦ï¼š\ncd hardhat-hackathon-boilerplate npm install npx hardhat node åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªå®‰è£… npm é¡¹ç›®çš„ä¾èµ–é¡¹ï¼Œå¹¶é€šè¿‡è¿è¡Œnpx hardhat nodeå¯åŠ¨ä¸€ä¸ªHardhat ç½‘ç»œå®ä¾‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ MetaMask è¿æ¥åˆ°è¯¥å®ä¾‹ã€‚åœ¨åŒä¸€ç›®å½•ä¸­çš„ä¸åŒç»ˆç«¯ä¸­ï¼Œè¿è¡Œï¼š\nnpx hardhat --network localhost run scripts/deploy.js è¿™ä¼šå°†åˆçº¦éƒ¨ç½²åˆ°Hardhatç½‘ç»œã€‚å®Œæˆåè¿è¡Œï¼š\ncd frontend npm install npm run start å¯åŠ¨react web appã€‚æ‰“å¼€http://localhost:3000/ ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°ï¼š åœ¨ MetaMask ä¸­å°†ä½ çš„ç½‘ç»œè®¾ç½®ä¸ºlocalhost:8545ã€‚ ç„¶åå¯èƒ½è¿˜éœ€è¦é…ç½® MetaMask ä»¥ä¸ Hardhat é…åˆä½¿ç”¨ã€‚ä¸ºæ­¤ï¼Œè¯·è½¬åˆ°Settings -\u0026gt; Networks -\u0026gt; Localhost 8545å¹¶å°†é“¾ ID æ›´æ”¹ä¸º 31337ã€‚\nç°åœ¨å•å‡» Web åº”ç”¨ç¨‹åºä¸­çš„æŒ‰é’®ã€‚ç„¶åä½ åº”è¯¥çœ‹åˆ°è¿™ä¸ªï¼š è¿™é‡Œå‘ç”Ÿçš„æƒ…å†µæ˜¯æ˜¾ç¤ºå½“å‰é’±åŒ…ä½™é¢çš„å‰ç«¯ä»£ç æ£€æµ‹åˆ°ä½™é¢ä¸º0ï¼Œå› æ­¤ä½ å°†æ— æ³•å°è¯•è½¬è´¦åŠŸèƒ½ã€‚é€šè¿‡è¿è¡Œï¼š\nnpx hardhat --network localhost faucet \u0026lt;your address\u0026gt; è¿™å°†è¿è¡Œæˆ‘ä»¬åŒ…å«åœ¨Hardhatä¸­çš„è‡ªå®šä¹‰ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ä½¿ç”¨éƒ¨ç½²å¸æˆ·çš„ä½™é¢å‘ä½ çš„åœ°å€å‘é€ 100 MBT å’Œ 1 ETHã€‚è¿™å°†å…è®¸ä½ å°†ä»£å¸å‘é€åˆ°å¦ä¸€ä¸ªåœ°å€ã€‚ ä½ å¯ä»¥æŸ¥çœ‹/tasks/faucet.jsä¸­çš„ä»»åŠ¡ä»£ç ã€‚\n$ npx hardhat --network localhost faucet 0x0987a41e73e69f60c5071ce3c8f7e730f9a60f90 Transferred 1 ETH and 100 tokens to 0x0987a41e73e69f60c5071ce3c8f7e730f9a60f90 åœ¨ä½ è¿è¡Œnpx hardhat nodeçš„ç»ˆç«¯ä¸­ï¼Œä½ ä¹Ÿåº”è¯¥çœ‹åˆ°:\neth_sendTransaction Contract call: Token#transfer Transaction: 0x460526d98b86f7886cd0f218d6618c96d27de7c745462ff8141973253e89b7d4 From: 0xc783df8a850f42e7f7e57013759c285caa701eb6 To: 0x7c2c195cd6d34b8f845992d380aadb2730bb9c6f Value: 0 ETH Gas used: 37098 of 185490 Block #8: 0x6b6cd29029b31f30158bfbd12faf2c4ac4263068fd12b6130f5655e70d1bc257 console.log: Transferring from 0xc783df8a850f42e7f7e57013759c285caa701eb6 to 0x0987a41e73e69f60c5071ce3c8f7e730f9a60f90 100 tokens åœ¨æˆ‘ä»¬çš„åˆçº¦ä¸­æ˜¾ç¤ºtransfer()å‡½æ•°çš„console.logè¾“å‡ºï¼Œè¿™æ˜¯è¿è¡Œæ°´é¾™å¤´ä»»åŠ¡åwebåº”ç”¨ç¨‹åºçš„æ ·å­: è¯•ç€è°ƒè¯•å®ƒå¹¶é˜…è¯»ä»£ç ã€‚å®ƒå……æ»¡äº†æ³¨é‡Šï¼Œè§£é‡Šæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¹¶æ¸…æ¥šåœ°è¡¨æ˜å“ªäº›ä»£ç æ˜¯ä»¥å¤ªåŠæ¨¡ç‰ˆä»£ç ï¼Œå“ªäº›å®é™…ä¸Šæ˜¯dAppé€»è¾‘ã€‚è¿™å°†ä½¿è¯¥é¡¹ç›®æ˜“äºä¸ºä½ çš„é¡¹ç›®é‡ç”¨ã€‚\n0x9 ç»“æŸè¯­ æ­å–œä½ å®Œæˆäº†æœ¬æ•™ç¨‹ï¼ ä»¥ä¸‹æ˜¯ä¸€äº›è¡¥å……é“¾æ¥ï¼Œè®©ä½ æ›´æ·±å…¥äº†è§£ï¼š\nHardhat\u0026rsquo;s Hackathon Boilerplate Hardhat\u0026rsquo;s documentation site Hardhat Support Discord server Ethers.js Documentation Waffle Documentation Mocha Documentation Chai Documentation ","id":13,"section":"posts","summary":"0x1 æ¦‚è¿° æˆ‘åœ¨å…¥é—¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘æ—¶ï¼Œé¦–å…ˆæˆ‘å°±é¢ä¸´äº†ä¸€ä¸ªé€‰æ‹©ï¼ŒHardhat Vs Truffle Vs Remixï¼Œæˆ‘åº”è¯¥é€‰æ‹©å“ªä¸ªå¼€å‘å·¥å…·ã€‚æˆ‘å°±åœ¨è°·æ­Œä¸Šæœç´¢å¾ˆå¤šå¯¹æ¯”","tags":["Hardhat","æ™ºèƒ½åˆçº¦","ä»¥å¤ªåŠ","Solidity"],"title":"ä½¿ç”¨ Hardhat å…¥é—¨ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦","uri":"https://www.ganymedenil.com/2022/03/03/getting-started-with-ethereum-smart-contracts-with-hardhat.html","year":"2022"},{"content":"æœ€è¿‘ä¸€ç›´åœ¨ç ”ç©¶ NFT åœ¨æ­¤åˆ†äº«æ‰€å­¦ï¼Œä»¥åŠå¯¹è¯¥æŠ€æœ¯çš„å±•æœ›ã€‚part 1 ä¸»è¦è·Ÿå¤§å®¶åˆ†äº«ä»€ä¹ˆæ˜¯ NFTï¼ŒåŒºå—é“¾å’ŒNFTçš„å…³ç³»ï¼ŒåŠ å¯†è´§å¸ã€åŒºå—é“¾å’ŒNFTä¸­çš„äº‰è®®ã€‚\nä»€ä¹ˆæ˜¯ NFT ç®€è€Œè¨€ä¹‹ï¼ŒNFT æ˜¯ç”±åŒºå—é“¾æ”¯æŒçš„æ•°å­—ä»£å¸â€”â€”è·Ÿæ¯”ç‰¹å¸æ²¡æœ‰å®è´¨åŒºåˆ«ã€‚ä½†æ˜¯ï¼ŒNFT ä¹Ÿä»£è¡¨äº†ä¸€ä¸ªç‹¬ç‰¹çš„æ•°å­—æ–‡ä»¶ï¼Œè¿™ä¸ªæ•°å­—æ–‡ä»¶é€šå¸¸è¡¨ç°ä¸ºè§†è§‰è‰ºæœ¯å“ã€GIFã€éŸ³é¢‘æ–‡ä»¶æˆ–è€…å…¶ä»–ç±»ä¼¼çš„å½¢å¼ã€‚\nå¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯ï¼ŒNFTæ˜¯å°†æ•°å­—è‰ºæœ¯å“ã€è§†é¢‘æˆ–è€…éŸ³é¢‘é€šè¿‡ç±»ä¼¼åŠ å¯†è´§å¸ä¸€æ ·çš„æŠ€æœ¯æ–¹å¼è¯­åŒºå—é“¾ç›¸å…³è”ã€‚è™½ç„¶åŒä¸€ä¸ªåŠ å¯†è´§å¸åœ¨æŠ€æœ¯ä¸Šéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä½†ä»–ä»¬çš„ä»·å€¼ç›¸åŒï¼ˆä»¥æ¯”ç‰¹å¸ä¸ºä¾‹ï¼Œå‡è®¾åœ¨åŒä¸€æ—¶é—´ä½ æ‹¥æœ‰çš„1ä¸ªbtcå’Œæˆ‘æ‹¥æœ‰çš„1ä¸ªbtcåœ¨ä»·å€¼ä½“ç³»ä¸Šå¹¶æ²¡æœ‰åŒºåˆ«ï¼‰ã€‚NFT å¯èƒ½ç”±ç›¸åŒçš„åŒºå—é“¾æ”¯æŒï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„ä»·å€¼æ˜¯ä¸åŒçš„ï¼Œå°±åƒå®ƒä»¬æ˜¯ç‹¬ç‰¹çš„è‰ºæœ¯å“ä¸€æ ·ã€‚\nå°±åƒè‰ºæœ¯å“ä¸€æ ·ï¼Œæ•°å­—NFTè‰ºæœ¯å“ä¸ä¼šæœ‰ä¸€ä¸ªä½ å¯ä»¥æŸ¥è¯¢çš„ \u0026ldquo;ä»·æ ¼\u0026rdquo;ï¼Œå°±åƒä½ å¯ä»¥æŸ¥è¯¢ä¸€ä¸ªæ¯”ç‰¹å¸çš„ä»·æ ¼é‚£æ ·ã€‚ä½ çš„NFTçš„è´­ä¹°ä»·æ ¼ä¼šæœ‰ä¸€ä¸ªè®°å½•ï¼Œä½†å¦‚æœä½ æƒ³çŸ¥é“ä½ ç°åœ¨èƒ½å¾—åˆ°å¤šå°‘é’±ï¼Œä½ å¿…é¡»æŠŠå®ƒæ‹å–æ‰æˆ–ä»¥å…¶ä»–æ–¹å¼å‡ºå”®å®ƒã€‚(ä¹Ÿä¼šæœ‰ä¸€äº›ä¸æŸäº›è‰ºæœ¯å®¶æœ‰å…³çš„ç»éªŒæ³•åˆ™ï¼Œä¸“å®¶ä»¬å°†èƒ½å¤Ÿé¢„ä¼°ç›¸åº”çš„ä»·æ ¼ã€‚ä¾‹å¦‚ï¼Œä¸€å¹…æ—©æœŸçš„è¨å°”ç“¦å¤š-è¾¾åˆ©çš„æ²¹ç”»é€šå¸¸èƒ½å–åˆ°å¤šå°‘é’±ï¼Ÿæˆ–è€…æ™šæœŸçš„å¡å°šï¼Ÿè‰ºæœ¯ç•Œçš„ä¸“å®¶å°†èƒ½å¤Ÿæä¾›éå¸¸æœ‰æ ¹æ®çš„çŒœæµ‹ï¼Œä½†åœ¨ç”»ä½œçœŸæ­£å‡ºå”®ä¹‹å‰ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•ç¡®å®šï¼‰ã€‚\nå°†NFTè§†ä¸º \u0026ldquo;ç‹¬ç‰¹çš„æ•°å­—è‰ºæœ¯ä½œå“ï¼Œå¦‚ç»˜ç”»æˆ–è§†é¢‘ \u0026ldquo;æ˜¯å¿…è¦çš„ï¼Œä½†å¹¶ä¸å……åˆ†ã€‚è¿™å°±æ˜¯è¯´ï¼Œè‰ºæœ¯ç•Œæ˜¯ NFT ä¼¼ä¹é¦–å…ˆ \u0026ldquo;çªç ´ \u0026ldquo;çš„åœ°æ–¹ã€‚ä½†æ­£å¦‚ä½ åœ¨æœ¬æ–‡åé¢æ‰€çœ‹åˆ°çš„ï¼Œåœ¨å„ç§è¡Œä¸šä¸­éƒ½ä¼šæœ‰å¤§é‡çš„æ•°å­—è¡¨ç°å½¢å¼çš„åº”ç”¨ï¼Œå®ƒä»¬äº«æœ‰ä¸åŒºå—é“¾ç»‘å®šçš„æ‰€æœ‰å¥½å¤„ã€‚\néŸ³ä¹å®¶å‡¯è¥¿æ–¯æ™®çº³åœ¨NFTä¸Šå‘å¸ƒéŸ³ä¹è§†é¢‘\nå½“æˆ‘è´­ä¹°NFTæ—¶ï¼Œæˆ‘åˆ°åº•åœ¨ä¹°ä»€ä¹ˆ å½“å¤§å¤šæ•°äººé—®è¿™ä¸ªé—®é¢˜æ—¶ï¼Œä»–ä»¬åˆæŒ‡çš„æ˜¯ä½œä¸ºæ•°å­—è‰ºæœ¯ä½œå“çš„NFTï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä»è¿™é‡Œå¼€å§‹ã€‚\nè´­ä¹°NFTçš„è‰ºæœ¯æ”¶è—å®¶è´­ä¹°çš„æ˜¯ç”±åŒºå—é“¾æ”¯æŒçš„ç‹¬ç‰¹è€Œå®‰å…¨çš„æ•°å­—ä»£å¸ï¼Œä»£è¡¨è¯¥æ•°å­—è‰ºæœ¯ä½œå“çš„æ‰€æœ‰æƒã€‚ç®€å•åœ°è¯´ï¼Œä½ å¾—åˆ°ä¸€ä¸ªæ•°å­—æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«è‰ºæœ¯å“çš„å‰¯æœ¬ï¼Œè€Œä¸”å®ƒä¹Ÿä¸åŒºå—é“¾æŒ‚é’©ã€‚\nçœ‹ä¸Šå»å¾ˆç®€å•ï¼Œå¯¹å—ï¼Ÿä½†æ˜¯ï¼Œæ­£å¦‚ä½ æ‰€æƒ³è±¡çš„é‚£æ ·ï¼Œå°†NFTè‰ºæœ¯å“ç®€åŒ–ä¸ºè¿™äº›ç»†èŠ‚ï¼Œæœ‰ç‚¹å¿½ç•¥äº†è¦ç‚¹ã€‚å½“ä½ äº†è§£å¹¶è´­ä¹°NFTæ—¶ï¼Œä½ çš„è¡Œä¸ºå°±å·²å­˜å‚¨åˆ°åŒºå—é“¾ä¸Šï¼Œå¹¶æˆä¸ºNFTæœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¸€ç‚¹å°±å˜å¾—å¾ˆæ˜æ˜¾ã€‚\næ¢å¥è¯è¯´ï¼Œå½“ä½ è´­ä¹°NFTæ—¶ï¼Œä½ è´­ä¹°çš„æ˜¯ä½ å·²ç»è´­ä¹°äº†NFTè¿™ä¸€äº‹å®ã€‚ä½ è¿™æ ·åšçš„äº‹å®åœ¨è¯¥NFTçš„å†å²ä¸Šæ°¸è¿œæ˜¯å®‰å…¨çš„ï¼Œè€Œä¸”è¿™ä¸ªäº‹å®ä½œä¸ºåŒºå—é“¾çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥è¢«ä»»ä½•äººåœ¨ä»»ä½•åœ°æ–¹æ ¸å®ã€‚\nä½ æ‹¥æœ‰è¿™ä¸ªæ•°å­—æ–‡ä»¶ã€‚ä½ æ°¸è¿œæ‹¥æœ‰å®ƒï¼ˆæˆ–è‡³å°‘åœ¨ä½ å‡ºå”®å®ƒä¹‹å‰ï¼‰ã€‚è€ŒåŒºå—é“¾ä¸Šçš„ä»»ä½•äººå°†èƒ½å¤Ÿåœ¨ä»»ä½•æ—¶å€™éªŒè¯è¿™ä¸€äº‹å®ã€‚\nè¿™å¼•å‡ºäº†å¦ä¸€ä¸ªé—®é¢˜ï¼šå½“ä½ ä¹°äº†NFTæ—¶ï¼Œä½ æ²¡æœ‰ä¹°åˆ°ä»€ä¹ˆï¼Ÿ\nå¥½å§ï¼Œä½ å¹¶ä¸æ‹¥æœ‰è¯¥ä½œå“çš„è‘—ä½œæƒï¼›è¯¥ç‰ˆæƒä»ç„¶å±äºåˆ›ä½œè€…/è‰ºæœ¯å®¶ã€‚ ï¼ˆå¦‚æœä½ é™¤äº†è´­ä¹° NFT ä¹‹å¤–çš„ç‰ˆæƒï¼Œé‚£ä¹ˆä½ ä¹Ÿä¼šæ‹¥æœ‰è¿™äº›ä¸œè¥¿ã€‚ä½†æ˜¯ï¼Œå¤§å¤šæ•° NFT è‰ºæœ¯å“çš„è´­ä¹°è€…ä¸ä¼šè¿™æ ·åšã€‚ï¼‰è´­ä¹° NFT æ›´åƒæ˜¯è´­ä¹°å…·æœ‰å”¯ä¸€åºåˆ—å·çš„æ•°å­—è‰ºæœ¯å“ã€‚æœ‰å¤šå°‘åƒæ‚¨è¿™æ ·çš„ NFT ç”±è‰ºæœ¯å®¶æˆ–åˆ›ä½œè€…å†³å®šã€‚ ä¸€ä¸ªå¾ˆå¥½çš„ç±»æ¯”å¯èƒ½æ˜¯é™é‡ç‰ˆæ£’çƒå¡ã€æ‰‹è¡¨æˆ–ä¸€å¹…ç”»çš„å°åˆ·å“ã€‚ æ‚¨çš„å¯èƒ½æ˜¯â€œ1/100â€æˆ–â€œ1/1â€ã€‚ é‡è¦çš„æ˜¯â€”â€”å°±åƒæ£’çƒå¡ã€æ‰‹è¡¨æˆ–å°åˆ·å“ä¸€æ ·â€”â€”å®ƒæ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä»ç„¶å¯ä»¥å‡å€¼ï¼Œä»ç„¶å¯ä»¥å‡ºå”®ï¼Œä»ç„¶å¯ä»¥äº¤æ˜“ã€‚å®ƒè¿˜å…·æœ‰ç”±åŒºå—é“¾æ”¯æŒçš„çœŸå®æ€§çš„ç‹¬ç‰¹ä¼˜åŠ¿ã€‚\nè¿™æ˜¯ä¸€ç§æ–°çš„ä¸åŒç±»å‹çš„è‰ºæœ¯æ”¶è—å—ï¼Ÿç»å¯¹çš„ã€‚ä½†æ˜¯ï¼Œå½“å®ƒç¬¬ä¸€æ¬¡å‡ºç°æ—¶ï¼Œä¸€åˆ‡éƒ½å¾ˆé‡è¦ã€‚ è¯·è®°ä½ï¼šæ‹¥æœ‰ NFT å¹¶ä¸æ¯”ä¼ ç»Ÿè‰ºæœ¯å½¢å¼â€œæ›´å¥½â€æˆ–â€œæ›´ç³Ÿâ€ã€‚ å®ƒä»¬æ˜¯ä¸€ç§å®Œå…¨æ‹¥æœ‰è‰ºæœ¯çš„æ–°æ–¹å¼ã€‚\nå½“ä»£è‰ºæœ¯å®¶æ‘ä¸Šéš† (Takashi Murakami) æ¢ç´¢äº† NFT çš„è®¸å¤šæ–¹é¢ï¼ŒåŒ…æ‹¬å¯¹è‰ºæœ¯å®¶çš„ç‰ˆæƒå½±å“\næˆ‘çš„ NFT åœ¨â€œå“ªé‡Œâ€ï¼Œæˆ‘å¦‚ä½•æ‰èƒ½çœ‹åˆ°å®ƒ ä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ çš„ NFT å°†å­˜åœ¨äºæœåŠ¡å™¨æ”¯æŒçš„åŒºå—é“¾ä¸Šã€‚ åªè¦åŒºå—é“¾å­˜åœ¨ï¼Œä½ çš„ NFT å°±ä¼šå­˜åœ¨ã€‚\nå¯¹äºé‡‡ç”¨é™æ­¢å›¾åƒæˆ–è§†é¢‘å‰ªè¾‘å½¢å¼çš„ NFTï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•å±å¹•æˆ–è®¾å¤‡ä¸ŠæŸ¥çœ‹ NFTã€‚ äººä»¬å¦‚ä½•â€œçœ‹åˆ°â€ä½ çš„ NFT å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä½ ã€‚\nä½†ä»…ä»…å› ä¸º NFT æ— æ³•æŒ‚åœ¨ä½ æˆ¿å­çš„å¢™ä¸Šï¼Œå¹¶ä¸æ„å‘³ç€å®ƒä¸ä¼šæ˜¯ä½ çš„ï¼Œæˆ–è€…ä¸å®‰å…¨ã€‚ï¼ˆå¦‚æœä½ æ„¿æ„ï¼Œå®ƒå¯ä»¥æŒ‚åœ¨ä½ çš„å¢™ä¸Šï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç”µè§†å±å¹•ç­‰æ–¹å¼çœ‹åˆ°ã€‚ï¼‰ç›¸åï¼Œä½ çš„ NFT è‰ºæœ¯å“å®é™…ä¸Šå¯èƒ½æ˜¯ä½ æ‹¥æœ‰çš„æœ€å®‰å…¨çš„ä¸œè¥¿ã€‚ å®ƒå‡ ä¹è‚¯å®šæ˜¯ä½ æ‹¥æœ‰çš„æœ€å®‰å…¨çš„è‰ºæœ¯å“ã€‚ æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œç”±äº NFT ä¸­çš„åŒºå—é“¾æŠ€æœ¯ç¡®å®å°†ä½œå“çš„å†å²çƒ™å°åœ¨ä½œå“ä¸Šï¼Œå› æ­¤å¯ä»¥ç«‹å³çŸ¥é“èº«ä»½éªŒè¯å’Œå‡ºå¤„ã€‚ å³ä½¿å¯¹æ²¹ç”»è¿›è¡Œç¢³å¹´ä»£æµ‹å®šï¼Œå†åŠ ä¸Šè®­ç»ƒæœ‰ç´ çš„è‰ºæœ¯å†å²å­¦å®¶çš„æ•é”çœ¼å…‰ï¼Œèµå“ä»ç„¶å¯ä»¥å†’å……çœŸå“ã€‚ ï¼ˆæˆ–è€…ï¼Œä¸€å¹…è¢«ç›—çš„ç”»ä½œå¯èƒ½åœ¨ç»å†äº†ä¸€ç³»åˆ—å¯ç–‘çš„æ‰€æœ‰æƒä¹‹åï¼Œåœ¨æ•°å¹´ä¹‹åæ‰è¢«â€œå‘ç°â€ã€‚ï¼‰ä½†æ˜¯å½“ä¸€ä»¶è‰ºæœ¯å“æ˜¯ NFT æ—¶ï¼Œè¿™ç§å¯èƒ½æ€§å°±å®Œå…¨æ¶ˆé™¤äº†ã€‚\nNFT å°†åœ¨åŒºå—é“¾ä¸Š\u0026quot;å­˜åœ¨\u0026rdquo;ï¼Œä½†å®ƒä¹Ÿå°†æ˜¯ä½ çš„ï¼Œæ— è®ºä½ æƒ³å¦‚ä½•å±•ç¤ºå®ƒã€‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•ä»åŒºå—é“¾åˆ°NFTè‰ºæœ¯çš„ NFT æ˜¯ä» Beeple å¼€å§‹çš„å—ï¼Ÿ å½“ç„¶ä¸æ˜¯ã€‚ æ‰¾åˆ° NFT çš„ç¡®åˆ‡èµ·æºå¯èƒ½æœ‰äº›å›°éš¾ã€‚ ç‹¬ç‰¹çš„æ•°å­—é¡¹ç›®å·²ç»å­˜åœ¨äº†å‡ å¹´ã€‚ ä½†æ˜¯ï¼Œè¿™äº›ç‹¬ç‰¹çš„æ•°å­—é¡¹ç›®æ˜¯ä»€ä¹ˆæ—¶å€™ä»å•†å“è·¨è¶Šåˆ°â€œè‰ºæœ¯â€çš„å‘¢ï¼Ÿ\nå½“ç„¶ï¼Œè¿™å¼•å‡ºäº†ä¸€ä¸ªæ›´å¤§çš„é—®é¢˜ï¼š\u0026ldquo;ä»€ä¹ˆæ˜¯è‰ºæœ¯ï¼Ÿ\u0026ldquo;å¯¹æ­¤ï¼Œå¹¶æ²¡æœ‰ç®€å•çš„ç­”æ¡ˆã€‚æ•°å­—è´§å¸\u0026ndash;å¦‚ NFT ä¹‹å‰çš„æ¯”ç‰¹å¸\u0026ndash;èƒ½ç®—ä½œè‰ºæœ¯å—ï¼Ÿ\näº‹å®ä¸Šï¼Œä¹Ÿè®¸å®ƒä»¬å¯ä»¥ã€‚\né’±åœ¨è‰ºæœ¯ä¸­ä½¿ç”¨(æˆ–ä½œä¸º)è‰ºæœ¯å“å·²ç»å¾ˆå¤šæ¬¡äº†ï¼Œä¸€äº›è‰ºæœ¯å®¶åªæ˜¯æŠŠæˆå †çš„å®ç‰©è´§å¸ä½œä¸ºè‰ºæœ¯å“åœ¨ç”»å»Šå±•å‡ºã€‚2017å¹´ï¼Œè‰ºæœ¯å®¶Danai Anesiadou å°†ä¸€å…¬æ–¤é»„é‡‘å¯†å°åœ¨å¡‘æ–™ä¸­ï¼Œå¹¶å®£å¸ƒå®ƒæ˜¯ä¸€ä»¶è‰ºæœ¯å“ã€‚å›åˆ°1994å¹´ï¼Œæ¯”å°”Â·å¾·æ‹‰è’™å¾·(Bill Drummond)å’Œå‰ç±³Â·è€ƒè’‚(Jimmy Cauty)è¡¨æ¼”äº†ä¸€ä»¶â€œè‰ºæœ¯å“â€ï¼Œä»–ä»¬åœ¨ä¸€åœºå¤§ç«ä¸­çƒ§æ‰äº†ä»·å€¼100ä¸‡è‹±é•‘çš„é’ç¥¨ã€‚\nåœ¨ NFT ä¹‹å‰ï¼Œæ•°å­—è´§å¸çš„å½¢å¼æ˜¯å¦å·²ç»èµ·åˆ°äº†è‰ºæœ¯çš„ä½œç”¨ï¼Ÿ è¿™æ˜¯å¯èƒ½çš„ã€‚ ï¼ˆè¿™ä¹Ÿæ˜¯è‰ºæœ¯å²å­¦å®¶åœ¨æœªæ¥å‡ å¹´è‚¯å®šä¼šäº‰è®ºçš„é—®é¢˜ã€‚ï¼‰ç„¶è€Œï¼Œè¯¥é¢†åŸŸçš„å¤§å¤šæ•°äººéƒ½åŒæ„ï¼Œæ•°å­— NFT è‰ºæœ¯çš„ç¬¬ä¸€æ‰¹çœŸæ­£ä½œå“å¯èƒ½æ˜¯ CryptoPunksï¼Œç´§éšå…¶åçš„æ˜¯ CryptoKittiesï¼Œå®ƒäº 2017 å¹´ 11 æœˆä¸‹æ—¬é¦–å‘ã€‚CryptoKitties æ˜¯ ï¼ˆç°åœ¨ä»ç„¶æ˜¯ï¼‰åŸºäºä»¥å¤ªåŠçš„åŒºå—é“¾æ¸¸æˆï¼Œå…è®¸ç”¨æˆ·æ”¶é›†å’Œç¹æ®–æ•°å­—çŒ«ã€‚ é€šè¿‡å¼ºå¤§çš„ CryptoKitties åœ¨çº¿ç¤¾åŒºï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±ç‹¬ç‰¹çš„çŒ«â€”â€”å®ƒä»¬ä½œä¸º NFT æ°¸è¿œå­˜åœ¨â€”â€”å¹¶ç›¸äº’äº¤æ˜“å’Œå‡ºå”®ã€‚ åœ¨æ¨å‡ºçš„ç¬¬ä¸€å‘¨å†…ï¼ŒCryptoKitties çš„ç”¨æˆ·è´­ä¹°äº†è¶…è¿‡ 100 ä¸‡ç¾å…ƒçš„è¿™äº›æ•°å­—çŒ«å›¾åƒï¼\nLarva Labs çš„ CryptoPunkså·²ç»å–å‡ºäº†æ•°ç™¾ä¸‡ç¾å…ƒã€‚\nè™½ç„¶ä½œä¸ºå¤§è§„æ¨¡è‰ºæœ¯é©å‘½çš„å§‹ä½œä¿‘è€…ï¼Œç½‘ä¸Šçš„çŒ«å¯èƒ½çœ‹èµ·æ¥æœ‰ç‚¹ä¸ä¸¥è‚ƒï¼Œä½†äººä»¬è´­ä¹°è¿™äº›çŒ«çš„åŸå› ä¸ä»»ä½•äººè´­ä¹°ç¾æœ¯å“çš„åŸå› ä¸€æ ·ã€‚è¿™äº›å›¾åƒå¾ˆå¥½çœ‹ã€‚è´­ä¹°å®ƒä»¬å¾ˆæœ‰è¶£ã€‚ä½ å¯ä»¥ä»å®ƒä»¬èº«ä¸Šèµšé’±ï¼Œå› ä¸ºä½ è´­ä¹°çš„æ˜¯ä¸€ç§å‡å€¼çš„èµ„äº§ã€‚è¿™æ˜¯ä¸€ç§æ˜¾ç¤ºä½  \u0026ldquo;äº†è§£ \u0026ldquo;å’Œ \u0026ldquo;æœ‰æ–‡åŒ–\u0026rdquo;ï¼ˆæˆ–è‡³å°‘æ˜¯ \u0026ldquo;ç½‘ä¸Šæœ‰æ–‡åŒ–\u0026rdquo;ï¼‰çš„æ–¹å¼ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§è¡¨è¾¾è‡ªå·±å…´è¶£çš„æ–¹å¼ï¼ŒåŒæ—¶åœ¨ç»æµä¸Šæ”¯æŒè‰ºæœ¯å®¶ã€‚\nCryptoKitties è¿˜æ˜¾ç¤ºäº† NFT è‰ºæœ¯çš„ä¸€ä¸ªå†³å®šæ€§å’Œé©å‘½æ€§çš„ç‰¹ç‚¹ï¼Œå³å‡ ä¹ä»»ä½•è´¢å¯Œæ°´å¹³çš„æ”¶è—å®¶éƒ½å¯ä»¥å¾—åˆ°å®ƒã€‚ä»·æ ¼æœ€é€‚ä¸­çš„CryptoKitty NFT èµ·ä»·ä»…ä¸º12ç¾å…ƒã€‚\næ„è¯†åˆ°è¿™äº›çŒ« NFT åªæ˜¯æ”¶é›†æ•°å­—è‰ºæœ¯çš„ä¼Ÿå¤§äº¤å“ä¹çš„å¼€å§‹ï¼Œå¼€å‘è€…è¿…é€Ÿå¼€å§‹åˆ›å»ºåœ¨çº¿å¸‚åœºï¼Œåœ¨é‚£é‡Œå¯ä»¥ä¹°å– NFTï¼Œå¹¶ä¸”æ–°è¿›å…¥è¿™ä¸ªé¢†åŸŸçš„è‰ºæœ¯å®¶å¯ä»¥å°†ä»–ä»¬çš„ä½œå“å˜æˆNFTã€‚2018å¹´ï¼ŒSuperRareã€OpenSeaã€Nifty Gateway å’Œ MakersPlace ç­‰å¤šä¸ª NFT å¸‚åœºå¯åŠ¨å¹¶è¿è¡Œã€‚\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº› NFT å¸‚åœºé€šè¿‡ä»æ¯ä¸ªå‡ºå”®çš„ NFT ä¸­æŠ½å–ä¸€å®šæ¯”ä¾‹æ¥èµšé’±ã€‚ä½œä¸ºå›æŠ¥ï¼Œä»–ä»¬å°† NFT ç½®äºä¹°å®¶çœ¼å‰ï¼Œå¹¶ä¿ƒè¿›äº¤æ˜“ã€‚\néšç€è¿™äº›åœ¨çº¿å¸‚åœºçš„å…´èµ·ï¼Œæ›´å¤šçš„ç©å®¶å¼€å§‹å‚ä¸å…¶ä¸­ã€‚åœ¨ CryptoKitties ä¹‹ååŠ å…¥ NFT é¢†åŸŸçš„æœ€è‘—åçš„å®ä½“ä¹‹ä¸€æ˜¯ NBA å‡ºå”®æ¯”èµ›äº®ç‚¹çš„å®˜æ–¹å¹³å°â€”â€”NBA Top Shotã€‚åœ¨å…¶ä¸ŠåŠå¹´çš„è¿è¥ä¸­ï¼ŒNBA Top Shot å·²ç»å®Œæˆäº†å¤§çº¦ 4 äº¿ç¾å…ƒçš„ä¸šåŠ¡ï¼\nNBA Top Shot çš„æˆåŠŸå¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒè¡¨æ˜ï¼Œå¦‚æœè¿™æ„å‘³ç€ä»–ä»¬å¯ä»¥ä»¥ä¸€ç§ä»¤äººå…´å¥‹çš„æ–°æ–¹å¼å‚ä¸åˆ°ä»–ä»¬æœ€å–œçˆ±çš„è¿åŠ¨ä¸­ï¼Œé‚£ä¹ˆä¸€ç¾¤å¯èƒ½ä¸å–œæ¬¢æŠ€æœ¯çš„çƒè¿·ä¹Ÿä¼šé‡‡å–æªæ–½æˆä¸ºè¿™æ ·çš„äººã€‚å¦ä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­æ˜¯æ‘‡æ»šä¹é˜Ÿ Kings of Leon åœ¨ 2021 å¹´åˆå‘è¡Œäº†ä¸€å¼ ä¸“è¾‘ä½œä¸ºéŸ³é¢‘ NFTã€‚ä»–ä»¬çš„æ­Œè¿·æ„¿æ„å‘ NFT è¿ˆè¿›ï¼Œè¿™å¼ ä¸“è¾‘ä¸ºä¹é˜Ÿå¸¦æ¥äº†æ•°ç™¾ä¸‡ç¾å…ƒçš„æ”¶å…¥ã€‚\nä»åŒºå—é“¾åˆ° NFT çš„æ•…äº‹ä¹Ÿå¯ä»¥ä» NFT æ”¹å˜è‰ºæœ¯å“æ”¶è—ä½œä¸ºä¸€ç§é‡‘èé£é™©çš„æœ¬è´¨ä¸Šçœ‹å‡ºæ¥ï¼Œå°¤å…¶æ˜¯å½“æ¶‰åŠåˆ°ä½œå“å¦‚ä½•è½¬å”®çš„æ—¶å€™ã€‚ä¸¾ä¸€ä¸ªçªå‡ºçš„ä¾‹å­ï¼Œä¸€ç¾¤è‡ªç§° Metapurse çš„è‰ºæœ¯æ”¶è—å®¶åœ¨ 2021 å¹´ 1 æœˆè´­ä¹°äº† Beeple çš„ 20 ä»¶ NFT è‰ºæœ¯å“ã€‚ç„¶åä»–ä»¬å°†è¿™äº›ä½œå“çš„æ‰€æœ‰æƒåˆ†å‰²æˆä»£å¸ï¼Œç„¶åå°†è¿™äº›ä»£å¸å‡ºå”®ç»™å…¬ä¼—ã€‚æˆåƒä¸Šä¸‡çš„äººè´­ä¹°äº†å®ƒä»¬ã€‚æŒ‰ç…§æ’°å†™æœ¬æ–‡æ—¶ä»£å¸çš„ä»·å€¼è®¡ç®—ï¼Œè¿™ 20 ä»¶è‰ºæœ¯å“ç°åœ¨çš„ä»·å€¼å¢åŠ äº†å¤§çº¦ 6 å€ã€‚\næ‰€ä»¥ç°åœ¨ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°åŒºå—é“¾ä»¥æ–°çš„æ–¹å¼ä¸æŠ€æœ¯è¿æ¥æ—¶ï¼Œæˆ‘ä»¬ä¼¼ä¹å¤„åœ¨ä¸€ä¸ªå……æ»¡æ— é™æœºä¼šå’ŒæŒç»­åˆ›æ–°çš„æ—¶åˆ»ã€‚\nè‡³å°‘å°±ç›®å‰è€Œè¨€ï¼Œå¯¹ NFT äº§å“çš„éœ€æ±‚ä¼¼ä¹æ— ç©·æ— å°½ã€‚äº‹å®è¯æ˜ï¼Œå³ä½¿æ˜¯å¯èƒ½ä¸å–œæ¬¢â€œæŠ€æœ¯â€çš„ç²‰ä¸ç¾¤ä¹Ÿæ„¿æ„è·ƒè·ƒæ¬²è¯•ä½¿ç”¨ NFTã€‚ä½†éšç€è¿™ä¸€æˆåŠŸï¼ŒNFT ä¸‹ä¸€æ­¥å°†èµ°å‘ä½•æ–¹çš„åˆç†é—®é¢˜ä¹Ÿéšä¹‹è€Œæ¥ã€‚è‰ºæœ¯å®¶ä»¬ä¸æ–­å°è¯•å¯ä»¥è™šæ‹Ÿåˆ›ä½œçš„æ–°è‰ºæœ¯å½¢å¼ã€‚å¼€å‘äººå‘˜æ­£åœ¨è€ƒè™‘è¿˜æœ‰ä»€ä¹ˆå¯ä»¥è™šæ‹Ÿå‡ºå”®ï¼ˆæˆ–ä½œä¸º NFT å‡ºå”®ï¼‰ã€‚ä¾‹å¦‚ï¼Œè™šæ‹Ÿ NFT æˆ¿åœ°äº§å¸‚åœºè“¬å‹ƒå‘å±•ã€‚ä½ å¯èƒ½æ— æ³•åœ¨ç°å®ç”Ÿæ´»ä¸­æ‹¥æœ‰è±ªå®…ï¼Œä½†ç°åœ¨ç”¨æˆ·å¯ä»¥åœ¨è™šæ‹Ÿä¸–ç•Œä¸­è´­ä¹°è±ªå®…ã€‚æˆ‘ä»¬è¿˜çœ‹åˆ°æ”¶è—å®¶äº‰å…ˆæååœ°æ‰¾å‡ºå±•ç¤ºä»–ä»¬çš„ NFT çš„æœ€ä½³æ–¹å¼ã€‚ä¼ä¸šä¹Ÿåœ¨è¿™æ ·åšï¼Œå› ä¸ºä»–ä»¬å¸Œæœ›å¼€å‘å’Œæ¨å‡ºè‡ªå·±ç‹¬ç‰¹çš„ NFT äº§å“ã€‚å½“ä½ æ‹¥æœ‰äº§å“æ—¶ï¼Œä½ å¸Œæœ›å°†å…¶å±•ç¤ºåœ¨å®¢æˆ·çš„çœ¼å‰ã€‚ä½†æ˜¯è°æ˜¯ä½ çš„å®¢æˆ·ï¼Œä»–ä»¬å°†å¦‚ä½•æ‰¾åˆ°ä½ çš„ NFTï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬ä»åœ¨å¼„æ¸…æ¥šçš„ã€‚\nä»è¿™ä¸ªä¸æ–­å‘å±•çš„æ ¼å±€ä¸­ï¼Œå·²ç»å‡ºç°äº†ä¸€æ¡å¯é çš„æ™ºæ…§:ä¸è¦åå¯¹ NFTã€‚é‚£äº›è®¤ä¸º NFT åªåœ¨å°åœˆå­ä¸­æµè¡Œè¿™å·²è¢«è®¤ä¸ºæ˜¯é”™è¯¯çš„ã€‚é‚£äº›å£°ç§°åªæœ‰åœ¨ç§‘æŠ€è¡Œä¸šå·¥ä½œçš„äººæ‰ä¼šè´­ä¹° NFT çš„äººä¹Ÿæ˜¾ç„¶æ˜¯é”™è¯¯çš„ã€‚è¿˜æœ‰é‚£äº›å£°ç§° NFT æ°¸è¿œä¸ä¼šåœ¨å¤§æ‹å–è¡Œä»¥æ•°ç™¾ä¸‡ç¾å…ƒçš„ä»·æ ¼å‡ºå”®çš„äºº?ä½ çŒœå¯¹äº†;ä¹Ÿé”™äº†ã€‚\nnftæ¥ä¸‹æ¥è¦çªç ´ä»€ä¹ˆå£å’?è™½ç„¶æ²¡æœ‰äººèƒ½ç¡®åˆ‡åœ°é¢„æµ‹æœªæ¥ï¼Œä½†åœ¨æœ¬æ–‡çš„åé¢ï¼Œæˆ‘ä»¬å°†ç¡®å®š NFT ä¸‹ä¸€æ­¥å¯èƒ½é£é€Ÿå‘å±•çš„æœ€ä½³å€™é€‰è€…ã€‚\nåœ¨é¥è¿œçš„æœªæ¥ï¼Œæœ‰ä¸€å¤©ï¼Œåœ¨ä¸€ä¸ª NFT å¦‚æ­¤æ™®éä»¥è‡³äºå‡ ä¹ä¸ä¼šå¼•èµ·äººä»¬æƒŠè®¶çš„å¸‚åœºï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ„‰å¿«åœ°å›é¡¾ï¼ŒçŸ¥é“è¿™ä¸€åˆ‡ä¼¼ä¹éƒ½å§‹äºå¯æ”¶è—çš„æ•°å­—çŒ«ã€‚\nåœ¨åŠ å¯†è´§å¸ã€åŒºå—é“¾å’ŒNFTä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä»»ä½•æœ‰äº‰è®®çš„é¢†åŸŸ åœ¨åŒºå—é“¾æŠ€æœ¯ä¸Šæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ç›¸å½“å¤šçš„æ€€ç–‘å’Œæ‰¹è¯„ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘æƒ³æˆ‘ä»¬åº”è¯¥ä¹ æƒ¯äº†ï¼\nä»ä¸€å¼€å§‹ï¼Œæ–°çš„å‘æ˜å’Œåˆ›æ–°å°±å¼•èµ·äº†äººä»¬å¯¹é™Œç”Ÿäº§å“çš„å›°æƒ‘ã€‚åœ¨ä¸€äº›ä¸å¹¸çš„æ¡ˆä¾‹ä¸­ï¼Œè¿™ä¸ºæ¶ˆè´¹è€…åœ¨è´­ä¹°æ—¶å¹¶ä¸å®Œå…¨äº†è§£ä»–ä»¬æ‰€è´­ä¹°çš„äº§å“â€”â€”ç”šè‡³æ˜¯å½»å¤´å½»å°¾çš„æ¬ºè¯ˆè¡Œä¸ºå¥ å®šäº†åŸºç¡€ã€‚\nå¥½æ¶ˆæ¯æ˜¯æ¯ä¸ªäººéƒ½è¶Šæ¥è¶Šç†Ÿæ‚‰åŒºå—é“¾æ”¯æŒçš„æŠ€æœ¯ï¼ŒåŒ…æ‹¬é‚£äº›å¯èƒ½å¹¶ä¸å¤„äºæŠ€æœ¯å‰æ²¿ï¼ˆæˆ–æ ¹æœ¬ä¸äº†è§£æŠ€æœ¯ï¼‰çš„äººã€‚åŒºå—é“¾æ˜¯ä»€ä¹ˆä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¿™äº›è¦ç‚¹æ­£åœ¨è¢«ä¼ å¼€ã€‚æ¯ä¸ªäººéƒ½å¬è¯´è¿‡æ¯”ç‰¹å¸â€”â€”è¿™æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹â€”â€”å³ä½¿ä»–ä»¬ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„æˆ–å¦‚ä½•è´­ä¹°å®ƒã€‚è™½ç„¶ä»ç„¶å­˜åœ¨è¯¯ä¼ çš„å¯èƒ½æ€§ï¼Œä½†æ˜¯è¶Šæ¥è¶Šå¤šçš„å—è¿‡æ•™è‚²çš„æ¶ˆè´¹è€…åŸºç¡€æ„å‘³ç€ï¼ŒåŒºå—é“¾æŠ€æœ¯ä¸å†é‚£ä¹ˆä»¤äººå›°æƒ‘ã€‚\næ›´å¥½çš„æ¶ˆæ¯æ˜¯ï¼Œå½“æ¶‰åŠåˆ° NFT æ—¶ï¼Œä»–ä»¬ç‹¬ç‰¹çš„æŠ€æœ¯ä¸ºä»–ä»¬çš„å‰è¾ˆæ‰€ç»å†çš„è®¸å¤šæ‰¹è¯„æä¾›äº†å¼ºæœ‰åŠ›çš„åå‡»ã€‚\nä¾‹å¦‚ï¼Œåƒæ¯”ç‰¹å¸è¿™æ ·çš„åŠ å¯†è´§å¸é•¿æœŸä»¥æ¥ä¸€ç›´å› å…¶èƒ½æºæ¶ˆè€—å’Œç¢³è¶³è¿¹è€Œå—åˆ°æ‰¹è¯„ã€‚åœ¨â€œç°å®ä¸–ç•Œâ€ä¸­ï¼Œç”šè‡³æ— æ³•æ¡æŒæˆ–è§¦æ‘¸çš„æ•°å­—ç¡¬å¸å¦‚ä½•äº§ç”Ÿç¢³è¶³è¿¹ï¼Ÿç­”æ¡ˆæ˜¯ï¼šå› ä¸ºæ¯”ç‰¹å¸é€šè¿‡æŒ–çŸ¿æ¥ç»´æŠ¤å…¶åŒºå—é“¾ï¼ŒçŸ¿å·¥æ€»æ˜¯éœ€è¦ç”µåŠ›æ¥ä¸ºè¿›è¡ŒæŒ–çŸ¿çš„è®¡ç®—æœºä¾›ç”µã€‚éšç€æ¯”ç‰¹å¸çš„å¢é•¿â€”â€”è¶Šæ¥è¶Šå¤šçš„ç¡¬å¸è¢«å¼€é‡‡â€”â€”å¼€é‡‡æˆæœ¬ä¸æ–­ä¸Šå‡ã€‚å‰‘æ¡¥å¤§å­¦äº 2021 å¹´åˆå‘è¡¨çš„ä¸€é¡¹ç ”ç©¶æŠ¥å‘Šç§°ï¼Œåœ¨å…¨çƒèŒƒå›´å†…ï¼Œæ¯”ç‰¹å¸æŒ–çŸ¿ç°åœ¨æ¯å¹´æ¶ˆè€—çš„ç”µåŠ›å¤§çº¦ä¸é˜¿æ ¹å»·å›½å®¶ä¸€æ ·å¤šã€‚æ‰€æœ‰è¿™äº›èƒ½æºçš„ä½¿ç”¨å¼•å‘äº†å¯¹ç¢³æ’æ”¾çš„æ‹…å¿§ï¼Œå¹¶æé«˜äº†æ¯”ç‰¹å¸çš„ç¢³è¶³è¿¹ã€‚å¯æƒœçš„æ˜¯ï¼Œä¸ºæ¯”ç‰¹å¸æŒ–çŸ¿æä¾›åŠ¨åŠ›çš„å¤§éƒ¨åˆ†èƒ½æºè¿˜ä¸æ˜¯æ¥è‡ªå¯å†ç”Ÿèƒ½æºï¼ˆå°½ç®¡æ¯”ç‰¹å¸çˆ±å¥½è€…æ‰¿è¯ºè¿™ç§æƒ…å†µå¾ˆå¿«å°±ä¼šæ”¹å˜ï¼‰ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œå½“ä»£ NFT çš„ç”Ÿäº§æ–¹å¼ä¸æ¯”ç‰¹å¸è¿™ç±»åœ¨ç¯å¢ƒå½±å“ä¸Šç›¸æ¯”ï¼Œåªæœ‰å¾ˆå°çš„ä¸€éƒ¨åˆ†ï¼ˆåŒæ ·ï¼Œç¨åä¼šè¯¦ç»†ä»‹ç»ã€‚ï¼‰å¦‚æœå®ƒä»¬ä»¥æ­£ç¡®çš„æ–¹å¼æ¨å‡ºï¼ŒNFT å°†ä¸ä¼šåƒæ¯”ç‰¹å¸é‚£æ ·æ¶ˆè€—èƒ½æºã€‚\nå¯¹åŒºå—é“¾äº§å“çš„å…¶ä»–æ‰¹è¯„æ¥è‡ªäºå¯ç”¨ \u0026ldquo;æŠ½æ°´å’Œå€¾å€’ \u0026ldquo;è®¡åˆ’ï¼Œæˆ–æ¨å‡ºæ²¡æœ‰ä»·å€¼çš„åŠ å¯†è´§å¸ä»¥æ•…æ„æ¬ºéª—æ–°æ¥è€…çš„è®¡åˆ’ã€‚ä¾‹å¦‚ï¼Œéšç€æ¯”ç‰¹å¸çš„ä»·å€¼åœ¨2010å¹´åˆå¼€å§‹ç¼“æ…¢ä½†ç¨³å®šåœ°å¢é•¿ï¼ŒåŠ å¯†è´§å¸å¸‚åœºå……æ–¥ç€æ¯å‘¨æ¨å‡ºçš„æ–° \u0026ldquo;å¸\u0026rdquo;ã€‚è¿™äº›æ–°å¸çš„è®¸å¤šåˆ›é€ è€…åªæ˜¯ä¸ºäº†èµšå¿«é’±ã€‚ä¸ºäº†èµšå¿«é’±ï¼Œä»–ä»¬å¯èƒ½ä¼šæ¨å‡ºä¸€ç§æ¯«æ— æ„ä¹‰çš„å™±å¤´æœ‰å…³çš„åŠ å¯†è´§å¸\u0026ndash;\u0026ldquo;ä¸ºé¹¦é¹‰çˆ±å¥½è€…æä¾›çš„æ–°çš„ä»£å¸ï¼Œæ¯ä¸ªæœ‰é¹¦é¹‰çš„äººéƒ½ä¼šæƒ³ç”¨å®ƒï¼\u0026rdquo;\u0026ndash;ç„¶åä¼šæœ‰10äº¿ä¸ªå¸è¢«å‘è¡Œã€‚ä¸€åŠå°†åœ¨åŠ å¯†è´§å¸äº¤æ˜“æ‰€å‡ºå”®ï¼Œä½†å¦ä¸€åŠå°†ç”±è¯¥å¸çš„åˆ›é€ è€…ä¿ç•™ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¯¥æ–°å¸çš„ä»·å€¼ä»…ä¸º1ç¾åˆ†ï¼Œé‚£ä¹ˆè¯¥å¸çš„åˆ›é€ è€…å¯ä»¥å‡ºå”®ä»–çš„5äº¿æšé¹¦é¹‰å¸ï¼Œå‡­ç©ºè·å¾—2000ä¸‡ç¾å…ƒï¼Œç„¶åç¦»å¼€ã€‚å¸æŒæœ‰è€…ï¼ˆå’Œå„åœ°çš„é¹¦é¹‰çˆ±å¥½è€…ï¼‰ä¼šæ„Ÿåˆ°è¢«æ„šå¼„å’Œåˆ©ç”¨äº†ã€‚\nä½†ä¸è‰ºæœ¯ä½œå“ã€æ ‡å¿—æ€§å›¾åƒå’Œå…¶ä»–ç‹¬ç‰¹è€Œæœ‰æ„ä¹‰çš„å†…å®¹ç›¸å…³çš„ NFT å‘ˆç°å‡ºä¸€ç§å…¨æ–°çš„å®‰æ’ï¼Œå¹¶æ¶ˆé™¤äº†åˆ›ä½œè€…å¯»æ±‚å¿«é€ŸåŒ¿åâ€œå…‘ç°â€çš„å¯èƒ½æ€§ã€‚ è¿™æ˜¯ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ä¸»å¼ ã€‚ æ‰€æœ‰æƒé“¾æ¸…æ™°ã€‚ é‚£äº›å‡ºå”® NFT çš„äººæ˜¯åœ¨é€æ˜çš„ç¯å¢ƒä¸­è¿™æ ·åšçš„ã€‚ æ½œåœ¨ä¹°å®¶å¯ä»¥ç ”ç©¶å–å®¶æ˜¯è°ï¼Œå¹¶å¯ä»¥çœŸæ­£äº†è§£æ‰€æä¾›çš„äº§å“ã€‚ ä½œä¸º NFT è´­ä¹°çš„ç‰©å“çš„ä»·å€¼ã€å®Œæ•´æ€§å’Œå”¯ä¸€æ€§å¾—åˆ°ä¿è¯ã€‚\nå…¶ä»–äº‰è®®é¢†åŸŸä¹Ÿå› ä¾µçŠ¯ç‰ˆæƒè€Œå¼•èµ·ã€‚è¿™å‡ ä¹æ˜¯æ‰€æœ‰è§†è§‰åª’ä½“ä¸­çš„ä¸€ä¸ªé—®é¢˜ã€‚è™½ç„¶ä¾µçŠ¯ç‰ˆæƒåœ¨ NFT è‰ºæœ¯é¢†åŸŸä¼¼ä¹å¾ˆå°‘è§ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›è®°å½•åœ¨æ¡ˆçš„æ¡ˆä¾‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ 2021 å¹´åˆï¼ŒCNN å’Œ VICE éƒ½æŠ¥é“äº†è‰ºæœ¯å®¶å£°ç§°æœ‰äººå¤åˆ¶äº†ä»–ä»¬çš„ä¸€ä»¶åŸåˆ›æ•°å­—è‰ºæœ¯ä½œå“ï¼Œå¹¶åœ¨æœªç»è®¸å¯çš„æƒ…å†µä¸‹å°†å…¶ä½œä¸º NFT å‡ºå”®ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼ŒåŸè‰ºæœ¯å®¶å°†è¢«è¿«æå‡ºç‰ˆæƒä¸»å¼ ã€‚éšç€å¾…å”® NFT çš„æ•°é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œæ­¤ç±»è¿è§„è¡Œä¸ºå¯èƒ½ä¼šç»§ç»­å‘ç”Ÿã€‚ç„¶è€Œï¼Œå¥½æ¶ˆæ¯æ˜¯ï¼Œç”±äºè¯¥æŠ€æœ¯æ˜¯æ•°å­—åŒ–çš„ï¼Œå› æ­¤ 1) æŠ¥å‘ŠçŠ¯ç½ªè¡Œä¸ºï¼Œ2) å®šä½ä¸è‰¯è¡Œä¸ºè€…ï¼Œä»¥åŠ 3) ç¡®ä¿é€‚å½“å¤„ç†æœ‰é—®é¢˜çš„ NFT ä¼šå®¹æ˜“å¾—å¤šã€‚å½“è‰ºæœ¯å®¶å£°ç§°ä»–ä»¬çš„ä½œå“åœ¨ç°å®ä¸–ç•Œä¸­æœªç»è®¸å¯è¢«å¤åˆ¶å’Œå‡ºå”®æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤§é‡ï¼ˆç¼“æ…¢è€Œä¹å‘³çš„ï¼‰å·¥ä½œæ¥ç¡®å®šåˆ°åº•æ¶‰åŠè°ä»¥åŠæ‰€æœ‰ä¸é€‚å½“çš„å¤åˆ¶å“åœ¨å“ªé‡Œã€‚åœ¨æ•°å­—ä¸–ç•Œä¸­ï¼Œè¿™ç§é—®é¢˜â€”â€”ä¸€æ—¦ç”¨æˆ·æ„è¯†åˆ°å®ƒâ€”â€”å¯ä»¥æ›´å¿«åœ°è§£å†³ï¼Œå¹¶ä¸”ä»»ä½•éæ³•å·¥ä½œçš„ä½ç½®éƒ½ä¸ä¼šæˆä¸ºé—®é¢˜ã€‚ä¸æ­¤åŒæ—¶ï¼Œè§†è§‰è‰ºæœ¯å®¶çš„å®‰å…¨æ€§å°†ç»§ç»­å‘å±•ï¼Œä»¥é˜²æ­¢ä¸å½“ä½¿ç”¨ã€‚ ï¼ˆä¾‹å¦‚ï¼Œå½“åœ¨ä»–ä»¬è‡ªå·±çš„ç½‘ç«™ä¸Šå±•ç¤ºä»–ä»¬çš„ä½œå“æ—¶ï¼Œè®¸å¤šè§†è§‰è‰ºæœ¯å®¶ç°åœ¨ä½¿ç”¨ä¸€ä¸ªâ€œæµ®åŠ¨æ¨ªå¹…â€ï¼Œæ€»æ˜¯é®ä½ä»–ä»¬ä½œå“çš„ä¸€å°éƒ¨åˆ†ã€‚è¿™å¯ä»¥é˜²æ­¢å®ƒè¢«æ•°å­—åŒ–æ•è·ã€‚ï¼‰\næ€»è€Œè¨€ä¹‹ï¼ŒåŒºå—é“¾æŠ€æœ¯å—åˆ°æ‰¹è¯„å¹¶ä¸æ–°é²œã€‚ ç„¶è€Œï¼Œå¯¹åŠ å¯†è´§å¸ç­‰æŠ€æœ¯çš„æœ€æ—©æ‰¹è¯„è€…å·²ç»é€æ¸è¢«è¯æ˜æ˜¯é”™è¯¯çš„ã€‚ ç°åœ¨å¯¹ NFT çš„æ‰¹è¯„å¾ˆå°‘ï¼Œè¿œæ²¡æœ‰åŠ å¯†è´§å¸æ‰€é¢ä¸´çš„é‚£ä¹ˆä»¤äººç”Ÿç•ï¼Œå¹¶ä¸”æœ‰å……åˆ†çš„ç†ç”±ç›¸ä¿¡ä¸æ–­å‘å±•çš„æŠ€æœ¯å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿè§£å†³æˆ‘ä»¬å‰è¿›è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„ä»»ä½•é—®é¢˜ã€‚\næ€»ç»“ åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œå¤§å¤šæ•°äººåœ¨æƒ³åˆ° NFT æ—¶ä»åœ¨è€ƒè™‘è§†è§‰è‰ºæœ¯çš„æ•°å­—ä½œå“â€”â€”è¿™å®Œå…¨æ²¡é—®é¢˜â€”â€”ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘åœ¨æœ¬æ–‡ä¸­è¦æ˜ç¡®æŒ‡å‡ºçš„é‚£æ ·ï¼Œè¿™ç§åŒ–èº«åªæ˜¯è§¦åŠäº†æŠ€æœ¯å°†ä½¿ä¹‹æˆä¸ºå¯èƒ½ã€‚æ­¤åˆ»æ­£åœ¨è¿›è¡Œå¤§è§„æ¨¡è¡ŒåŠ¨ï¼Œä»¥æ‰©å¤§ NFT çš„èƒ½åŠ›ã€‚å®ƒä»¬å‘ç”Ÿåœ¨æˆ‘ä»¬çœ‹ä¸åˆ°çš„åœ°æ–¹ï¼Œä½†å®ƒä»¬ç»å¯¹å­˜åœ¨ã€‚ä¸–ç•Œå„åœ°çš„ä¼ä¸šå’Œåˆ›ä½œè€…éƒ½åœ¨æ€¥äºä¸ºè‰ºæœ¯å’Œå•†ä¸šé¢†åŸŸçš„ NFT æ–°ä¸–ç•Œåšå¥½å‡†å¤‡ã€‚\nNFT æ˜¯æ•°å­—æ–‡ä»¶ï¼Œå› æ­¤å‡ ä¹ä»»ä½•ä»¥æ•°å­—æ–¹å¼ä¼ è¾“çš„ä¸œè¥¿éƒ½å¯ä»¥æ˜¯ NFTã€‚ä¾‹å¦‚ï¼ŒéŸ³ä¹ä¼šé—¨ç¥¨æˆ–æœºç¥¨å¯ä»¥æ˜¯ NFTã€‚æ•°å­—æŠ˜æ‰£ç å¯ä»¥æ˜¯ NFTã€‚æ•°å­—æ”¶æ®å¯ä»¥æ˜¯ NFTã€‚å®ç”¨çš„ NFT å°†æœ‰åŠ©äºåŸ¹å…»å“ç‰Œã€åˆ›ä½œè€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„å…³ç³»ã€‚\nå½“è°ˆåˆ°æ•°å­—ç‰©å“æ—¶ï¼Œé—®é¢˜çœŸçš„ä¸æ˜¯â€œä»€ä¹ˆå¯ä»¥æ˜¯ NFTï¼Ÿâ€è€Œæ˜¯â€œæœ‰ä»€ä¹ˆä¸èƒ½æˆä¸º NFT çš„å—ï¼Ÿâ€\næ­£å¦‚å¾ˆéš¾æƒ³è±¡ä¸€ä¸ªæ²¡æœ‰æ— å¤„ä¸åœ¨çš„äº’è”ç½‘æˆ–æ™ºèƒ½æ‰‹æœºçš„ä¸–ç•Œä¸€æ ·ï¼Œå¾ˆå¿«æˆ‘ä»¬å°±å¾ˆéš¾å›å¿†èµ· NFT å‡ºç°ä¹‹å‰çš„æ—¶ä»£ã€‚åŠ¿å¤´æ­£åœ¨å¢å¼ºï¼Œè€Œä¸”ä¸ä¼šæ¶ˆå¤±ã€‚\næˆ‘ä»¬é¦–å…ˆåœ¨è‰ºæœ¯ç•Œçœ‹åˆ°å®ƒï¼Œæ˜¯çš„â€”â€”æ®ã€Šæ—¶ä»£ã€‹æ‚å¿—æŠ¥é“ï¼Œåœ¨ 2021 å¹´å‰ä¸¤ä¸ªæœˆï¼Œè¿‘ 2.5 äº¿ç¾å…ƒç”¨äº NFTï¼Œä¸åŒ…æ‹¬ Beeple åœ¨ä½³å£«å¾—çš„åˆ›çºªå½•æ‹å–â€”â€”ä½†æ•´ä¸ªç»æµå·²ç»å¼€å§‹å‘å±•ä»¥æ”¯æŒå°† NFT æ•´åˆåˆ°æˆ‘ä»¬ç”Ÿæ´»çš„å…¶ä»–é¢†åŸŸã€å…¶ä»–äº§å“ã€å…¶ä»–æœåŠ¡ã€‚\næœ‰äº›ä¼ä¸šå¯ä»¥å¸®åŠ©åˆ›ä½œè€…â€œé“¸é€ â€ä»–ä»¬çš„ NFTï¼Œè¿˜æœ‰ä¸€äº›å¹³å°å¯ä»¥å¸®åŠ©é”€å”® NFTï¼Œä¹Ÿæœ‰ä¸€äº›å¹³å°å¯ä»¥å¸®åŠ©è‰ºæœ¯å®¶å’ŒæŠ•èµ„è€…äº†è§£è¿™äº›æ•°å­—ä½œå“çš„åˆç†ä»·æ ¼ï¼Œè¿˜æœ‰ä¸€äº›é¡¾é—®å¯ä»¥å¸®åŠ©æ”¶è—å®¶ç­–åˆ’ä»–ä»¬çš„æ”¶è—ã€‚\nå¥¢ä¾ˆå“ç‰Œæ­£åœ¨é—®è‡ªå·±ï¼Œå¥¢ä¾ˆå“è´­ä¹°å¦‚ä½•åŒ…å« NFTï¼Œç„¶åâ€œè§£é”â€æ›´å¤šé«˜ç«¯ä½“éªŒã€ç‹¬ç‰¹æœåŠ¡ã€è·å¾—æ–°å•†å“å‘å¸ƒã€åˆä½œç­‰ã€‚ä½“è‚²å…¬å¸æ­£å‡†å¤‡åœ¨ NFT æ¨åŠ¨ä¸‹çš„æ•°å­—ç©ºé—´ä¸­å®ç°å¤§è§„æ¨¡å¢é•¿ã€‚å„ç§é¢å‘å®¢æˆ·çš„å…¬å¸éƒ½å‡†å¤‡åœ¨æ•°å­—åŒºå—é“¾çš„æŸä¸ªåœ°æ–¹ç›´æ¥ä¸é‚£äº›æœªæ¥çš„å®¢æˆ·å»ºç«‹è”ç³»ã€‚\nä¼ä¸šå¼€å§‹æ„è¯†åˆ° NFT çš„é‡è¦æ€§ã€‚éšç€äººä»¬è¶‹å‘äº \u0026ldquo;çœŸè¿¹ \u0026ldquo;å’Œ \u0026ldquo;çœŸå®\u0026rdquo;ï¼Œä¹°å®¶å°†è¶Šæ¥è¶Šå¸Œæœ›æ‹¥æœ‰æŸç‰©çš„çœŸå®å’Œç‹¬ç‰¹ç‰ˆæœ¬ã€‚æ­£å¦‚ç‹¬ç‰¹æ€§å­˜åœ¨äºç‰©ç†ä¸–ç•Œä¸€æ ·ï¼Œå®ƒç°åœ¨ä¹Ÿå°†å­˜åœ¨äºæ•°å­—ä¸–ç•Œä¸­ã€‚\néšç€æ¯å¤©æœ‰è¶Šæ¥è¶Šå¤šçš„äººå‘ç°è¿™ç§å½¢å¼ï¼Œè¦æƒ³ \u0026ldquo;æŠŠç‰™è†æ”¾å›ç®¡å­é‡Œ \u0026ldquo;å‡ ä¹æ˜¯ä¸å¯èƒ½çš„äº†ã€‚NFT å°†ç»§ç»­å­˜åœ¨ã€‚\nåœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¼ä¸šå’Œå“ç‰Œæ­£åœ¨åˆ›é€ çš„ NFT çš„ç±»å‹ï¼Œå¹¶çœ‹çœ‹æˆ‘ä»¬å¯ä»¥æœŸæœ›è¿™äº› NFT åœ¨å“ªé‡Œåˆ›é€ æœ€å¤§çš„æœºä¼šã€‚\nå‚è€ƒ The Comprehensive Guide to NFTs, Digital Artwork, and Blockchain Technology NFT Art and Collectables for Beginners: The Must Have Guide for Understanding Non Fungible Tokens NFT FOR BEGINNERS: The Simple Guide for Understand Non-Fungible Tokens and Economically Exploit the New Digital El Dorado. Learn How to Monetize Them Like Bitcoin. The Nft Revolution - Crypto art edition: 2 in 1 practical guide for beginners to create, buy and sell digital artworks and collectibles as non-fungible tokens ","id":14,"section":"posts","summary":"\u003cp\u003eæœ€è¿‘ä¸€ç›´åœ¨ç ”ç©¶ NFT åœ¨æ­¤åˆ†äº«æ‰€å­¦ï¼Œä»¥åŠå¯¹è¯¥æŠ€æœ¯çš„å±•æœ›ã€‚part 1 ä¸»è¦è·Ÿå¤§å®¶åˆ†äº«ä»€ä¹ˆæ˜¯ NFTï¼ŒåŒºå—é“¾å’ŒNFTçš„å…³ç³»ï¼ŒåŠ å¯†è´§å¸ã€åŒºå—é“¾å’ŒNFTä¸­çš„äº‰è®®ã€‚\u003c/p\u003e","tags":["NFT"],"title":"NFT æ•°å­—è‰ºæœ¯å“  part 1","uri":"https://www.ganymedenil.com/2021/11/09/ntf-dabt-part-1.html","year":"2021"},{"content":"å…¬å¸é¡¹ç›®ä» 7.1 å‡çº§åˆ° 7.4 æ•…å¯¹ php å‡çº§æ–‡æ¡£è¿›è¡Œæ•´ç†ä¸ç¿»è¯‘ã€‚\nä¸å‘ä¸‹å…¼å®¹çš„å˜æ›´ 7.1.x -\u0026gt; 7.2.x é˜²æ­¢ number_format() è¿”å›è´Ÿé›¶ ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œnumber_format() æœ‰å¯èƒ½ä¼šè¿”å› -0ã€‚è™½ç„¶è¿™æ˜¯ç¬¦åˆ IEEE 754 è§„èŒƒçš„ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´å¯è¯»æ€§ä¸å¥½ï¼Œæ–°ç‰ˆæœ¬ä¸­ä¼šå°†è¿™æ ·çš„è´Ÿæ•°å»æ‰ã€‚\n\u0026lt;?php var_dump(number_format(-0.01)); // æ–°ç‰ˆæœ¬è¾“å‡º string(1) \u0026quot;0\u0026quot; æ—§ç‰ˆæœ¬è¾“å‡º string(2) \u0026quot;-0\u0026quot; è½¬æ¢å¯¹è±¡å’Œæ•°ç»„ä¸­çš„æ•°å­—é”® å°†æ•°ç»„è½¬æ¢ä¸ºå¯¹è±¡ï¼Œæˆ–å°†å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„æ—¶ï¼Œæ•°å­—é”®ç°åœ¨å¾—åˆ°äº†æ›´å¥½çš„å¤„ç†ï¼ˆæ— è®ºæ˜¯é€šè¿‡æ˜¾å¼è½¬æ¢è¿˜æ˜¯é€šè¿‡ settype() å‡½æ•°ï¼‰ã€‚\nè¿™æ„å‘³ç€ç°åœ¨å¯ä»¥è®¿é—®æ•°ç»„ä¸­çš„æ•´æ•°(æˆ–è€…è¯´æ˜¯å­—ç¬¦ä¸²æ•´æ•°)é”®ï¼Œè¿™äº›é”®ä¼šæ˜ å°„åˆ°å¯¹è±¡ä¸­ï¼š\n\u0026lt;?php // array to object $arr = [0 =\u0026gt; 1]; $obj = (object)$arr; var_dump( $obj, $obj-\u0026gt;{'0'}, // æ–°å†™æ³• $obj-\u0026gt;{0} // æ–°å†™æ³• ); ä»¥ä¸Šä¾‹ç¨‹ä¼šè¾“å‡ºï¼š\nobject(stdClass)#1 (1) { [\u0026quot;0\u0026quot;]=\u0026gt; // string key now, rather than integer key int(1) } int(1) int(1) ä»å¯¹è±¡è½¬æ¢æˆçš„æ•°ç»„ä¸­çš„æ•´æ•°ï¼ˆæˆ–è€…è¯´æ˜¯å­—ç¬¦ä¸²æ•´æ•°ï¼‰é”®ç°åœ¨ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—®ï¼š\n\u0026lt;?php // object to array $obj = new class { public function __construct() { $this-\u0026gt;{0} = 1; } }; $arr = (array)$obj; var_dump( $arr, $arr[0], // æ–°å†™æ³• $arr['0'] // æ–°å†™æ³• ); ä»¥ä¸Šä¾‹ç¨‹ä¼šè¾“å‡ºï¼š\narray(1) { [0]=\u0026gt; // integer key now, rather than string key int(1) } int(1) int(1) get_class() å‡½æ•°ä¸å†æ¥å— null å‚æ•° ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œä¼ é€’ null ç»™ get_class() å‡½æ•°å°†è¿”å›å½“å‰ç±»åã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œæ­¤è¡Œä¸ºä¼šæŠ›å‡ºä¸€ä¸ª E_WARNING é”™è¯¯ã€‚å¦‚æœæƒ³å®ç°ä¸ä¹‹å‰ç‰ˆæœ¬åŒæ ·çš„æ•ˆæœï¼Œè¯·ä¸è¦ä¼ é€’ä»»ä½•å‚æ•°è¿›æ¥ã€‚\nè®¡ç®—éå¯æ•°ç±»å‹ï¼ˆnon-countableï¼‰æ—¶å‘å‡ºè­¦å‘Š å¯¹éå¯æ•°ç±»å‹è°ƒç”¨ count()ï¼ˆæˆ– sizeof()ï¼‰å‡½æ•°ï¼Œä¼šæŠ›å‡ºä¸€ä¸ª E_WARNING é”™è¯¯ã€‚\n\u0026lt;?php var_dump( count(null), // NULL is not countable count(1), // integers are not countable count('abc'), // strings are not countable count(new stdclass), // objects not implementing the Countable interface are not countable count([1,2]) // arrays are countable ); ä»¥ä¸Šä¾‹ç¨‹ä¼šè¾“å‡ºï¼š\nWarning: count(): Parameter must be an array or an object that implements Countable in %s on line %d Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d Warning: count(): Parameter must be an array or an object that implements Countable in %s on line %d int(0) int(1) int(1) int(1) int(2) ext/hash ä»èµ„æºå˜æˆå¯¹è±¡ ä½œä¸ºæ‘†è„±èµ„æºé•¿æœŸè¿ç§»çš„ä¸€éƒ¨åˆ†ï¼ŒHash æ‰©å±•å·²è¢«æ›´æ–°ä¸ºä½¿ç”¨å¯¹è±¡è€Œä¸æ˜¯èµ„æºã€‚å¯¹äº PHP å¼€å‘è€…æ¥è¯´ï¼Œè¿™ä¸€å˜åŒ–åº”è¯¥æ˜¯æ— ç¼çš„ï¼Œé™¤äº†is_resource()ï¼ˆéœ€è¦æ›´æ–°ä¸ºis_object()ï¼‰ã€‚\nSSL/TLS çš„é»˜è®¤é€‰é¡¹çš„æ”¹è¿› ä¸‹åˆ—é»˜è®¤é€‰é¡¹è¢«ä¿®æ”¹ï¼š\ntls:// é»˜è®¤ä¸º TLSv1.0 or TLSv1.1 or TLSv1.2 ssl:// æˆä¸º tls:// çš„åˆ«å STREAM_CRYPTO_METHOD_TLS_* å¸¸é‡é»˜è®¤ä¸º TLSv1.0 æˆ– TLSv1.1 + TLSv1.2ï¼Œæ›¿ä»£ä¹‹å‰çš„ TLSv1.0 gettype() åœ¨é—­åŒ…èµ„æºä¸­çš„è¿”å›å€¼ ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœåœ¨ä¸€ä¸ªé—­åŒ…èµ„æºä¸­ä½¿ç”¨ gettype() ä¼šè¿”å›å­—ç¬¦ä¸² \u0026ldquo;unknown type\u0026rdquo;ï¼Œç°åœ¨å°†ä¼šè¿”å›å­—ç¬¦ \u0026ldquo;resource (closed)\u0026quot;ã€‚\nis_object() å’Œ __PHP_Incomplete_Class ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œå¯¹ __PHP_Incomplete_Class è°ƒç”¨ is_object() å‡½æ•°ä¼šè¿”å› falseï¼Œç°åœ¨ä¼šè¿”å› trueã€‚\næå‡æœªå®šä¹‰å¸¸é‡çš„é”™è¯¯çº§åˆ« è°ƒç”¨æœªå®šä¹‰çš„å¸¸é‡ï¼Œç°åœ¨ä¼šæŠ›å‡ºä¸€ä¸ª E_WARNING é”™è¯¯(ä¹‹å‰ç‰ˆæœ¬ä¸­ä¸º E_NOTICE)ã€‚åœ¨ä¸‹ä¸€ä¸ª PHP å¤§ç‰ˆæœ¬ä¸­ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ª Error é”™è¯¯ã€‚\nWindows æ”¯æŒ å®˜æ–¹æ”¯æŒçš„æœ€ä½ Windows ç‰ˆæœ¬ä¸º Windows 7/Server 2008 R2ã€‚\næ£€æŸ¥ traits çš„é»˜è®¤å±æ€§å€¼ å¯¹é»˜è®¤ traits å±æ€§å€¼çš„å…¼å®¹æ€§æ£€æŸ¥å°†ä¸å†æ‰§è¡Œå¼ºåˆ¶è½¬æ¢ã€‚\nobject ä¿ç•™å­—çš„å˜åŒ– object åœ¨ä¹‹å‰çš„ PHP 7.0 ç‰ˆæœ¬ ä¸­è¢«å£°æ˜ä¸ºè½¯ä¿ç•™å­—ï¼ˆsoft-reservedï¼‰ã€‚ç°åœ¨å˜æ›´ä¸ºå¼ºåˆ¶ä¿ç•™å­—ï¼Œç¦æ­¢åœ¨ä»»ä½•ç±»æˆ–æ¥å£ä¸­ä½¿ç”¨è¯¥åç§°ã€‚\nNetWare æ”¯æŒ NetWare å·²ä¸å†è¢«æ”¯æŒã€‚\nå…·æœ‰SORT_STRING çš„ array_unique() è™½ç„¶å…ˆå‰ä½¿ç”¨ SORT_STRING çš„ array_unique() å¤åˆ¶äº†æ•°ç»„å¹¶åˆ é™¤äº†éå”¯ä¸€å…ƒç´ ï¼ˆæ­¤åä¸æ‰“åŒ…æ•°ç»„ï¼‰ï¼Œä½†ç°åœ¨é€šè¿‡æ·»åŠ å”¯ä¸€å…ƒç´ æ¥æ„å»ºæ–°æ•°ç»„ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸åŒçš„æ•°å­—ç´¢å¼•ã€‚\nbcmod() æµ®åŠ¨æ•°çš„å˜åŒ– bcmod() å‡½æ•°ä¸å†å°†å°æ•°æˆªæ–­ä¸ºæ•´æ•°ã€‚ å› æ­¤ï¼Œå®ƒçš„è¡Œä¸ºç°åœ¨éµå¾ªfmod()æ–¹æ³•ï¼Œè€Œä¸æ˜¯ % è¿ç®—ç¬¦ã€‚ ä¾‹å¦‚ bcmodï¼ˆ\u0026lsquo;4\u0026rsquo;ï¼Œ\u0026lsquo;3.5\u0026rsquo;ï¼‰ç°åœ¨è¿”å›0.5è€Œä¸æ˜¯1ã€‚\nå“ˆå¸Œå‡½æ•°å’ŒéåŠ å¯†å“ˆå¸Œå€¼ hash_hmac()ã€hash_hmac_file()ã€hash_pbkdf2()å’Œhash_init()ï¼ˆå¸¦HASH_HMACï¼‰å‡½æ•°ä¸å†æ¥å—éåŠ å¯†çš„å“ˆå¸Œå€¼ã€‚\njson_decode() å‡½æ•°å˜æ›´ json_decode()å‡½æ•°é€‰é¡¹JSON_OBJECT_AS_ARRAYç°åœ¨åœ¨ç¬¬äºŒä¸ªå‚æ•°ï¼ˆassocï¼‰ä¸º null æ—¶ä½œä¸ºé»˜è®¤å‚æ•°ã€‚ä»¥å‰ï¼ŒJSON_OBJECT_AS_ARRAYæ€»æ˜¯è¢«å¿½ç•¥ã€‚\nrand() å’Œ mt_rand() è¾“å‡º ç”± rand() å’Œ mt_rand() ä½œä¸ºç‰¹å®šç§å­ç”Ÿæˆçš„åºåˆ—å¯èƒ½ä¸64ä½è®¡ç®—æœºä¸Šçš„ PHP7.1 ä¸åŒï¼ˆç”±äºä¿®å¤äº†å®ç°ä¸­çš„ä¸€ä¸ªæ¨¡æ•°åå·®é”™è¯¯ï¼‰ã€‚\nsql.safe_mode ini é€‰é¡¹ç§»é™¤ sql.safe_mode ini è®¾ç½®é¡¹å·²è¢«ç§»é™¤ã€‚\nå¯¹ date_parse() å’Œ date_parse_from_format() çš„æ›´æ”¹ date_parse() å’Œ date_parse_from_format() è¿”å›çš„æ•°ç»„ä¸­çš„zoneå…ƒç´ ç°åœ¨ä»£è¡¨ç§’è€Œä¸æ˜¯åˆ†é’Ÿï¼Œå…¶ç¬¦å·ä¹Ÿè¢«é¢ å€’äº†ã€‚ä¾‹å¦‚ï¼Œ-120ç°åœ¨æ˜¯7200ã€‚\næ¥æ”¶åˆ°çš„ Cookies ä» PHP 7.2.34 å¼€å§‹ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæ¥å—åˆ°çš„ Cookie ä¸­çš„ names å‚æ•°ä¸å†è¢« URL ç¼–ç ã€‚\n7.2.x -\u0026gt; 7.3.x Heredoc / Nowdoc ç»“å°¾æ ‡ç­¾è§£é‡Š ç”±äºå¼•å…¥äº†çµæ´»çš„ heredoc / nowdoc è¯­æ³•ï¼Œå› æ­¤åœ¨æ­£æ–‡ä¸­åŒ…å«ç»“å°¾æ ‡ç­¾çš„docå­—ç¬¦ä¸²å¯èƒ½ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯æˆ–è§£é‡Šæ›´æ”¹ã€‚ ä¾‹å¦‚åœ¨:\n\u0026lt;?php $str = \u0026lt;\u0026lt;\u0026lt;FOO abcdefg FOO FOO; ?\u0026gt; ç¼©è¿›çš„ FOO ä»¥å‰æ²¡æœ‰ä»»ä½•ç‰¹æ®Šå«ä¹‰ã€‚ç°åœ¨å®ƒå°†è¢«è§£é‡Šä¸º heredoc å­—ç¬¦ä¸²çš„ç»“å°¾ï¼Œåé¢çš„ FOO; å°†å¯¼è‡´è¯­æ³•é”™è¯¯ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡é€‰æ‹©ä¸€ä¸ªä¸åœ¨å­—ç¬¦ä¸²å†…å®¹ä¸­å‡ºç°çš„ç»“æŸæ ‡ç­¾æ¥è§£å†³ã€‚\nSwitch ç»“æ„ä¸­ Continue é—®é¢˜çš„è­¦å‘Š é’ˆå¯¹ switch æ§åˆ¶æµç»“æ„ä¸­çš„ continue è¯­å¥ç°åœ¨ä¼šäº§ç”Ÿä¸€ä¸ªè­¦å‘Šã€‚åœ¨ PHP ä¸­ï¼Œè¿™ç§ continue è¯­å¥ç­‰åŒäº breakï¼Œè€Œåœ¨å…¶ä»–è¯­è¨€ä¸­åˆ™è¡¨ç°ä¸º continue 2ã€‚\n\u0026lt;?php while ($foo) { switch ($bar) { case \u0026quot;baz\u0026quot;: continue; // Warning: \u0026quot;continue\u0026quot; targeting switch is equivalent to // \u0026quot;break\u0026quot;. Did you mean to use \u0026quot;continue 2\u0026quot;? } } ?\u0026gt; ä¸¥æ ¼è§£é‡Š ArrayAccess ä¸Šçš„æ•´æ•°å­—ç¬¦ä¸²é”® å¯¹ $obj[â€œ123â€] ç±»å‹çš„æ•°ç»„è®¿é—®ï¼Œå…¶ä¸­$objå®ç°äº† ArrayAccess å¹¶ä¸” â€œ123â€ æ˜¯æ•´æ•°å­—ç¬¦ä¸²æ–‡æœ¬ï¼Œè¿™å°†ä¸å†è¿›è¡Œéšå¼è½¬æ¢ä¸ºæ•´æ•°ï¼Œå³ $obj-\u0026gt;offsetGet(â€œ123â€) å°†ä¸èƒ½é€šè¿‡ $obj-\u0026gt;offsetGet(123) è°ƒç”¨ã€‚ å¯¹äº non-literals è¿™ç¬¦åˆç°æœ‰è¡Œä¸ºã€‚ æ•°ç»„çš„è¡Œä¸ºä¸ä¼šå—åˆ°ä»»ä½•å½±å“ï¼Œå®ƒä»¬ä¼šç»§ç»­å°†æ•´æ•°å­—ç¬¦ä¸²é”®éšå¼è½¬æ¢ä¸ºæ•´æ•°ã€‚\né™æ€å±æ€§ä¸å†ç”±å¼•ç”¨èµ‹å€¼æ¥åˆ†éš” åœ¨PHPä¸­ï¼Œé™æ€å±æ€§åœ¨ç»§æ‰¿çš„ç±»ä¹‹é—´å…±äº«ï¼Œé™¤éåœ¨å­ç±»ä¸­æ˜¾å¼è¦†ç›–äº†é™æ€å±æ€§ã€‚ ä½†æ˜¯ï¼Œç”±äºå­˜åœ¨å®æ–½æ„ä»¶(implementation artifact)ï¼Œå› æ­¤å¯ä»¥é€šè¿‡åˆ†é…å¼•ç”¨æ¥åˆ†ç¦»é™æ€å±æ€§ã€‚ æ­¤æ¼æ´å·²å¾—åˆ°ä¿®å¤ã€‚\n\u0026lt;?php class Test { public static $x = 0; } class Test2 extends Test { } Test2::$x = \u0026amp;$x; $x = 1; var_dump(Test::$x, Test2::$x); // Previously: int(0), int(1) // Now: int(1), int(1) ?\u0026gt; æ•°ç»„å’Œå±æ€§è®¿é—®è¿”å›çš„å¼•ç”¨å°†ç«‹å³å±•å¼€ ç°åœ¨ï¼Œå°†æ•°ç»„å’Œå±æ€§è®¿é—®è¿”å›çš„å¼•ç”¨å±•å¼€ä¸ºè®¿é—®çš„ä¸€éƒ¨åˆ†ã€‚ è¿™æ„å‘³ç€ä¸å†å¯èƒ½åœ¨è®¿é—®å’Œä½¿ç”¨è®¿é—®å€¼ä¹‹é—´ä¿®æ”¹å¼•ç”¨ï¼š\n\u0026lt;?php $arr = [1]; $ref =\u0026amp; $arr[0]; var_dump($arr[0] + ($arr[0] = 2)); // Previously: int(4), Now: int(3) ?\u0026gt; è¿™ä½¿å¼•ç”¨å’Œéå¼•ç”¨çš„è¡Œä¸ºä¿æŒä¸€è‡´ã€‚è¯·æ³¨æ„ï¼Œè¯»å–å’Œå†™å…¥å•ä¸ªè¡¨è¾¾å¼ä¸­çš„ä¸€ä¸ªå€¼ä»ç„¶æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼Œå¹¶å¯èƒ½åœ¨æœªæ¥å†æ¬¡æ”¹å˜ã€‚\nä¸å†æ”¯æŒå…·æœ‰éæ•´æ•°é”®çš„éå†å™¨çš„å‚æ•°è§£åŒ… å¯¹äºéæ•´æ•°é”®çš„éå†å™¨ï¼Œå‚æ•°è§£åŒ…åœæ­¢å·¥ä½œã€‚ä»¥ä¸‹ä»£ç åœ¨PHP 5.6-7.2ä¸­æ„å¤–åœ°å·¥ä½œã€‚\n\u0026lt;?php function foo(...$args) { var_dump($args); } function gen() { yield 1.23 =\u0026gt; 123; } foo(...gen()); ?\u0026gt; æ‚é¡¹ ext_skelå·¥å…·å·²ç»è¢«å®Œå…¨é‡æ–°è®¾è®¡ï¼Œå¢åŠ äº†æ–°çš„é€‰é¡¹å¹¶åˆ é™¤äº†ä¸€äº›æ—§çš„é€‰é¡¹ã€‚ç°åœ¨å®ƒæ˜¯ç”¨PHPç¼–å†™çš„ï¼Œæ²¡æœ‰ä»»ä½•å¤–éƒ¨ä¾èµ–æ€§ã€‚\nå¯¹ BeOS çš„æ”¯æŒå·²ç»è¢«æ”¾å¼ƒã€‚\nç”±äºåœ¨ EH_THROW æ¨¡å¼ä¸‹å°†è­¦å‘Šè‡ªåŠ¨è½¬æ¢ä¸ºå¼‚å¸¸è€ŒæŠ›å‡ºçš„å¼‚å¸¸ï¼ˆä¾‹å¦‚ä¸€äº›DateTimeå¼‚å¸¸ï¼‰ä¸å†å¡«å…… error_get_last() çŠ¶æ€ã€‚å› æ­¤ï¼Œå®ƒä»¬ç°åœ¨ä¸æ‰‹åŠ¨æŠ›å‡ºçš„å¼‚å¸¸çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚\nTypeError ç°åœ¨å°†é”™è¯¯çš„ç±»å‹åˆ†åˆ«æŠ¥å‘Šä¸º int å’Œ boolï¼Œè€Œä¸æ˜¯integer å’Œ booleanã€‚\nä¼ é€’ç»™ compact() çš„æœªå®šä¹‰å˜é‡ç°åœ¨å°†è¢«æŠ¥å‘Šä¸º noticeã€‚\ngetimagesize() å’Œç›¸å…³å‡½æ•°ç°åœ¨å°† BMP å›¾åƒçš„ mime ç±»å‹æŠ¥å‘Šä¸º image/bmpï¼Œè€Œä¸æ˜¯image/x-ms-bmpï¼Œå› ä¸ºå‰è€…å·²ç»åœ¨ IANAæ³¨å†Œï¼ˆå‚è§ RFC 7903ï¼‰ã€‚\nstream_socket_get_name() ç°åœ¨å°†è¿”å›æ‹¬åœ¨æ–¹æ‹¬å·ä¸­çš„IPv6åœ°å€ã€‚ä¾‹å¦‚ï¼Œå°†è¿”å›â€œ[::1]:1337â€è€Œä¸æ˜¯â€œ::1:1337â€ã€‚\nBCMath ä»»æ„æ•°å­¦ç²¾åº¦ ç”± BCMath å‡½æ•°æŠ›å‡ºçš„æ‰€æœ‰è­¦å‘Šç°åœ¨éƒ½ä½¿ç”¨äº†PHP çš„é”™è¯¯å¤„ç†ã€‚ä»¥å‰æœ‰äº›è­¦å‘Šä¼šç›´æ¥å†™åˆ° stderrã€‚\nbcmul()å’Œ bcpow()ç°åœ¨ä»¥æ‰€è¦æ±‚çš„æ¯”ä¾‹è¿”å›æ•°å­—ã€‚ä»¥å‰ï¼Œè¿”å›çš„æ•°å­—å¯èƒ½é—æ¼äº†å°æ•°ç‚¹åçš„é›¶ã€‚\nIMAPã€POP3å’ŒNNTP rsh/sshç™»å½•é»˜è®¤æ˜¯ç¦ç”¨çš„ã€‚å¦‚æœä½ æƒ³å¯ç”¨å®ƒä»¬ï¼Œè¯·ä½¿ç”¨ imap.enable_insecure_rshã€‚è¯·æ³¨æ„ï¼ŒIMAPåº“åœ¨å°†é‚®ç®±åç§°ä¼ é€’ç»™rsh/sshå‘½ä»¤ä¹‹å‰ä¸ä¼šå¯¹å…¶è¿›è¡Œè¿‡æ»¤ï¼Œå› æ­¤åœ¨å¯ç”¨rsh/sshçš„æƒ…å†µä¸‹å°†ä¸å—ä¿¡ä»»çš„æ•°æ®ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°æ˜¯ä¸å®‰å…¨çš„ã€‚\nå¤šå­—èŠ‚å­—ç¬¦ä¸² ç”±äºå¢åŠ äº†å¯¹å‘½åæ•è·çš„æ”¯æŒï¼Œä½¿ç”¨å‘½åæ•è·çš„ mb_ereg_*() æ¨¡å¼çš„è¡Œä¸ºå°†æœ‰æ‰€ä¸åŒã€‚ç‰¹åˆ«æ˜¯å‘½åæ•è·å°†æˆä¸ºåŒ¹é…çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸” mb_ereg_replace() å°†è§£é‡Šé¢å¤–çš„è¯­æ³•ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§å‘½åæ•è·ï¼ˆNamed Capturesï¼‰ã€‚\nMySQLæ”¹è¿›åçš„æ‰©å±• é¢„å¤‡è¯­å¥ç°åœ¨å¯ä»¥æ­£ç¡®åœ°æŠ¥å‘ŠDATETIMEã€TIMEå’ŒTIMESTAMPåˆ—çš„å°æ•°ç§’æ•°ï¼ˆä¾‹å¦‚ï¼Œå½“ä½¿ç”¨å¾®ç§’æ—¶ï¼ŒTIMESTAMP(6)ï¼‰ã€‚ä»¥å‰ï¼Œå°æ•°ç§’éƒ¨åˆ†åªæ˜¯åœ¨è¿”å›å€¼ä¸­è¢«çœç•¥ã€‚\nMySQLå‡½æ•° (PDO_MYSQL) é¢„å¤‡è¯­å¥ç°åœ¨å¯ä»¥æ­£ç¡®åœ°æŠ¥å‘ŠDATETIMEã€TIMEå’ŒTIMESTAMPåˆ—çš„å°æ•°ç§’æ•°ï¼ˆä¾‹å¦‚ï¼Œå½“ä½¿ç”¨å¾®ç§’æ—¶ï¼ŒTIMESTAMP(6)ï¼‰ã€‚ä»¥å‰ï¼Œå°æ•°ç§’éƒ¨åˆ†åªæ˜¯ä»è¿”å›å€¼ä¸­çœç•¥ã€‚è¯·æ³¨æ„ï¼Œè¿™åªå½±å“åˆ°PDO_MYSQLåœ¨å…³é—­æ¨¡æ‹Ÿå‡†å¤‡æ—¶çš„ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨æœ¬åœ°å‡†å¤‡åŠŸèƒ½ï¼‰ã€‚ä½¿ç”¨å…·æœ‰PDO::ATTR_EMULATE_PREPARES=trueï¼ˆè¿™æ˜¯é»˜è®¤çš„ï¼‰çš„è¿æ¥çš„è¯­å¥ä¸å—é”™è¯¯ä¿®å¤çš„å½±å“ï¼Œå¹¶ä¸”å·²ç»ä»å¼•æ“ä¸­è·å¾—äº†æ­£ç¡®çš„å°æ•°ç§’å€¼ã€‚\nåå°„ åå°„å¯¼å‡ºåˆ°å­—ç¬¦ä¸²ç°åœ¨åˆ†åˆ«ä½¿ç”¨ int å’Œ bool è€Œä¸æ˜¯ integer å’Œ booleanã€‚\næ ‡å‡†PHPåº“ï¼ˆSPLï¼‰ å¦‚æœSPLè‡ªåŠ¨åŠ è½½å™¨æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œåé¢çš„è‡ªåŠ¨åŠ è½½å™¨å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚ä»¥å‰ï¼Œæ‰€æœ‰çš„è‡ªåŠ¨åŠ è½½å™¨éƒ½è¢«æ‰§è¡Œï¼Œè€Œå¼‚å¸¸æ˜¯è¿é”çš„ã€‚\nSimpleXML ç°åœ¨ï¼Œæ¶‰åŠ SimpleXML å¯¹è±¡çš„æ•°å­¦è¿ç®—ä¼šå°†æ–‡æœ¬è§†ä¸º int æˆ– floatï¼Œä»¥ä¸¤è€…ä¸­è¾ƒåˆé€‚çš„ä¸€ä¸ªä¸ºå‡†ã€‚ ä»¥å‰ï¼Œå°†å€¼æ— æ¡ä»¶åœ°è§†ä¸ºæ•´æ•°ã€‚\næ¥æ”¶åˆ°çš„ Cookies ä» PHP 7.2.34 å¼€å§‹ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæ¥å—åˆ°çš„ Cookie ä¸­çš„ names å‚æ•°ä¸å†è¢« URL ç¼–ç ã€‚\n7.3.x -\u0026gt; 7.4.x ä»¥æ•°ç»„å½¢å¼è®¿é—®éæ•°ç»„ å°è¯•ä»¥æ•°ç»„æ–¹å¼è®¿é—® nullï¼Œboolï¼Œ intï¼Œfloat æˆ– resource ï¼ˆä¾‹å¦‚ $null[\u0026quot;key\u0026quot;]ï¼‰å°†ä¼šæŠ›å‡º notice é€šçŸ¥ã€‚\nget_declared_classes() å‡½æ•° get_declared_classes() å‡½æ•°å°†ä¸å†è¿”å›åŒ¿åçš„ç±»ï¼Œå‡å¦‚å®ƒä»¬æ²¡æœ‰è¢«å®ä¾‹åŒ–çš„è¯ã€‚\nfn å…³é”®è¯ fn æˆä¸ºäº†ä¿ç•™å…³é”®è¯ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå®ƒä¸èƒ½å†åšä¸ºå‡½æ•°åæˆ–ç±»åä½¿ç”¨ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥åšä¸ºæ–¹æ³•åå’Œå¸¸é‡åå­˜åœ¨ã€‚\næ–‡ä»¶å°¾éƒ¨çš„ \u0026lt;?php æ ‡ç­¾ æ–‡ä»¶å°¾éƒ¨çš„ \u0026lt;?php æ ‡ç­¾ï¼ˆä¸åŒ…å«ç©ºè¡Œï¼‰å°†ä¼šè¢«è§£é‡Šæˆä¸€ä¸ª PHP å¤´æ ‡ç­¾ã€‚ä»¥å‰ï¼Œå®ƒè¢«è§£é‡Šä¸ºä¸€ä¸ªçŸ­çš„å¼€å§‹æ ‡è®°ï¼Œåè·ŸåŸä¹‰phpï¼Œå¹¶å¯¼è‡´è¯­æ³•é”™è¯¯ï¼ˆshort_open_tag = 1ï¼‰ï¼Œæˆ–è€…è¢«è§£é‡Šä¸ºåŸä¹‰\u0026lt;?phpå­—ç¬¦ä¸²ï¼ˆå…¶ä¸­short_open_tag = 0ï¼‰ã€‚\nStream wrappers å½“åœ¨æµä¸Šä½¿ç”¨include/requireæ—¶ï¼ŒstreamWrapper::stream_set_option()å°†åœ¨è°ƒç”¨STREAM_OPTION_READ_BUFFERé€‰é¡¹æ—¶è¢«è°ƒç”¨ã€‚è‡ªå®šä¹‰æµåŒ…è£…å™¨çš„å®ç°å¯èƒ½éœ€è¦å®ç°streamWrapper::stream_set_option()æ–¹æ³•ä»¥é¿å…è­¦å‘Šï¼ˆå§‹ç»ˆè¿”å›falseå³å¯å®ç°ï¼‰ã€‚\nSerialization åºåˆ—åŒ– åºåˆ—åŒ–ç±»å‹ o è¢«ç§»é™¤ã€‚å› ä¸ºå®ƒä¸æ˜¯ç”± PHP ç”Ÿæˆçš„ï¼Œè¿™å¯èƒ½ä¼šå½±å“åˆ°ä¹‹å‰é¡¹ç›®ä¸­æ‰‹åŠ¨ç”Ÿæˆçš„åºåˆ—åŒ–å­—ç¬¦ä¸²ã€‚\nå¯†ç ç®—æ³•å¸¸é‡ å¯†ç å“ˆå¸Œç®—æ³•æ ‡è¯†ç¬¦ç°åœ¨æ˜¯å¯ç©ºå­—ç¬¦ä¸²ï¼Œè€Œä¸å†æ˜¯æ•´æ•°ã€‚\nPASSWORD_DEFAULT ä¹‹å‰æ˜¯ int 1; ç°åœ¨æ˜¯ null PASSWORD_BCRYPT ä¹‹å‰æ˜¯ int 1; ç°åœ¨æ˜¯ string \u0026lsquo;2y\u0026rsquo; PASSWORD_ARGON2I ä¹‹å‰æ˜¯ int 2; ç°åœ¨æ˜¯ string \u0026lsquo;argon2i\u0026rsquo; PASSWORD_ARGON2ID ä¹‹å‰æ˜¯ int 3; ç°åœ¨æ˜¯ string \u0026lsquo;argon2id\u0026rsquo; åº”ç”¨ä¸­å¦‚æœæ­£å¸¸ä½¿ç”¨äº†å¸¸é‡ PASSWORD_DEFAULTï¼ŒPASSWORD_BCRYPTï¼ŒPASSWORD_ARGON2I å’Œ PASSWORD_ARGON2ID å°†ä¸ä¼šå—åˆ°å½±å“ã€‚\nhtmlentities() å‡½æ•° å¦‚æœhtmlentities()è¢«ç”¨äºåªæ”¯æŒåŸºæœ¬å®ä½“æ›¿æ¢çš„ç¼–ç ï¼Œå®ƒç°åœ¨ä¼šå¼•å‘ä¸€ä¸ªé€šçŸ¥ï¼ˆè€Œä¸æ˜¯ä¸¥æ ¼çš„æ ‡å‡†è­¦å‘Šï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒç­‰åŒäºhtmlspecialchars()ã€‚\nfread() and fwrite() å‡½æ•° fread() å’Œ fwrite() åœ¨æ“ä½œå¤±è´¥çš„æ—¶å€™ä¼šè¿”å› falseã€‚ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²æˆ– 0ã€‚EAGAIN/EWOULDBLOCK ä¸è§†ä¸ºæ•…éšœã€‚\nè¿™äº›å‡½æ•°ç°åœ¨ä¹Ÿä¼šåœ¨å¤±è´¥æ—¶å‘å‡º NOTICE é€šçŸ¥ï¼Œä¾‹å¦‚å½“è¯•å›¾å†™å…¥ä¸€ä¸ªåªè¯»æ–‡ä»¶èµ„æºæ—¶ã€‚\nBCMath ä»»æ„æ•°å­¦ç²¾åº¦ BCMathå‡½æ•°ç°åœ¨ä¼šåœ¨ä¼ é€’éæ ¼å¼åŒ–çš„æ•°å­—æ—¶å‘å‡ºè­¦å‘Šï¼Œä¾‹å¦‚ \u0026ldquo;32foo\u0026rdquo;ã€‚è¯¥å‚æ•°å°†è¢«è§£é‡Šä¸ºé›¶ï¼Œå’Œä»¥å‰ä¸€æ ·ã€‚\nCURL ç°åœ¨å°è¯•åºåˆ—åŒ–CURLFileç±»å°†ç”Ÿæˆä¸€ä¸ªå¼‚å¸¸ã€‚ ä»¥å‰ï¼Œè¯¥å¼‚å¸¸ä»…åœ¨æœªåºåˆ—åŒ–æ—¶æŠ›å‡ºã€‚\nä¸å»ºè®®ä½¿ç”¨CURLPIPE_HTTP1ï¼Œä»cURL 7.62.0å¼€å§‹ä¸å†æ”¯æŒã€‚\nä¸æ¨èä½¿ç”¨curl_version()çš„$ versionå‚æ•°ã€‚ å¦‚æœä¼ é€’äº†ä¸ç­‰äºé»˜è®¤CURLVERSION_NOWçš„ä»»ä½•å€¼ï¼Œåˆ™ä¼šå¼•å‘è­¦å‘Šå¹¶å¿½ç•¥è¯¥å‚æ•°ã€‚\nDate å’Œ Time åœ¨DateTimeæˆ–DateTimeImmutableå®ä¾‹ä¸Šè°ƒç”¨var_dump()æˆ–ç±»ä¼¼çš„æ–¹æ³•ï¼Œå°†ä¸å†ç•™ä¸‹è¯¥å¯¹è±¡çš„å¯è®¿é—®å±æ€§ã€‚\nDateInterval å¯¹è±¡çš„æ¯”è¾ƒï¼ˆä½¿ç”¨ ==, \u0026lt; ç­‰ï¼‰ç°åœ¨å°†äº§ç”Ÿä¸€ä¸ªè­¦å‘Šï¼Œå¹¶ä¸”æ€»æ˜¯è¿”å› falseã€‚ä»¥å‰ï¼Œæ‰€æœ‰çš„DateIntervalå¯¹è±¡éƒ½è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼Œé™¤éå®ƒä»¬æœ‰å±æ€§ã€‚\nIntl idn_to_ascii() å’Œ idn_to_utf8() çš„é»˜è®¤å‚æ•°å€¼ç°åœ¨æ˜¯ INTL_IDNA_VARIANT_UTS46ï¼Œè€Œä¸æ˜¯è¢«åºŸå¼ƒçš„ INTL_IDNA_VARIANT_2003ã€‚\nMySQLi åµŒå…¥å¼æœåŠ¡å™¨åŠŸèƒ½å·²è¢«åˆ é™¤ã€‚ è‡³å°‘ä»PHP 7.0èµ·å°±è¢«ç ´åäº†ã€‚\nå–è€Œä»£ä¹‹çš„æ˜¯mysqli::stat()ï¼Œåˆ é™¤äº†æœªå…¬å¼€çš„mysqli::$statå±æ€§ã€‚\nOpenSSL ç°åœ¨ï¼Œopenssl_random_pseudo_bytes()å‡½æ•°å°†åœ¨é”™è¯¯æƒ…å†µä¸‹å¼•å‘å¼‚å¸¸ï¼Œç±»ä¼¼äºrandom_bytes()ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœè¯·æ±‚çš„å­—èŠ‚æ•°å°äºæˆ–ç­‰äºé›¶ï¼Œåˆ™å¼•å‘Errorï¼›å¦‚æœæ— æ³•æ”¶é›†è¶³å¤Ÿçš„éšæœºæ€§ï¼Œåˆ™å¼•å‘Exceptionã€‚ å¦‚æœå‡½æ•°ä¸æŠ›å‡ºï¼Œåˆ™ä¿è¯$crypto_strongè¾“å‡ºå‚æ•°å§‹ç»ˆä¸ºtrueï¼Œå› æ­¤æ— éœ€è¿›è¡Œæ˜¾å¼æ£€æŸ¥ã€‚\næ­£åˆ™è¡¨è¾¾å¼ï¼ˆä¸Perlå…¼å®¹ï¼‰ ä½¿ç”¨PREG_UNMATCHED_AS_NULLæ¨¡å¼æ—¶ï¼Œå°¾éƒ¨æœªåŒ¹é…çš„æ•è·ç»„ç°åœ¨ä¹Ÿå°†è¢«è®¾ç½®ä¸º nullï¼ˆå¦‚æœå¯ç”¨äº†åç§»æ•è·ï¼Œåˆ™ä¸º[nullï¼Œ-1]ï¼‰ã€‚ è¿™æ„å‘³ç€$matchesçš„å¤§å°å°†å§‹ç»ˆç›¸åŒã€‚\nPHP Data Objects è¯•å›¾åºåˆ—åŒ–ä¸€ä¸ªPDOæˆ–PDOStatementå®ä¾‹ç°åœ¨å°†äº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œä¸æ˜¯PDOExceptionï¼Œè¿™ä¸å…¶ä»–ä¸æ”¯æŒåºåˆ—åŒ–çš„å†…éƒ¨ç±»ä¸€è‡´ã€‚\nåå°„ å¦‚æœè¯•å›¾å¯¹åå°„å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ï¼Œç°åœ¨ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ã€‚åå°„å¯¹è±¡çš„åºåˆ—åŒ–ä»æ¥æ²¡æœ‰è¢«æ”¯æŒè¿‡ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´åå°„å¯¹è±¡çš„æŸåã€‚ç°åœ¨å®ƒå·²è¢«æ˜ç¡®ç¦æ­¢ã€‚\næ ‡å‡†PHPåº“ï¼ˆSPLï¼‰ åœ¨ ArrayObject å®ä¾‹ä¸Šè°ƒç”¨ get_object_vars() ç°åœ¨å°†æ€»æ˜¯è¿”å› ArrayObject æœ¬èº«ï¼ˆæˆ–ä¸€ä¸ªå­ç±»ï¼‰çš„å±æ€§ã€‚ä»¥å‰ï¼Œé™¤éæŒ‡å®š ArrayObject::STD_PROP_LIST æ ‡å¿—ï¼Œå¦åˆ™å®ƒä¼šè¿”å›è¢«åŒ…è£…çš„æ•°ç»„/å¯¹è±¡çš„å€¼ã€‚\nå…¶ä»–å—å½±å“çš„æ“ä½œæ˜¯:\nReflectionObject::getProperties() reset(), current(), ç­‰ç­‰ã€‚ä½¿ç”¨Iteratoræ–¹æ³•ä»£æ›¿ã€‚ æ½œåœ¨çš„å…¶ä»–å·¥ä½œå¯¹è±¡å±æ€§ä¸ºä¸€ä¸ªåˆ—è¡¨ã€‚\nï¼ˆarrayï¼‰çš„è½¬æ¢ä¸å—å½±å“ã€‚ å®ƒä»¬å°†ç»§ç»­è¿”å›åŒ…è£…çš„æ•°ç»„æˆ–ArrayObjectå±æ€§ï¼Œå…·ä½“å–å†³äºæ˜¯å¦ä½¿ç”¨ArrayObject::STD_PROP_LISTæ ‡å¿—ã€‚\nå¦‚æœä¼ é€’é›¶ï¼Œåˆ™SplPriorityQueue::setExtractFlags()å°†å¼•å‘å¼‚å¸¸ã€‚ ä»¥å‰ï¼Œè¿™å°†åœ¨ä¸‹ä¸€æ¬¡æå–æ“ä½œä¸­äº§ç”Ÿå¯æ¢å¤çš„è‡´å‘½é”™è¯¯ã€‚\nç°åœ¨ï¼Œé™¤äº†Serializableæ¥å£ä¹‹å¤–ï¼ŒArrayObjectï¼ŒArrayIteratorï¼ŒSplDoublyLinkedListå’ŒSplObjectStorageè¿˜æ”¯æŒ__serializeï¼ˆï¼‰å’Œ__unserializeï¼ˆï¼‰æœºåˆ¶ã€‚ è¿™æ„å‘³ç€åœ¨è¾ƒæ—§çš„PHPç‰ˆæœ¬ä¸Šåˆ›å»ºçš„åºåˆ—åŒ–æœ‰æ•ˆè´Ÿè½½ä»ç„¶å¯ä»¥ååºåˆ—åŒ–ï¼Œä½†æ˜¯è¾ƒæ—§çš„ç‰ˆæœ¬å°†æ— æ³•ç†è§£ç”±PHP 7.4åˆ›å»ºçš„æ–°æœ‰æ•ˆè´Ÿè½½ã€‚\nTokenizer token_get_all() ç°åœ¨å°†ä¸ºæ„å¤–å­—ç¬¦å‘å‡ºT_BAD_CHARACTERä»¤ç‰Œï¼Œè€Œä¸æ˜¯åœ¨ä»¤ç‰Œæµä¸­ç•™ä¸‹æ¼æ´ã€‚\næ¥æ”¶åˆ°çš„ Cookies ä» PHP 7.4.11 å¼€å§‹ï¼Œä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œæ¥å—åˆ°çš„ Cookie ä¸­çš„ names å‚æ•°ä¸å†è¢« URL ç¼–ç ã€‚\nåºŸå¼ƒçš„åŠŸèƒ½ 7.1.x -\u0026gt; 7.2.x ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸² ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²æ˜¯ä¸å­˜åœ¨çš„å…¨å±€å¸¸é‡ï¼Œè½¬åŒ–æˆä»–ä»¬è‡ªèº«çš„å­—ç¬¦ä¸²ã€‚ åœ¨ä»¥å‰ï¼Œè¯¥è¡Œä¸ºä¼šäº§ç”Ÿ E_NOTICEï¼Œä½†ç°åœ¨ä¼šäº§ç”Ÿ E_WARNINGã€‚åœ¨ä¸‹ä¸€ä¸ª PHP ä¸»ç‰ˆæœ¬ä¸­ï¼Œå°†æŠ›å‡º Error å¼‚å¸¸ã€‚\n\u0026lt;?php var_dump(NONEXISTENT); /* Output: Warning: Use of undefined constant NONEXISTENT - assumed 'NONEXISTENT' (this will throw an Error in a future version of PHP) in %s on line %d string(11) \u0026quot;NONEXISTENT\u0026quot; */ png2wbmp() å’Œ jpeg2wbmp() GD æ‰©å±•å†…çš„ png2wbmp() å’Œ jpeg2wbmp() ç°å·²è¢«åºŸå¼ƒï¼Œå°†åœ¨ä¸‹ä¸€ä¸ª PHP ä¸»ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚\nINTL_IDNA_VARIANT_2003 è½¬åŒ– Intl æ‰©å±•åºŸå¼ƒäº† INTL_IDNA_VARIANT_2003 è½¬åŒ–ï¼Œä¸ºidn_to_ascii() å’Œ idn_to_utf8() çš„é»˜è®¤é€‰é¡¹ã€‚ PHP 7.4 ä¼šæŠŠé»˜è®¤å€¼è®¾ç½®ä¸º INTL_IDNA_VARIANT_UTS46ï¼Œ å¹¶åœ¨ä¸‹ä¸€ä¸ª PHP ä¸»ç‰ˆæœ¬ä¸­å®Œå…¨ç§»é™¤ INTL_IDNA_VARIANT_2003\n__autoload() æ–¹æ³• __autoload() æ–¹æ³•å·²è¢«åºŸå¼ƒï¼Œ å› ä¸ºå’Œ spl_autoload_register() ç›¸æ¯”åŠŸèƒ½è¾ƒå·® (å› ä¸ºæ— æ³•é“¾å¼å¤„ç†å¤šä¸ª autoloader)ï¼Œ è€Œä¸”ä¹Ÿæ— æ³•åœ¨ä¸¤ç§ autoloading æ ·å¼ä¸­é…åˆä½¿ç”¨ã€‚\ntrack_errors ini è®¾ç½®å’Œ $php_errormsg å˜é‡ å½“å¼€å¯äº† track_errors ini è®¾ç½®ï¼Œå‡ºç°éè‡´å‘½é”™è¯¯æ—¶ï¼Œ ä¼šåœ¨æœ¬åœ°ä½œç”¨åŸŸåˆ›å»º $php_errormsg å˜é‡ã€‚ ç”±äºæä¾›äº†æ›´å¥½çš„æ–¹å¼ï¼š error_get_last() æ¥è·å–æ­¤ç±»é”™è¯¯ä¿¡æ¯ï¼Œè¯¥åŠŸèƒ½è¢«åºŸå¼ƒã€‚\ncreate_function() å‡½æ•° è€ƒè™‘åˆ°æ­¤å‡½æ•°çš„å®‰å…¨éšæ‚£é—®é¢˜ï¼ˆå®ƒæ˜¯ eval() çš„ç˜¦åŒ…è£…å™¨ï¼‰ï¼Œè¯¥è¿‡æ—¶çš„å‡½æ•°ç°åœ¨å·²è¢«åºŸå¼ƒã€‚ æ›´å¥½çš„é€‰æ‹©æ˜¯åŒ¿åå‡½æ•°ã€‚\nmbstring.func_overload ini è®¾ç½® ç”±äºæ­¤è®¾ç½®ä¼šå½±å“ç¯å¢ƒä¸­çš„å­—ç¬¦ä¸²ç³»åˆ—å‡½æ•°ï¼Œå¸¦æ¥ç›¸äº’æ“ä½œä¸­çš„é—®é¢˜ï¼Œå®ƒç°åœ¨å·²è¢«åºŸå¼ƒã€‚\n(unset) ç±»å‹å¼ºåˆ¶è½¬åŒ– è½¬åŒ–ä»»æ„è¡¨è¾¾å¼ä¸ºæ­¤ç±»å‹ï¼Œç»“æœæ€»æ˜¯ nullï¼Œæ‰€ä»¥è¿™ä¸ªå¤šä½™çš„ç±»å‹è½¬åŒ–ç°åœ¨ä¹Ÿå°±è¢«åºŸå¼ƒäº†ã€‚\nparse_str() ä¸åŠ ç¬¬äºŒä¸ªå‚æ•° ä½¿ç”¨ parse_str() æ—¶ï¼Œä¸åŠ ç¬¬äºŒä¸ªå‚æ•°ä¼šå¯¼è‡´æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°å¯¼å…¥å½“å‰ç¬¦å·è¡¨ã€‚ è€ƒè™‘åˆ°å®‰å…¨éšæ‚£é—®é¢˜ï¼Œä¸åŠ ç¬¬äºŒä¸ªå‚æ•°ä½¿ç”¨ parse_str() çš„è¡Œä¸ºå·²è¢«åºŸå¼ƒã€‚ æ­¤å‡½æ•°çš„ç¬¬äºŒä¸ªé€‰é¡¹ä¸ºå¿…å¡«é¡¹ï¼Œå®ƒä½¿æŸ¥è¯¢å­—ç¬¦ä¸²è½¬ä¸º Arrayã€‚\ngmp_random() å‡½æ•° æ­¤å‡½æ•°åŸºäºæœªçŸ¥çš„ã€å–å†³äºå¹³å°çš„ limb å°ºå¯¸äº§ç”Ÿéšæœºæ•°ã€‚å› æ­¤ï¼Œè¯¥å‡½æ•°å·²è¢«åºŸå¼ƒã€‚ ä½¿ç”¨æ›´å¥½çš„æ–¹å¼äº§ç”Ÿéšæœºæ•°ï¼š GMP æ‰©å±•ä¸­çš„ gmp_random_bits() å’Œ gmp_random_range()ã€‚\neach() å‡½æ•° ä½¿ç”¨æ­¤å‡½æ•°éå†æ—¶ï¼Œæ¯”æ™®é€šçš„ foreach æ›´æ…¢ï¼Œ å¹¶ä¸”ç»™æ–°è¯­æ³•çš„å˜åŒ–å¸¦æ¥å®ç°é—®é¢˜ã€‚å› æ­¤å®ƒè¢«åºŸå¼ƒäº†ã€‚\nassert() ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° assert() å­—ç¬¦ä¸²å‚æ•°å°†è¦æ±‚å®ƒèƒ½è¢« eval() æ‰§è¡Œã€‚ è€ƒè™‘åˆ°å¯èƒ½è¢«æ‰§è¡Œè¿œç¨‹ä»£ç ï¼ŒåºŸå¼ƒäº†å­—ç¬¦ä¸²çš„ assert()ï¼Œæœ€å¥½æä¾› bool çš„è¡¨è¾¾å¼ã€‚\né”™è¯¯å¤„ç†å™¨å†…çš„ $errcontext å‚æ•° $errcontext å‚æ•°åŒ…å«äº†é”™è¯¯ç½‘ç«™çš„æ‰€æœ‰æœ¬åœ°å˜é‡ã€‚ è€ƒè™‘åˆ°å®ƒå¾ˆå°‘è¢«ç”¨åˆ°ï¼Œè€Œä¸”è¿˜ä¼šå¯¼è‡´å†…éƒ¨ä¼˜åŒ–é—®é¢˜ï¼Œå®ƒç°åœ¨è¢«åºŸå¼ƒäº†ã€‚ ä»£æ›¿ç”¨æ³•ï¼šè°ƒè¯•å™¨åº”è¯¥è‡ªå·±å–å›é”™è¯¯ç«™ç‚¹çš„æœ¬åœ°å˜é‡ã€‚\nread_exif_data() å‡½æ•° read_exif_data() åˆ«åå·²è¢«åºŸå¼ƒ ä½¿ç”¨ exif_read_data() å‡½æ•°ä»£æ›¿ã€‚\n7.2.x -\u0026gt; 7.3.x å¤§å°å†™ä¸æ•æ„Ÿçš„å¸¸é‡ å¤§å°å†™ä¸æ•æ„Ÿçš„å¸¸é‡å£°æ˜ç°å·²è¢«åºŸå¼ƒã€‚å°† true ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ define() å°†ä¼šå¯¼è‡´ä¸€ä¸ªåºŸå¼ƒè­¦å‘Šã€‚å¤§å°å†™ä¸æ•æ„Ÿçš„ä½¿ç”¨ï¼ˆåœ¨è¯»å–æ—¶ä½¿ç”¨ä¸€ä¸ªä¸å£°æ˜æ—¶ä¸åŒçš„å¤§å°å†™æ–¹å¼ï¼‰ä¹Ÿå·²è¢«åºŸå¼ƒã€‚\nå‘½åç©ºé—´ä¸­çš„ assert() åºŸå¼ƒï¼šåœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­å£°æ˜ä¸€ä¸ªåä¸º assert() çš„å‡½æ•°ã€‚ assert() å‡½æ•°å±äºå¼•æ“ç‰¹æ®Šå¤„ç†çš„æƒ…å†µï¼Œå½“åœ¨å‘½åç©ºé—´ä¸­ä½¿ç”¨ç›¸åŒåå­—å»å®šä¹‰ å‡½æ•°æ—¶ä¹Ÿè®¸ä¼šå¯¼è‡´ä¸ä¸€è‡´çš„è¡Œä¸ºã€‚\nåœ¨å­—ç¬¦ä¸²ä¸­æœç´¢éå­—ç¬¦ä¸²å†…å®¹ åºŸå¼ƒï¼šå°†ä¸€ä¸ªéå­—ç¬¦ä¸²å†…å®¹ä¼ é€’ç»™å­—ç¬¦ä¸²æœç´¢å‡½æ•°ã€‚ åœ¨å°†æ¥æ‰€æœ‰å¾…æœç´¢çš„å†…å®¹éƒ½å°†è¢«è§†ä¸ºå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ ASCII ç¼–ç å€¼ã€‚å¦‚æœéœ€è¦ä¾èµ–è¿™ä¸ªç‰¹æ€§ï¼Œä½ åº”è¯¥ è¦ä¹ˆæ˜¾ç¤ºåœ°è¿›è¡Œç±»å‹è½¬æ¢ï¼ˆè½¬ä¸ºå­—ç¬¦ä¸²ï¼‰ï¼Œæˆ–è€…æ˜¾ç¤ºåœ°è°ƒç”¨ chr()ã€‚ ä»¥ä¸‹æ˜¯å—åˆ°å½±å“çš„æ–¹æ³•ï¼š\nstrpos() strrpos() stripos() strripos() strstr() strchr() strrchr() stristr() Strip-Tags Streaming fgetss() å‡½æ•°å’Œ string.strip_tags stream filter å·²ç»è¢«åºŸå¼ƒã€‚è¿™åŒæ ·å½±å“äº† SplFileObject::fgetss() æ–¹æ³•å’Œ gzgetss() å‡½æ•°ã€‚\nData Filtering å¯¹äº FILTER_FLAG_SCHEME_REQUIRED å’Œ FILTER_FLAG_HOST_REQUIRED å¸¸é‡çš„æ˜¾ç¤ºä½¿ç”¨å·²è¢«åºŸå¼ƒã€‚ æ€»ä¹‹ï¼ŒFILTER_VALIDATE_URL å·²ç»éšå«äº†è¿™ä¸¤è€…ã€‚\nå›¾åƒå¤„ç†å’Œ GD åº“ image2wbmp() å·²è¢«åºŸå¼ƒã€‚\nå›½é™…åŒ–ç›¸å…³å‡½æ•° å¦‚æœ PHP å…³è”çš„ICU â‰¥ 56, é‚£ä¹ˆ Normalizer::NONE å½¢å¼çš„ä½¿ç”¨å°†ä¼šå¯¼è‡´æŠ›å‡ºä¸€ä¸ªåºŸå¼ƒè­¦å‘Šã€‚\nå¤šå­—èŠ‚å­—ç¬¦ä¸² ä»¥ä¸‹åœ¨æ–‡æ¡£ä¸­ä¸å­˜åœ¨çš„ mbereg_() åˆ«åå·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨ç›¸åº”çš„ mb_ereg_() å˜ä½“æ›¿ä»£ã€‚\nmbregex_encoding() mbereg() mberegi() mbereg_replace() mberegi_replace() mbsplit() mbereg_match() mbereg_search() mbereg_search_pos() mbereg_search_regs() mbereg_search_init() mbereg_search_getregs() mbereg_search_getpos() mbereg_search_setpos() ODBC å’Œ DB2 å‡½æ•° (PDO_ODBC) pdo_odbc.db2_instance_name ini è®¾ç½®é¡¹åœ¨å…ˆå‰å·²è¢«åºŸå¼ƒã€‚ å®ƒåœ¨æ–‡æ¡£ä¸­è‡ª PHP 5.1.1 èµ·è¢«åºŸå¼ƒ\n7.3.x -\u0026gt; 7.4.x æ²¡æœ‰æ˜¾å¼æ‹¬å·çš„åµŒå¥—ä¸‰å…ƒè¿ç®—ç¬¦ åµŒå¥—çš„ä¸‰å…ƒæ“ä½œä¸­ï¼Œå¿…é¡»æ˜ç¡®ä½¿ç”¨æ˜¾å¼æ‹¬å·æ¥å†³å®šæ“ä½œçš„é¡ºåºã€‚ä»¥å‰ï¼Œå¦‚æœä¸ä½¿ç”¨æ‹¬å·ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå·¦å…³è”æ€§ä¸ä¼šå¯¼è‡´é¢„æœŸçš„è¡Œä¸ºã€‚\n\u0026lt;?php 1 ? 2 : 3 ? 4 : 5; // deprecated (1 ? 2 : 3) ? 4 : 5; // ok 1 ? 2 : (3 ? 4 : 5); // ok ?\u0026gt; å¤§æ‹¬å·è®¿é—®æ•°ç»„å’Œå­—ç¬¦ä¸²ç´¢å¼• ä½¿ç”¨å¤§æ‹¬å·è®¿é—®æ•°ç»„åŠå­—ç¬¦ä¸²ç´¢å¼•çš„æ–¹å¼å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨ $var[$idx] çš„è¯­æ³•æ¥æ›¿ä»£ $var{$idx}ã€‚\n(real) ç±»å‹å’Œ is_real() å‡½æ•° (real) ç±»å‹å·²è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ (float) æ¥æ›¿ä»£ã€‚\nåŒæ—¶è¢«åºŸå¼ƒçš„è¿˜æœ‰ is_real() å‡½æ•°ï¼Œè¯·ä½¿ç”¨ is_float() æ¥æ›¿ä»£ã€‚\nå½“$thisè¢«ä½¿ç”¨æ—¶ï¼Œè§£é™¤å¯¹$thisçš„ç»‘å®š ä¸å»ºè®®ä½¿ç”¨$thisçš„éé™æ€é—­åŒ…è§£é™¤$thisçš„ç»‘å®šã€‚\nparent å…³é”®è¯åœ¨æ²¡çˆ¶ç±»çš„ç±»ä¸­ä½¿ç”¨ åœ¨æ²¡æœ‰çˆ¶ç±»çš„ç±»ä¸­ä½¿ç”¨ parent å…³é”®è¯å·²è¢«åºŸå¼ƒï¼Œå¹¶ä¸”åœ¨å°†æ¥çš„ PHP ç‰ˆæœ¬ä¸­å°†ä¼šæŠ›å‡ºä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚ç›®å‰åªåœ¨è¿è¡Œæ—¶è®¿é—®çˆ¶ç±»æ—¶æ‰ä¼šäº§ç”Ÿé”™è¯¯ã€‚\nallow_url_include INI é€‰é¡¹ é…ç½®æ–‡ä»¶ä¸­çš„ allow_url_include é€‰é¡¹è¢«åºŸå¼ƒã€‚å¦‚æœå¯ç”¨äº†è¯¥é€‰é¡¹ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªå¼ƒç”¨é€šçŸ¥ã€‚\nåŸºç¡€è½¬æ¢å‡½æ•°ä¸­çš„æ— æ•ˆå­—ç¬¦å¤„ç† åœ¨ä¸‹é¢è¿™äº›åŸºç¡€è½¬æ¢å‡½æ•°ä¸­ï¼Œbase_convert(), bindec(), octdec() å’Œ hexdec() å¦‚æœä¼ å…¥äº†éæ³•å­—ç¬¦ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼ƒç”¨é€šçŸ¥ã€‚å‡½æ•°ä¼šå¿½ç•¥æ‰æ— æ•ˆå­—ç¬¦åæ­£å¸¸è¿”å›ç»“æœã€‚å‰å¯¼ç©ºæ ¼å’Œå°¾éƒ¨ç©ºæ ¼ï¼Œä»¥åŠç±»å‹ä¸º 0x (å–å†³äºåŸºæ•°) è¢«å…è®¸ä¼ å…¥ã€‚\nåœ¨å¯¹è±¡ä¸­ä½¿ç”¨ array_key_exists() åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä½¿ç”¨ array_key_exists() å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨ isset() æˆ– property_exists() æ¥æ›¿ä»£ã€‚\né­”æœ¯å¼•å·å‡½æ•° é­”æœ¯å¼•å·å‡½æ•° get_magic_quotes_gpc() å’Œ get_magic_quotes_runtime() å·²è¢«åºŸå¼ƒã€‚å®ƒä»¬å°†æ°¸è¿œè¿”å› falseã€‚\nhebrevc() å‡½æ•° hebrevc() å‡½æ•°å·²è¢«åºŸå¼ƒã€‚ å¯ä»¥ç”¨ nl2br(hebrev($str)) æ¥æ›¿ä»£ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å¯ç”¨ Unicode RTL æ¥æ”¯æŒã€‚\nconvert_cyr_string() å‡½æ•° convert_cyr_string() å‡½æ•°å·²è¢«åºŸå¼ƒã€‚å¯ä»¥ç”¨ mb_convert_string()ï¼Œ iconv() æˆ– UConverter æ›¿ä»£ã€‚\nmoney_format() å‡½æ•° money_format() å‡½æ•°å·²è¢«åºŸå¼ƒã€‚ å¯ä»¥ç”¨æ›´å›½é™…åŒ–çš„ NumberFormatter åŠŸèƒ½æ¥æ›¿ä»£ã€‚\nezmlm_hash() å‡½æ•° ezmlm_hash() å‡½æ•°å·²è¢«åºŸå¼ƒã€‚\nrestore_include_path() å‡½æ•° restore_include_path() å‡½æ•°å·²è¢«åºŸå¼ƒã€‚å¯ä»¥ç”¨ ini_restore(\u0026lsquo;include_path\u0026rsquo;) æ›¿ä»£ã€‚\nImplode å‡½æ•°çš„å‚æ•°é¡ºåº implode() å…è®¸åè½¬å‚æ•°é¡ºåºçš„ç‰¹æ€§å·²è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ implode($glue, $parts) æ¥æ›¿ä»£ implode($parts, $glue)ã€‚\nCOM å¯¼å…¥ç±»å‹åº“çš„å¤§å°å†™ä¸æ•æ„Ÿçš„å¸¸é‡æ³¨å†Œå·²è¢«åºŸå¼ƒã€‚\nFilter FILTER_SANITIZE_MAGIC_QUOTES å·²è¢«åºŸå¼ƒï¼Œä½¿ç”¨ FILTER_SANITIZE_ADD_SLASHES æ¥æ›¿ä»£ã€‚\nå¤šå­—èŠ‚å­—ç¬¦ä¸² å‘ mb_ereg_replace() ä¼ é€’éå­—ç¬¦ä¸²æ¨¡å¼å·²è¢«åºŸå¼ƒã€‚ç›®å‰ï¼Œéå­—ç¬¦ä¸²æ¨¡å¼è¢«è§£é‡Šä¸º ASCII ä»£ç ç‚¹ã€‚åœ¨ PHP 8 ä¸­ï¼Œæ¨¡å¼å°†è¢«è§£é‡Šä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\nå°†ç¼–ç ä½œä¸ºç¬¬ä¸‰å‚æ•°ä¼ é€’ç»™ mb_strrpos() å·²è¢«åºŸå¼ƒã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¼ é€’ä¸€ä¸ª 0 åç§»é‡ï¼Œå¹¶å°†ç¼–ç ä½œä¸ºç¬¬å››ä¸ªå‚æ•°ã€‚\nLightweight Directory Access Protocol ldap_control_paged_result_response() å’Œ ldap_control_paged_result() å‡½æ•°å·²è¢«åºŸå¼ƒã€‚æ§åˆ¶é¡µé¢æ“ä½œå¯ä»¥ä½¿ç”¨ ldap_search() æ›¿ä»£ã€‚\nåå°„ è°ƒç”¨ ReflectionType::__toString() ç°åœ¨å°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼ƒç”¨é€šçŸ¥ã€‚ è¯¥æ–¹æ³•ä» PHP 7.1 å¼€å§‹ï¼Œåœ¨ ReflectionNamedType::getName() çš„æ–‡æ¡£ä¸­å·²ç»è¢«å£°æ˜åºŸå¼ƒï¼Œä½†æ˜¯ç”±äºæŠ€æœ¯åŸå› ï¼Œå¹¶æ²¡æœ‰æŠ›å‡ºå¼ƒç”¨é€šçŸ¥ã€‚\næ‰€æœ‰Reflectionç±»çš„export()æ–¹æ³•å·²è¢«åºŸå¼ƒã€‚æ„å»ºä¸€ä¸ªReflectionå¯¹è±¡å¹¶å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚\n\u0026lt;?php // ReflectionClass::export(Foo::class, false) is: echo new ReflectionClass(Foo::class), \u0026quot;\\n\u0026quot;; // $str = ReflectionClass::export(Foo::class, true) is: $str = (string) new ReflectionClass(Foo::class); ?\u0026gt; Socket å¸¸é‡ AI_IDN_ALLOW_UNASSIGNED å’Œ AI_IDN_USE_STD3_ASCII_RULES åœ¨ socket_addrinfo_lookup() ä¸­ä¸å†å¯ç”¨ï¼Œå› ä¸ºè¯¥å¸¸é‡åœ¨ glibc ä¸­å·²è¢«åºŸå¼ƒã€‚\n","id":15,"section":"posts","summary":"\u003cp\u003eå…¬å¸é¡¹ç›®ä» 7.1 å‡çº§åˆ° 7.4 æ•…å¯¹ php å‡çº§æ–‡æ¡£è¿›è¡Œæ•´ç†ä¸ç¿»è¯‘ã€‚\u003c/p\u003e","tags":["php"],"title":"PHP 7.1 å‡çº§è‡³ 7.4","uri":"https://www.ganymedenil.com/2021/04/28/php71-to-php74.html","year":"2021"},{"content":"è¡Œä¸ºå‹è§£å†³çš„æ˜¯ä¸åŒå¯¹è±¡ä¹‹é—´çš„é€šä¿¡æŒ‘æˆ˜ã€‚å®ƒä»¬æè¿°äº†ä¸åŒçš„å¯¹è±¡å’Œç±»ä¹‹é—´å¦‚ä½•ç›¸äº’å‘é€æ¶ˆæ¯ä»¥ä½¿äº‹æƒ…å‘ç”Ÿã€‚\nä»¥ä¸‹æ˜¯æˆ‘ä»¬å½’ç±»ä¸ºè¡Œä¸ºå‹çš„æ¨¡å¼åˆ—è¡¨ã€‚\nè´£ä»»é“¾æ¨¡å¼ å‘½ä»¤æ¨¡å¼ è§£æå™¨æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ çŠ¶æ€æ¨¡å¼ ç­–ç•¥æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ è®¿é—®è€…æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼é€šè¿‡ä½¿ä¸€ä¸ªä»¥ä¸Šçš„å¯¹è±¡ä»¥é“¾å¼æ–¹å¼å¤„ç†è¯·æ±‚ï¼Œå°†è¯·æ±‚çš„å‘é€æ–¹ä¸æ¥æ”¶æ–¹è§£è€¦ã€‚å„ç§ç±»å‹çš„å¤„ç†å¯¹è±¡å¯ä»¥åŠ¨æ€åœ°æ·»åŠ åˆ°é“¾ä¸­ã€‚ä½¿ç”¨é€’å½’ç»„æˆé“¾ï¼Œå¯ä»¥å®ç°æ— é™æ•°é‡çš„å¤„ç†å¯¹è±¡ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè´£ä»»é“¾æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\nabstract class SocialNotifier { private $notifyNext = null; public function notifyNext(SocialNotifier $notifier) { $this-\u0026gt;notifyNext = $notifier; return $this-\u0026gt;notifyNext; } final public function push($message) { $this-\u0026gt;publish($message); if ($this-\u0026gt;notifyNext !== null) { $this-\u0026gt;notifyNext-\u0026gt;push($message); } } abstract protected function publish($message); } class TwitterSocialNotifier extends SocialNotifier { public function publish($message) { // Implementation... } } class FacebookSocialNotifier extends SocialNotifier { protected function publish($message) { // Implementation... } } class PinterestSocialNotifier extends SocialNotifier { protected function publish($message) { // Implementation... } } // Client $notifier = new TwitterSocialNotifier(); $notifier-\u0026gt;notifyNext(new FacebookSocialNotifier()) -\u0026gt;notifyNext(new PinterestSocialNotifier()); $notifier-\u0026gt;push('Awesome new product available!'); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæŠ½è±¡çš„SocialNotifierç±»ï¼Œå¹¶å®ç°äº†æŠ½è±¡æ–¹æ³•publishã€notifyNextå’Œpushæ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†TwitterSocialNotifierã€FacebookSocialNotifierå’ŒPinterestSocialNotifierï¼Œå®ƒä»¬éƒ½æ˜¯å¯¹æŠ½è±¡SocialNotifierçš„æ‰©å±•ã€‚å®¢æˆ·ç«¯é¦–å…ˆå®ä¾‹åŒ–TwitterSocialNotifierï¼Œç„¶åæ˜¯ä¸¤æ¬¡notifyNextè°ƒç”¨ï¼Œåœ¨è°ƒç”¨æœ€åçš„pushæ–¹æ³•ä¹‹å‰ï¼Œå‘å®ƒä¼ é€’å¦å¤–ä¸¤ä¸ªnotifierç±»å‹çš„å®ä¾‹ã€‚\nå‘½ä»¤æ¨¡å¼ å‘½ä»¤æ¨¡å¼å°†æ‰§è¡ŒæŸäº›æ“ä½œçš„å¯¹è±¡ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨å®ƒçš„å¯¹è±¡è§£è€¦ã€‚å®ƒé€šè¿‡å°è£…ä»¥åæ‰§è¡ŒæŸä¸ªæ“ä½œæ‰€éœ€çš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯æ¥å®ç°ã€‚è¿™æ„å‘³ç€å¯¹è±¡ã€æ–¹æ³•åå’Œæ–¹æ³•å‚æ•°çš„ä¿¡æ¯ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªå‘½ä»¤æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\ninterface LightBulbCommand { public function execute(); } class LightBulbControl { public function turnOn() { echo 'LightBulb turnOn'; } public function turnOff() { echo 'LightBulb turnOff'; } } class TurnOnLightBulb implements LightBulbCommand { private $lightBulbControl; public function __construct(LightBulbControl $lightBulbControl) { $this-\u0026gt;lightBulbControl = $lightBulbControl; } public function execute() { $this-\u0026gt;lightBulbControl-\u0026gt;turnOn(); } } class TurnOffLightBulb implements LightBulbCommand { private $lightBulbControl; public function __construct(LightBulbControl $lightBulbControl) { $this-\u0026gt;lightBulbControl = $lightBulbControl; } public function execute() { $this-\u0026gt;lightBulbControl-\u0026gt;turnOff(); } } // Client $command = new TurnOffLightBulb(new LightBulbControl()); $command-\u0026gt;execute(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªLightBulbCommandæ¥å£ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†LightBulbControlç±»ï¼Œå®ƒæä¾›äº†ä¸¤ä¸ªç®€å•çš„turnOn/turnOffæ–¹æ³•ã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†TurnOnLightBulbå’ŒTurnOffLightBulbç±»ï¼Œå®ƒä»¬å®ç°äº†LightBulbCommandæ¥å£ã€‚æœ€åï¼Œå®¢æˆ·ç«¯æ˜¯ç”¨LightBulbControlçš„å®ä¾‹å®ä¾‹åŒ–TurnOffLightBulbå¯¹è±¡ï¼Œå¹¶å¯¹å…¶è°ƒç”¨æ‰§è¡Œæ–¹æ³•ã€‚\nè§£æå™¨æ¨¡å¼ è§£é‡Šå™¨æ¨¡å¼è§„å®šäº†å¦‚ä½•è¯„ä»·è¯­è¨€è¯­æ³•æˆ–è¡¨è¾¾å¼ã€‚æˆ‘ä»¬åœ¨å®šä¹‰è§£é‡Šå™¨çš„åŒæ—¶ï¼Œä¹Ÿå®šä¹‰äº†è¯­è¨€è¯­æ³•çš„è¡¨ç¤ºæ–¹æ³•ã€‚è¯­è¨€è¯­æ³•çš„è¡¨ç¤ºä½¿ç”¨å¤åˆç±»å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è§„åˆ™è¢«æ˜ å°„åˆ°ç±»ã€‚ç„¶åï¼Œè§£é‡Šå™¨ä½¿ç”¨è¡¨ç¤ºæ³•æ¥è§£é‡Šè¯­è¨€ä¸­çš„è¡¨è¾¾å¼ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè§£é‡Šå™¨æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface MathExpression { public function interpret(array $values); } class Variable implements MathExpression { private $char; public function __construct($char) { $this-\u0026gt;char = $char; } public function interpret(array $values) { return $values[$this-\u0026gt;char]; } } class Literal implements MathExpression { private $value; public function __construct($value) { $this-\u0026gt;value = $value; } public function interpret(array $values) { return $this-\u0026gt;value; } } class Sum implements MathExpression { private $x; private $y; public function __construct(MathExpression $x, MathExpression $y) { $this-\u0026gt;x = $x; $this-\u0026gt;y = $y; } public function interpret(array $values) { return $this-\u0026gt;x-\u0026gt;interpret($values) + $this-\u0026gt;y-\u0026gt;interpret($values); } } class Product implements MathExpression { private $x; private $y; public function __construct(MathExpression $x, MathExpression $y) { $this-\u0026gt;x = $x; $this-\u0026gt;y = $y; } public function interpret(array $values) { return $this-\u0026gt;x-\u0026gt;interpret($values) * $this-\u0026gt;y-\u0026gt;interpret($values); } } // Client $expression = new Product( new Literal(5), new Sum( new Variable('c'), new Literal(2) ) ); echo $expression-\u0026gt;interpret(array('c' =\u0026gt; 3)); // 25 æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªMathExpressionæ¥å£ï¼Œæœ‰ä¸€ä¸ª interpret æ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ Variableã€Literalã€Sumå’ŒProductç±»ï¼Œæ‰€æœ‰è¿™äº›ç±»éƒ½å®ç°äº†MathExpressionæ¥å£ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ä»Productç±»ä¸­å®ä¾‹åŒ–ï¼Œå°†Literalå’ŒSumçš„å®ä¾‹ä¼ é€’ç»™å®ƒï¼Œå¹¶ä»¥ä¸€ä¸ª interpret æ–¹æ³•è°ƒç”¨ç»“æŸã€‚\nè¿­ä»£å™¨æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼ç”¨äºéå†ä¸€ä¸ªå®¹å™¨å¹¶è®¿é—®å…¶å…ƒç´ ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªç±»å¯ä»¥éå†å¦ä¸€ä¸ªç±»çš„å…ƒç´ ã€‚PHPå¯¹è¿­ä»£å™¨æœ‰ä¸€ä¸ªæœ¬åœ°æ”¯æŒï¼Œä½œä¸ºå†…ç½®çš„\\Iteratorå’Œ\\IteratorAggregateæ¥å£çš„ä¸€éƒ¨åˆ†ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè¿­ä»£å™¨æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\nclass ProductIterator implements \\Iterator { private $position = 0; private $productsCollection; public function __construct(ProductCollection $productsCollection) { $this-\u0026gt;productsCollection = $productsCollection; } public function current() { return $this-\u0026gt;productsCollection-\u0026gt;getProduct($this-\u0026gt;position); } public function key() { return $this-\u0026gt;position; } public function next() { $this-\u0026gt;position++; } public function rewind() { $this-\u0026gt;position = 0; } public function valid() { return !is_null($this-\u0026gt;productsCollection-\u0026gt;getProduct($this-\u0026gt;position)); } } class ProductCollection implements \\IteratorAggregate { private $products = array(); public function getIterator() { return new ProductIterator($this); } public function addProduct($string) { $this-\u0026gt;products[] = $string; } public function getProduct($key) { if (isset($this-\u0026gt;products[$key])) { return $this-\u0026gt;products[$key]; } return null; } public function isEmpty() { return empty($products); } } $products = new ProductCollection(); $products-\u0026gt;addProduct('T-Shirt Red'); $products-\u0026gt;addProduct('T-Shirt Blue'); $products-\u0026gt;addProduct('T-Shirt Green'); $products-\u0026gt;addProduct('T-Shirt Yellow'); foreach ($products as $product) { var_dump($product); } é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªProductIteratorï¼Œå®ƒå®ç°äº†æ ‡å‡†çš„PHP \\Iteratoræ¥å£ï¼Œç„¶åæˆ‘ä»¬æ·»åŠ äº†ProductCollectionï¼Œå®ƒå®ç°äº†æ ‡å‡†çš„PHP \\IteratorAggregateæ¥å£ã€‚å®¢æˆ·ç«¯åˆ›å»ºäº†ä¸€ä¸ªProductCollectionçš„å®ä¾‹ï¼Œé€šè¿‡addProductæ–¹æ³•è°ƒç”¨å°†å€¼å †ç§¯åˆ°å…¶ä¸­ï¼Œå¹¶å¾ªç¯æµè§ˆæ•´ä¸ªé›†åˆã€‚\nä¸­ä»‹è€…æ¨¡å¼ æˆ‘ä»¬çš„è½¯ä»¶ä¸­çš„ç±»è¶Šå¤šï¼Œå®ƒä»¬çš„é€šä¿¡å°±è¶Šå¤æ‚ã€‚ä¸­ä»‹è€…æ¨¡å¼é€šè¿‡å°†å…¶å°è£…æˆä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡æ¥è§£å†³è¿™ç§å¤æ‚æ€§ã€‚å¯¹è±¡ä¸å†ç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹å¯¹è±¡è¿›è¡Œé€šä¿¡ï¼Œå› æ­¤é™ä½äº†æ•´ä½“çš„è€¦åˆåº¦ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä¸­ä»‹è€…æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface MediatorInterface { public function fight(); public function talk(); public function registerA(ColleagueA $a); public function registerB(ColleagueB $b); } class ConcreteMediator implements MediatorInterface { protected $talk; // ColleagueA protected $fight; // ColleagueB public function registerA(ColleagueA $a) { $this-\u0026gt;talk = $a; } public function registerB(ColleagueB $b) { $this-\u0026gt;fight = $b; } public function fight() { echo 'fighting...'; } public function talk() { echo 'talking...'; } } abstract class Colleague { protected $mediator; // MediatorInterface public abstract function doSomething(); } class ColleagueA extends Colleague { public function __construct(MediatorInterface $mediator) { $this-\u0026gt;mediator = $mediator; $this-\u0026gt;mediator-\u0026gt;registerA($this); } public function doSomething() { $this-\u0026gt;mediator-\u0026gt;talk(); } } class ColleagueB extends Colleague { public function __construct(MediatorInterface $mediator) { $this-\u0026gt;mediator = $mediator; $this-\u0026gt;mediator-\u0026gt;registerB($this); } public function doSomething() { $this-\u0026gt;mediator-\u0026gt;fight(); } } // Client $mediator = new ConcreteMediator(); $talkColleague = new ColleagueA($mediator); $fightColleague = new ColleagueB($mediator); $talkColleague-\u0026gt;doSomething(); $fightColleague-\u0026gt;doSomething(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªæ–¹æ³•çš„MediatorInterfaceï¼Œç”±ConcreteMediatorç±»å®ç°ã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†æŠ½è±¡ç±»Colleagueï¼Œå¼ºåˆ¶åœ¨ä¸‹é¢çš„ColleagueAå’ŒColleagueBç±»ä¸Šå®ç°doSomethingæ–¹æ³•ã€‚å®¢æˆ·ç«¯é¦–å…ˆå®ä¾‹åŒ–ConcreteMediatorï¼Œå¹¶å°†å…¶å®ä¾‹ä¼ é€’ç»™ColleagueAå’ŒColleagueBçš„å®ä¾‹ï¼Œå¹¶æ ¹æ®è¿™äº›å®ä¾‹è°ƒç”¨doSomethingæ–¹æ³•ã€‚\nå¤‡å¿˜å½•æ¨¡å¼ å¤‡å¿˜å½•æ¨¡å¼æä¾›äº†å¯¹è±¡è¿˜åŸåŠŸèƒ½ã€‚é€šè¿‡ä¸‰ä¸ªä¸åŒçš„å¯¹è±¡æ¥å®ç°ï¼šoriginatorã€caretakerå’Œmementoï¼Œå…¶ä¸­originatoræ˜¯ä¿å­˜ä»¥åè¿˜åŸæ‰€éœ€çš„å†…éƒ¨çŠ¶æ€çš„å¯¹è±¡ã€‚\nä»¥ä¸‹æ˜¯å¤‡å¿˜å½•æ¨¡å¼å®ç°çš„ä¸€ä¸ªä¾‹å­ã€‚\nclass Memento { private $state; public function __construct($state) { $this-\u0026gt;state = $state; } public function getState() { return $this-\u0026gt;state; } } class Originator { private $state; public function setState($state) { return $this-\u0026gt;state = $state; } public function getState() { return $this-\u0026gt;state; } public function saveToMemento() { return new Memento($this-\u0026gt;state); } public function restoreFromMemento(Memento $memento) { $this-\u0026gt;state = $memento-\u0026gt;getState(); } } // Client - Caretaker $savedStates = array(); $originator = new Originator(); $originator-\u0026gt;setState('new'); $originator-\u0026gt;setState('pending'); $savedStates[] = $originator-\u0026gt;saveToMemento(); $originator-\u0026gt;setState('processing'); $savedStates[] = $originator-\u0026gt;saveToMemento(); $originator-\u0026gt;setState('complete'); $originator-\u0026gt;restoreFromMemento($savedStates[1]); echo $originator-\u0026gt;getState(); // processing æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªMementoç±»ï¼Œå®ƒå°†é€šè¿‡getStateæ–¹æ³•æä¾›å¯¹è±¡çš„å½“å‰çŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†Originatorç±»ï¼Œå°†çŠ¶æ€æ¨é€ç»™Mementoã€‚æœ€åï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ä¾‹åŒ–Originatoræ¥æ‰®æ¼” caretaker çš„è§’è‰²ï¼Œåœ¨å®ƒçš„å‡ ä¸ªçŠ¶æ€ä¹‹é—´è¿›è¡Œæ‚è€ï¼Œä»Mementoä¸­ä¿å­˜å’Œæ¢å¤è¿™äº›çŠ¶æ€ã€‚\nè§‚å¯Ÿè€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼å®ç°äº†å¯¹è±¡ä¹‹é—´ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ã€‚æŒæœ‰ä¾èµ–åˆ—è¡¨çš„å¯¹è±¡è¢«ç§°ä¸ºsubjectï¼Œè€Œä¾èµ–è€…è¢«ç§°ä¸ºobserverã€‚å½“subjectå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\nclass Customer implements \\SplSubject { protected $data = array(); protected $observers = array(); public function attach(\\SplObserver $observer) { $this-\u0026gt;observers[] = $observer; } public function detach(\\SplObserver $observer) { $index = array_search($observer, $this-\u0026gt;observers); if ($index !== false) { unset($this-\u0026gt;observers[$index]); } } public function notify() { foreach ($this-\u0026gt;observers as $observer) { $observer-\u0026gt;update($this); echo 'observer updated'; } } public function __set($name, $value) { $this-\u0026gt;data[$name] = $value; // notify the observers, that user has been updated $this-\u0026gt;notify(); } } class CustomerObserver implements \\SplObserver { public function update(\\SplSubject $subject) { /* Implementation... */ } } // Client $user = new Customer(); $customerObserver = new CustomerObserver(); $user-\u0026gt;attach($customerObserver); $user-\u0026gt;name = 'John Doe'; $user-\u0026gt;email = 'john.doe@fake.mail'; æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªCustomerç±»ï¼Œå®ƒå®ç°äº†æ ‡å‡†çš„PHP \\SplSubjectæ¥å£ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†CustomerObserverç±»ï¼Œå®ƒå®ç°äº†æ ‡å‡†çš„PHP \\SplObserveræ¥å£ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–Customerå’ŒCustomerObserverå¯¹è±¡ï¼Œå¹¶å°†CustomerObserverå¯¹è±¡é™„åŠ åˆ°Customerä¸Šã€‚ä»»ä½•å¯¹å§“åå’Œç”µå­é‚®ä»¶å±æ€§çš„æ”¹å˜éƒ½ä¼šè¢«è§‚å¯Ÿè€…æ•è·ã€‚\nçŠ¶æ€æ¨¡å¼ çŠ¶æ€æ¨¡å¼å°è£…äº†åŒä¸€å¯¹è±¡æ ¹æ®å…¶å†…éƒ¨çŠ¶æ€è€Œäº§ç”Ÿçš„ä¸åŒè¡Œä¸ºï¼Œä½¿å¯¹è±¡çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å®ƒçš„ç±»ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªçŠ¶æ€æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\ninterface Statelike { public function writeName(StateContext $context, $name); } class StateLowerCase implements Statelike { public function writeName(StateContext $context, $name) { echo strtolower($name); $context-\u0026gt;setState(new StateMultipleUpperCase()); } } class StateMultipleUpperCase implements Statelike { private $count = 0; public function writeName(StateContext $context, $name) { $this-\u0026gt;count++; echo strtoupper($name); /* Change state after two invocations */ if ($this-\u0026gt;count \u0026gt; 1) { $context-\u0026gt;setState(new StateLowerCase()); } } } class StateContext { private $state; public function setState(Statelike $state) { $this-\u0026gt;state = $state; } public function writeName($name) { $this-\u0026gt;state-\u0026gt;writeName($this, $name); } } // Client $stateContext = new StateContext(); $stateContext-\u0026gt;setState(new StateLowerCase()); $stateContext-\u0026gt;writeName('Monday'); $stateContext-\u0026gt;writeName('Tuesday'); $stateContext-\u0026gt;writeName('Wednesday'); $stateContext-\u0026gt;writeName('Thursday'); $stateContext-\u0026gt;writeName('Friday'); $stateContext-\u0026gt;writeName('Saturday'); $stateContext-\u0026gt;writeName('Sunday'); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªStatelikeæ¥å£ï¼Œç„¶åæ˜¯å®ç°è¯¥æ¥å£çš„StateLowerCaseå’ŒStateMultipleUpperCaseã€‚StateMultipleUpperCaseåœ¨å®ƒçš„writeNameä¸­åŠ å…¥äº†ä¸€ç‚¹è®¡æ•°é€»è¾‘ï¼Œæ‰€ä»¥å®ƒåœ¨ä¸¤æ¬¡è°ƒç”¨ä¹‹åå°±ä¼šå¯åŠ¨æ–°çš„çŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†StateContextç±»ï¼Œæˆ‘ä»¬å°†ç”¨å®ƒæ¥åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–StateContextï¼Œå¹¶é€šè¿‡setStateæ–¹æ³•å°†StateLowerCaseçš„ä¸€ä¸ªå®ä¾‹ä¼ é€’ç»™å®ƒï¼Œç„¶åæ˜¯å‡ ä¸ªwriteNameæ–¹æ³•ã€‚\nç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªç®—æ³•å®¶æ—ï¼Œæ¯ä¸ªç®—æ³•éƒ½è¢«å°è£…èµ·æ¥ï¼Œå¹¶å¯ä¸è¯¥å®¶æ—ä¸­çš„å…¶ä»–æˆå‘˜äº’æ¢ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç­–ç•¥æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\ninterface PaymentStrategy { public function pay($amount); } class StripePayment implements PaymentStrategy { public function pay($amount) { echo 'StripePayment...'; } } class PayPalPayment implements PaymentStrategy { public function pay($amount) { echo 'PayPalPayment...'; } } class Checkout { private $amount = 0; public function __construct($amount = 0) { $this-\u0026gt;amount = $amount; } public function capturePayment() { if ($this-\u0026gt;amount \u0026gt; 99.99) { $payment = new PayPalPayment(); } else { $payment = new StripePayment(); } $payment-\u0026gt;pay($this-\u0026gt;amount); } } $checkout = new Checkout(49.99); $checkout-\u0026gt;capturePayment(); // StripePayment... $checkout = new Checkout(199.99); $checkout-\u0026gt;capturePayment(); // PayPalPayment... æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªPaymentStrategyæ¥å£ï¼Œç„¶åæ˜¯å®ç°å®ƒçš„å…·ä½“ç±»StripePaymentå’ŒPayPalPaymentã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†Checkoutç±»ï¼Œå¹¶åœ¨capturePaymentæ–¹æ³•ä¸­åŠ å…¥äº†ä¸€äº›å†³ç­–é€»è¾‘ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–Checkoutï¼Œé€šè¿‡å…¶æ„é€ å‡½æ•°ä¼ é€’ä¸€å®šçš„é‡‘é¢ã€‚æ ¹æ®é‡‘é¢ï¼ŒCheckoutå†…éƒ¨åœ¨è°ƒç”¨capturePaymentæ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªæˆ–å¦ä¸€ä¸ªä»˜æ¬¾ã€‚\næ¨¡æ¿æ–¹æ³•æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨æ–¹æ³•ä¸­å®šä¹‰äº†ç®—æ³•çš„ç¨‹åºéª¨æ¶ã€‚å®ƒè®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ç±»é‡è½½ï¼Œé‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ï¼Œè€Œä¸çœŸæ­£æ”¹å˜ç®—æ³•çš„ç»“æ„ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\nabstract class Game { private $playersCount; abstract function initializeGame(); abstract function makePlay($player); abstract function endOfGame(); abstract function printWinner(); public function playOneGame($playersCount) { $this-\u0026gt;playersCount = $playersCount; $this-\u0026gt;initializeGame(); $j = 0; while (!$this-\u0026gt;endOfGame()) { $this-\u0026gt;makePlay($j); $j = ($j + 1) % $playersCount; } $this-\u0026gt;printWinner(); } } class Monopoly extends Game { public function initializeGame() { // Implementation... } public function makePlay($player) { // Implementation... } public function endOfGame() { // Implementation... } public function printWinner() { // Implementation... } } class Chess extends Game { public function initializeGame() { // Implementation... } public function makePlay($player) { // Implementation... } public function endOfGame() { // Implementation... } public function printWinner() { // Implementation... } } $game = new Chess(); $game-\u0026gt;playOneGame(2); $game = new Monopoly(); $game-\u0026gt;playOneGame(4); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæŠ½è±¡çš„Gameç±»ï¼Œè¯¥ç±»æä¾›äº†æ‰€æœ‰å°è£…æ¸¸æˆç©æ³•çš„å®é™…æŠ½è±¡æ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†Monopolyå’ŒChessç±»ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½æ˜¯ç”±Gameç±»æ‰©å±•è€Œæ¥ï¼Œä¸ºæ¯ä¸ªç±»å®ç°äº†ç‰¹å®šçš„æ¸¸æˆæ–¹æ³•game-playã€‚å®¢æˆ·ç«¯åªéœ€å®ä¾‹åŒ–Monopolyå’ŒChesså¯¹è±¡ï¼Œå¯¹æ¯ä¸ªå¯¹è±¡è°ƒç”¨playOneGameæ–¹æ³•ã€‚\nè®¿é—®è€…æ¨¡å¼ è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§å°†ç®—æ³•ä¸å…¶æ“ä½œçš„å¯¹è±¡ç»“æ„åˆ†ç¦»çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ç°æœ‰çš„å¯¹è±¡ç»“æ„ä¸Šæ·»åŠ æ–°çš„æ“ä½œï¼Œè€Œä¸å®é™…ä¿®æ”¹è¿™äº›ç»“æ„ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè®¿é—®è€…æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\ninterface RoleVisitorInterface { public function visitUser(User $role); public function visitGroup(Group $role); } class RolePrintVisitor implements RoleVisitorInterface { public function visitGroup(Group $role) { echo 'Role: ' . $role-\u0026gt;getName(); } public function visitUser(User $role) { echo 'Role: ' . $role-\u0026gt;getName(); } } abstract class Role { public function accept(RoleVisitorInterface $visitor) { $klass = get_called_class(); preg_match('#([^\\\\\\\\]+)$#', $klass, $extract); $visitingMethod = 'visit' . $extract[1]; if (!method_exists(__NAMESPACE__ . '\\RoleVisitorInterface', $visitingMethod)) { throw new \\InvalidArgumentException(\u0026quot;The visitor you provide cannot visit a $klass instance\u0026quot;); } call_user_func(array($visitor, $visitingMethod), $this); } } class User extends Role { protected $name; public function __construct($name) { $this-\u0026gt;name = (string)$name; } public function getName() { return 'User ' . $this-\u0026gt;name; } } class Group extends Role { protected $name; public function __construct($name) { $this-\u0026gt;name = (string)$name; } public function getName() { return 'Group: ' . $this-\u0026gt;name; } } $group = new Group('my group'); $user = new User('my user'); $visitor = new RolePrintVisitor; $group-\u0026gt;accept($visitor); $user-\u0026gt;accept($visitor); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªRoleVisitorInterfaceï¼Œç„¶åæ˜¯RolePrintVisitorï¼Œå®ƒå®ç°äº†RoleVisitorInterfaceæœ¬èº«ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡ç±»Roleï¼Œå®ƒæœ‰ä¸€ä¸ªæ¥å—æ–¹æ³•æ¥æ¥å—RoleVisitorInterfaceçš„å‚æ•°ç±»å‹ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥å®šä¹‰äº†å…·ä½“çš„Userå’ŒGroupç±»ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½æ˜¯ä»Roleæ‰©å±•è€Œæ¥çš„ã€‚å®¢æˆ·ç«¯å®ä¾‹åŒ–Userã€Groupå’ŒRolePrintVisitorï¼›å°† visitor ä¼ å…¥Userå’ŒGroupå®ä¾‹çš„acceptæ–¹æ³•è°ƒç”¨ã€‚\næ›´å¤šæ–‡ç« å†…å®¹è¯·å‚è§\nhttps://github.com/AnyStudy/PHP-7-Real-World-Application-Development\nå¦‚æœå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©å¸Œæœ›æ‚¨èƒ½ç‚¹ä»¥ä¸‹ star\n","id":16,"section":"posts","summary":"\u003cp\u003eè¡Œä¸ºå‹è§£å†³çš„æ˜¯ä¸åŒå¯¹è±¡ä¹‹é—´çš„é€šä¿¡æŒ‘æˆ˜ã€‚å®ƒä»¬æè¿°äº†ä¸åŒçš„å¯¹è±¡å’Œç±»ä¹‹é—´å¦‚ä½•ç›¸äº’å‘é€æ¶ˆæ¯ä»¥ä½¿äº‹æƒ…å‘ç”Ÿã€‚\u003c/p\u003e","tags":["php"],"title":"ä½¿ç”¨ PHP 7 å®ç° GoF è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºå‹","uri":"https://www.ganymedenil.com/2021/01/09/php7-gof-behavioral-patterns.html","year":"2021"},{"content":"ç»“æ„å‹å¤„ç†çš„æ˜¯ç±»å’Œå¯¹è±¡çš„ç»„æˆã€‚åˆ©ç”¨æ¥å£æˆ–æŠ½è±¡ç±»å’Œæ–¹æ³•ï¼Œå®ƒä»¬å®šä¹‰äº†ç»„æˆå¯¹è±¡çš„æ–¹æ³•ï¼Œè¿›è€Œè·å¾—æ–°çš„åŠŸèƒ½ã€‚\nä»¥ä¸‹æ˜¯æˆ‘ä»¬å½’ç±»ä¸ºç»“æ„å‹çš„æ¨¡å¼åˆ—è¡¨ã€‚\né€‚é…å™¨æ¨¡å¼ æ¡¥æ¥æ¨¡å¼ ç»„åˆæ¨¡å¼ è£…é¥°å™¨æ¨¡å¼ é—¨é¢æ¨¡å¼ äº«å…ƒæ¨¡å¼ ä»£ç†æ¨¡å¼ æœ‰å…³ç»“æ„å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§https://en.wikipedia.org/wiki/Structural_patternã€‚\né€‚é…å™¨æ¨¡å¼ é€‚é…å™¨æ¨¡å¼å…è®¸ä»å¦ä¸€ä¸ªæ¥å£ä½¿ç”¨ç°æœ‰ç±»çš„æ¥å£ï¼ŒåŸºæœ¬ä¸Šæ˜¯é€šè¿‡å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢ä¸ºå¦ä¸€ä¸ªç±»æ‰€æœŸæœ›çš„æ¥å£ï¼Œå¸®åŠ©ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¸€èµ·å·¥ä½œã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªé€‚é…å™¨æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\nclass Stripe { public function capturePayment($amount) { /* Implementation... */ } public function authorizeOnlyPayment($amount) { /* Implementation... */ } public function cancelAmount($amount) { /* Implementation... */ } } interface PaymentService { public function capture($amount); public function authorize($amount); public function cancel($amount); } class StripePaymentServiceAdapter implements PaymentService { private $stripe; public function __construct(Stripe $stripe) { $this-\u0026gt;stripe = $stripe; } public function capture($amount) { $this-\u0026gt;stripe-\u0026gt;capturePayment($amount); } public function authorize($amount) { $this-\u0026gt;stripe-\u0026gt;authorizeOnlyPayment($amount); } public function cancel($amount) { $this-\u0026gt;stripe-\u0026gt;cancelAmount($amount); } } // Client $stripe = new StripePaymentServiceAdapter(new Stripe()); $stripe-\u0026gt;authorize(49.99); $stripe-\u0026gt;capture(19.99); $stripe-\u0026gt;cancel(9.99); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªå…·ä½“çš„Stripeç±»ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†PaymentServiceæ¥å£ä¸ä¸€äº›åŸºæœ¬çš„æ”¯ä»˜å¤„ç†æ–¹æ³•ã€‚StripePaymentServiceAdapterå®ç°äº†PaymentServiceæ¥å£ï¼Œæä¾›äº†æ”¯ä»˜å¤„ç†æ–¹æ³•çš„å…·ä½“å®ç°ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–StripePaymentServiceAdapterå¹¶æ‰§è¡Œæ”¯ä»˜å¤„ç†æ–¹æ³•ã€‚\næ¡¥æ¥æ¨¡å¼ å½“æˆ‘ä»¬æƒ³æŠŠä¸€ä¸ªç±»æˆ–æŠ½è±¡ä»å®ƒçš„å®ç°ä¸­è§£è€¦å‡ºæ¥æ—¶ï¼Œå°±ä¼šç”¨åˆ°æ¡¥æ¥æ¨¡å¼ï¼Œè®©å®ƒä»¬éƒ½èƒ½ç‹¬ç«‹åœ°æ”¹å˜ã€‚å½“ç±»å’Œå®ƒçš„å®ç°ç»å¸¸å˜åŒ–æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªæ¡¥æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface MailerInterface { public function setSender(MessagingInterface $sender); public function send($body); } abstract class Mailer implements MailerInterface { protected $sender; public function setSender(MessagingInterface $sender) { $this-\u0026gt;sender = $sender; } } class PHPMailer extends Mailer { public function send($body) { $body .= \u0026quot;\\n\\n Sent from a phpmailer.\u0026quot;; return $this-\u0026gt;sender-\u0026gt;send($body); } } class SwiftMailer extends Mailer { public function send($body) { $body .= \u0026quot;\\n\\n Sent from a SwiftMailer.\u0026quot;; return $this-\u0026gt;sender-\u0026gt;send($body); } } interface MessagingInterface { public function send($body); } class TextMessage implements MessagingInterface { public function send($body) { echo 'TextMessage \u0026gt; send \u0026gt; $body: ' . $body; } } class HtmlMessage implements MessagingInterface { public function send($body) { echo 'HtmlMessage \u0026gt; send \u0026gt; $body: ' . $body; } } // Client $phpmailer = new PHPMailer(); $phpmailer-\u0026gt;setSender(new TextMessage()); $phpmailer-\u0026gt;send('Hi!'); $swiftMailer = new SwiftMailer(); $swiftMailer-\u0026gt;setSender(new HtmlMessage()); $swiftMailer-\u0026gt;send('Hello!'); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªMailerInterfaceã€‚ç„¶åï¼Œå…·ä½“çš„Mailerç±»å®ç°äº†MailerInterfaceï¼Œä¸ºPHPMailerå’ŒSwiftMaileræä¾›äº†ä¸€ä¸ªåŸºç±»ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰MessagingInterfaceï¼Œå®ƒç”±TextMessageå’ŒHtmlMessageç±»å®ç°ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–PHPMailerå’ŒSwiftMailerï¼Œåœ¨è°ƒç”¨å‘é€æ–¹æ³•ä¹‹å‰ä¼ é€’TextMessageå’ŒHtmlMessageçš„å®ä¾‹ã€‚\nç»„åˆæ¨¡å¼ ç»„åˆæ¨¡å¼å°±æ˜¯å°†å¯¹è±¡çš„å±‚æ¬¡ç»“æ„ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ä¸€ä¸ªå…¬å…±æ¥å£æ¥å¤„ç†ã€‚å…¶ä¸­ï¼Œå¯¹è±¡ç»„æˆä¸‰ä¸ªç»“æ„ï¼Œå®¢æˆ·ç«¯å› ä¸ºåªæ¶ˆè€—å…¬å…±æ¥å£ï¼Œæ‰€ä»¥å¯¹åº•å±‚ç»“æ„çš„å˜åŒ–ä¸€æ— æ‰€çŸ¥ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç»„åˆæ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\ninterface Graphic { public function draw(); } class CompositeGraphic implements Graphic { private $graphics = array(); public function add($graphic) { $objId = spl_object_hash($graphic); $this-\u0026gt;graphics[$objId] = $graphic; } public function remove($graphic) { $objId = spl_object_hash($graphic); unset($this-\u0026gt;graphics[$objId]); } public function draw() { foreach ($this-\u0026gt;graphics as $graphic) { $graphic-\u0026gt;draw(); } } } class Circle implements Graphic { public function draw() { echo 'draw-circle'; } } class Square implements Graphic { public function draw() { echo 'draw-square'; } } class Triangle implements Graphic { public function draw() { echo 'draw-triangle'; } } $circle = new Circle(); $square = new Square(); $triangle = new Triangle(); $compositeObj1 = new CompositeGraphic(); $compositeObj1-\u0026gt;add($circle); $compositeObj1-\u0026gt;add($triangle); $compositeObj1-\u0026gt;draw(); $compositeObj2 = new CompositeGraphic(); $compositeObj2-\u0026gt;add($circle); $compositeObj2-\u0026gt;add($square); $compositeObj2-\u0026gt;add($triangle); $compositeObj2-\u0026gt;remove($circle); $compositeObj2-\u0026gt;draw(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªGraphicæ¥å£ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºäº†CompositeGraphicã€Circleã€Squareå’ŒTriangleï¼Œå®ƒä»¬éƒ½å®ç°äº†Graphicæ¥å£ã€‚é™¤äº†ä»…ä»…å®ç°äº†Graphicæ¥å£ä¸­çš„drawæ–¹æ³•å¤–ï¼ŒCompositeGraphicè¿˜å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºè·Ÿè¸ªæ·»åŠ åˆ°å®ƒçš„å›¾å½¢çš„å†…éƒ¨é›†åˆã€‚ç„¶åå®¢æˆ·ç«¯å°†è¿™äº›Graphicç±»å…¨éƒ¨å®ä¾‹åŒ–ï¼Œå°†å®ƒä»¬å…¨éƒ¨æ·»åŠ åˆ°CompositeGraphicä¸­ï¼Œç„¶åç”±CompositeGraphicè°ƒç”¨drawæ–¹æ³•ã€‚\nè£…é¥°å™¨æ¨¡å¼ è£…é¥°å™¨æ¨¡å¼å…è®¸å°†è¡Œä¸ºæ·»åŠ åˆ°å•ä¸ªå¯¹è±¡å®ä¾‹ä¸­ï¼Œè€Œä¸å½±å“åŒä¸€ç±»çš„å…¶ä»–å®ä¾‹çš„è¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªè£…é¥°å™¨ï¼Œå…¶ä¸­æ¯ä¸ªè£…é¥°å™¨éƒ½ä¼šå¢åŠ æ–°çš„åŠŸèƒ½ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªè£…é¥°å™¨æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface LoggerInterface { public function log($message); } class Logger implements LoggerInterface { public function log($message) { file_put_contents('app.log', $message, FILE_APPEND); } } abstract class LoggerDecorator implements LoggerInterface { protected $logger; public function __construct(Logger $logger) { $this-\u0026gt;logger = $logger; } abstract public function log($message); } class ErrorLoggerDecorator extends LoggerDecorator { public function log($message) { $this-\u0026gt;logger-\u0026gt;log('ERROR: ' . $message); } } class WarningLoggerDecorator extends LoggerDecorator { public function log($message) { $this-\u0026gt;logger-\u0026gt;log('WARNING: ' . $message); } } class NoticeLoggerDecorator extends LoggerDecorator { public function log($message) { $this-\u0026gt;logger-\u0026gt;log('NOTICE: ' . $message); } } $logger = new Logger(); $logger-\u0026gt;log('Resource not found.'); $logger = new Logger(); $logger = new ErrorLoggerDecorator($logger); $logger-\u0026gt;log('Invalid user role.'); $logger = new Logger(); $logger = new WarningLoggerDecorator($logger); $logger-\u0026gt;log('Missing address parameters.'); $logger = new Logger(); $logger = new NoticeLoggerDecorator($logger); $logger-\u0026gt;log('Incorrect type provided.'); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªLoggerInterfaceï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç®€å•çš„logæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬å®šä¹‰äº†Loggerå’ŒLoggerDecoratorï¼Œä¸¤è€…éƒ½å®ç°äº†LoggerInterfaceã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†Loggerå’ŒLoggerDecoratorï¼Œå®ƒä»¬éƒ½æ˜¯å®ç°LoggerInterfaceçš„ã€‚å…¶æ¬¡æ˜¯ErrorLoggerDecoratorã€WarningLoggerDecoratorå’ŒNoticeLoggerDecoratorï¼Œå®ƒä»¬å®ç°äº†LoggerDecoratorã€‚æœ€åï¼Œå®¢æˆ·ç«¯éƒ¨åˆ†ä¸‰æ¬¡å®ä¾‹åŒ–Loggerï¼Œä¼ é€’ç»™å®ƒä¸åŒçš„è£…é¥°å™¨ã€‚\né—¨é¢æ¨¡å¼ å½“æˆ‘ä»¬æƒ³é€šè¿‡ä¸€ä¸ªæ›´ç®€å•çš„æ¥å£æ¥ç®€åŒ–å¤§å‹ç³»ç»Ÿçš„å¤æ‚æ€§æ—¶ï¼Œå°±ä¼šç”¨åˆ°é—¨é¢æ¨¡å¼ã€‚å®ƒé€šè¿‡ä¸ºå¤§å¤šæ•°å¸¸è§ä»»åŠ¡æä¾›æ–¹ä¾¿çš„æ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªå®¢æˆ·ç«¯ä½¿ç”¨çš„å•ä¸€å°è£…ç±»æ¥å®ç°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\nclass Product { public function getQty() { // Implementation } } class QuickOrderFacade { private $product = null; private $orderQty = null; public function __construct($product, $orderQty) { $this-\u0026gt;product = $product; $this-\u0026gt;orderQty = $orderQty; } public function generateOrder() { if ($this-\u0026gt;qtyCheck()) { $this-\u0026gt;addToCart(); $this-\u0026gt;calculateShipping(); $this-\u0026gt;applyDiscount(); $this-\u0026gt;placeOrder(); } } private function addToCart() { // Implementation... } private function qtyCheck() { if ($this-\u0026gt;product-\u0026gt;getQty() \u0026gt; $this-\u0026gt;orderQty) { return true; } else { return true; } } private function calculateShipping() { // Implementation... } private function applyDiscount() { // Implementation... } private function placeOrder() { // Implementation... } } // Client $order = new QuickOrderFacade(new Product(), $qty); $order-\u0026gt;generateOrder(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªProductç±»ï¼Œå¹¶æä¾›ä¸€ä¸ªå•ä¸€çš„getQtyæ–¹æ³•ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªQuickOrderFacadeç±»ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ¥å—äº§å“å®ä¾‹å’Œæ•°é‡ï¼Œå¹¶è¿›ä¸€æ­¥æä¾›generateOrderæ–¹æ³•ï¼Œèšåˆæ‰€æœ‰çš„è®¢å•ç”ŸæˆåŠ¨ä½œã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–äº§å“ï¼Œå°†å…¶ä¼ é€’ç»™QuickOrderFacadeçš„å®ä¾‹ï¼Œå¯¹å…¶è°ƒç”¨generateOrderã€‚\näº«å…ƒæ¨¡å¼ äº«å…ƒæ¨¡å¼æ˜¯å…³äºæ€§èƒ½å’Œèµ„æºçš„å‡å°‘ï¼Œåœ¨ç›¸ä¼¼çš„å¯¹è±¡ä¹‹é—´å…±äº«å°½å¯èƒ½å¤šçš„æ•°æ®ã€‚è¿™æ„å‘³ç€åœ¨ä¸€ä¸ªå®ç°ä¸­ï¼Œä¸€ä¸ªç±»çš„ç›¸åŒå®ä¾‹è¢«å…±äº«ã€‚å½“é¢„è®¡è¦åˆ›å»ºå¤§é‡ç›¸åŒçš„ç±»å®ä¾‹æ—¶ï¼Œè¿™ç§æ¨¡å¼æ•ˆæœæœ€å¥½ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªäº«å…ƒæ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface Shape { public function draw(); } class Circle implements Shape { private $colour; private $radius; public function __construct($colour) { $this-\u0026gt;colour = $colour; } public function draw() { echo sprintf('Colour %s, radius %s.', $this-\u0026gt;colour, $this-\u0026gt;radius); } public function setRadius($radius) { $this-\u0026gt;radius = $radius; } } class ShapeFactory { private $circleMap; public function getCircle($colour) { if (!isset($this-\u0026gt;circleMap[$colour])) { $circle = new Circle($colour); $this-\u0026gt;circleMap[$colour] = $circle; } return $this-\u0026gt;circleMap[$colour]; } } // Client $shapeFactory = new ShapeFactory(); $circle = $shapeFactory-\u0026gt;getCircle('yellow'); $circle-\u0026gt;setRadius(10); $circle-\u0026gt;draw(); $shapeFactory = new ShapeFactory(); $circle = $shapeFactory-\u0026gt;getCircle('orange'); $circle-\u0026gt;setRadius(15); $circle-\u0026gt;draw(); $shapeFactory = new ShapeFactory(); $circle = $shapeFactory-\u0026gt;getCircle('yellow'); $circle-\u0026gt;setRadius(20); $circle-\u0026gt;draw(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªShapeæ¥å£ï¼Œæœ‰ä¸€ä¸ªå•ä¸€çš„ draw æ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†å®ç°Shapeæ¥å£çš„Circleç±»ï¼Œæ¥ç€æ˜¯ShapeFactoryç±»ã€‚åœ¨ShapeFactoryä¸­ï¼ŒgetCircleæ–¹æ³•æ ¹æ®é¢œè‰²é€‰é¡¹è¿”å›ä¸€ä¸ªæ–°Circleçš„å®ä¾‹ã€‚æœ€åï¼Œå®¢æˆ·ç«¯å®ä¾‹åŒ–å¤šä¸ªShapeFactoryå¯¹è±¡ï¼Œå‘getCircleæ–¹æ³•è°ƒç”¨ä¼ é€’ä¸åŒçš„é¢œè‰²ã€‚\nä»£ç†æ¨¡å¼ ä»£ç†æ¨¡å¼çš„åŠŸèƒ½æ˜¯ä½œä¸ºä¸€ä¸ªåŸå§‹å¯¹è±¡çš„å¹•åæ¥å£ã€‚å®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªç®€å•çš„è½¬å‘åŒ…è£…å™¨ï¼Œç”šè‡³å¯ä»¥å›´ç»•å®ƒæ‰€åŒ…è£…çš„å¯¹è±¡æä¾›é¢å¤–çš„åŠŸèƒ½ã€‚é¢å¤–é™„åŠ åŠŸèƒ½çš„ä¾‹å­å¯èƒ½æ˜¯æ‡’åŠ è½½æˆ–ç¼“å­˜ï¼Œè¿™å¯èƒ½ä¼šè¡¥å¿åŸå§‹å¯¹è±¡çš„èµ„æºå¯†é›†æ“ä½œã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä»£ç†æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface ImageInterface { public function draw(); } class Image implements ImageInterface { private $file; public function __construct($file) { $this-\u0026gt;file = $file; sleep(5); // Imagine resource intensive image load } public function draw() { echo 'image: ' . $this-\u0026gt;file; } } class ProxyImage implements ImageInterface { private $image = null; private $file; public function __construct($file) { $this-\u0026gt;file = $file; } public function draw() { if (is_null($this-\u0026gt;image)) { $this-\u0026gt;image = new Image($this-\u0026gt;file); } $this-\u0026gt;image-\u0026gt;draw(); } } // Client $image = new Image('image.png'); // 5 seconds $image-\u0026gt;draw(); $image = new ProxyImage('image.png'); // 0 seconds $image-\u0026gt;draw(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªImageInterfaceï¼Œæœ‰ä¸€ä¸ªå•ä¸€çš„drawæ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†Imageå’ŒProxyImageç±»ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½æ˜¯ImageInterfaceçš„æ‰©å±•ã€‚åœ¨Imageç±»çš„ __construct ä¸­ï¼Œæˆ‘ä»¬ç”¨sleepæ–¹æ³•è°ƒç”¨æ¨¡æ‹Ÿäº†èµ„æºç´§å¼ çš„æ“ä½œã€‚æœ€åï¼Œå®¢æˆ·ç«¯åŒæ—¶å®ä¾‹åŒ–Imageå’ŒProxyImageï¼Œæ˜¾ç¤ºå‡ºä¸¤è€…çš„æ‰§è¡Œæ—¶é—´å·®å¼‚ã€‚\næ›´å¤šæ–‡ç« å†…å®¹è¯·å‚è§\nhttps://github.com/AnyStudy/PHP-7-Real-World-Application-Development\nå¦‚æœå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©å¸Œæœ›æ‚¨èƒ½ç‚¹ä»¥ä¸‹ star\n","id":17,"section":"posts","summary":"\u003cp\u003eç»“æ„å‹å¤„ç†çš„æ˜¯ç±»å’Œå¯¹è±¡çš„ç»„æˆã€‚åˆ©ç”¨æ¥å£æˆ–æŠ½è±¡ç±»å’Œæ–¹æ³•ï¼Œå®ƒä»¬å®šä¹‰äº†ç»„æˆå¯¹è±¡çš„æ–¹æ³•ï¼Œè¿›è€Œè·å¾—æ–°çš„åŠŸèƒ½ã€‚\u003c/p\u003e","tags":["php"],"title":"ä½¿ç”¨ PHP 7 å®ç° GoF è®¾è®¡æ¨¡å¼ä¹‹ç»“æ„å‹","uri":"https://www.ganymedenil.com/2021/01/09/php7-gof-structural-patterns.html","year":"2021"},{"content":"æœ‰å¾ˆå¤šäº‹æƒ…å¯ä»¥ä½¿ä¸€ä¸ªä¼˜ç§€çš„è½¯ä»¶å¼€å‘äººå‘˜æˆä¸ºå¯èƒ½ã€‚è®¾è®¡æ¨¡å¼çš„çŸ¥è¯†å’Œä½¿ç”¨å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚è®¾è®¡æ¨¡å¼ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿä½¿ç”¨å„ç§è½¯ä»¶äº¤äº’çš„çŸ¥ååç§°è¿›è¡Œäº¤æµã€‚æ— è®ºæŸäººæ˜¯PHPã€Pythonã€C#ã€Rubyæˆ–ä»»ä½•å…¶ä»–è¯­è¨€çš„å¼€å‘è€…ï¼Œè®¾è®¡æ¨¡å¼éƒ½èƒ½ä¸ºç»å¸¸å‡ºç°çš„è½¯ä»¶é—®é¢˜æä¾›è¯­è¨€ä¸å¯çŸ¥çš„è§£å†³æ–¹æ¡ˆã€‚\nè®¾è®¡æ¨¡å¼çš„æ¦‚å¿µå‡ºç°åœ¨1994å¹´ï¼Œä½œä¸ºã€Šå¯é‡ç”¨çš„é¢å‘å¯¹è±¡çš„è½¯ä»¶è¦ç´ ã€‹ä¸€ä¹¦çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ä¹¦è¯¦ç»†ä»‹ç»äº†23ç§ä¸åŒçš„è®¾è®¡æ¨¡å¼ï¼Œç”±å››ä½ä½œè€…Erich Gammaã€Richard Helmã€Ralph Johnsonå’ŒJohn Vlissidesæ’°å†™ã€‚ä½œè€…ä»¬é€šå¸¸è¢«ç§°ä¸ºå››äººå¸®ï¼ˆGoFï¼‰ï¼Œæ‰€ä»‹ç»çš„è®¾è®¡æ¨¡å¼æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºGoFè®¾è®¡æ¨¡å¼ã€‚åœ¨äºŒåå¤šå¹´åçš„ä»Šå¤©ï¼Œå¦‚æœä¸å°†è®¾è®¡æ¨¡å¼ä½œä¸ºå®ç°çš„ä¸€éƒ¨åˆ†ï¼Œè®¾è®¡å‡ºå¯æ‰©å±•ã€å¯é‡ç”¨ã€å¯ç»´æŠ¤å’Œå¯é€‚åº”çš„è½¯ä»¶å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚\næœ‰ä¸‰ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« ä»‹ç»ã€‚\nåˆ›å»ºå‹ ç»“æ„å‹ è¡Œä¸ºå‹ åˆ›å»ºå‹ åˆ›å»ºå‹ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ä¸ºæˆ‘ä»¬åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…ç›´æ¥å®ä¾‹åŒ–å®ƒä»¬ã€‚å®ç°åˆ›å»ºå‹ä½¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå…·æœ‰ä¸€å®šçš„çµæ´»æ€§ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«å¯ä»¥å†³å®šåœ¨ç»™å®šæ—¶é—´å†…å®ä¾‹åŒ–å“ªäº›å¯¹è±¡ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬å½’ç±»ä¸ºåˆ›å»ºå‹çš„æ¨¡å¼åˆ—è¡¨ã€‚\næŠ½è±¡å·¥å‚æ¨¡å¼ ç”Ÿæˆå™¨æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼ åŸå‹æ¨¡å¼ å•ä¾‹æ¨¡å¼ å…³äºåˆ›å»ºæ¨¡å¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§https://en.wikipedia.org/wiki/Creational_patternã€‚\næŠ½è±¡å·¥å‚æ¨¡å¼ æ„å»ºå¯ç§»æ¤çš„åº”ç”¨ç¨‹åºéœ€è¦é«˜æ°´å¹³çš„ä¾èµ–æ€§å°è£…ã€‚æŠ½è±¡å·¥å‚é€šè¿‡æŠ½è±¡åŒ–ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡å®¶æ—çš„åˆ›å»ºæ¥å®ç°è¿™ä¸€ç‚¹ã€‚å®¢æˆ·ç«¯ä»æ¥æ²¡æœ‰ç›´æ¥åˆ›å»ºè¿™äº›å¹³å°å¯¹è±¡ï¼Œå·¥å‚ä¸ºä»–ä»¬åšäº†è¿™äº›å·¥ä½œï¼Œä½¿å¾—åœ¨ä¸æ”¹å˜ä½¿ç”¨å®ƒä»¬çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œç”šè‡³åœ¨è¿è¡Œæ—¶ä¹Ÿå¯ä»¥äº’æ¢å…·ä½“å®ç°ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªæŠ½è±¡å·¥å‚æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\ninterface Button { public function render(); } interface GUIFactory { public function createButton(); } class SubmitButton implements Button { public function render() { echo 'Render Submit Button'; } } class ResetButton implements Button { public function render() { echo 'Render Reset Button'; } } class SubmitFactory implements GUIFactory { public function createButton() { return new SubmitButton(); } } class ResetFactory implements GUIFactory { public function createButton() { return new ResetButton(); } } // Client $submitFactory = new SubmitFactory(); $button = $submitFactory-\u0026gt;createButton(); $button-\u0026gt;render(); $resetFactory = new ResetFactory(); $button = $resetFactory-\u0026gt;createButton(); $button-\u0026gt;render(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£Buttonï¼Œä¹‹åç”±æˆ‘ä»¬çš„SubmitButtonå’ŒResetButtonå…·ä½“ç±»å®ç°ã€‚GUIFactoryå’ŒResetFactoryå®ç°äº†GUIFactoryæ¥å£ï¼Œå®ƒæŒ‡å®šäº†createButtonæ–¹æ³•ã€‚ç„¶åå®¢æˆ·ç«¯åªéœ€å®ä¾‹åŒ–å·¥å‚å¹¶è°ƒç”¨createButtonï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªåˆé€‚çš„æŒ‰é’®å®ä¾‹ï¼Œæˆ‘ä»¬è°ƒç”¨æ¸²æŸ“æ–¹æ³•ã€‚\nç”Ÿæˆå™¨æ¨¡å¼ ç”Ÿæˆå™¨æ¨¡å¼å°†å¤æ‚å¯¹è±¡çš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒä¸€ä¸ªæ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚æœ‰äº›ç”Ÿæˆå™¨æ¨¡å¼æ˜¯åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­æ„å»ºä¸€ä¸ªäº§å“ï¼Œè€Œç”Ÿæˆå™¨æ¨¡å¼åˆ™æ˜¯åœ¨ director çš„æ§åˆ¶ä¸‹é€æ­¥å®Œæˆã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨æ¨¡å¼çš„å®ç°å®ä¾‹ã€‚\nclass Car { public function getWheels() { /* implementation... */ } public function setWheels($wheels) { /* implementation... */ } public function getColour($colour) { /* implementation... */ } public function setColour() { /* implementation... */ } } interface CarBuilderInterface { public function setColour($colour); public function setWheels($wheels); public function getResult(); } class CarBuilder implements CarBuilderInterface { private $car; public function __construct() { $this-\u0026gt;car = new Car(); } public function setColour($colour) { $this-\u0026gt;car-\u0026gt;setColour($colour); return $this; } public function setWheels($wheels) { $this-\u0026gt;car-\u0026gt;setWheels($wheels); return $this; } public function getResult() { return $this-\u0026gt;car; } } class CarBuildDirector { private $builder; public function __construct(CarBuilder $builder) { $this-\u0026gt;builder = $builder; } public function build() { $this-\u0026gt;builder-\u0026gt;setColour('Red'); $this-\u0026gt;builder-\u0026gt;setWheels(4); return $this; } public function getCar() { return $this-\u0026gt;builder-\u0026gt;getResult(); } } // Client $carBuilder = new CarBuilder(); $carBuildDirector = new CarBuildDirector($carBuilder); $car = $carBuildDirector-\u0026gt;build()-\u0026gt;getCar(); æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå…·ä½“çš„Carç±»ï¼Œå…¶ä¸­æœ‰å‡ ä¸ªæ–¹æ³•å®šä¹‰äº†æ±½è½¦çš„ä¸€äº›åŸºæœ¬ç‰¹æ€§ã€‚ç„¶åæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªCarBuilderInterfaceï¼Œå®ƒå°†æ§åˆ¶å…¶ä¸­çš„ä¸€äº›ç‰¹æ€§ï¼Œå¹¶å¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼ˆæ±½è½¦ï¼‰ã€‚ç„¶åï¼Œå…·ä½“çš„CarBuilderç±»å®ç°äº†CarBuilderInterfaceï¼Œæ¥ç€æ˜¯å…·ä½“çš„CarBuildDirectorç±»ï¼Œå®ƒå®šä¹‰äº†buildå’ŒgetCaræ–¹æ³•ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ç®€å•åœ°å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„CarBuilderå®ä¾‹ï¼Œå°†å…¶ä½œä¸ºæ„é€ å‚æ•°ä¼ é€’ç»™ä¸€ä¸ªæ–°çš„CarBuildDirectorå®ä¾‹ã€‚æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨CarBuildDirectorçš„buildå’ŒgetCaræ–¹æ³•æ¥è·å–å®é™…çš„æ±½è½¦Carå®ä¾‹ã€‚\nå·¥å‚æ–¹æ³•æ¨¡å¼ å·¥å‚æ–¹æ³•æ¨¡å¼å¤„ç†äº†åˆ›å»ºå¯¹è±¡çš„é—®é¢˜ï¼Œè€Œä¸å¿…æŒ‡å®šå°†è¦åˆ›å»ºçš„å¯¹è±¡çš„ç¡®åˆ‡ç±»ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼çš„å®ç°ä¾‹å­ã€‚\ninterface Product { public function getType(); } interface ProductFactory { public function makeProduct(); } class SimpleProduct implements Product { public function getType() { return 'SimpleProduct'; } } class SimpleProductFactory implements ProductFactory { public function makeProduct() { return new SimpleProduct(); } } /* Client */ $factory = new SimpleProductFactory(); $product = $factory-\u0026gt;makeProduct(); echo $product-\u0026gt;getType(); //outputs: SimpleProduct æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªProductFactoryå’ŒProductæ¥å£ã€‚SimpleProductFactoryå®ç°äº†ProductFactoryï¼Œå¹¶é€šè¿‡å…¶makeProductæ–¹æ³•è¿”å›æ–°çš„äº§å“å®ä¾‹ã€‚SimpleProductç±»å®ç°Productï¼Œå¹¶è¿”å›äº§å“ç±»å‹ã€‚æœ€åï¼Œå®¢æˆ·ç«¯åˆ›å»ºSimpleProductFactoryçš„å®ä¾‹ï¼Œå¯¹å…¶è°ƒç”¨makeProductæ–¹æ³•ã€‚makeProductè¿”å›Productçš„å®ä¾‹ï¼Œå…¶getTypeæ–¹æ³•è¿”å›SimpleProductå­—ç¬¦ä¸²ã€‚\nåŸå‹æ¨¡å¼ åŸå‹æ¨¡å¼é€šè¿‡ä½¿ç”¨å…‹éš†æ¥å¤åˆ¶å…¶ä»–å¯¹è±¡ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸æ˜¯ä½¿ç”¨newå…³é”®å­—æ¥å®ä¾‹åŒ–æ–°çš„å¯¹è±¡ã€‚PHPæä¾›äº†ä¸€ä¸ªcloneå…³é”®å­—ï¼Œå®ƒå¯ä»¥å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæµ…å±‚å¤åˆ¶ï¼Œä»è€Œæä¾›äº†éå¸¸ç›´æ¥çš„åŸå‹æ¨¡å¼å®ç°ã€‚æµ…å±‚å¤åˆ¶ä¸å¤åˆ¶å¼•ç”¨ï¼Œåªå¤åˆ¶æ–°å¯¹è±¡çš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥åœ¨æˆ‘ä»¬çš„ç±»ä¸Šåˆ©ç”¨ç¥å¥‡çš„__cloneæ–¹æ³•ï¼Œä»¥å®ç°æ›´å¼ºå¤§çš„å…‹éš†è¡Œä¸ºã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªåŸå‹æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\nclass User { public $name; public $email; } class Employee extends User { public function __construct() { $this-\u0026gt;name = 'Johhn Doe'; $this-\u0026gt;email = 'john.doe@fake.mail'; } public function info() { return sprintf('%s, %s', $this-\u0026gt;name, $this-\u0026gt;email); } public function __clone() { /* additional changes for (after)clone behavior? */ } } $employee = new Employee(); echo $employee-\u0026gt;info(); $director = clone $employee; $director-\u0026gt;name = 'Jane Doe'; $director-\u0026gt;email = 'jane.doe@fake.mail'; echo $director-\u0026gt;info(); //outputs: Jane Doe, jane.doe@fake.mail æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„Userç±»ã€‚ç„¶åï¼ŒEmployeeæ‰©å±•äº†Userï¼ŒåŒæ—¶åœ¨å…¶æ„é€ å‡½æ•°ä¸­è®¾ç½®äº†åç§°å’Œç”µå­é‚®ä»¶ã€‚ç„¶åå®¢æˆ·ç«¯é€šè¿‡newå…³é”®å­—å®ä¾‹åŒ–Employeeï¼Œå¹¶å°†å…¶å…‹éš†åˆ°director å˜é‡ä¸­ã€‚ç°åœ¨$directorå˜é‡æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹ä¸æ˜¯é€šè¿‡newå…³é”®å­—åˆ¶ä½œçš„ï¼Œè€Œæ˜¯é€šè¿‡å…‹éš†ï¼Œä½¿ç”¨cloneå…³é”®å­—åˆ¶ä½œçš„ã€‚æ”¹å˜$directorä¸Šçš„åå­—å’Œé‚®ç®±ï¼Œä¸ä¼šå½±å“$employeeã€‚\nå•ä¾‹æ¨¡å¼ å•ä¾‹æ¨¡å¼çš„ç›®çš„æ˜¯å°†ç±»çš„å®ä¾‹åŒ–é™åˆ¶åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šã€‚å®ƒæ˜¯é€šè¿‡åœ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ¥å®ç°çš„ï¼Œå¦‚æœä¸€ä¸ªç±»çš„å®ä¾‹ä¸å­˜åœ¨ï¼Œè¯¥æ–¹æ³•å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å®ä¾‹å·²ç»å­˜åœ¨ï¼Œè¯¥æ–¹æ³•åªæ˜¯è¿”å›ä¸€ä¸ªç°æœ‰å¯¹è±¡çš„å¼•ç”¨ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼å®ç°çš„ä¾‹å­ã€‚\nclass Logger { private static $instance; public static function getInstance() { if (!isset(self::$instance)) { self::$instance = new self; } return self::$instance; } public function logNotice($msg) { return 'logNotice: ' . $msg; } public function logWarning($msg) { return 'logWarning: ' . $msg; } public function logError($msg) { return 'logError: ' . $msg; } } // Client echo Logger::getInstance()-\u0026gt;logNotice('test-notice'); echo Logger::getInstance()-\u0026gt;logWarning('test-warning'); echo Logger::getInstance()-\u0026gt;logError('test-error'); // Outputs: // logNotice: test-notice // logWarning: test-warning // logError: test-error æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå…·æœ‰é™æ€$instanceæˆå‘˜çš„Loggerç±»ï¼Œä»¥åŠæ€»æ˜¯è¿”å›è¯¥ç±»çš„å•ä¸ªå®ä¾‹çš„getInstanceæ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ äº†ä¸€äº›ç¤ºä¾‹æ–¹æ³•æ¥æ¼”ç¤ºå®¢æˆ·ç«¯åœ¨å•ä¸ªå®ä¾‹ä¸Šæ‰§è¡Œå„ç§æ–¹æ³•ã€‚\næ›´å¤šæ–‡ç« å†…å®¹è¯·å‚è§\nhttps://github.com/AnyStudy/PHP-7-Real-World-Application-Development\nå¦‚æœå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©å¸Œæœ›æ‚¨èƒ½ç‚¹ä»¥ä¸‹ star\n","id":18,"section":"posts","summary":"\u003cp\u003eæœ‰å¾ˆå¤šäº‹æƒ…å¯ä»¥ä½¿ä¸€ä¸ªä¼˜ç§€çš„è½¯ä»¶å¼€å‘äººå‘˜æˆä¸ºå¯èƒ½ã€‚è®¾è®¡æ¨¡å¼çš„çŸ¥è¯†å’Œä½¿ç”¨å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚è®¾è®¡æ¨¡å¼ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿä½¿ç”¨å„ç§è½¯ä»¶äº¤äº’çš„çŸ¥ååç§°è¿›è¡Œäº¤æµã€‚æ— è®ºæŸäººæ˜¯PHPã€Pythonã€C#ã€Rubyæˆ–ä»»ä½•å…¶ä»–è¯­è¨€çš„å¼€å‘è€…ï¼Œè®¾è®¡æ¨¡å¼éƒ½èƒ½ä¸ºç»å¸¸å‡ºç°çš„è½¯ä»¶é—®é¢˜æä¾›è¯­è¨€ä¸å¯çŸ¥çš„è§£å†³æ–¹æ¡ˆã€‚\u003c/p\u003e","tags":["php"],"title":"ä½¿ç”¨ PHP 7 å®ç° GoF è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºå‹","uri":"https://www.ganymedenil.com/2021/01/09/php7-gof-creational-patterns.html","year":"2021"},{"content":"PHP 7 åœ¨å¼€æºç¤¾åŒºæ€èµ·äº†ä¸€åœºé£æš´ï¼Œå®ƒæ‰“ç ´äº†ä¹‹å‰ç‰ˆæœ¬çš„é€Ÿåº¦è®°å½•ï¼Œä¹Ÿé‡æ–°å¼•èµ·äº†äººä»¬å¯¹å®ƒçš„å…³æ³¨ã€‚ä»æœ€æ ¹æœ¬çš„æ„ä¹‰ä¸Šè®²ï¼Œæ ¸å¿ƒå·¥ç¨‹å›¢é˜Ÿå·²ç»å¯¹å®ƒè¿›è¡Œäº†é‡å¤§é‡å†™ï¼Œä½†ä»èƒ½ä¿æŒé«˜åº¦çš„å‘åå…¼å®¹æ€§ã€‚PHPæ˜¯ä¸€é—¨å¼€å‘Webåº”ç”¨çš„å¥½è¯­è¨€ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç±»æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼Œä¹Ÿç”¨äºé€šç”¨ç¼–ç¨‹ã€‚PHP 7æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæä¾›äº†ä¸»è¦çš„å‘åå…¼å®¹æ€§çªç ´ï¼Œå¹¶ä¸“æ³¨äºæé«˜æ€§èƒ½å’Œé€Ÿåº¦ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡å¤šçº¿ç¨‹ç½‘ç»œæœåŠ¡å™¨ï¼Œç”¨ä½æˆæœ¬çš„ç¡¬ä»¶å’ŒæœåŠ¡å™¨ç»´æŒç½‘ç«™çš„é«˜æµé‡ã€‚\nå‰è¨€ PHP 7:çœŸå®ä¸–ç•Œçš„åº”ç”¨å¼€å‘ï¼ˆä¸­æ–‡ç¿»è¯‘ï¼‰ ä½œè€…ï¼šDoug Bierer, Altaf Hussain, Branko Ajzele åŸä¹¦åç§°ï¼šã€ŠPHP 7: Real World Application Developmentã€‹ è¯‘è€…ï¼šé‡‘å¼˜æ‰¬ï¼ˆganymedenil@gmail.comï¼‰ Gitbookåœ°å€ï¼šPHP 7:çœŸå®ä¸–ç•Œçš„åº”ç”¨å¼€å‘ githubï¼šhttps://github.com/AnyStudy/PHP-7-Real-World-Application-Development æ¨èä½¿ç”¨ Gitbook ä»¥è·å–æœ€ä½³é˜…è¯»ä½“éªŒã€‚\nè¯‘åº ä½œä¸ºä¸€ä¸ªä½¿ç”¨äº†phpå¤šå¹´çš„ç¨‹åºå‘˜ï¼Œå…¬å¸é¡¹ç›®ä¹Ÿç»å†è¿‡5åˆ°7çš„å‡çº§ï¼ŒæœŸé—´é¡¹ç›®ä¹Ÿå‡ºç°è¿‡ä¸€äº›å› ä¸ºphp7åŠŸèƒ½ä¸php5 ä¸ä¸€è‡´å¯¼è‡´çš„bugã€‚æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€æœ¬èƒ½è¯¦ç»†ä»‹ç» php 7 æ–°ç‰¹æ€§ä¸åŠŸèƒ½çš„ä¹¦ï¼Œåæ¥æ‰¾åˆ°äº†è¿™æœ¬ï¼Œè™½ç„¶è¿™æœ¬ä¹¦å‘å¸ƒåˆ°ç°åœ¨å·²ç»å·®ä¸å¤š4å¹´äº†ï¼Œä½†æ˜¯å¯¹äºæƒ³è¯¦ç»†äº†è§£php7çš„æœ‹å‹æ¥è¯´é‡Œé¢æ‰€è®²è¿°çš„å†…å®¹æˆ‘è®¤ä¸ºè¿˜æ˜¯å¾ˆæœ‰ä»·å€¼çš„ã€‚å¹¶ä¸”æœ¬ä¹¦ä½œè€…çš„ä¸€äº›è§‚ç‚¹æˆ‘ä¹Ÿéå¸¸è®¤åŒï¼Œå°±æƒ³ç€å¸Œæœ›èƒ½è®©æ›´å¤šäººçœ‹åˆ°ï¼Œè¶ç€åä¸€å‡æœŸæœ‰æ—¶é—´æƒ³è¯•ç€ç¿»è¯‘ä¸€ä¸‹æœ¬ä¹¦ã€‚æœ¬ä¹¦å®é™…æ˜¯ä¸‰æœ¬ç‹¬ç«‹çš„ä¹¦ï¼Œä½†å¦‚æœå•ç‹¬çœ‹è¿™ä¸‰æœ¬éƒ½æ„Ÿè§‰ç¼ºç‚¹ä»€ä¹ˆï¼ŒæŠŠè¿™ä¸‰æœ¬ä¹¦åˆå¹¶ä¸ºä¸€æœ¬æˆ‘æ„Ÿè§‰å°±å¾ˆç›¸è¾…ç›¸æˆã€‚æœ¬ä¹¦çš„æ¨¡å—2ä¹Ÿå°±æ˜¯ã€Šé«˜æ€§èƒ½ php 7ã€‹éƒ¨åˆ†å·²ç»ç”±å•æ¯…è€å¸ˆç¿»è¯‘ï¼Œæœ¬äººå°±ä¸å†å¯¹æœ¬æ¨¡å—è¿›è¡Œç¿»è¯‘ã€‚å¦‚æœæˆ‘çš„ç¿»è¯‘èƒ½å¸®åŠ©åˆ°å¤§å®¶ï¼Œä¹Ÿæ˜¯æˆ‘æœ€å¤§åˆ°è£å¹¸ã€‚\nå‰è¨€ PHP 7 åœ¨å¼€æºç¤¾åŒºæ€èµ·äº†ä¸€åœºé£æš´ï¼Œå®ƒæ‰“ç ´äº†ä¹‹å‰ç‰ˆæœ¬çš„é€Ÿåº¦è®°å½•ï¼Œä¹Ÿé‡æ–°å¼•èµ·äº†äººä»¬å¯¹å®ƒçš„å…³æ³¨ã€‚ä»æœ€æ ¹æœ¬çš„æ„ä¹‰ä¸Šè®²ï¼Œæ ¸å¿ƒå·¥ç¨‹å›¢é˜Ÿå·²ç»å¯¹å®ƒè¿›è¡Œäº†é‡å¤§é‡å†™ï¼Œä½†ä»èƒ½ä¿æŒé«˜åº¦çš„å‘åå…¼å®¹æ€§ã€‚PHPæ˜¯ä¸€é—¨å¼€å‘Webåº”ç”¨çš„å¥½è¯­è¨€ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç±»æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼Œä¹Ÿç”¨äºé€šç”¨ç¼–ç¨‹ã€‚PHP 7æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæä¾›äº†ä¸»è¦çš„å‘åå…¼å®¹æ€§çªç ´ï¼Œå¹¶ä¸“æ³¨äºæé«˜æ€§èƒ½å’Œé€Ÿåº¦ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡å¤šçº¿ç¨‹ç½‘ç»œæœåŠ¡å™¨ï¼Œç”¨ä½æˆæœ¬çš„ç¡¬ä»¶å’ŒæœåŠ¡å™¨ç»´æŒç½‘ç«™çš„é«˜æµé‡ã€‚\nè¿™æ¡å­¦ä¹ ä¹‹è·¯éƒ½æ¶µç›–äº†ä»€ä¹ˆ æ¨¡å—1ï¼ŒPHP 7 ç¼–ç¨‹æŒ‡å—ï¼Œæœ¬æ¨¡å—ä»¥ PHP 7 ä¸ºä¸­å¿ƒï¼Œå±•ç¤ºäº†ä¸­é«˜çº§çš„PHPæŠ€æœ¯ã€‚æ¯ä¸ªç¤ºä¾‹éƒ½æ˜¯ä¸ºäº†è§£å†³åƒæ‚¨è¿™æ ·çš„ PHP å¼€å‘äººå‘˜æ¯å¤©é¢ä¸´çš„å®é™…é—®é¢˜ã€‚å…¶ä¸­è¿˜ä»‹ç»äº†åªæœ‰åœ¨ PHP 7 ä¸­æ‰æœ‰çš„ï¼Œæ–°çš„ç¼–å†™ PHP ä»£ç çš„æ–¹æ³•ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜è®¨è®ºäº†å‘åå…¼å®¹æ€§ä¸­æ–­çš„é—®é¢˜ï¼Œå¹¶ä¸ºæ‚¨æä¾›äº†å¤§é‡æŒ‡å¯¼ï¼Œå‘Šè¯‰æ‚¨ä½•æ—¶ä½•åœ°éœ€è¦ä¿®æ”¹ PHP 5 ä»£ç ï¼Œä»¥ä¾¿åœ¨ PHP 7 ä¸‹è¿è¡Œæ—¶äº§ç”Ÿæ­£ç¡®çš„ç»“æœã€‚æœ¬æ¨¡å—è¿˜åŒ…å«äº†æœ€æ–°çš„ PHP 7.x ç‰¹æ€§ã€‚åœ¨æœ¬æ¨¡å—ç»“æŸæ—¶ï¼Œæ‚¨å°†å…·å¤‡ä¸ºæ‚¨çš„ç½‘ç«™å’Œä¼ä¸šæä¾›é«˜æ•ˆåº”ç”¨ç¨‹åºæ‰€éœ€çš„å·¥å…·å’ŒæŠ€èƒ½ã€‚\næ¨¡å—2ï¼Œå­¦ä¹  PHP 7 é«˜æ€§èƒ½ï¼Œè¯¥æ¨¡å—æ˜¯ PHP 7 çš„å¿«é€Ÿå…¥é—¨ï¼Œè¿™å°†æé«˜æ‚¨çš„ç”Ÿäº§åŠ›å’Œç¼–ç æŠ€èƒ½ã€‚æ‰€æ¶‰åŠçš„æ¦‚å¿µå°†ä½¿æ‚¨ä½œä¸ºä¸€ä¸ªPHPç¨‹åºå‘˜ï¼Œæé«˜ä½ çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½æ ‡å‡†ã€‚æˆ‘ä»¬å°†å‘æ‚¨ä»‹ç» PHP 7 ä¸­çš„æ–°ç‰¹æ€§ï¼Œç„¶åä»‹ç» PHP 7 ä¸­é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„æ¦‚å¿µã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é˜æ˜å¦‚ä½•æé«˜ PHP 7 åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œæ•°æ®åº“æ€§èƒ½ã€‚é€šè¿‡è¿™ä¸ªæ¨¡å—ï¼Œæ‚¨å°†èƒ½å¤Ÿä½¿ç”¨æ¨¡å—ä¸­è®¨è®ºçš„å„ç§åŸºå‡†æµ‹è¯•å·¥å…·æ¥æé«˜ç¨‹åºçš„æ€§èƒ½ã€‚æœ€åï¼Œæ¨¡å—è®¨è®ºäº† PHP ç¼–ç¨‹ä¸­çš„ä¸€äº›æœ€ä½³å®è·µï¼Œä»¥å¸®åŠ©ä½ æé«˜ä»£ç çš„è´¨é‡ã€‚\næ¨¡å—3ï¼Œç”¨ PHP 7 æ›´æ–°æ—§ç‰ˆåº”ç”¨ç¨‹åºï¼Œæ­¤æ¨¡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•é€šè¿‡æå–å’Œæ›¿æ¢æ—§ç‰ˆç»„ä»¶ï¼Œä»å®è·µå’ŒæŠ€æœ¯ä¸Šè€Œä¸æ˜¯åœ¨ä½¿ç”¨æ¡†æ¶å’Œåº“ä¹‹ç±»çš„å·¥å…·æ–¹é¢å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œå‡çº§ã€‚ æˆ‘ä»¬å°†é‡‡ç”¨å¾ªåºæ¸è¿›çš„æ–¹æ³•ï¼Œæœ‰æ¡ä¸ç´Šåœ°ç¼“æ…¢å‰è¿›ï¼Œä»æ ¹æœ¬ä¸Šæ”¹å–„æ‚¨çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºä¾èµ–æ³¨å…¥æ˜¯å¦‚ä½•æ›¿æ¢æ–°çš„å’Œå…¨å±€ä¾èµ–çš„ã€‚æˆ‘ä»¬è¿˜å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å°†è¡¨ç¤ºé€»è¾‘æ”¹ä¸ºè§†å›¾æ–‡ä»¶ï¼Œå°†åŠ¨ä½œé€»è¾‘æ”¹ä¸ºæ§åˆ¶å™¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå§‹ç»ˆä¿æŒè¿è¡ŒçŠ¶æ€ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªå®Œæˆçš„æ­¥éª¤éƒ½ä¼šè®©æ‚¨çš„ä»£ç åº“ä»¥æ›´é«˜çš„è´¨é‡å®Œå…¨æ­£å¸¸è¿è¡Œã€‚å½“æˆ‘ä»¬å®Œæˆåï¼Œæ‚¨å°†èƒ½å¤Ÿåƒé£ä¸€æ ·è½»è€Œæ˜“ä¸¾åœ°é€šè¿‡æ‚¨çš„ä»£ç ã€‚æ‚¨çš„ä»£ç å°†æ˜¯è‡ªåŠ¨åŠ è½½ã€ä¾èµ–æ³¨å…¥ã€å•å…ƒæµ‹è¯•ã€å±‚çº§åˆ†ç¦»å’Œå‰ç«¯æ§åˆ¶ã€‚æˆ‘ä»¬å°†æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„å¤§å¤šæ•°éå¸¸æœ‰é™çš„ä»£ç éƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªæ¨¡å—çš„ã€‚æˆ‘ä»¬å°†ä»¥ç¨‹åºå‘˜çš„èº«ä»½æé«˜è‡ªå·±ï¼Œå¹¶æé«˜ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„è´¨é‡ã€‚\nä½ åœ¨è¿™æ¡å­¦ä¹ ä¹‹è·¯ä¸Šéœ€è¦ä»€ä¹ˆ æ¨¡å—1 è¦æˆåŠŸåœ°å®ç°æœ¬æ¨¡å—ä¸­ä»‹ç»çš„ç¤ºä¾‹ï¼Œä½ åªéœ€è¦ä¸€å°è®¡ç®—æœºï¼Œ100MB çš„é¢å¤–ç£ç›˜ç©ºé—´ï¼Œå’Œä¸€ä¸ªæ–‡æœ¬æˆ–ä»£ç ç¼–è¾‘å™¨ï¼ˆä¸æ˜¯æ–‡å­—å¤„ç†å™¨ï¼ï¼‰ã€‚ç¬¬ä¸€ç« å°†ä»‹ç»å¦‚ä½•è®¾ç½® PHP 7 å¼€å‘ç¯å¢ƒã€‚æ‹¥æœ‰ä¸€ä¸ª Web æœåŠ¡å™¨æ˜¯å¯é€‰çš„ï¼Œå› ä¸º PHP 7 åŒ…å«ä¸€ä¸ªå¼€å‘ Web æœåŠ¡å™¨ã€‚ä¸éœ€ Internet è¿æ¥ï¼Œä½†ä¸‹è½½ä»£ç ï¼ˆå¦‚ PSR-7 æ¥å£é›†ï¼‰å’ŒæŸ¥çœ‹ PHP 7.x æ–‡æ¡£å¯èƒ½ä¼šéœ€è¦ã€‚\næ¨¡å—2 ä»»ä½•ç¬¦åˆè¿è¡Œä»¥ä¸‹è½¯ä»¶æœ€æ–°ç‰ˆæœ¬çš„ç¡¬ä»¶è§„æ ¼ï¼Œåº”è¯¥éƒ½è¶³ä»¥é€šè¿‡æœ¬æ¨¡å—ã€‚\næ“ä½œç³»ç»Ÿï¼š Debian æˆ– Ubuntu è½¯ä»¶ï¼š NGINXã€PHP 7ã€ MySQLã€ PerconaDBã€ Redisã€ Memcachedã€ Xdebugã€Apache JMeterã€ ApacheBenchã€Siege å’Œ Git æ¨¡å—3 æ‚¨éœ€è¦å‚è€ƒæœ¬æ¨¡å—çš„â€œç¬¬äºŒç« ï¼Œå…ˆå†³æ¡ä»¶â€œæ¥äº†è§£æœ¬æ¨¡å—æ‰€éœ€çš„åŸºæœ¬ç¡¬ä»¶å’Œè½¯ä»¶è¦æ±‚ã€‚æœ¬ç« å°†è¯¦ç»†æè¿°è¿™äº›è¦æ±‚ã€‚\nè¿™æ¡è·¯æ˜¯ä¸ºè°è€Œè®¾ å¦‚æœæ‚¨æ˜¯ä¸€ä¸ªæœ‰æŠ±è´Ÿçš„Webå¼€å‘äººå‘˜ï¼Œç§»åŠ¨åº”ç”¨å¼€å‘äººå‘˜æˆ–åç«¯ç¨‹åºå‘˜ï¼Œå¹¶ä¸”å…·æœ‰PHPç¼–ç¨‹çš„åŸºæœ¬ç»éªŒå¹¶å¸Œæœ›å¼€å‘å¯¹æ€§èƒ½è‡³å…³é‡è¦çš„åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆè¿™ä¸ªè¯¾ç¨‹æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚å®ƒå°†ä½¿æ‚¨çš„PHPç¼–ç¨‹æŠ€èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ã€‚\næ”¯æŒ è¯¾ç¨‹çš„ä»£ç åŒ…ä¹Ÿæ‰˜ç®¡åœ¨githubä¸Š https://GitHub.com/packtpublishing/php-7-be-pro-at-applications-development ã€‚\næ³•å¾‹ç”³æ˜ è¯‘è€…çº¯ç²¹å‡ºäºå­¦ä¹ ç›®çš„ä¸ä¸ªäººå…´è¶£ç¿»è¯‘æœ¬ä¹¦ï¼Œä¸è¿½æ±‚ä»»ä½•ç»æµåˆ©ç›Šã€‚\nè¯‘è€…ä¿ç•™å¯¹æ­¤ç‰ˆæœ¬è¯‘æ–‡çš„ç½²åæƒï¼Œå…¶ä»–æƒåˆ©ä»¥åŸä½œè€…å’Œå‡ºç‰ˆç¤¾çš„ä¸»å¼ ä¸ºå‡†ã€‚\næœ¬è¯‘æ–‡åªä¾›å­¦ä¹ ç ”ç©¶å‚è€ƒä¹‹ç”¨ï¼Œä¸å¾—å…¬å¼€ä¼ æ’­å‘è¡Œæˆ–ç”¨äºå•†ä¸šç”¨é€”ã€‚æœ‰èƒ½åŠ›é˜…è¯»è‹±æ–‡ä¹¦ç±è€…è¯·è´­ä¹°æ­£ç‰ˆæ”¯æŒã€‚\nLICENSE CC-BY 4.0\n","id":19,"section":"posts","summary":"\u003cp\u003ePHP 7 åœ¨å¼€æºç¤¾åŒºæ€èµ·äº†ä¸€åœºé£æš´ï¼Œå®ƒæ‰“ç ´äº†ä¹‹å‰ç‰ˆæœ¬çš„é€Ÿåº¦è®°å½•ï¼Œä¹Ÿé‡æ–°å¼•èµ·äº†äººä»¬å¯¹å®ƒçš„å…³æ³¨ã€‚ä»æœ€æ ¹æœ¬çš„æ„ä¹‰ä¸Šè®²ï¼Œæ ¸å¿ƒå·¥ç¨‹å›¢é˜Ÿå·²ç»å¯¹å®ƒè¿›è¡Œäº†é‡å¤§é‡å†™ï¼Œä½†ä»èƒ½ä¿æŒé«˜åº¦çš„å‘åå…¼å®¹æ€§ã€‚PHPæ˜¯ä¸€é—¨å¼€å‘Webåº”ç”¨çš„å¥½è¯­è¨€ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç±»æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼Œä¹Ÿç”¨äºé€šç”¨ç¼–ç¨‹ã€‚PHP 7æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæä¾›äº†ä¸»è¦çš„å‘åå…¼å®¹æ€§çªç ´ï¼Œå¹¶ä¸“æ³¨äºæé«˜æ€§èƒ½å’Œé€Ÿåº¦ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡å¤šçº¿ç¨‹ç½‘ç»œæœåŠ¡å™¨ï¼Œç”¨ä½æˆæœ¬çš„ç¡¬ä»¶å’ŒæœåŠ¡å™¨ç»´æŒç½‘ç«™çš„é«˜æµé‡ã€‚\u003c/p\u003e","tags":["php"],"title":"PHP 7:çœŸå®ä¸–ç•Œçš„åº”ç”¨å¼€å‘ï¼ˆä¸­æ–‡ç¿»è¯‘ï¼‰","uri":"https://www.ganymedenil.com/2020/10/04/php-7-real-world-application-development.html","year":"2020"},{"content":"å‰é¢åˆ†äº«äº† â€œè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨â€ è®©æˆ‘ä»¬äº†è§£äº†å¦‚ä½•è¿æ¥ TCP æœåŠ¡å™¨ã€‚æœ¬æ–‡ï¼Œå°†å±•ç¤ºæ›´é«˜çº§åˆ«çš„ HTTP æœåŠ¡å™¨çš„é€šä¿¡ã€‚\ngoåŸºç¡€åº“ä¹‹è¿æ¥åˆ° HTTP æœåŠ¡å™¨ Golang ç‰ˆæœ¬ 1.14.2\nå‰è¨€ å‰é¢åˆ†äº«äº† â€œè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨â€ è®©æˆ‘ä»¬äº†è§£äº†å¦‚ä½•è¿æ¥ TCP æœåŠ¡å™¨ã€‚æœ¬æ–‡ï¼Œå°†å±•ç¤ºæ›´é«˜çº§åˆ«çš„ HTTP æœåŠ¡å™¨çš„é€šä¿¡ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;net/http\u0026quot; \u0026quot;net/url\u0026quot; \u0026quot;strings\u0026quot; ) type StringServer string func (s StringServer) ServeHTTP(rw http.ResponseWriter, req *http.Request) { req.ParseForm() fmt.Printf(\u0026quot;Received form data: %v\\n\u0026quot;, req.Form) rw.Write([]byte(string(s))) } func createServer(addr string) http.Server { return http.Server{ Addr: addr, Handler: StringServer(\u0026quot;Hello world\u0026quot;), } } const addr = \u0026quot;localhost:9090\u0026quot; func main() { s := createServer(addr) go s.ListenAndServe() useRequest() simplePost() } func simplePost() { res, err := http.Post(\u0026quot;http://localhost:9090\u0026quot;, \u0026quot;application/x-www-form-urlencoded\u0026quot;, strings.NewReader(\u0026quot;name=test\u0026amp;surname=abc\u0026quot;)) if err != nil { panic(err) } data, err := ioutil.ReadAll(res.Body) if err != nil { panic(err) } res.Body.Close() fmt.Println(\u0026quot;Response from server:\u0026quot; + string(data)) } func useRequest() { hc := http.Client{} form := url.Values{} form.Add(\u0026quot;name\u0026quot;, \u0026quot;test\u0026quot;) form.Add(\u0026quot;surname\u0026quot;, \u0026quot;abc\u0026quot;) req, err := http.NewRequest(\u0026quot;POST\u0026quot;, \u0026quot;http://localhost:9090\u0026quot;, strings.NewReader(form.Encode())) req.Header.Add(\u0026quot;Content-Type\u0026quot;, \u0026quot;application/x-www-form-urlencoded\u0026quot;) res, err := hc.Do(req) if err != nil { panic(err) } data, err := ioutil.ReadAll(res.Body) if err != nil { panic(err) } res.Body.Close() fmt.Println(\u0026quot;Response from server:\u0026quot; + string(data)) } $ go run main.go Received form data: map[name:[test] surname:[abc]] Response from server:Hello world Received form data: map[name:[test] surname:[abc]] Response from server:Hello world åŸç† è¿æ¥åˆ° HTTP æœåŠ¡å™¨å¯ä»¥åœ¨ net/http åŒ…çš„å¸®åŠ©ä¸‹å®Œæˆã€‚ å½“ç„¶ï¼Œè¿˜æœ‰æ›´å¤šçš„æ–¹æ³•å¯ä»¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯ä¸Šé¢çš„ä»£ç å±•ç¤ºäº†ä¸¤ç§æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚ ç¬¬ä¸€ä¸ªé€‰é¡¹å®ç°äº† simplePost å‡½æ•°ï¼Œå¹¶æ¼”ç¤ºäº†é»˜è®¤å®¢æˆ·ç«¯çš„ä½¿ç”¨ã€‚ è¿™é‡Œé€‰æ‹© POST æ–¹æ³•æ˜¯å› ä¸ºå®ƒæ¯” GET æ›´å¤æ‚ã€‚ Post æ–¹æ³•ä»¥ Reader çš„å½¢å¼æ¥å— URLã€å†…å®¹ç±»å‹å’Œä¸»ä½“ã€‚ è°ƒç”¨ Post å‡½æ•°ä¼šç«‹å³è¯·æ±‚æœåŠ¡å™¨å¹¶è¿”å›ç»“æœã€‚\nUserequest å‡½æ•°å®ç°äº†ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä½¿ç”¨äº†å¯å®šåˆ¶çš„ API å’Œå®ƒè‡ªå·±çš„ Client å®ä¾‹ã€‚ å®ç°åˆ©ç”¨ NewRequest å‡½æ•°æ ¹æ®è¿™äº›ç»™å®šçš„å‚æ•°åˆ›å»ºè¯·æ±‚: æ–¹æ³•ã€ URL å’Œè¯·æ±‚ä¸»ä½“ã€‚ å†…å®¹ç±»å‹å¿…é¡»å•ç‹¬è®¾ç½®ä¸º Header å±æ€§ã€‚ è¯·æ±‚ä½¿ç”¨åœ¨ Client ä¸Šåˆ›å»ºçš„ Do æ–¹æ³•æ‰§è¡Œã€‚\n","id":20,"section":"posts","summary":"\u003cp\u003eå‰é¢åˆ†äº«äº† â€œè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨â€ è®©æˆ‘ä»¬äº†è§£äº†å¦‚ä½•è¿æ¥ TCP æœåŠ¡å™¨ã€‚æœ¬æ–‡ï¼Œå°†å±•ç¤ºæ›´é«˜çº§åˆ«çš„ HTTP æœåŠ¡å™¨çš„é€šä¿¡ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¿æ¥åˆ° HTTP æœåŠ¡å™¨","uri":"https://www.ganymedenil.com/2020/05/10/go-standard-library-by-connect-to-http-server.html","year":"2020"},{"content":"golang åŸºç¡€åº“ä¹‹é€šè¿‡ IP åœ°å€è§£æåŸŸåï¼Œæœ¬æ–‡å°†å‘ä½ ä»‹ç»å¦‚ä½•å°† IP åœ°å€è½¬æ¢ä¸ºä¸»æœºåœ°å€ï¼Œåä¹‹äº¦ç„¶ã€‚\ngoåŸºç¡€åº“ä¹‹é€šè¿‡ IP åœ°å€è§£æåŸŸå Golang ç‰ˆæœ¬ 1.14.2\nå‰è¨€ golang åŸºç¡€åº“ä¹‹é€šè¿‡ IP åœ°å€è§£æåŸŸåï¼Œæœ¬æ–‡å°†å‘ä½ ä»‹ç»å¦‚ä½•å°† IP åœ°å€è½¬æ¢ä¸ºä¸»æœºåœ°å€ï¼Œåä¹‹äº¦ç„¶ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;net\u0026quot; ) func main() { // è§£æ IP addrs, err := net.LookupAddr(\u0026quot;127.0.0.1\u0026quot;) if err != nil { panic(err) } for _, addr := range addrs { fmt.Println(addr) } // è§£æåœ°å€ ips, err := net.LookupIP(\u0026quot;localhost\u0026quot;) if err != nil { panic(err) } for _, ip := range ips { fmt.Println(ip.String()) } } $ go run main.go localhost 127.0.0.1 ::1 åŸç† ä» IP åœ°å€è§£æåŸŸåå¯ä»¥é€šè¿‡ net åŒ…ä¸­çš„ LookupAddr å‡½æ•°æ¥å®Œæˆã€‚ è¦ä»åŸŸåä¸­æŸ¥æ‰¾ IP åœ°å€ï¼Œåº”ç”¨ LookupIP å‡½æ•°ã€‚\n","id":21,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹é€šè¿‡ IP åœ°å€è§£æåŸŸåï¼Œæœ¬æ–‡å°†å‘ä½ ä»‹ç»å¦‚ä½•å°† IP åœ°å€è½¬æ¢ä¸ºä¸»æœºåœ°å€ï¼Œåä¹‹äº¦ç„¶ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹é€šè¿‡ IP åœ°å€è§£æåŸŸå","uri":"https://www.ganymedenil.com/2020/05/10/go-standard-library-by-domain-name-resolution-by-ip-address.html","year":"2020"},{"content":"åŸºäºTCPçš„åè®®æ˜¯ç½‘ç»œé€šä¿¡ä¸­æœ€é‡è¦çš„åè®®ã€‚ æé†’ä¸€ä¸‹ï¼ŒHTTPï¼ŒFTPï¼ŒSMTPå’Œå…¶ä»–åè®®ä¹Ÿæ˜¯å®ƒçš„ä¸€éƒ¨åˆ†ã€‚ æœ¬æ–‡å¯è®©ä½ æ·±å…¥äº†è§£å¦‚ä½•è¿æ¥åˆ°TCPæœåŠ¡å™¨ã€‚\ngoåŸºç¡€åº“ä¹‹è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ Golang ç‰ˆæœ¬ 1.14.2\nå‰è¨€ åŸºäºTCPçš„åè®®æ˜¯ç½‘ç»œé€šä¿¡ä¸­æœ€é‡è¦çš„åè®®ã€‚ æé†’ä¸€ä¸‹ï¼ŒHTTPï¼ŒFTPï¼ŒSMTPå’Œå…¶ä»–åè®®ä¹Ÿæ˜¯å®ƒçš„ä¸€éƒ¨åˆ†ã€‚ æœ¬æ–‡å¯è®©ä½ æ·±å…¥äº†è§£å¦‚ä½•è¿æ¥åˆ°TCPæœåŠ¡å™¨ã€‚\nå®ç° package main import ( \u0026quot;bufio\u0026quot; \u0026quot;context\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;net\u0026quot; \u0026quot;net/http\u0026quot; \u0026quot;time\u0026quot; ) type StringServer string func (s StringServer) ServeHTTP(rw http.ResponseWriter, req *http.Request) { rw.Write([]byte(string(s))) } func createServer(addr string) http.Server { return http.Server{ Addr: addr, Handler: StringServer(\u0026quot;HELLO GOPHER!\\n\u0026quot;), } } const addr = \u0026quot;localhost:9090\u0026quot; func main() { s := createServer(addr) go s.ListenAndServe() // ä¸æ™®é€šTCPå»ºç«‹è¿æ¥ conn, err := net.Dial(\u0026quot;tcp\u0026quot;, addr) if err != nil { panic(err) } defer conn.Close() _, err = io.WriteString(conn, \u0026quot;GET / HTTP/1.1\\r\\nHost:localhost:7070\\r\\n\\r\\n\u0026quot;) if err != nil { panic(err) } scanner := bufio.NewScanner(conn) conn.SetReadDeadline(time.Now().Add(time.Second)) for scanner.Scan() { fmt.Println(scanner.Text()) } ctx, _ := context.WithTimeout(context.Background(), 5*time.Second) s.Shutdown(ctx) } $ go run main.go HTTP/1.1 200 OK Date: Sat, 09 May 2020 21:22:56 GMT Content-Length: 14 Content-Type: text/plain; charset=utf-8 HELLO GOPHER! åŸç† Net åŒ…åŒ…å« Dial å‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦ä¼ å…¥ç½‘ç»œç±»å‹å’Œåœ°å€ã€‚ åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œç½‘ç»œæ˜¯ tcpï¼Œåœ°å€æ˜¯ localhost:9090ã€‚\næˆåŠŸæ‰§è¡Œ Dial å‡½æ•°åï¼Œè¿”å› Conn ç±»å‹ï¼Œå®ƒä½œä¸ºæ‰“å¼€å¥—æ¥å­—çš„å¼•ç”¨ã€‚ Conn æ¥å£è¿˜å®šä¹‰äº† Read å’Œ Write å‡½æ•°ï¼Œå› æ­¤å¯ä»¥å°†å®ƒä»¬ç”¨ä½œ Writer å’Œ Reader å‡½æ•°ï¼Œç”¨äºä»å¥—æ¥å­—è¿›è¡Œå†™å…¥å’Œè¯»å–ã€‚ æœ€åï¼Œç¤ºä¾‹ä»£ç ä½¿ç”¨ Scanner è·å–å“åº”ã€‚ æ³¨æ„Scanner åœ¨å½“å‰ä»£ç ä¸­ç”Ÿæ•ˆæ˜¯å› ä¸ºæœ‰æ¢è¡Œã€‚ å¦åˆ™ï¼Œåº”è¯¥ä½¿ç”¨æ›´é€šç”¨çš„ Read æ–¹æ³•ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¯»å–æˆªæ­¢æ—¥æœŸæ˜¯é€šè¿‡ SetReadDeadline æ–¹æ³•è®¾ç½®çš„ã€‚ é‡è¦çš„æ˜¯ï¼Œæœ€åæœŸé™ä¸æ˜¯ä¸€ä¸ªæŒç»­æ—¶é—´ï¼Œè€Œæ˜¯ä¸€ä¸ª Timeã€‚ è¿™æ„å‘³ç€æœ€åæœŸé™è¢«è®¾å®šä¸ºæœªæ¥çš„ä¸€ä¸ªæ—¶é—´ç‚¹ã€‚ å¦‚æœä½ æ­£é€šè¿‡ä»å¾ªç¯ä¸­è¯»å–å¥—æ¥å­—ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦å°†è¯»å–è¶…æ—¶è®¾ç½®ä¸º10ç§’ï¼Œé‚£ä¹ˆæ¯æ¬¡è¿­ä»£éƒ½åº”è¯¥åŒ…å«å¦‚ä¸‹ä»£ç  conn.SetReadDeadline(time.Now().Add(10*time.Second))ã€‚\n","id":22,"section":"posts","summary":"\u003cp\u003eåŸºäºTCPçš„åè®®æ˜¯ç½‘ç»œé€šä¿¡ä¸­æœ€é‡è¦çš„åè®®ã€‚ æé†’ä¸€ä¸‹ï¼ŒHTTPï¼ŒFTPï¼ŒSMTPå’Œå…¶ä»–åè®®ä¹Ÿæ˜¯å®ƒçš„ä¸€éƒ¨åˆ†ã€‚ æœ¬æ–‡å¯è®©ä½ æ·±å…¥äº†è§£å¦‚ä½•è¿æ¥åˆ°TCPæœåŠ¡å™¨ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨","uri":"https://www.ganymedenil.com/2020/05/10/go-standard-library-by-connect-to-a-remote-server.html","year":"2020"},{"content":"golang åŸºç¡€åº“ä¹‹è§£ææœ¬åœ° IP åœ°å€ï¼Œä»‹ç»äº†å¦‚ä½•ä»å¯ç”¨çš„æœ¬åœ°ç«¯å£è·å–å¯¹åº”çš„IPåœ°å€\ngoåŸºç¡€åº“ä¹‹è§£ææœ¬åœ° IP åœ°å€ Golang ç‰ˆæœ¬ 1.14.2\nå‰è¨€ golang åŸºç¡€åº“ä¹‹è§£ææœ¬åœ° IP åœ°å€ï¼Œä»‹ç»äº†å¦‚ä½•ä»å¯ç”¨çš„æœ¬åœ°ç«¯å£è·å–å¯¹åº”çš„IPåœ°å€\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;net\u0026quot; ) func main() { // è·å–æ‰€æœ‰ç½‘ç»œæ¥å£ interfaces, err := net.Interfaces() if err != nil { panic(err) } for _, interf := range interfaces { // è§£æåœ°å€ // éå†æ¥å£ addrs, err := interf.Addrs() if err != nil { panic(err) } fmt.Println(interf.Name) for _, add := range addrs { if ip, ok := add.(*net.IPNet); ok { fmt.Printf(\u0026quot;\\t%v\\n\u0026quot;, ip) } } } } $ go run main.go æœ¬åœ°è¿æ¥* 4 fe80::4d29:b94e:922f:e339/64 192.168.1.57/16 WLAN 10.154.11.12/24 åŸç† net åŒ…åŒ…å« Interfaces å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ç½‘ç»œæ¥å£åˆ—ä¸º Interface ç»“æ„çš„ä¸€ä¸ªåˆ‡ç‰‡ã€‚è€Œ Interface ç»“æ„å…·æœ‰ Addrs æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ—å‡ºå¯ç”¨çš„ç½‘ç»œåœ°å€ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå°±å¯ä»¥æŒ‰ç…§æ¥å£åˆ—å‡ºå¯¹åº”çš„åœ°å€ã€‚\nå¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ net åŒ…çš„ interfaceaddr å‡½æ•°ï¼Œå®ƒæä¾›äº†å®ç° Addr æ¥å£çš„ç»“æ„åˆ‡ç‰‡ã€‚ è¿™ä¸ºä½ æä¾›äº†è·å–æ‰€éœ€ä¿¡æ¯çš„æ–¹æ³•ã€‚\n","id":23,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹è§£ææœ¬åœ° IP åœ°å€ï¼Œä»‹ç»äº†å¦‚ä½•ä»å¯ç”¨çš„æœ¬åœ°ç«¯å£è·å–å¯¹åº”çš„IPåœ°å€\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è§£ææœ¬åœ° IP åœ°å€","uri":"https://www.ganymedenil.com/2020/05/10/go-standard-library-by-resolve-local-ip-address.html","year":"2020"},{"content":"è½¯ä»¶ä¸ä»…ä»…æ˜¯ä»£ç ã€‚ å¦‚æœä½ ä»”ç»†æƒ³æƒ³ï¼Œä»£ç å¾ˆå°‘æ˜¯æˆ‘ä»¬è¿™ä¸ªèŒä¸šçš„æœ€ç»ˆç›®æ ‡ã€‚ ä»£ç åªæ˜¯è§£å†³ä¸šåŠ¡é—®é¢˜çš„åª’ä»‹ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è°ˆä¸€ç§ä¸åŒçš„è¯­è¨€å‘¢ï¼Ÿ é¢†åŸŸé©±åŠ¨è®¾è®¡å¼ºè°ƒç¡®ä¿ä¼ä¸šå’Œè½¯ä»¶ä½¿ç”¨åŒä¸€ç§è¯­è¨€ã€‚ ä¸€æ—¦æ‰“ç ´è¿™ä¸ªéšœç¢ï¼Œå°±ä¸éœ€è¦ç¿»è¯‘æˆ–ç¹ççš„åŒæ­¥ï¼Œä¿¡æ¯ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ æ¯ä¸ªäººéƒ½æœ‰åŠ©äºå‘ç°ä¸šåŠ¡é¢†åŸŸï¼Œè€Œä¸ä»…ä»…æ˜¯ç¨‹åºå‘˜ã€‚ ç”±æ­¤äº§ç”Ÿçš„è½¯ä»¶æ˜¯å…±åŒè¯­è¨€çš„å”¯ä¸€çœŸç†ã€‚\nä¸ºä»€ä¹ˆé¢†åŸŸé©±åŠ¨è®¾è®¡å¾ˆé‡è¦ è½¯ä»¶ä¸ä»…ä»…æ˜¯ä»£ç ã€‚ å¦‚æœä½ ä»”ç»†æƒ³æƒ³ï¼Œä»£ç å¾ˆå°‘æ˜¯æˆ‘ä»¬è¿™ä¸ªèŒä¸šçš„æœ€ç»ˆç›®æ ‡ã€‚ ä»£ç åªæ˜¯è§£å†³ä¸šåŠ¡é—®é¢˜çš„åª’ä»‹ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è°ˆä¸€ç§ä¸åŒçš„è¯­è¨€å‘¢ï¼Ÿ é¢†åŸŸé©±åŠ¨è®¾è®¡å¼ºè°ƒç¡®ä¿ä¼ä¸šå’Œè½¯ä»¶ä½¿ç”¨åŒä¸€ç§è¯­è¨€ã€‚ ä¸€æ—¦æ‰“ç ´è¿™ä¸ªéšœç¢ï¼Œå°±ä¸éœ€è¦ç¿»è¯‘æˆ–ç¹ççš„åŒæ­¥ï¼Œä¿¡æ¯ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ æ¯ä¸ªäººéƒ½æœ‰åŠ©äºå‘ç°ä¸šåŠ¡é¢†åŸŸï¼Œè€Œä¸ä»…ä»…æ˜¯ç¨‹åºå‘˜ã€‚ ç”±æ­¤äº§ç”Ÿçš„è½¯ä»¶æ˜¯å…±åŒè¯­è¨€çš„å”¯ä¸€çœŸç†ã€‚\né¢†åŸŸé©±åŠ¨è®¾è®¡å®ƒè¿˜ä¸ºæˆ˜ç•¥å’Œæˆ˜æœ¯è®¾è®¡æä¾›äº†ä¸€ä¸ªæ¡†æ¶ - æˆ˜ç•¥æ€§åœ°ç¡®å®šäº†åŸºäºä¸šåŠ¡ä»·å€¼å¼€å‘çš„æœ€é‡è¦é¢†åŸŸï¼Œä»¥åŠæ„å»ºä¸€ä¸ªç”±ç»è¿‡å®æˆ˜è€ƒéªŒçš„æ„ä»¶å’Œæ¨¡å¼ç»„æˆçš„å·¥ä½œé¢†åŸŸæ¨¡å‹çš„æˆ˜æœ¯ã€‚\né¢†åŸŸé©±åŠ¨è®¾è®¡çš„ä¸‰å¤§æ”¯æŸ± Ubiquitous Languageï¼ˆæ— å¤„ä¸åœ¨çš„è¯­è¨€ï¼‰ é¢†åŸŸä¸“å®¶å’Œè½¯ä»¶å¼€å‘äººå‘˜å…±åŒä¸ºæ­£åœ¨å¼€å‘çš„ä¸šåŠ¡é¢†åŸŸæ„å»ºé€šç”¨è¯­è¨€ã€‚ å¼€å‘è½¯ä»¶æ˜¯ä¸€é¡¹å•†ä¸šæŠ•èµ„ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€é¡¹æˆæœ¬ã€‚ æ„å»ºæ— å¤„ä¸åœ¨çš„è¯­è¨€ï¼ˆUbiquitous Languageï¼‰å¯ä»¥åœ¨å›¢é˜Ÿæˆå‘˜ä¸­ä¼ æ’­æ·±å±‚çš„é¢†åŸŸæ´å¯ŸåŠ›ã€‚\nStrategic Designï¼ˆæˆ˜ç•¥è®¾è®¡ï¼‰ é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æˆ˜ç•¥ä¸ä»…ä»…æ˜¯æŠ€æœ¯æ–¹é¢ï¼Œè€Œæ˜¯ä¸šåŠ¡æ–¹å‘èƒŒåçš„æˆ˜ç•¥ã€‚ å®ƒæœ‰åŠ©äºå®šä¹‰å†…éƒ¨å…³ç³»å’Œæ—©æœŸé¢„è­¦åé¦ˆç³»ç»Ÿã€‚ åœ¨æŠ€æœ¯æ–¹é¢ï¼Œæˆ˜ç•¥è®¾è®¡é€šè¿‡æä¾›å¦‚ä½•å®ç°é¢å‘æœåŠ¡çš„ä½“ç³»ç»“æ„æœåŠ¡çš„åŠ¨æœºæ¥ä¿æŠ¤æ¯ä¸€é¡¹ä¸šåŠ¡æœåŠ¡ã€‚\nTactical Designï¼ˆæˆ˜æœ¯è®¾è®¡ï¼‰ é¢†åŸŸé©±åŠ¨è®¾è®¡æä¾›äº†è¿­ä»£è½¯ä»¶äº¤ä»˜çš„å·¥å…·å’Œæ„å»ºæ¨¡å—ã€‚ æˆ˜æœ¯è®¾è®¡å·¥å…·ç”Ÿæˆçš„è½¯ä»¶ä¸ä»…æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸”æ˜¯å¯æµ‹è¯•çš„ï¼Œæ›´ä¸å®¹æ˜“å‡ºé”™ã€‚\næ— å¤„ä¸åœ¨çš„è¯­è¨€ï¼ˆUbiquitousÂ Languageï¼‰ å¦‚æœæˆ‘ä»¬åˆ»æ„å»æ¢ç´¢å’Œæ€»ç»“æ— å¤„ä¸åœ¨çš„è¯­è¨€ï¼ˆUbiquitousÂ Languageï¼‰ï¼Œå¾€å¾€ä¼šæœ‰ä»¥ä¸‹å‡ ä¸ªç›¸åŒç‚¹ï¼š\nè¯†åˆ«å…³é”®ä¸šåŠ¡æµç¨‹ã€å®ƒä»¬çš„è¾“å…¥å’Œè¾“å‡º åˆ›å»ºæœ¯è¯­å’Œå®šä¹‰çš„è¯æ±‡è¡¨ ä½¿ç”¨æŸç§æ–‡æ¡£æ¥è·å–é‡è¦çš„è½¯ä»¶æ¦‚å¿µ ä¸å›¢é˜Ÿçš„å…¶ä»–æˆå‘˜(å¼€å‘äººå‘˜å’Œé¢†åŸŸä¸“å®¶)å…±äº«å’Œæ‰©å±•æ‰€æ”¶é›†çš„çŸ¥è¯† äº‹ä»¶é£æš´ï¼ˆEvent Stormingï¼‰ äº‹ä»¶é£æš´æ˜¯ä¸€ç§ç”¨äºå¿«é€Ÿæ¢ç´¢å¤æ‚ä¸šåŠ¡é¢†åŸŸçš„ç ”è®¨ä¼šæ ¼å¼:\nå®ƒå¾ˆå¼ºå¤§: å®ƒè®©æˆ‘å’Œè®¸å¤šä»ä¸šè€…èƒ½å¤Ÿåœ¨æ•°å°æ—¶è€Œä¸æ˜¯æ•°å‘¨å†…æå‡ºå®Œæ•´ä¸šåŠ¡æµç¨‹çš„ç»¼åˆæ¨¡å‹ã€‚ å®ƒå¾ˆæœ‰å¸å¼•åŠ›ï¼šæ•´ä¸ªæƒ³æ³•æ˜¯æŠŠæœ‰é—®é¢˜çš„äººå’ŒçŸ¥é“ç­”æ¡ˆçš„äººèšé›†åœ¨åŒä¸€ä¸ªæˆ¿é—´é‡Œï¼Œä¸€èµ·å»ºç«‹ä¸€ä¸ªæ¨¡å‹ã€‚ å®ƒå¾ˆé«˜æ•ˆï¼šæœ€ç»ˆçš„æ¨¡å‹ä¸é¢†åŸŸé©±åŠ¨è®¾è®¡å®ç°é£æ ¼å®Œç¾ä¸€è‡´ï¼ˆç‰¹åˆ«é€‚åˆäº‹ä»¶æº¯æºæ³•ï¼ˆEventÂ Sourcing approachï¼‰ï¼‰ï¼Œå¹¶å…è®¸å¿«é€Ÿç¡®å®šä¸Šä¸‹æ–‡å’Œèšåˆè¾¹ç•Œã€‚ å®ƒå¾ˆç®€å•: è¿™ä¸ªç¬¦å·éå¸¸ç®€å•ã€‚ æ²¡æœ‰å¤æ‚çš„ UML å¯èƒ½ä¼šåˆ‡æ–­å‚ä¸è€…ä¸è®¨è®ºçš„æ ¸å¿ƒçš„è”ç³»ã€‚ å®ƒå¾ˆæœ‰è¶£ï¼šæˆ‘æ€»æ˜¯å¾ˆæ„‰å¿«åœ°é¢†å¯¼ç ”è®¨ä¼šï¼Œäººä»¬å……æ»¡æ´»åŠ›ï¼Œå¹¶æä¾›æ¯”ä»–ä»¬é¢„æœŸçš„æ›´å¤šã€‚ å‡ºç°äº†æ­£ç¡®çš„é—®é¢˜ï¼Œæ°”æ°›ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚ è€ƒè™‘ä½¿ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ é¢†åŸŸé©±åŠ¨è®¾è®¡å¹¶ä¸æ˜¯ä¸‡èƒ½çš„; å°±åƒè½¯ä»¶ä¸­çš„æ‰€æœ‰ä¸œè¥¿ä¸€æ ·ï¼Œå®ƒå–å†³äºä¸Šä¸‹æ–‡ã€‚ ä½œä¸ºä¸€ä¸ªç»éªŒæ³•åˆ™ï¼Œåªä½¿ç”¨å®ƒæ¥ç®€åŒ–æ‚¨çš„åŸŸï¼Œä½†ç»ä¸è¦å¢åŠ æ›´å¤šçš„å¤æ‚æ€§ã€‚\nå¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ˜¯ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„ï¼Œè€Œä½ çš„ç”¨ä¾‹ä¸»è¦æ˜¯æ“çºµæ•°æ®åº“ä¸­çš„è¡Œå’Œæ‰§è¡Œ CRUD æ“ä½œãƒ¼ãƒ¼å³åˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤ãƒ¼ãƒ¼é‚£ä¹ˆä½ å°±ä¸éœ€è¦é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‚ ç›¸åï¼Œä½ çš„å…¬å¸å”¯ä¸€éœ€è¦çš„æ˜¯åœ¨ä½ çš„æ•°æ®åº“å‰é¢æœ‰ä¸€å¼ èŠ±å“¨çš„è„¸ï¼ˆå®Œå–„çš„ORMï¼‰ã€‚\nå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå°‘äº30ä¸ªç”¨ä¾‹ï¼Œé‚£ä¹ˆä½¿ç”¨ Symfony æˆ– Laravel è¿™æ ·çš„æ¡†æ¶æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘å¯èƒ½ä¼šæ›´ç®€å•ã€‚\nç„¶è€Œï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºæœ‰è¶…è¿‡30ä¸ªç”¨ä¾‹ï¼Œé‚£ä¹ˆæ‚¨çš„ç³»ç»Ÿå¯èƒ½æ­£æœç€å¯æ€•çš„å¤§æ³¥çƒçš„æ–¹å‘ç§»åŠ¨ã€‚ å¦‚æœä½ ç¡®ä¿¡ä½ çš„ç³»ç»Ÿå°†ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡æ¥å¯¹æŠ—è¿™ç§å¤æ‚æ€§ã€‚\nå¦‚æœæ‚¨çŸ¥é“æ‚¨çš„åº”ç”¨ç¨‹åºå°†ä¼šå¢é•¿å¹¶ä¸”å¯èƒ½ç»å¸¸æ›´æ”¹ï¼Œé‚£ä¹ˆé¢†åŸŸé©±åŠ¨è®¾è®¡åº”ç”¨ç¨‹åºè‚¯å®šä¼šå¸®åŠ©æ‚¨ç®¡ç†å¤æ‚æ€§å¹¶éšç€æ—¶é—´çš„æ¨ç§»é‡æ„æ‚¨çš„æ¨¡å‹ã€‚\nå¦‚æœæ‚¨ä¸äº†è§£æ‚¨æ­£åœ¨å¤„ç†çš„åŸŸï¼Œè€Œä¸”ä»¥å‰æ²¡æœ‰äººæå‡ºè¿‡è§£å†³æ–¹æ¡ˆï¼Œè¿™å¯èƒ½æ„å‘³ç€å®ƒå·²ç»è¶³å¤Ÿå¤æ‚ï¼Œæ‚¨å¯ä»¥å¼€å§‹åº”ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä¸é¢†åŸŸä¸“å®¶å¯†åˆ‡åˆä½œï¼Œä»¥è·å¾—æ­£ç¡®çš„æ¨¡å‹ã€‚\næ£˜æ‰‹çš„éƒ¨åˆ† åº”ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡å¹¶ä¸å®¹æ˜“ã€‚ éœ€è¦æ—¶é—´å’Œç²¾åŠ›æ¥è§£å†³ä¸šåŠ¡é¢†åŸŸï¼Œæœ¯è¯­ï¼Œç ”ç©¶å’Œä¸åŸŸä¸“å®¶çš„åä½œï¼Œè€Œä¸æ˜¯ç¼–å†™è¡Œè¯ã€‚ æ‚¨éœ€è¦æ‹¥æœ‰é¢†åŸŸä¸“å®¶çš„æ‰¿è¯ºæ‰èƒ½å‚ä¸è¯¥è¿‡ç¨‹ã€‚ è¿™å°†éœ€è¦å¼€æ”¾å’Œå¥åº·çš„æŒç»­å¯¹è¯ï¼Œä»¥å°†ä»–ä»¬çš„å£è¯­å»ºæ¨¡ä¸ºè½¯ä»¶ã€‚ æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»åŠªåŠ›é¿å…åœ¨æŠ€æœ¯ä¸Šæ€è€ƒï¼Œé¦–å…ˆè®¤çœŸè€ƒè™‘å¯¹è±¡çš„è¡Œä¸ºå’Œæ™®é€‚è¯­è¨€ã€‚\næˆ˜ç•¥æ¦‚è¿° ä¸ºäº†å¯¹é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æˆ˜ç•¥æ–¹é¢æä¾›ä¸€ä¸ªæ€»ä½“æ¦‚è¿°ï¼Œ è€ƒè™‘ä¸¤ä¸ªä¸åŒçš„ç©ºé—´: é—®é¢˜é¢†åŸŸï¼ˆproblem spaceï¼‰å’Œè§£å†³æ–¹æ¡ˆé¢†åŸŸï¼ˆsolution spaceï¼‰ã€‚\nåœ¨é—®é¢˜é¢†åŸŸä¸­ï¼Œé¢†åŸŸé©±åŠ¨è®¾è®¡ä½¿ç”¨åŸŸå’Œå­åŸŸæ¥åˆ†ç»„å’Œç»„ç»‡å…¬å¸æƒ³è¦è§£å†³çš„é—®é¢˜ã€‚ å°±åœ¨çº¿æ—…è¡Œç¤¾ï¼ˆOTAï¼‰è€Œè¨€ï¼Œé—®é¢˜åœ¨äºå¤„ç†æœºç¥¨å’Œé¢„è®¢é…’åº—ç­‰äº‹å®œã€‚ å¯ä»¥å°†æ­¤ç±»åŸŸç»„ç»‡åˆ°ä¸åŒçš„å­åŸŸä¸­ï¼Œä¾‹å¦‚å®šä»·ï¼Œåº“å­˜ï¼Œç”¨æˆ·ç®¡ç†ç­‰ã€‚\nåœ¨è§£å†³æ–¹æ¡ˆé¢†åŸŸï¼Œé¢†åŸŸé©±åŠ¨è®¾è®¡æä¾›äº†ä¸¤ç§æ¨¡å¼ï¼šæœ‰ç•Œä¸Šä¸‹æ–‡å’Œä¸Šä¸‹æ–‡æ˜ å°„ã€‚ç›®æ ‡æ˜¯é€šè¿‡å®šä¹‰å…¶äº¤äº’å’Œè¿™äº›äº¤äº’çš„è¯¦ç»†ä¿¡æ¯æ¥å®šä¹‰å¦‚ä½•ä¸ºæ‰€æœ‰å·²è¯†åˆ«çš„å­åŸŸæä¾›å®ç°ã€‚ç»§ç»­OTAç¤ºä¾‹ï¼Œæ¯ä¸ªå­åŸŸå°†é€šè¿‡æœ‰ç•Œä¸Šä¸‹æ–‡å®ç°æ¥è§£å†³ - ä¾‹å¦‚ï¼Œè€ƒè™‘ç”±å›¢é˜Ÿä¸ºå®šä»·ç®¡ç†å­åŸŸå¼€å‘çš„è‡ªå®šä¹‰Webåº”ç”¨ç¨‹åºï¼Œä»¥åŠç”¨æˆ·ç®¡ç†å­åŸŸçš„ç°æˆè§£å†³æ–¹æ¡ˆã€‚ä¸Šä¸‹æ–‡æ˜ å°„å°†æ˜¾ç¤ºæ¯ä¸ªæœ‰ç•Œä¸Šä¸‹æ–‡å¦‚ä½•ä¸å…¶ä½™ä¸Šä¸‹æ–‡ç›¸å…³è”ã€‚åœ¨ä¸Šä¸‹æ–‡æ˜ å°„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæœ‰ç•Œä¸Šä¸‹æ–‡æ‰€å…·æœ‰çš„å…³ç³»ç±»å‹(ä¾‹å¦‚: å®¢æˆ·-ä¾›åº”å•†ï¼Œåˆä½œä¼™ä¼´)ã€‚ ç†æƒ³çš„æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªæœ‰ç•Œä¸Šä¸‹æ–‡å®ç°æ¯ä¸ªå­åŸŸï¼Œï¼Œä½†è¿™å¹¶ä¸æ€»æ˜¯å¯è¡Œçš„ã€‚ ä»å®ç°çš„è§’åº¦æ¥è¯´ï¼Œå½“ä½ éµå¾ªé¢†åŸŸé©±åŠ¨è®¾è®¡æ—¶ï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ°åˆ†å¸ƒå¼ä½“ç³»ç»“æ„ã€‚ æ­£å¦‚æ‚¨å¯èƒ½å·²ç»çŸ¥é“çš„ï¼Œåˆ†å¸ƒå¼ä½“ç³»ç»“æ„æ¯”å•å—ä½“ç³»ç»“æ„æ›´å¤æ‚ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•æ˜¯æœ‰è¶£çš„ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹å’Œå¤æ‚çš„å…¬å¸ï¼Ÿ è¿™çœŸçš„å€¼å¾—å—ï¼Ÿ æ˜¯çš„ã€‚\näº‹å®è¯æ˜ï¼Œåˆ†å¸ƒå¼ä½“ç³»ç»“æ„å¯ä»¥æé«˜å…¬å¸çš„æ•´ä½“ç”Ÿäº§åŠ›ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ä¸ºæ‚¨çš„äº§å“å®šä¹‰å¯ç”±ä¸“æ³¨å›¢é˜Ÿå¼€å‘çš„è¾¹ç•Œã€‚\nå¦‚æœæ‚¨çš„åŸŸ - æ‚¨éœ€è¦è§£å†³çš„é—®é¢˜ - å¹¶ä¸å¤æ‚ï¼Œåº”ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æˆ˜ç•¥éƒ¨åˆ†å¯èƒ½ä¼šå¢åŠ ä¸å¿…è¦çš„å¼€é”€å¹¶é™ä½æ‚¨çš„å¼€å‘é€Ÿåº¦ã€‚\nç›¸å…³æŠ€æœ¯è¿åŠ¨:Â å¾®å‹æœåŠ¡å’Œè‡ªåŒ…å«ç³»ç»Ÿ éšç€é¢†åŸŸé©±åŠ¨è®¾è®¡çš„æ¨å¹¿ï¼Œä¹Ÿä¿ƒè¿›äº†å¾®æœåŠ¡å’Œè‡ªåŒ…å«ç³»ç»Ÿçš„æ¶æ„çš„è¯ç”Ÿã€‚\nå¾®æœåŠ¡æ¶æ„é£æ ¼æ˜¯ä¸€ç§å°†å•ä¸ªåº”ç”¨ç¨‹åºå¼€å‘ä¸ºä¸€å¥—å°å‹æœåŠ¡çš„æ–¹æ³•ï¼Œæ¯ä¸ªå°å‹æœåŠ¡éƒ½åœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œå¹¶ä½¿ç”¨è½»é‡çº§é€šä¿¡åè®®ï¼ˆé€šå¸¸æ˜¯HTTP REST APIï¼‰ã€‚ è¿™äº›æœåŠ¡æ˜¯å›´ç»•ä¸šåŠ¡åŠŸèƒ½æ„å»ºçš„ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å®Œå…¨è‡ªåŠ¨åŒ–çš„æœºåˆ¶è¿›è¡Œç‹¬ç«‹éƒ¨ç½²ã€‚ è¿™äº›æœåŠ¡åªæœ‰æœ€ä½é™åº¦çš„é›†ä¸­ç®¡ç†ï¼Œå¯ä»¥ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨æŠ€æœ¯ã€‚\nå¾®æœåŠ¡å°±æ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡æœ‰ç•Œä¸Šä¸‹æ–‡çš„å®ç°ã€‚\nè‡ªåŒ…å«ç³»ç»Ÿæ–¹æ³•æ˜¯ä¸€ç§ä½“ç³»ç»“æ„ï¼Œå®ƒä¾§é‡äºå°†åŠŸèƒ½åˆ†ç¦»åˆ°è®¸å¤šç‹¬ç«‹çš„ç³»ç»Ÿä¸­ï¼Œä½¿å¾—å®Œæ•´çš„é€»è¾‘ç³»ç»Ÿæˆä¸ºè®¸å¤šè¾ƒå°çš„è½¯ä»¶ç³»ç»Ÿçš„åä½œã€‚ è¿™é¿å…äº†å¤§å‹å•ä½“ç»“æ„ä¸æ–­å¢é•¿å¹¶æœ€ç»ˆå˜å¾—ä¸å¯ç»´æŠ¤çš„é—®é¢˜ã€‚ åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œæˆ‘ä»¬å·²ç»åœ¨è®¸å¤šä¸­å‹å’Œå¤§å‹é¡¹ç›®ä¸­çœ‹åˆ°äº†å®ƒçš„å¥½å¤„ã€‚ å…¶æ€æƒ³æ˜¯å°†ä¸€ä¸ªå¤§å‹ç³»ç»Ÿæ‹†åˆ†ä¸ºè‹¥å¹²ä¸ªéµå¾ªæŸäº›è§„åˆ™çš„è¾ƒå°çš„ç‹¬ç«‹ç³»ç»Ÿ(SCS)ã€‚\nè¯¥ç½‘ç«™è¿˜é˜è¿°äº†SCSçš„å…«ä¸ªç‰¹å¾ï¼š\næ¯ä¸ª SCS éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ web åº”ç”¨ç¨‹åºã€‚ å¯¹äº SCS çš„æ‰€æœ‰æ•°æ®ï¼Œå…¶å¤„ç†è¿™äº›æ•°æ®çš„é€»è¾‘å’Œå‘ˆç° web ç•Œé¢çš„æ‰€æœ‰ä»£ç éƒ½åŒ…å«åœ¨ SCS ä¸­ã€‚ SCS å¯ä»¥è‡ªå·±å®Œæˆå…¶ä¸»è¦ç”¨ä¾‹ï¼Œè€Œä¸å¿…ä¾èµ–å…¶ä»–å¯ç”¨çš„ç³»ç»Ÿã€‚\næ¯ä¸ª SCS ç”±ä¸€ä¸ªå›¢é˜Ÿæ‹¥æœ‰ã€‚ è¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€åªæœ‰ä¸€ä¸ªå›¢é˜Ÿå¯ä»¥æ›´æ”¹ä»£ç ï¼Œä½†æ‹¥æœ‰ä»£ç çš„å›¢é˜Ÿå¯¹ä»£ç åº“ä¸­çš„å†…å®¹æ‹¥æœ‰æœ€ç»ˆå†³å®šæƒï¼Œä¾‹å¦‚é€šè¿‡åˆå¹¶ pull-requestsã€‚\nä¸å…¶ä»–SCSæˆ–ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„é€šä¿¡å°½å¯èƒ½æ˜¯å¼‚æ­¥çš„ã€‚ å…·ä½“è€Œè¨€ï¼Œä¸åº”åœ¨SCSè‡ªå·±çš„è¯·æ±‚/å“åº”å‘¨æœŸå†…åŒæ­¥è®¿é—®å…¶ä»–SCSæˆ–å¤–éƒ¨ç³»ç»Ÿã€‚è¿™è§£è€¦äº†ç³»ç»Ÿï¼Œå‡å°‘æ•…éšœçš„å½±å“ï¼Œä»è€Œæ”¯æŒè‡ªæ²»ã€‚ç›®æ ‡æ˜¯å…³äºæ—¶é—´çš„è§£è€¦ï¼šå³ä½¿å…¶ä»–SCSæš‚æ—¶ç¦»çº¿ï¼ŒSCSä¹Ÿåº”è¯¥æ­£å¸¸å·¥ä½œã€‚ å³ä½¿åœ¨æŠ€æœ¯å±‚é¢ä¸Šçš„é€šä¿¡æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯ä»¥å®ç°è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚é€šè¿‡å¤åˆ¶æ•°æ®æˆ–ç¼“å†²è¯·æ±‚ã€‚\nSCSå¯ä»¥å…·æœ‰å¯é€‰çš„æœåŠ¡APIã€‚ å› ä¸ºSCSæœ‰è‡ªå·±çš„Web UIï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä¸ç”¨æˆ·äº¤äº’ã€‚ ä½†æ˜¯ï¼Œç§»åŠ¨å®¢æˆ·ç«¯æˆ–å…¶ä»–SCSå¯¹äºAPIå¯èƒ½ä»ç„¶éœ€è¦ã€‚\næ¯ä¸ª SCS å¿…é¡»åŒ…æ‹¬æ•°æ®å’Œé€»è¾‘ã€‚ è¦çœŸæ­£å®ç°ä»»ä½•æœ‰æ„ä¹‰çš„ç‰¹æ€§ï¼Œä¸¤è€…éƒ½æ˜¯å¿…éœ€çš„ã€‚ ä¸€ä¸ª SCS åº”è¯¥è‡ªå·±å®ç°ç‰¹æ€§ï¼Œå› æ­¤å¿…é¡»åŒæ—¶åŒ…æ‹¬è¿™ä¸¤ä¸ªç‰¹æ€§ã€‚\nSCSåº”è¯¥é€šè¿‡è‡ªå·±çš„UIä½¿å…¶åŠŸèƒ½å¯¹æœ€ç»ˆç”¨æˆ·å¯ç”¨ã€‚ å› æ­¤ï¼ŒSCSåº”è¯¥æ²¡æœ‰ä¸å…¶ä»–SCSå…±äº«çš„UIã€‚ SCSå¯èƒ½ä»ç„¶å…·æœ‰å½¼æ­¤çš„é“¾æ¥ã€‚ ä½†æ˜¯ï¼Œå¼‚æ­¥é›†æˆæ„å‘³ç€å³ä½¿å¦ä¸€ä¸ªSCSçš„UIä¸å¯ç”¨ï¼ŒSCSä»åº”å·¥ä½œã€‚\nä¸ºé¿å…ç´§å¯†è€¦åˆï¼ŒSCSä¸åº”ä¸å…¶ä»–SCSå…±äº«ä¸šåŠ¡ä»£ç ã€‚ ä¸ºSCSåˆ›å»ºæ‹‰å–è¯·æ±‚æˆ–ä½¿ç”¨å…¬å…±åº“å¯èƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¾‹å¦‚ï¼šæ•°æ®åº“é©±åŠ¨ç¨‹åºæˆ–oAuthå®¢æˆ·ç«¯ã€‚\nä¸ºäº†ä½¿SCSæ›´åŠ å¥å£®å¹¶æ”¹å–„è§£è€¦ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å…±äº«åŸºç¡€æ¶æ„ã€‚ ä¾‹å¦‚ã€‚ SCSä½¿ç”¨å…±äº«æ•°æ®åº“ï¼Œå…¶æ•…éšœã€å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§å–å†³äºå…¶ä¸­å¤®æ•°æ®åº“ã€‚ ä½†æ˜¯ï¼Œç”±äºæˆæœ¬åŸå› ï¼Œæ¯ä¸ªSCSä½¿ç”¨å…·æœ‰å•ç‹¬æ¨¡å¼æˆ–æ•°æ®æ¨¡å‹çš„å…±äº«æ•°æ®åº“å¯èƒ½æ˜¯æœ‰æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚\næ€»ç»“ é¢†åŸŸé©±åŠ¨è®¾è®¡ä¸æŠ€æœ¯æ— å…³; å®ƒå®é™…ä¸Šæ˜¯é€šè¿‡ä¸“æ³¨äºæ¨¡å‹æ¥æä¾›æ‚¨æ­£åœ¨å·¥ä½œçš„é¢†åŸŸçš„ä»·å€¼ã€‚ æ¯ä¸ªäººéƒ½å‚ä¸äº†å‘ç°åŸŸçš„è¿‡ç¨‹ï¼Œå¼€å‘äººå‘˜å’Œé¢†åŸŸä¸“å®¶é€šè¿‡å…±äº«åŒä¸€ç§è¯­è¨€ - æ— æ‰€ä¸åœ¨çš„è¯­è¨€ - æ¥ç»„å»ºçŸ¥è¯†åº“ã€‚\né¢†åŸŸé©±åŠ¨è®¾è®¡æä¾›æˆ˜æœ¯å’Œæˆ˜ç•¥å»ºæ¨¡å·¥å…·æ¥è®¾è®¡é«˜è´¨é‡çš„è½¯ä»¶ã€‚ æˆ˜ç•¥è®¾è®¡é’ˆå¯¹ä¸šåŠ¡æ–¹å‘ï¼Œå¸®åŠ©å®šä¹‰å†…éƒ¨å…³ç³»ï¼Œå¹¶é€šè¿‡å®šä¹‰å¼ºå¤§çš„è¾¹ç•Œåœ¨æŠ€æœ¯ä¸Šä¿æŠ¤æ¯ä¸ªä¸šåŠ¡æœåŠ¡ã€‚ æˆ˜æœ¯è®¾è®¡ä¸ºè¿­ä»£è®¾è®¡æä¾›äº†æœ‰ç”¨çš„æ„å»ºå—ã€‚\né¢†åŸŸé©±åŠ¨è®¾è®¡åªæœ‰åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹æ‰æœ‰æ„ä¹‰ã€‚ å®ƒä¸æ˜¯è§£å†³è½¯ä»¶ä¸­æ‰€æœ‰é—®é¢˜çš„çµä¸¹å¦™è¯ï¼Œæ‰€ä»¥ä½ æ˜¯å¦ä½¿ç”¨å®ƒåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä½ å¤„ç†çš„å¤æ‚ç¨‹åº¦ã€‚\né¢†åŸŸé©±åŠ¨è®¾è®¡æ˜¯ä¸€é¡¹é•¿æœŸæŠ•èµ„ï¼Œéœ€è¦ç§¯æçš„åŠªåŠ›ã€‚ é¢†åŸŸä¸“å®¶å°†è¢«è¦æ±‚ä¸å¼€å‘äººå‘˜å¯†åˆ‡åˆä½œï¼Œå¼€å‘äººå‘˜å°†ä¸å¾—ä¸ä»ä¸šåŠ¡è§’åº¦è€ƒè™‘é—®é¢˜ã€‚ æœ€åï¼Œå•†ä¸šå®¢æˆ·æ‰æ˜¯éœ€è¦è¢«æ»¡è¶³çš„äººã€‚\nå‚è€ƒ Domain Driven Design Distilled by Vaughn Vernon\nDomain-Driven Design Reference: Definitions and Pattern Summaries by Eric Evans\nIntroducing EventStorming\nBig Ball of Mud\nApplying Domain-Driven Design and Patterns\nMicroservices Resource Guide\nBuilding Microservices\nSelf-Contained Systems\nDomain-Driven Design in PHP\n","id":24,"section":"posts","summary":"\u003cp\u003eè½¯ä»¶ä¸ä»…ä»…æ˜¯ä»£ç ã€‚ å¦‚æœä½ ä»”ç»†æƒ³æƒ³ï¼Œä»£ç å¾ˆå°‘æ˜¯æˆ‘ä»¬è¿™ä¸ªèŒä¸šçš„æœ€ç»ˆç›®æ ‡ã€‚ ä»£ç åªæ˜¯è§£å†³ä¸šåŠ¡é—®é¢˜çš„åª’ä»‹ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è°ˆä¸€ç§ä¸åŒçš„è¯­è¨€å‘¢ï¼Ÿ é¢†åŸŸé©±åŠ¨è®¾è®¡å¼ºè°ƒç¡®ä¿ä¼ä¸šå’Œè½¯ä»¶ä½¿ç”¨åŒä¸€ç§è¯­è¨€ã€‚ ä¸€æ—¦æ‰“ç ´è¿™ä¸ªéšœç¢ï¼Œå°±ä¸éœ€è¦ç¿»è¯‘æˆ–ç¹ççš„åŒæ­¥ï¼Œä¿¡æ¯ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ æ¯ä¸ªäººéƒ½æœ‰åŠ©äºå‘ç°ä¸šåŠ¡é¢†åŸŸï¼Œè€Œä¸ä»…ä»…æ˜¯ç¨‹åºå‘˜ã€‚ ç”±æ­¤äº§ç”Ÿçš„è½¯ä»¶æ˜¯å…±åŒè¯­è¨€çš„å”¯ä¸€çœŸç†ã€‚\u003c/p\u003e","tags":["ddd"],"title":"é¢†åŸŸé©±åŠ¨è®¾è®¡çš„å¼€å§‹","uri":"https://www.ganymedenil.com/2019/09/05/domain-driven-design-begins.html","year":"2019"},{"content":"Go 1.13 ä¸º error åŒ…å¸¦æ¥äº†æ–°çš„å†…å®¹ã€‚ å®ƒä»¬æ¥è‡ªäº Go 2 é”™è¯¯æ£€æŸ¥çš„å»ºè®®ã€‚\nGo 1.13 çš„ Errors Go 1.13 ä¸º error åŒ…å¸¦æ¥äº†æ–°çš„å†…å®¹ã€‚ å®ƒä»¬æ¥è‡ªäº Go 2 é”™è¯¯æ£€æŸ¥çš„å»ºè®®ã€‚\nåœ¨Goä¸­ï¼Œé”™è¯¯æ˜¯å®ç° error æ¥å£çš„ä»»ä½•å€¼ã€‚\n// The error built-in interface type is the conventional interface for // representing an error condition, with the nil value representing no error. type error interface { Error() string } æœ¬è´¨ä¸Šï¼Œé”™è¯¯æ˜¯å­—ç¬¦ä¸²ï¼Œäººä»¬å¾ˆå®¹æ˜“é˜…è¯»å’Œè§£é‡Šï¼Œä½†ç¨‹åºå¾ˆéš¾å¯¹å®ƒä»¬è¿›è¡Œæ¨ç†ã€‚\nç›®å‰æœ‰å››ç§å¸¸ç”¨çš„æ–¹æ³•æ¥å¤„ç†é”™è¯¯ï¼š\nsentinel errors type assertion ad-hoc checks substring searches Sentinel errors ä¸€äº›åŒ…å®šä¹‰å¯¼å‡ºçš„é”™è¯¯å˜é‡å¹¶ä»å…¶å‡½æ•°è¿”å›ã€‚sql.ErrNoRows å°±æ˜¯ä¸ªå¸¸è§çš„ä¾‹å­ï¼š\npackage sql // ErrNoRows is returned by Scan when QueryRow doesnâ€™t return a // row. In such a case, QueryRow returns a placeholder *Row value that // defers this error until a Scan. var ErrNoRows = errors.New(â€œsql: no rows in result setâ€) ç„¶åæˆ‘ä»¬åˆ¤æ–­ä¸€ä¸‹ï¼š\nif err == sql.ErrNoRows { â€¦ handle the error â€¦ } Type assertion ä¸ sentinel errors ç±»ä¼¼ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ£€æŸ¥è¿”å›çš„é”™è¯¯æ˜¯å¦å½¢æˆæŸç§ç‰¹å®šç±»å‹ï¼Œä»¥ä¾¿æä¾›æ›´å¤šä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ os åŒ…ä¸­çœ‹åˆ°ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­:\ntype PathError struct { Op [string](https://golang.org/pkg/builtin/#string) Path [string](https://golang.org/pkg/builtin/#string) Err [error](https://golang.org/pkg/builtin/#error) } func (e *PathError) Error() string func (e *PathError) Timeout() bool ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æ‰€æœ‰å¯ç”¨çš„é¢å¤–ä¿¡æ¯ PathError\nif pe, ok := err.(*os.PathError); ok { if pe.Timeout() { ... } ... } Ad-hoc checks æœ¬æ–¹æ³•æ˜¯é€šè¿‡å®šä¹‰å‡½æ•°ï¼ŒæŠ½è±¡å‡ºç»™å®šçš„é”™è¯¯å¯èƒ½æ˜¯ä»€ä¹ˆã€‚ ä¸€ä¸ªæ˜æ˜¾çš„ä¼˜ç‚¹æ˜¯åŒ…å¯ä»¥å…¬å¼€è¿™äº›æ–¹æ³•ï¼Œå¹¶ä¿ç•™å…¶å†…éƒ¨ç”¨äºé”™è¯¯å¤„ç†çš„ç§æœ‰æ€§ã€‚\n// IsNotExist returns a boolean indicating whether the error is known to // report that a file or directory does not exist. It is satisfied by // ErrNotExist as well as some syscall errors. func IsNotExist(err error) bool if os.IsNotExist(err) { ... } Substring searches å®ƒçš„åå­—è¯´æ˜äº†ä¸€åˆ‡ï¼Œé€šè¿‡å¤è€çš„ strings.Contains æ£€æŸ¥é”™è¯¯ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œæ˜¯æœ€ä¸å—æ¬¢è¿çš„ã€‚\nif strings.Contains(err.Error(), \u0026quot;foo bar\u0026quot;) { ... } å½“æˆ‘ä»¬æƒ³è¦æ·»åŠ æ›´å¤šçš„ä¸Šä¸‹æ–‡/ä¿¡æ¯æ—¶: Wrapping æˆ‘ä»¬ç»å¸¸éœ€è¦æ·»åŠ ä¸€äº›æ›´å…·ä½“çš„ä¿¡æ¯ï¼Œä¾‹å¦‚è§£é‡Šæ•…éšœçš„åŸå› ã€‚ å¯¹äºä¸Šè¿°æƒ…å†µï¼Œæˆ‘ä»¬æ— èƒ½ä¸ºåŠ›ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å£°æ˜ç”±äº sql é”™è¯¯è€Œå¯¼è‡´è·å–æ“ä½œå¤±è´¥ã€‚\nWrapping æœ¬è´¨ä¸Šæ˜¯åˆ›å»ºä¸€ç³»åˆ—é”™è¯¯ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¿ç•™åŸå§‹é”™è¯¯çš„åŒæ—¶æ·»åŠ æ›´å¤šä¿¡æ¯ã€‚å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ä»»ä½•èƒ½å¤Ÿå®¹çº³é”™è¯¯çš„ç±»å‹å’Œæ›´å¤šä¿¡æ¯æ¥å®ç°ã€‚ç»™å‡ºå¦‚ä¸‹ç±»å‹ï¼š\ntype myError struct { msg string err error } func Wrap(err error, msg string, args ...interface{}) error { return myError{ msg: fmt.Sprintf(msg, args...), err: err, } } æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åˆ›å»ºä¸€äº›æ–¹æ³•æ¥éå†é”™è¯¯é“¾ï¼Œä» Wrapping é”™è¯¯ä¸­ç»™å‡ºä¸‹é¢çš„é”™è¯¯ï¼Œä¾æ­¤ç±»æ¨ã€‚\nGoç”Ÿæ€ç³»ç»Ÿä¸­æœ‰ä¸€äº›å¯é çš„åº“ã€‚Onefootball [github.com/pkg/errors](https://github.com/pkg/errors) (å¦‚æœä½ ä¸çŸ¥é“ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹;) ) åœ¨æˆ‘ä»¬çš„å¤§å¤šæ•°å¾®æœåŠ¡ä¸­ä½¿ç”¨ã€‚\nç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ï¼Œæˆ‘ä»¬å°† vendor é”å®šåˆ°ä»»ä½•å°è£…é”™è¯¯çš„åº“ã€‚å› ä¸ºåªèƒ½é€šè¿‡åº“çš„APIè®¿é—®å±•å¼€å’Œä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚\nGo 2 é”™è¯¯æ£€æŸ¥å»ºè®® å»ºè®® Go 2å¢åŠ ä¸€ä¸ªç”¨äº unwrapping é”™è¯¯çš„æ¥å£:\n// Unwrap returns the result of calling the Unwrap method on err, if errâ€™s // type contains an Unwrap method returning error. // Otherwise, Unwrap returns nil. type Wrapper interface { Unwrap() error } [æˆ‘è®¤ä¸ºå®ƒè¢«ç§°ä¸º Unwrapper è€Œä¸æ˜¯ Wrapper]\nè¿™ä¸ªç®€å•çš„æ¥å£å…è®¸ä»»ä½• Go ç¨‹åºè§£åŒ…ä»»ä½•è‡ªå®šä¹‰é”™è¯¯ï¼Œå¦‚æœå½“å‰çš„åŒ…è£…å™¨å®ç° Unwrap() ï¼Œæˆ‘ä»¬å¯ä»¥éå†æ•´ä¸ªé”™è¯¯é“¾ï¼Œè€Œä¸å¿…æ‹…å¿ƒæœ‰å¤šå°‘è‡ªå®šä¹‰é”™è¯¯å¯èƒ½å·²ç»æ··åˆåœ¨ä¸€èµ·ã€‚\næ›´å¥½çš„æ˜¯ï¼Œè¿˜è®°å¾— sentinel errors å’Œ type assertions å—ï¼Ÿ ç°åœ¨ï¼ŒGo çš„é”™è¯¯åŒ…å¯ä»¥ä¸ºå®ƒä»¬å®šä¹‰æ ‡å‡†æ–¹æ³•ã€‚ å®ƒä»¬æ˜¯ Is å’Œ As:\nfunc Is(err, target error) bool func As(err error, target interface{}) bool æ›´å¤šç»†èŠ‚ï¼š\npackage errors // Is reports whether any error in err's chain matches target. // // The chain consists of err itself followed by the sequence of errors obtained by // repeatedly calling Unwrap. // // An error is considered to match a target if it is equal to that target or if // it implements a method Is(error) bool such that Is(target) returns true. func Is(err, target error) bool // As finds the first error in err's chain that matches target, and if so, sets // target to that error value and returns true. // // An error matches target if the error's concrete value is assignable to the value // pointed to by target, or if the error has a method As(interface{}) bool such that // As(target) returns true. In the latter case, the As method is responsible for // setting target. // // As will panic if target is not a non-nil pointer to either a type that implements // error, or to any interface type. As returns false if err is nil. func As(err error, target interface{}) bool go 1.13? Go 1.13 å®šä¹‰ Unwrapï¼ŒIs å’Œ As å‡½æ•°å¦‚ä¸Šæ‰€ç¤ºã€‚\n**Unwrap **æ˜¯å¯¹ç±»å‹error çš„å†…å®¹è°ƒç”¨ Unwrap() çš„ä¸€ç§ç®€å†™å½¢å¼ã€‚ ç”±äºè¿™ä¸¤ç§æ–¹æ³•éƒ½æ²¡æœ‰æ·»åŠ åˆ° error æ¥å£ä¸­ï¼Œå› æ­¤ errors.Unwrap éå¸¸æ–¹ä¾¿ã€‚\nIs å’Œ As å°†åŒ¹é…æˆ–ç±»å‹ assert å¹¶å°†ä»»ä½•é”™è¯¯è½¬æ¢ä¸ºç›®æ ‡ï¼Œéå†é”™è¯¯é“¾ç›´åˆ°æ‰¾åˆ°åŒ¹é…é”™è¯¯æˆ– nilã€‚\næ­£å¦‚ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°çš„ï¼Œåœ¨ Go 1.13ä¸Šæ²¡æœ‰å®šä¹‰æ¥å£ï¼Œä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åŠ¨æ€æ£€æŸ¥ç»™å®šçš„é”™è¯¯æ˜¯å¦å®ç°äº†å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ª:\nu, ok := err.(interface { Unwrap() error }) x, ok := err.(interface { Is(error) bool }) x, ok := err.(interface { As(interface{}) bool }) åŒ…è£…ä¸€ä¸ªé”™è¯¯? ä¸è¦æ‹…å¿ƒï¼Œfmt å·²ç»ä¸ºä½ è¦†ç›–äº†ï¼š\nThe [Errorf](https://tip.golang.org/pkg/fmt/#Errorf) å‡½æ•°æœ‰ä¸€ä¸ªæ–°çš„è°“è¯ï¼Œ %wï¼Œå…¶ è¿ç®—å¯¹è±¡å¿…é¡»æ˜¯ errorã€‚ä» Errorf è¿”å›çš„é”™è¯¯å°†æœ‰ä¸€ä¸ª Unwrapmethodï¼Œå®ƒè¿”å›è¿ç®—å¯¹è±¡%w.\nerr := errors.New(â€œmy errorâ€) err = fmt.Errorf(â€œ1s wrapping my error with Errorf: %wâ€, err) err = fmt.Errorf(â€œ2nd wrapping my error with Errorf: %wâ€, err) è¿ç§»åˆ° Go 1.13? æœ€åä¸€ä¸ªå°è´´å£« æ³¨æ„ä¸€ä»¶äº‹ï¼šmodules ç°åœ¨é»˜è®¤ä½¿ç”¨Googleå®˜æ–¹çš„é•œåƒå’Œæ ¡éªŒå’Œæ•°æ®åº“ï¼ˆchecksum databaseï¼‰ã€‚ goå‘½ä»¤è¯·æ±‚å®‰è£… modules æ—¶å°†è®¿é—®å®˜æ–¹çš„é•œåƒå¹¶ä¸å®˜æ–¹çš„æ ¡éªŒå’Œæ•°æ®åº“ï¼ˆchecksum databaseï¼‰è¿›è¡Œå¯¹æ¯”æ ¡éªŒã€‚ å› æ­¤ï¼Œä½ éœ€è¦æ’é™¤ä½ ç§äººä»“åº“ä¸­çš„modules ã€‚ ä½ å¯ä»¥è¿™æ ·æ“ä½œï¼Œåœ¨ GOPRIVATE ä¸­è®¾ç½® modules è·¯å¾„å‰ç¼€ä»¥é€—å·åˆ†éš”çš„globæ¨¡å¼åˆ—è¡¨ï¼ˆé€šè¿‡Goè¯­è¨€ä¸­çš„ path.Match è¿›è¡ŒåŒ¹é…ï¼‰ã€‚ ä¾‹å¦‚ï¼š\nGOPRIVATE=github.com/myOrg/*,*.corp.example.com,domain.io/private Happy coding!\nPS:æˆ‘è¿˜åœ¨æŸæ—Golangèšä¼šä¸Šå‘è¡¨äº†å…³äºæ­¤é—®é¢˜çš„æ¼”è®²ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å¹»ç¯ç‰‡å’Œä»£ç ï¼šhttps://github.com/AndersonQ/go1_13_errors\næœ¬æ–‡ç¿»è¯‘è‡ªA Look At Go 1.13 Errors - Onefootball Locker Room - Medium\n","id":25,"section":"posts","summary":"\u003cp\u003eGo 1.13 ä¸º \u003ccode\u003eerror\u003c/code\u003e åŒ…å¸¦æ¥äº†æ–°çš„å†…å®¹ã€‚ å®ƒä»¬æ¥è‡ªäº \u003ca href=\"https://go.googlesource.com/proposal/+/master/design/29934-error-values.md\"\u003eGo 2 é”™è¯¯æ£€æŸ¥\u003c/a\u003eçš„å»ºè®®ã€‚\u003c/p\u003e","tags":["go"],"title":"Go 1.13 çš„ Errors","uri":"https://www.ganymedenil.com/2019/09/04/A-Look-At-Go-1.13-Errors.html","year":"2019"},{"content":"ç¨‹åºçŸ¥é“ç”¨æˆ·çš„ä¸»ç›®å½•æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦å­˜å‚¨è‡ªå®šä¹‰ç”¨æˆ·é…ç½®æˆ–ä¸ç”¨æˆ·ç›¸å…³çš„ä»»ä½•å…¶ä»–æ•°æ®ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•æ‰¾å‡ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚\nè§£æç”¨æˆ·ä¸»ç›®å½• Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ç¨‹åºçŸ¥é“ç”¨æˆ·çš„ä¸»ç›®å½•æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦å­˜å‚¨è‡ªå®šä¹‰ç”¨æˆ·é…ç½®æˆ–ä¸ç”¨æˆ·ç›¸å…³çš„ä»»ä½•å…¶ä»–æ•°æ®ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•æ‰¾å‡ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os/user\u0026quot; ) func main() { usr, err := user.Current() if err != nil { log.Fatal(err) } fmt.Println(\u0026quot;ç”¨æˆ·ä¸»ç›®å½•æ˜¯: \u0026quot; + usr.HomeDir) } $ go run main.go ç”¨æˆ·ä¸»ç›®å½•æ˜¯: C:\\Users\\GanymedeNil åŸç† os/useråŒ…åŒ…å«Currentå‡½æ•°ï¼Œå®ƒæä¾›os.Userç±»å‹æŒ‡é’ˆã€‚ UseråŒ…å«HomeDirå±æ€§ï¼Œè¯¥å±æ€§åŒ…å«å½“å‰ç”¨æˆ·ä¸»ç›®å½•çš„è·¯å¾„ã€‚\nè¯·æ³¨æ„ï¼Œè¿™å¯¹äº¤å‰ç¼–è¯‘çš„ä»£ç ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºå®ç°å–å†³äºæœ¬æœºä»£ç ã€‚\n","id":26,"section":"posts","summary":"\u003cp\u003eç¨‹åºçŸ¥é“ç”¨æˆ·çš„ä¸»ç›®å½•æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦å­˜å‚¨è‡ªå®šä¹‰ç”¨æˆ·é…ç½®æˆ–ä¸ç”¨æˆ·ç›¸å…³çš„ä»»ä½•å…¶ä»–æ•°æ®ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•æ‰¾å‡ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è§£æç”¨æˆ·ä¸»ç›®å½•","uri":"https://www.ganymedenil.com/2019/06/09/go-standard-library-by-parse-the-user-is-home-directory.html","year":"2019"},{"content":"æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ—å‡ºåŒ¹é…ç»™å®šæ¨¡å¼çš„æ–‡ä»¶è·¯å¾„ã€‚è¯¥åˆ—è¡¨ä¸å¿…æ¥è‡ªåŒä¸€æ–‡ä»¶å¤¹ã€‚\nè¿‡æ»¤æ–‡ä»¶åˆ—è¡¨ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ—å‡ºåŒ¹é…ç»™å®šæ¨¡å¼çš„æ–‡ä»¶è·¯å¾„ã€‚è¯¥åˆ—è¡¨ä¸å¿…æ¥è‡ªåŒä¸€æ–‡ä»¶å¤¹ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;path/filepath\u0026quot; ) func main() { for i := 1; i \u0026lt;= 6; i++ { _, err := os.Create(fmt.Sprintf(\u0026quot;./test.file%d\u0026quot;, i)) if err != nil { fmt.Println(err) } } m, err := filepath.Glob(\u0026quot;./test.file[1-3]\u0026quot;) if err != nil { panic(err) } for _, val := range m { fmt.Println(val) } // Cleanup for i := 1; i \u0026lt;= 6; i++ { err := os.Remove(fmt.Sprintf(\u0026quot;./test.file%d\u0026quot;, i)) if err != nil { fmt.Println(err) } } } $ go run main.go test.file1 test.file2 test.file3 åŸç† è¦è·å–ä¸ç»™å®šæ¨¡å¼å¯¹åº”çš„è¿‡æ»¤æ–‡ä»¶åˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨filepathåŒ…ä¸­çš„Globå‡½æ•°ã€‚ æœ‰å…³æ¨¡å¼è¯­æ³•ï¼Œè¯·å‚é˜…filepath.Matchå‡½æ•°çš„æ–‡æ¡£ï¼ˆhttps://golang.org/pkg/path/filepath/#Matchï¼‰ã€‚\nè¯·æ³¨æ„ï¼Œfilepath.Globçš„è¿”å›ç»“æœæ˜¯å…·æœ‰åŒ¹é…è·¯å¾„çš„å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚\n","id":27,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ—å‡ºåŒ¹é…ç»™å®šæ¨¡å¼çš„æ–‡ä»¶è·¯å¾„ã€‚è¯¥åˆ—è¡¨ä¸å¿…æ¥è‡ªåŒä¸€æ–‡ä»¶å¤¹ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¿‡æ»¤æ–‡ä»¶åˆ—è¡¨","uri":"https://www.ganymedenil.com/2019/06/09/go-standard-library-by-filter-file-list.html","year":"2019"},{"content":"æœ¬æ–‡æè¿°äº†ä¸€äº›åœ¨ä»£ç ä¸­åˆ›å»ºæ–‡ä»¶å’Œç›®å½•çš„é€šå¸¸æ–¹æ³•ã€‚\nåˆ›å»ºæ–‡ä»¶å’Œç›®å½• Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡æè¿°äº†ä¸€äº›åœ¨ä»£ç ä¸­åˆ›å»ºæ–‡ä»¶å’Œç›®å½•çš„é€šå¸¸æ–¹æ³•ã€‚\nå®ç° package main import ( \u0026quot;os\u0026quot; ) func main() { f, err := os.Create(\u0026quot;created.file\u0026quot;) if err != nil { panic(err) } f.Close() f, err = os.OpenFile(\u0026quot;created.byopen\u0026quot;, os.O_CREATE|os.O_APPEND, os.ModePerm) if err != nil { panic(err) } f.Close() err = os.Mkdir(\u0026quot;createdDir\u0026quot;, 0777) if err != nil { panic(err) } err = os.MkdirAll(\u0026quot;sampleDir/path1/path2\u0026quot;, 0777) if err != nil { panic(err) } } $ go run main.go . â”œâ”€â”€ main.go â”œâ”€â”€ created.byopen â”œâ”€â”€ created.file â”œâ”€â”€ createdDir â””â”€â”€ sampleDir â””â”€â”€ path1 â””â”€â”€ path2 åŸç† å‰é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¯ä»¥åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•çš„å››ç§æ–¹æ³•ã€‚ os.Createå‡½æ•°æ˜¯åˆ›å»ºæ–‡ä»¶çš„æœ€ç®€å•æ–¹æ³•ã€‚ é€šè¿‡ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œå°†åˆ›å»ºå…·æœ‰0666æƒé™çš„æ–‡ä»¶ã€‚\nå¦‚æœéœ€è¦è‡ªå®šä¹‰æƒé™åˆ›å»ºæ–‡ä»¶ï¼Œåˆ™osåŒ…çš„OpenFileå‡½æ•°å¯ä»¥æ»¡è¶³ã€‚\nä½¿ç”¨osåŒ…çš„Mkdirå‡½æ•°åˆ›å»ºç›®å½•ã€‚ è¿™æ ·ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªå…·æœ‰ç»™å®šæƒé™çš„ç›®å½•ã€‚ ç¬¬äºŒä¸ªé€‰é¡¹æ˜¯ä½¿ç”¨MkdirAllå‡½æ•°ã€‚ æ­¤å‡½æ•°è¿˜ä¼šåˆ›å»ºç›®å½•ï¼Œä½†å¦‚æœç»™å®šè·¯å¾„åŒ…å«ä¸å­˜åœ¨çš„ç›®å½•ï¼Œåˆ™ä¼šåˆ›å»ºè·¯å¾„ä¸­çš„æ‰€æœ‰ç›®å½•ï¼ˆå®ƒçš„å·¥ä½œæ–¹å¼ä¸Unixçš„mkdirç¨‹åºçš„-pé€‰é¡¹ç›¸åŒï¼‰ã€‚\n","id":28,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡æè¿°äº†ä¸€äº›åœ¨ä»£ç ä¸­åˆ›å»ºæ–‡ä»¶å’Œç›®å½•çš„é€šå¸¸æ–¹æ³•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹åˆ›å»ºæ–‡ä»¶å’Œç›®å½•","uri":"https://www.ganymedenil.com/2019/06/09/go-standard-library-by-create-files-and-directories.html","year":"2019"},{"content":"æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•å¿«é€Ÿç¡®å®šä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ç›¸åŒã€‚è¿˜å°†ä¸ºä½ æä¾›ä¸€ç§æ‰¾åˆ°ä¸¤è€…ä¹‹é—´å·®å¼‚çš„æ–¹æ³•ã€‚\næ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•å¿«é€Ÿç¡®å®šä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ç›¸åŒã€‚è¿˜å°†ä¸ºä½ æä¾›ä¸€ç§æ‰¾åˆ°ä¸¤è€…ä¹‹é—´å·®å¼‚çš„æ–¹æ³•ã€‚\nå®ç° package main import ( \u0026quot;bufio\u0026quot; \u0026quot;crypto/md5\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;os\u0026quot; ) var data = []struct { name string cont string perm os.FileMode }{ {\u0026quot;test1.file\u0026quot;, \u0026quot;Hello\\nGolang is great\u0026quot;, 0666}, {\u0026quot;test2.file\u0026quot;, \u0026quot;Hello\\nGolang is great\u0026quot;, 0666}, {\u0026quot;test3.file\u0026quot;, \u0026quot;Not matching\\nGolang is great\\nLast line\u0026quot;, 0666}, } func main() { files := []*os.File{} for _, fData := range data { f, err := os.Create(fData.name) if err != nil { panic(err) } defer f.Close() _, err = io.WriteString(f, fData.cont) if err != nil { panic(err) } files = append(files, f) } // é€šè¿‡æ ¡éªŒå’Œæ¯”è¾ƒ checksums := []string{} for _, f := range files { f.Seek(0, 0) // é‡ç½®æ–‡ä»¶çš„å¼€å¤´ sum, err := getMD5SumString(f) if err != nil { panic(err) } checksums = append(checksums, sum) } fmt.Println(\u0026quot;### é€šè¿‡æ ¡éªŒå’Œæ¯”è¾ƒ ###\u0026quot;) compareCheckSum(checksums[0], checksums[1]) compareCheckSum(checksums[0], checksums[2]) fmt.Println(\u0026quot;### é€è¡Œæ¯”è¾ƒ ###\u0026quot;) files[0].Seek(0, 0) files[2].Seek(0, 0) compareFileByLine(files[0], files[2]) // æ¸…ç† for _, val := range data { os.Remove(val.name) } } func getMD5SumString(f *os.File) (string, error) { file1Sum := md5.New() _, err := io.Copy(file1Sum, f) if err != nil { return \u0026quot;\u0026quot;, err } return fmt.Sprintf(\u0026quot;%X\u0026quot;, file1Sum.Sum(nil)), nil } func compareCheckSum(sum1, sum2 string) { match := \u0026quot;match\u0026quot; if sum1 != sum2 { match = \u0026quot; does not match\u0026quot; } fmt.Printf(\u0026quot;Sum: %s and Sum: %s %s\\n\u0026quot;, sum1, sum2, match) } func compareLines(line1, line2 string) { sign := \u0026quot;o\u0026quot; if line1 != line2 { sign = \u0026quot;x\u0026quot; } fmt.Printf(\u0026quot;%s | %s | %s \\n\u0026quot;, sign, line1, line2) } func compareFileByLine(f1, f2 *os.File) { sc1 := bufio.NewScanner(f1) sc2 := bufio.NewScanner(f2) for { sc1Bool := sc1.Scan() sc2Bool := sc2.Scan() if !sc1Bool \u0026amp;\u0026amp; !sc2Bool { break } compareLines(sc1.Text(), sc2.Text()) } } $ go run main.go ### é€šè¿‡æ ¡éªŒå’Œæ¯”è¾ƒ ### Sum: 5A07C1538087CD5B5C365DE52970E0A3 and Sum: 5A07C1538087CD5B5C365DE52970E0A3 match Sum: 5A07C1538087CD5B5C365DE52970E0A3 and Sum: FED2EADA5D1D1EBF745DFDC7D1385E6C does not match ### é€è¡Œæ¯”è¾ƒ ### x | Hello | Not matching o | Golang is great | Golang is great x | | Last line åŸç† ä¸¤ä¸ªæ–‡ä»¶çš„æ¯”è¾ƒå¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼å®Œæˆã€‚ æœ¬æ–‡ä»‹ç»äº†ä¸¤ç§åŸºæœ¬çš„æ–¹æ³•ã€‚ ç¬¬ä¸€ä¸ªæ˜¯é€šè¿‡åˆ›å»ºæ–‡ä»¶çš„æ ¡éªŒæ¥æ¯”è¾ƒæ•´ä¸ªæ–‡ä»¶ã€‚\nç¬¬äºŒç§æ–¹æ³•é€è¡Œæ¯”è¾ƒæ–‡ä»¶ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºå­—ç¬¦ä¸²å†…å®¹ï¼‰ã€‚ å¦‚æœä¸åŒ¹é…ï¼Œåˆ™æ ‡è®°xç¬¦å·ã€‚ è¿™ä¸æ¯”è¾ƒäºŒè¿›åˆ¶å†…å®¹çš„æ–¹å¼ç›¸åŒï¼Œä½†éœ€è¦æŒ‰å­—èŠ‚å—ï¼ˆå­—èŠ‚åˆ‡ç‰‡ï¼‰æ‰«ææ–‡ä»¶ã€‚\n","id":29,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•å¿«é€Ÿç¡®å®šä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ç›¸åŒã€‚è¿˜å°†ä¸ºä½ æä¾›ä¸€ç§æ‰¾åˆ°ä¸¤è€…ä¹‹é—´å·®å¼‚çš„æ–¹æ³•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/06/08/go-standard-library-by-compare-two-files.html","year":"2019"},{"content":"æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä»¥ç¼–ç¨‹çš„æ–¹å¼æ›´æ”¹æ–‡ä»¶æƒé™ã€‚\næ›´æ”¹æ–‡ä»¶æƒé™ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä»¥ç¼–ç¨‹çš„æ–¹å¼æ›´æ”¹æ–‡ä»¶æƒé™ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { f, err := os.Create(\u0026quot;testfile\u0026quot;) if err != nil { panic(err) } defer f.Close() // è·å–å½“å‰æƒé™ fi, err := f.Stat() if err != nil { panic(err) } fmt.Printf(\u0026quot;æ–‡ä»¶æƒé™ %v\\n\u0026quot;, fi.Mode()) // æ›´æ”¹æƒé™ err = f.Chmod(0777) if err != nil { panic(err) } fi, err = f.Stat() if err != nil { panic(err) } fmt.Printf(\u0026quot;æ–‡ä»¶æƒé™ %v\\n\u0026quot;, fi.Mode()) } $ go run main.go æ–‡ä»¶æƒé™ -rw-rw-rw- æ–‡ä»¶æƒé™ -rwxrwxrwx åŸç† osåŒ…ä¸­çš„Fileç±»å‹çš„Chmodæ–¹æ³•å¯ç”¨äºæ›´æ”¹æ–‡ä»¶æƒé™ã€‚ ä¸Šé¢çš„ç¤ºä¾‹åªæ˜¯åˆ›å»ºæ–‡ä»¶å¹¶å°†æƒé™æ›´æ”¹ä¸º0777ã€‚\nè¯·æ³¨æ„ï¼Œfi.Mode()è¢«è°ƒç”¨ä¸¤æ¬¡ï¼Œå› ä¸ºå®ƒæå–äº†æ–‡ä»¶å½“å‰çŠ¶æ€çš„æƒé™ï¼ˆos.FileModeï¼‰ã€‚\næ›´æ”¹æƒé™çš„æœ€çŸ­æ–¹æ³•æ˜¯ä½¿ç”¨os.Chmodå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†ä¸éœ€è¦åœ¨ä»£ç ä¸­è·å–æ–‡ä»¶ç±»å‹ã€‚\n","id":30,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä»¥ç¼–ç¨‹çš„æ–¹å¼æ›´æ”¹æ–‡ä»¶æƒé™ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æ›´æ”¹æ–‡ä»¶æƒé™","uri":"https://www.ganymedenil.com/2019/06/07/go-standard-library-by-change-file-permissions.html","year":"2019"},{"content":"æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•åˆ—å‡ºç›®å½•å†…å®¹ã€‚\nåˆ—å‡ºç›®å½• Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•åˆ—å‡ºç›®å½•å†…å®¹ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;os\u0026quot; \u0026quot;path/filepath\u0026quot; ) func main() { fmt.Println(\u0026quot;List by ReadDir\u0026quot;) listDirByReadDir(\u0026quot;.\u0026quot;) fmt.Println() fmt.Println(\u0026quot;List by Walk\u0026quot;) listDirByWalk(\u0026quot;.\u0026quot;) } func listDirByWalk(path string) { filepath.Walk(path, func(wPath string, info os.FileInfo, err error) error { if wPath == path { return nil } if info.IsDir() { fmt.Printf(\u0026quot;[%s]\\n\u0026quot;, wPath) return filepath.SkipDir } if wPath != path { fmt.Println(wPath) } return nil }) } func listDirByReadDir(path string) { lst, err := ioutil.ReadDir(path) if err != nil { panic(err) } for _, val := range lst { if val.IsDir() { fmt.Printf(\u0026quot;[%s]\\n\u0026quot;, val.Name()) } else { fmt.Println(val.Name()) } } } $ go run main.go List by ReadDir [folder] main.go List by Walk [folder] main.go åŸç† åˆ—å‡ºä¸Šè¿°ç¤ºä¾‹çš„æ–‡ä»¶å¤¹ä½¿ç”¨äº†ä¸¤ç§æ–¹æ³•ã€‚ ç¬¬ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨listDirByReadDirå‡½æ•°å®ç°ï¼Œå¹¶ä½¿ç”¨ioutilåŒ…ä¸­çš„ReadDirå‡½æ•°ã€‚ æ­¤å‡½æ•°è¿”å›å®é™…ç›®å½•å†…å®¹çš„FileInfoç»“æ„ç‰‡ã€‚ è¯·æ³¨æ„ï¼ŒReadDirå‡½æ•°ä¸ä¼šé€’å½’è¯»å–æ–‡ä»¶å¤¹ã€‚ å®é™…ä¸Šï¼ŒReadDirå‡½æ•°åœ¨å†…éƒ¨ä½¿ç”¨osåŒ…ä¸­çš„Fileç±»å‹çš„Readdiræ–¹æ³•ã€‚\nå¦ä¸€ç§æ–¹æ³•ï¼Œæ›´å¤æ‚ï¼ŒlistDirByWalkä½¿ç”¨filepath.Walkå‡½æ•°ï¼Œè¯¥å‡½æ•°éå†è·¯å¾„å¹¶å…·æœ‰å¤„ç†ä»»ä½•ç»™å®šè·¯å¾„ä¸­çš„æ¯ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„å‡½æ•°ã€‚ ä¸»è¦åŒºåˆ«åœ¨äºWalkå‡½æ•°ä»¥é€’å½’æ–¹å¼è¯»å–ç›®å½•ã€‚ è¿™ç§æ–¹æ³•çš„æ ¸å¿ƒéƒ¨åˆ†æ˜¯WalkFuncç±»å‹ï¼Œå…¶åŠŸèƒ½æ˜¯ä½¿ç”¨åˆ—è¡¨çš„ç»“æœã€‚ è¯·æ³¨æ„ï¼Œè¯¥å‡½æ•°é€šè¿‡è¿”å›filepath.SkipDiré”™è¯¯æ¥é˜»æ­¢å¯¹åŸºç¡€æ–‡ä»¶å¤¹çš„é€’å½’è°ƒç”¨ã€‚ Walkå‡½æ•°ä¹Ÿé¦–å…ˆå¤„ç†è¢«è°ƒç”¨çš„è·¯å¾„ï¼Œæ‰€ä»¥ä½ ä¹Ÿéœ€è¦å¤„ç†å®ƒï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è·³è¿‡æ‰“å°å¹¶è¿”å›nilï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é€’å½’å¤„ç†è¿™ä¸ªæ–‡ä»¶å¤¹ï¼‰ã€‚\n","id":31,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•åˆ—å‡ºç›®å½•å†…å®¹ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹åˆ—å‡ºç›®å½•","uri":"https://www.ganymedenil.com/2019/06/07/go-standard-library-by-list-directory.html","year":"2019"},{"content":"Goæ”¯æŒå¤šç§æ–¹å¼æ¥è¿›è¡Œå†™æ–‡ä»¶æ“ä½œã€‚\nå†™æ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ Goæ”¯æŒå¤šç§æ–¹å¼æ¥è¿›è¡Œå†™æ–‡ä»¶æ“ä½œã€‚\nå®ç° package main import ( \u0026quot;io\u0026quot; \u0026quot;os\u0026quot; \u0026quot;strings\u0026quot; ) func main() { f, err := os.Create(\u0026quot;sample.file\u0026quot;) if err != nil { panic(err) } defer f.Close() _, err = f.WriteString(\u0026quot;Go is awesome!\\n\u0026quot;) if err != nil { panic(err) } _, err = io.Copy(f, strings.NewReader(\u0026quot;Yeah! Go is great.\\n\u0026quot;)) if err != nil { panic(err) } } $ go run main.go $ cat sample.file Go is awesome! Yeah! Go is great. åŸç† os.Fileç±»å‹å®ç°äº†Writeræ¥å£ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä»»ä½•ä½¿ç”¨Writeræ¥å£çš„é€‰é¡¹æ¥å†™å…¥æ–‡ä»¶ã€‚ å‰é¢çš„ç¤ºä¾‹ä½¿ç”¨os.Fileç±»å‹çš„WriteStringæ–¹æ³•ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œio.WriteStringæ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚\n","id":32,"section":"posts","summary":"\u003cp\u003eGoæ”¯æŒå¤šç§æ–¹å¼æ¥è¿›è¡Œå†™æ–‡ä»¶æ“ä½œã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å†™æ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/06/06/go-standard-library-by-write-file.html","year":"2019"},{"content":"æœ¬æ–‡å°†æ¼”ç¤ºå¦‚æœä»å¤šä¸ªgoroutineå®‰å…¨åœ°å†™å…¥æ–‡ä»¶ã€‚\nå¤šä¸ªgoroutineå†™æ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡å°†æ¼”ç¤ºå¦‚æœä»å¤šä¸ªgoroutineå®‰å…¨åœ°å†™å…¥æ–‡ä»¶ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;os\u0026quot; \u0026quot;sync\u0026quot; ) type SyncWriter struct { m sync.Mutex Writer io.Writer } func (w *SyncWriter) Write(b []byte) (n int, err error) { w.m.Lock() defer w.m.Unlock() return w.Writer.Write(b) } var data = []string{ \u0026quot;Hello!\u0026quot;, \u0026quot;Ola!\u0026quot;, \u0026quot;Ahoj!\u0026quot;, } func main() { f, err := os.Create(\u0026quot;sample.file\u0026quot;) if err != nil { panic(err) } wr := \u0026amp;SyncWriter{sync.Mutex{}, f} wg := sync.WaitGroup{} for _, val := range data { wg.Add(1) go func(greetings string) { fmt.Fprintln(wr, greetings) wg.Done() }(val) } wg.Wait() } $ go run main.go $ cat sample.file Hello! Ahoj! Ola! åŸç† å¹¶å‘å†™å…¥æ–‡ä»¶æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´æ–‡ä»¶å†…å®¹ä¸ä¸€è‡´ã€‚ æœ€å¥½ä½¿ç”¨Mutexæˆ–ä»»ä½•å…¶ä»–åŒæ­¥åŸè¯­åŒæ­¥å†™å…¥æ–‡ä»¶ã€‚ è¿™æ ·ï¼Œå¯ä»¥ç¡®ä¿ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªgoroutineèƒ½å¤Ÿå†™å…¥æ–‡ä»¶ã€‚\nä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰Mutexçš„Writerï¼Œå®ƒåµŒå…¥äº†Writerï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºos.Fileï¼‰ï¼Œå¯¹äºæ¯ä¸ªWriteè°ƒç”¨ï¼Œå†…éƒ¨é”å®šMutexä»¥æä¾›ç‹¬å æ€§ã€‚ å†™æ“ä½œå®Œæˆåï¼ŒMutexåŸè¯­è‡ªç„¶è§£é”ã€‚\n","id":33,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†æ¼”ç¤ºå¦‚æœä»å¤šä¸ªgoroutineå®‰å…¨åœ°å†™å…¥æ–‡ä»¶ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å¤šä¸ªgoroutineå†™æ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/06/06/go-standard-library-by-multiple-goroutine-write-files.html","year":"2019"},{"content":"å¦‚æœéœ€è¦è·å–è®¿é—®æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ŒGoæ ‡å‡†åº“æä¾›äº†ç›¸å…³çš„æ–¹æ³•ã€‚\nè·å–æ–‡ä»¶ä¿¡æ¯ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ å¦‚æœéœ€è¦è·å–è®¿é—®æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ŒGoæ ‡å‡†åº“æä¾›äº†ç›¸å…³çš„æ–¹æ³•ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶testfileï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nThis is test file. åˆ›å»ºæ–‡ä»¶fileinfo.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { f, err := os.Open(\u0026quot;testfile\u0026quot;) if err != nil { panic(err) } fi, err := f.Stat() if err != nil { panic(err) } fmt.Printf(\u0026quot;File name: %v\\n\u0026quot;, fi.Name()) fmt.Printf(\u0026quot;Is Directory: %t\\n\u0026quot;, fi.IsDir()) fmt.Printf(\u0026quot;Size: %d\\n\u0026quot;, fi.Size()) fmt.Printf(\u0026quot;Mode: %v\\n\u0026quot;, fi.Mode()) } $ go run fileinfo.go File name: testfile Is Directory: false Size: 18 Mode: -rw-rw-rw- åŸç† os.Fileç±»å‹é€šè¿‡Statæ–¹æ³•æä¾›å¯¹FileInfoç±»å‹çš„è®¿é—®ã€‚ FileInfoç»“æ„åŒ…å«æœ‰å…³è¯¥æ–‡ä»¶çš„æ‰€æœ‰åŸºæœ¬ä¿¡æ¯ã€‚\n","id":34,"section":"posts","summary":"\u003cp\u003eå¦‚æœéœ€è¦è·å–è®¿é—®æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ŒGoæ ‡å‡†åº“æä¾›äº†ç›¸å…³çš„æ–¹æ³•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è·å–æ–‡ä»¶ä¿¡æ¯","uri":"https://www.ganymedenil.com/2019/06/05/go-standard-library-by-get-file-information.html","year":"2019"},{"content":"ä¸´æ—¶æ–‡ä»¶é€šå¸¸åœ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ä½¿ç”¨ï¼Œæˆ–è€…å¦‚æœä½ çš„åº”ç”¨éœ€è¦å­˜å‚¨çŸ­æœŸå†…å®¹ï¼ˆå¦‚ç”¨æˆ·ä¸Šä¼ çš„ä¸´æ—¶æ•°æ®ï¼‰ã€‚\nåˆ›å»ºä¸´æ—¶æ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ä¸´æ—¶æ–‡ä»¶é€šå¸¸åœ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ä½¿ç”¨ï¼Œæˆ–è€…å¦‚æœä½ çš„åº”ç”¨éœ€è¦å­˜å‚¨çŸ­æœŸå†…å®¹ï¼ˆå¦‚ç”¨æˆ·ä¸Šä¼ çš„ä¸´æ—¶æ•°æ®ï¼‰ã€‚\nå®ç° package main import \u0026quot;io/ioutil\u0026quot; import \u0026quot;os\u0026quot; import \u0026quot;fmt\u0026quot; func main() { tFile, err := ioutil.TempFile(\u0026quot;\u0026quot;, \u0026quot;gostandardlibrary\u0026quot;) if err != nil { panic(err) } // The called is responsible for handling // the clean up. defer os.Remove(tFile.Name()) fmt.Println(tFile.Name()) // TempDir returns // the path in string. tDir, err := ioutil.TempDir(\u0026quot;\u0026quot;, \u0026quot;gostandardlibrary\u0026quot;) if err != nil { panic(err) } defer os.Remove(tDir) fmt.Println(tDir) } $ go run main.go C:\\Users\\Ganymedenil\\AppData\\Local\\Temp\\gostandardlibrary308359067 C:\\Users\\Ganymedenil\\AppData\\Local\\Temp\\gostandardlibrary531728446 åŸç† ioutilåŒ…ä¸­åŒ…å«TempFileå’ŒTempDirå‡½æ•°ã€‚ TempFileå‡½æ•°å‚æ•°ä¸ºç›®å½•å’Œæ–‡ä»¶å‰ç¼€ã€‚ å®ƒè¿”å›å¸¦æœ‰ä¸´æ—¶æ–‡ä»¶çš„os.Fileã€‚ è¯·æ³¨æ„ï¼Œè°ƒç”¨è€…è´Ÿè´£æ¸…é™¤æ–‡ä»¶ã€‚ å‰é¢çš„ç¤ºä¾‹ä½¿ç”¨os.Removeå‡½æ•°æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚\nTempDirå‡½æ•°çš„å·¥ä½œæ–¹å¼ä¸TempFileç›¸åŒã€‚ ä¸åŒä¹‹å¤„åœ¨äºå®ƒè¿”å›åŒ…å«ç›®å½•è·¯å¾„çš„å­—ç¬¦ä¸²ã€‚\nä¸´æ—¶file/diråç§°ç”±å‰ç¼€å’Œéšæœºåç¼€ç»„æˆã€‚ ä½¿ç”¨ç›¸åŒå‚æ•°è°ƒç”¨TempFile/Dirå‡½æ•°çš„å¤šä¸ªç¨‹åºå°†ä¸ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚\n","id":35,"section":"posts","summary":"\u003cp\u003eä¸´æ—¶æ–‡ä»¶é€šå¸¸åœ¨è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ä½¿ç”¨ï¼Œæˆ–è€…å¦‚æœä½ çš„åº”ç”¨éœ€è¦å­˜å‚¨çŸ­æœŸå†…å®¹ï¼ˆå¦‚ç”¨æˆ·ä¸Šä¼ çš„ä¸´æ—¶æ•°æ®ï¼‰ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹åˆ›å»ºä¸´æ—¶æ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/06/05/go-standard-library-by-create-a-temporary-file.html","year":"2019"},{"content":"æœ¬æ–‡å°†è®²è§£ä¸€ä¸ªå®ä¾‹ï¼Œä½ çš„ç¨‹åºä»ä¸å¯é çš„æºä¸­ä½¿ç”¨JSONï¼Œè€ŒJSONåŒ…å«ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œè¿™äº›å¯¹è±¡å…·æœ‰å¼€å§‹æ ‡è®°[ä½†æ•°ç»„ä¸­çš„é¡¹ç›®æ•°éå¸¸å¤§ï¼Œå¹¶ä¸”JSONçš„ç»“å°¾å¯èƒ½è¢«ç ´åã€‚\nä»ä¸å®Œæ•´çš„JSONæ•°ç»„ä¸­æå–æ•°æ® Golang ç‰ˆæœ¬ 1.12.1\nå‰æ²¿ æœ¬æ–‡å°†è®²è§£ä¸€ä¸ªå®ä¾‹ï¼Œä½ çš„ç¨‹åºä»ä¸å¯é çš„æºä¸­ä½¿ç”¨JSONï¼Œè€ŒJSONåŒ…å«ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œè¿™äº›å¯¹è±¡å…·æœ‰å¼€å§‹æ ‡è®°[ä½†æ•°ç»„ä¸­çš„é¡¹ç›®æ•°éå¸¸å¤§ï¼Œå¹¶ä¸”JSONçš„ç»“å°¾å¯èƒ½è¢«ç ´åã€‚\nå®ç° package main import ( \u0026quot;encoding/json\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const js = ` [ { \u0026quot;name\u0026quot;:\u0026quot;Axel\u0026quot;, \u0026quot;lastname\u0026quot;:\u0026quot;Fooley\u0026quot; }, { \u0026quot;name\u0026quot;:\u0026quot;Tim\u0026quot;, \u0026quot;lastname\u0026quot;:\u0026quot;Burton\u0026quot; }, { \u0026quot;name\u0026quot;:\u0026quot;Tim\u0026quot;, \u0026quot;lastname\u0026quot;:\u0026quot;Burton\u0026quot; ` type User struct { Name string `json:\u0026quot;name\u0026quot;` LastName string `json:\u0026quot;lastname\u0026quot;` } func main() { userSlice := make([]User, 0) r := strings.NewReader(js) dec := json.NewDecoder(r) for { tok, err := dec.Token() if err != nil { break } if tok == nil { break } switch tp := tok.(type) { case json.Delim: str := tp.String() if str == \u0026quot;[\u0026quot; || str == \u0026quot;{\u0026quot; { for dec.More() { u := User{} err := dec.Decode(\u0026amp;u) if err == nil { userSlice = append(userSlice, u) } else { break } } } } } fmt.Println(userSlice) } $go run main.go [{Axel Fooley} {Tim Burton}] åŸç† é™¤äº†Unmarshallå‡½æ•°ï¼ŒjsonåŒ…è¿˜åŒ…å«Decoder APIã€‚ ä½¿ç”¨NewDecoderï¼Œå¯ä»¥åˆ›å»ºDecoder ã€‚ é€šè¿‡åœ¨è§£ç å™¨ä¸Šè°ƒç”¨Tokenæ–¹æ³•ï¼Œè¯»å–åº•å±‚Readerå¹¶è¿”å›Tokenæ¥å£ã€‚ è¿™å¯èƒ½åŒ…å«å¤šä¸ªå€¼ã€‚\nå…¶ä¸­ä¸€ä¸ªæ˜¯Delimç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«{ï¼Œ[ï¼Œ]ï¼Œ}å­—ç¬¦ä¹‹ä¸€çš„runeã€‚ åŸºäºæ­¤ï¼Œæ£€æµ‹åˆ°JSONæ•°ç»„çš„å¼€å¤´ã€‚ åˆ©ç”¨è§£ç å™¨ä¸Šçš„Moreæ–¹æ³•ï¼Œå¯ä»¥æ£€æµ‹åˆ°æ›´å¤šè¦è§£ç çš„å¯¹è±¡ã€‚\n","id":36,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†è®²è§£ä¸€ä¸ªå®ä¾‹ï¼Œä½ çš„ç¨‹åºä»ä¸å¯é çš„æºä¸­ä½¿ç”¨JSONï¼Œè€ŒJSONåŒ…å«ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œè¿™äº›å¯¹è±¡å…·æœ‰å¼€å§‹æ ‡è®°\u003ccode\u003e[\u003c/code\u003eä½†æ•°ç»„ä¸­çš„é¡¹ç›®æ•°éå¸¸å¤§ï¼Œå¹¶ä¸”JSONçš„ç»“å°¾å¯èƒ½è¢«ç ´åã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ä»ä¸å®Œæ•´çš„JSONæ•°ç»„ä¸­æå–æ•°æ®","uri":"https://www.ganymedenil.com/2019/06/04/go-standard-library-by-extract-data-from-an-incomplete-json-array.html","year":"2019"},{"content":"XMLæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚Goåº“åŒ…å«å¯¹ä»¥ä¸JSONç›¸åŒçš„æ–¹å¼è§£æXMLæ–‡ä»¶çš„æ”¯æŒã€‚é€šå¸¸ï¼Œä½¿ç”¨ä¸XMLæ–¹æ¡ˆå¯¹åº”çš„ç»“æ„ï¼Œå¹¶ä¸”åœ¨æ­¤å¸®åŠ©ä¸‹ï¼Œä¸€æ¬¡è§£æXMLå†…å®¹ã€‚é—®é¢˜æ˜¯å½“XMLæ–‡ä»¶å¤ªå¤§è€Œæ— æ³•å®¹çº³åˆ°å†…å­˜ä¸­æ—¶ï¼Œéœ€è¦ä»¥å—çš„å½¢å¼è§£ææ–‡ä»¶ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•å¤„ç†å¤§å‹XMLæ–‡ä»¶å¹¶è§£ææ‰€éœ€ä¿¡æ¯ã€‚\næœ‰æ•ˆåœ°è§£æå¤§å‹XMLæ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰æ²¿ XMLæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚Goåº“åŒ…å«å¯¹ä»¥ä¸JSONç›¸åŒçš„æ–¹å¼è§£æXMLæ–‡ä»¶çš„æ”¯æŒã€‚é€šå¸¸ï¼Œä½¿ç”¨ä¸XMLæ–¹æ¡ˆå¯¹åº”çš„ç»“æ„ï¼Œå¹¶ä¸”åœ¨æ­¤å¸®åŠ©ä¸‹ï¼Œä¸€æ¬¡è§£æXMLå†…å®¹ã€‚é—®é¢˜æ˜¯å½“XMLæ–‡ä»¶å¤ªå¤§è€Œæ— æ³•å®¹çº³åˆ°å†…å­˜ä¸­æ—¶ï¼Œéœ€è¦ä»¥å—çš„å½¢å¼è§£ææ–‡ä»¶ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•å¤„ç†å¤§å‹XMLæ–‡ä»¶å¹¶è§£ææ‰€éœ€ä¿¡æ¯ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶data.xmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\u0026lt;?xml version=\u0026quot;1.0\u0026quot;?\u0026gt; \u0026lt;catalog\u0026gt; \u0026lt;book id=\u0026quot;bk101\u0026quot;\u0026gt; \u0026lt;author\u0026gt;Gambardella, Matthew\u0026lt;/author\u0026gt; \u0026lt;title\u0026gt;XML Developer's Guide\u0026lt;/title\u0026gt; \u0026lt;genre\u0026gt;Computer\u0026lt;/genre\u0026gt; \u0026lt;price\u0026gt;44.95\u0026lt;/price\u0026gt; \u0026lt;publish_date\u0026gt;2000-10-01\u0026lt;/publish_date\u0026gt; \u0026lt;description\u0026gt;An in-depth look at creating applications with XML.\u0026lt;/description\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026quot;bk112\u0026quot;\u0026gt; \u0026lt;author\u0026gt;Galos, Mike\u0026lt;/author\u0026gt; \u0026lt;title\u0026gt;Visual Studio 7: A Comprehensive Guide\u0026lt;/title\u0026gt; \u0026lt;genre\u0026gt;Computer\u0026lt;/genre\u0026gt; \u0026lt;price\u0026gt;49.95\u0026lt;/price\u0026gt; \u0026lt;publish_date\u0026gt;2001-04-16\u0026lt;/publish_date\u0026gt; \u0026lt;description\u0026gt;Microsoft Visual Studio 7 is explored in depth, looking at how Visual Basic, Visual C++, C#, and ASP+ are integrated into a comprehensive development environment.\u0026lt;/description\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;/catalog\u0026gt; åˆ›å»ºæ–‡ä»¶xml.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;encoding/xml\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) type Book struct { Title string `xml:\u0026quot;title\u0026quot;` Author string `xml:\u0026quot;author\u0026quot;` } func main() { f, err := os.Open(\u0026quot;data.xml\u0026quot;) if err != nil { panic(err) } defer f.Close() decoder := xml.NewDecoder(f) // é€ä¸€é˜…è¯»æœ¬ä¹¦ books := make([]Book, 0) for { tok, _ := decoder.Token() if tok == nil { break } switch tp := tok.(type) { case xml.StartElement: if tp.Name.Local == \u0026quot;book\u0026quot; { // å°†å…ƒç´ è§£ç ä¸ºstruct var b Book decoder.DecodeElement(\u0026amp;b, \u0026amp;tp) books = append(books, b) } } } fmt.Println(books) } $ go run xml.go [{XML Developer's Guide Gambardella, Matthew} {Visual Studio 7: A Comprehensive Guide Galos, Mike}] åŸç† ä½¿ç”¨xmlåŒ…çš„NewDecoderå‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºXMLå†…å®¹çš„Decoderã€‚\né€šè¿‡åœ¨Decoderä¸Šè°ƒç”¨Tokenæ–¹æ³•ï¼Œæ¥æ”¶xml.Tokenã€‚ xml.Tokenæ˜¯ä¿å­˜ä»¤ç‰Œç±»å‹çš„æ¥å£ã€‚ å¯ä»¥æ ¹æ®ç±»å‹å®šä¹‰ä»£ç çš„è¡Œä¸ºã€‚ ç¤ºä¾‹ä»£ç æµ‹è¯•è§£æçš„xml.StartElementæ˜¯å¦æ˜¯bookå…ƒç´ ä¹‹ä¸€ã€‚ ç„¶åå®ƒå°†æ•°æ®éƒ¨åˆ†è§£æä¸ºBookç»“æ„ã€‚ è¿™æ ·ï¼ŒDecoderä¸­åº•å±‚Readerä¸­æŒ‡é’ˆçš„ä½ç½®è¢«structæ•°æ®ç§»ä½ï¼Œå¹¶ä¸”è§£æå¯ä»¥ç»§ç»­ã€‚\n","id":37,"section":"posts","summary":"\u003cp\u003eXMLæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚Goåº“åŒ…å«å¯¹ä»¥ä¸JSONç›¸åŒçš„æ–¹å¼è§£æXMLæ–‡ä»¶çš„æ”¯æŒã€‚é€šå¸¸ï¼Œä½¿ç”¨ä¸XMLæ–¹æ¡ˆå¯¹åº”çš„ç»“æ„ï¼Œå¹¶ä¸”åœ¨æ­¤å¸®åŠ©ä¸‹ï¼Œä¸€æ¬¡è§£æXMLå†…å®¹ã€‚é—®é¢˜æ˜¯å½“XMLæ–‡ä»¶å¤ªå¤§è€Œæ— æ³•å®¹çº³åˆ°å†…å­˜ä¸­æ—¶ï¼Œéœ€è¦ä»¥å—çš„å½¢å¼è§£ææ–‡ä»¶ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•å¤„ç†å¤§å‹XMLæ–‡ä»¶å¹¶è§£ææ‰€éœ€ä¿¡æ¯ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æœ‰æ•ˆåœ°è§£æå¤§å‹XMLæ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/06/04/go-standard-library-by-effectively-parse-large-xml-files.html","year":"2019"},{"content":"é™¤äº†ä¼—æ‰€å‘¨çŸ¥çš„JSONå’ŒXMLä¹‹å¤–ï¼ŒGoè¿˜æä¾›äºŒè¿›åˆ¶æ ¼å¼ gobã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨gobåŒ…ã€‚\nå°†å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼ Golang ç‰ˆæœ¬ 1.12.1\nå‰æ²¿ é™¤äº†ä¼—æ‰€å‘¨çŸ¥çš„JSONå’ŒXMLä¹‹å¤–ï¼ŒGoè¿˜æä¾›äºŒè¿›åˆ¶æ ¼å¼ gobã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨gobåŒ…ã€‚\nå®ç° package main import ( \u0026quot;bytes\u0026quot; \u0026quot;encoding/gob\u0026quot; \u0026quot;fmt\u0026quot; ) type User struct { FirstName string LastName string Age int Active bool } func (u User) String() string { return fmt.Sprintf(`{\u0026quot;FirstName\u0026quot;:%s,\u0026quot;LastName\u0026quot;:%s, \u0026quot;Age\u0026quot;:%d,\u0026quot;Active\u0026quot;:%v }`, u.FirstName, u.LastName, u.Age, u.Active) } type SimpleUser struct { FirstName string LastName string } func (u SimpleUser) String() string { return fmt.Sprintf(`{\u0026quot;FirstName\u0026quot;:%s,\u0026quot;LastName\u0026quot;:%s}`, u.FirstName, u.LastName) } func main() { var buff bytes.Buffer // Encode value enc := gob.NewEncoder(\u0026amp;buff) user := User{ \u0026quot;Radomir\u0026quot;, \u0026quot;Sohlich\u0026quot;, 30, true, } enc.Encode(user) fmt.Printf(\u0026quot;%X\\n\u0026quot;, buff.Bytes()) // Decode value out := User{} dec := gob.NewDecoder(\u0026amp;buff) dec.Decode(\u0026amp;out) fmt.Println(out.String()) enc.Encode(user) out2 := SimpleUser{} dec.Decode(\u0026amp;out2) fmt.Println(out2.String()) } $ go run main.go 40FF81030101045573657201FF82000104010946697273744E616D65010C0001084C6173744E616D65010C0001034167650104000106416374697665010200000019FF8201075261646F6D69720107536F686C696368013C010100 {\u0026quot;FirstName\u0026quot;:Radomir,\u0026quot;LastName\u0026quot;:Sohlich,\u0026quot;Age\u0026quot;:30,\u0026quot;Active\u0026quot;:true } {\u0026quot;FirstName\u0026quot;:Radomir,\u0026quot;LastName\u0026quot;:Sohlich} åŸç† gobåºåˆ—åŒ–å’Œååºåˆ—åŒ–éœ€è¦ç¼–ç å™¨å’Œè§£ç å™¨ã€‚ gob.NewEncoderå‡½æ•°ä½¿ç”¨åº•å±‚Writeråˆ›å»ºEncoderã€‚ æ¯æ¬¡è°ƒç”¨Encodeæ–¹æ³•éƒ½ä¼šå°†å¯¹è±¡åºåˆ—åŒ–ä¸ºgobæ ¼å¼ã€‚ gobæ ¼å¼æœ¬èº«å°±æ˜¯è‡ªæè¿°çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚ è¿™æ„å‘³ç€æ¯ä¸ªåºåˆ—åŒ–ç»“æ„å‰é¢éƒ½æœ‰å…¶æè¿°ã€‚\nè¦è§£ç åºåˆ—åŒ–å½¢å¼çš„æ•°æ®ï¼Œå¿…é¡»é€šè¿‡ä½¿ç”¨åº•å±‚Readerè°ƒç”¨gob.NewDecoderæ¥åˆ›å»ºè§£ç å™¨ã€‚ ç„¶åï¼ŒDecodeæ¥å—æŒ‡å‘è¯¥ååºåˆ—åŒ–æ•°æ®çš„ç»“æ„æŒ‡é’ˆã€‚\nè¯·æ³¨æ„ï¼Œgobæ ¼å¼ä¸éœ€è¦æºå’Œç›®æ ‡ç±»å‹å®Œå…¨åŒ¹é…ã€‚ æœ‰å…³è§„åˆ™ï¼Œè¯·å‚é˜…encoding/gobåŒ…ã€‚\n","id":38,"section":"posts","summary":"\u003cp\u003eé™¤äº†ä¼—æ‰€å‘¨çŸ¥çš„JSONå’ŒXMLä¹‹å¤–ï¼ŒGoè¿˜æä¾›äºŒè¿›åˆ¶æ ¼å¼ \u003ccode\u003egob\u003c/code\u003eã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨\u003ccode\u003egob\u003c/code\u003eåŒ…ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼","uri":"https://www.ganymedenil.com/2019/06/03/go-standard-library-by-serialize-objects-into-binary-format.html","year":"2019"},{"content":"ZIPå‹ç¼©æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å‹ç¼©æ ¼å¼ã€‚é€šå¸¸ä½¿ç”¨åœºæ™¯æ˜¯å°†æ–‡ä»¶é›†æ‰“åŒ…ä¸ºZIPæ ¼å¼ï¼Œæˆ–è€…ï¼Œå°†å‹ç¼©æ–‡ä»¶è§£å‹ç¼©ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“ä»¥ç¼–ç¨‹æ–¹å¼å¤„ç†ZIPæ–‡ä»¶ã€‚\nè¯»å†™ZIPæ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰æ²¿ ZIPå‹ç¼©æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å‹ç¼©æ ¼å¼ã€‚é€šå¸¸ä½¿ç”¨åœºæ™¯æ˜¯å°†æ–‡ä»¶é›†æ‰“åŒ…ä¸ºZIPæ ¼å¼ï¼Œæˆ–è€…ï¼Œå°†å‹ç¼©æ–‡ä»¶è§£å‹ç¼©ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“ä»¥ç¼–ç¨‹æ–¹å¼å¤„ç†ZIPæ–‡ä»¶ã€‚\nå®ç° package main import ( \u0026quot;archive/zip\u0026quot; \u0026quot;bytes\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; ) func main() { var buff bytes.Buffer // å‹ç¼©å†…å®¹ zipW := zip.NewWriter(\u0026amp;buff) f, err := zipW.Create(\u0026quot;newfile.txt\u0026quot;) if err != nil { panic(err) } _, err = f.Write([]byte(\u0026quot;This is my file content\u0026quot;)) if err != nil { panic(err) } err = zipW.Close() if err != nil { panic(err) } // å°†è¾“å‡ºå†™å…¥æ–‡ä»¶ err = ioutil.WriteFile(\u0026quot;data.zip\u0026quot;, buff.Bytes(), os.ModePerm) if err != nil { panic(err) } // è§£å‹ç¼©å†…å®¹ zipR, err := zip.OpenReader(\u0026quot;data.zip\u0026quot;) if err != nil { panic(err) } for _, file := range zipR.File { fmt.Println(\u0026quot;File \u0026quot; + file.Name + \u0026quot; contains:\u0026quot;) r, err := file.Open() if err != nil { log.Fatal(err) } _, err = io.Copy(os.Stdout, r) if err != nil { panic(err) } err = r.Close() if err != nil { panic(err) } fmt.Println() } } $ go run main.go File newfile.txt contains: This is my file content åŸç† å†…ç½®åŒ…zipåŒ…å«NewWriterå’ŒNewReaderå‡½æ•°ï¼Œç”¨äºåˆ›å»ºzip.Writerä»¥è¿›è¡Œå‹ç¼©ï¼Œzip.Readerç”¨äºè§£å‹ç¼©ã€‚\nZIPæ–‡ä»¶çš„æ¯ä¸ªè®°å½•éƒ½æ˜¯ä½¿ç”¨zip.Writerçš„Createæ–¹æ³•åˆ›å»ºçš„ã€‚ ç„¶åè¿”å›Writerç¼–å†™å†…å®¹æ­£æ–‡ã€‚\nè¦è§£å‹ç¼©æ–‡ä»¶ï¼ŒOpenReaderå‡½æ•°ç”¨äºåˆ›å»ºå‹ç¼©æ–‡ä»¶ä¸­è®°å½•çš„ReadCloserã€‚ åˆ›å»ºçš„ReaderCloserçš„Fileå­—æ®µæ˜¯zip.FileæŒ‡é’ˆçš„ä¸€éƒ¨åˆ†ã€‚ é€šè¿‡è°ƒç”¨Openæ–¹æ³•å¹¶è¯»å–è¿”å›çš„ReadCloseræ¥è·å–æ–‡ä»¶çš„å†…å®¹ã€‚\nå¯ä»¥é€šè¿‡Createæ–¹æ³•ä¸­æ·»åŠ æ–œæ æ¥åˆ›å»ºæ–‡ä»¶å¤¹ã€‚ ä¾‹å¦‚folder/newfile.txtã€‚\n","id":39,"section":"posts","summary":"\u003cp\u003eZIPå‹ç¼©æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å‹ç¼©æ ¼å¼ã€‚é€šå¸¸ä½¿ç”¨åœºæ™¯æ˜¯å°†æ–‡ä»¶é›†æ‰“åŒ…ä¸ºZIPæ ¼å¼ï¼Œæˆ–è€…ï¼Œå°†å‹ç¼©æ–‡ä»¶è§£å‹ç¼©ã€‚æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“ä»¥ç¼–ç¨‹æ–¹å¼å¤„ç†ZIPæ–‡ä»¶ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¯»å†™ZIPæ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/06/03/go-standard-library-by-read-and-write-zip-files.html","year":"2019"},{"content":"è¿›ç¨‹ä¹‹é—´çš„ç®¡é“æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºä½œä¸ºå…¶ä»–è¿›ç¨‹çš„è¾“å…¥çš„ç®€å•æ–¹æ³•ã€‚è¿™å¯ä»¥åœ¨Goä¸­æ‰§è¡Œç›¸åŒçš„æ¦‚å¿µï¼Œä¾‹å¦‚ï¼Œå°†æ•°æ®ä»ä¸€ä¸ªå¥—æ¥å­—ä¼ è¾“åˆ°å¦ä¸€ä¸ªå¥—æ¥å­—ï¼Œä»¥åˆ›å»ºéš§é“è¿æ¥ã€‚æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨Goå†…ç½®åº“åˆ›å»ºç®¡é“ã€‚\nwriterå’Œreaderä¹‹é—´çš„ç®¡é“ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ è¿›ç¨‹ä¹‹é—´çš„ç®¡é“æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºä½œä¸ºå…¶ä»–è¿›ç¨‹çš„è¾“å…¥çš„ç®€å•æ–¹æ³•ã€‚è¿™å¯ä»¥åœ¨Goä¸­æ‰§è¡Œç›¸åŒçš„æ¦‚å¿µï¼Œä¾‹å¦‚ï¼Œå°†æ•°æ®ä»ä¸€ä¸ªå¥—æ¥å­—ä¼ è¾“åˆ°å¦ä¸€ä¸ªå¥—æ¥å­—ï¼Œä»¥åˆ›å»ºéš§é“è¿æ¥ã€‚æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨Goå†…ç½®åº“åˆ›å»ºç®¡é“ã€‚\nå®ç° package main import ( \u0026quot;io\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/exec\u0026quot; ) func main() { pReader, pWriter := io.Pipe() cmd := exec.Command(\u0026quot;echo\u0026quot;, \u0026quot;Hello Go!\\nThis is example\u0026quot;) cmd.Stdout = pWriter go func() { defer pReader.Close() if _, err := io.Copy(os.Stdout, pReader); err != nil { log.Fatal(err) } }() if err := cmd.Run(); err != nil { log.Fatal(err) } } $ go run main.go Hello Go! This is example åŸç† io.Pipeå‡½æ•°åˆ›å»ºå†…å­˜ç®¡é“å¹¶è¿”å›ç®¡é“çš„ä¸¤ç«¯ï¼Œä¸€ä¾§æ˜¯PipeReaderï¼Œå¦ä¸€ä¾§æ˜¯PipeWriterã€‚ æ¯ä¸ªWriteåˆ°PipeWriteréƒ½è¢«é˜»å¡ï¼Œç›´åˆ°å¦ä¸€ç«¯è¢«Readæ¶ˆè€—ä¸ºæ­¢ã€‚\nè¯¥ç¤ºä¾‹æ˜¾ç¤ºä»æ‰§è¡Œçš„å‘½ä»¤åˆ°çˆ¶ç¨‹åºçš„æ ‡å‡†è¾“å‡ºçš„ç®¡é“è¾“å‡ºã€‚é€šè¿‡å°†pWriteråˆ†é…ç»™cmd.Stdoutï¼Œå­è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºè¢«å†™å…¥ç®¡é“ï¼Œgoroutineä¸­çš„io.Copyé€šè¿‡å°†æ•°æ®å¤åˆ¶åˆ°os.Stdoutæ¥æ¶ˆè€—å†™å…¥çš„æ•°æ®ã€‚\n","id":40,"section":"posts","summary":"\u003cp\u003eè¿›ç¨‹ä¹‹é—´çš„ç®¡é“æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºä½œä¸ºå…¶ä»–è¿›ç¨‹çš„è¾“å…¥çš„ç®€å•æ–¹æ³•ã€‚è¿™å¯ä»¥åœ¨Goä¸­æ‰§è¡Œç›¸åŒçš„æ¦‚å¿µï¼Œä¾‹å¦‚ï¼Œå°†æ•°æ®ä»ä¸€ä¸ªå¥—æ¥å­—ä¼ è¾“åˆ°å¦ä¸€ä¸ªå¥—æ¥å­—ï¼Œä»¥åˆ›å»ºéš§é“è¿æ¥ã€‚æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨Goå†…ç½®åº“åˆ›å»ºç®¡é“ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹writerå’Œreaderä¹‹é—´çš„ç®¡é“","uri":"https://www.ganymedenil.com/2019/06/02/go-standard-library-by-pipe-between-writer-and-reader.html","year":"2019"},{"content":"å½“æ‚¨éœ€è¦å°†ç›¸åŒçš„è¾“å‡ºå†™å…¥å¤šä¸ªç›®æ ‡æ—¶ï¼Œå†…ç½®åŒ…ä¸­å¯ä»¥æä¾›å¸®åŠ©ã€‚æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•åŒæ—¶å®ç°å¤šä¸ªç›®æ ‡çš„å†™å…¥ã€‚\nä¸€æ¬¡å†™å…¥å¤šä¸ªwriters Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ å½“æ‚¨éœ€è¦å°†ç›¸åŒçš„è¾“å‡ºå†™å…¥å¤šä¸ªç›®æ ‡æ—¶ï¼Œå†…ç½®åŒ…ä¸­å¯ä»¥æä¾›å¸®åŠ©ã€‚æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•åŒæ—¶å®ç°å¤šä¸ªç›®æ ‡çš„å†™å…¥ã€‚\nå®ç° package main import \u0026quot;io\u0026quot; import \u0026quot;bytes\u0026quot; import \u0026quot;os\u0026quot; import \u0026quot;fmt\u0026quot; func main() { buf := bytes.NewBuffer([]byte{}) f, err := os.OpenFile(\u0026quot;sample.txt\u0026quot;, os.O_CREATE|os.O_RDWR, os.ModePerm) if err != nil { panic(err) } wr := io.MultiWriter(buf, f) _, err = io.WriteString(wr, \u0026quot;Hello, Go is awesome!\u0026quot;) if err != nil { panic(err) } fmt.Println(\u0026quot;Content of buffer: \u0026quot; + buf.String()) } $ go run main.go Content of buffer: Hello, Go is awesome! åŸç† ioåŒ…ä¸­åŒ…å«MultiWriterå‡½æ•°å®ƒå…·æœ‰å¯å˜å‚æ•°çš„Writersã€‚ å½“è°ƒç”¨Writerä¸Šçš„Writeæ–¹æ³•æ—¶ï¼Œæ•°æ®å°†å†™å…¥æ‰€æœ‰åº•å±‚Writerã€‚\n","id":41,"section":"posts","summary":"\u003cp\u003eå½“æ‚¨éœ€è¦å°†ç›¸åŒçš„è¾“å‡ºå†™å…¥å¤šä¸ªç›®æ ‡æ—¶ï¼Œå†…ç½®åŒ…ä¸­å¯ä»¥æä¾›å¸®åŠ©ã€‚æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•åŒæ—¶å®ç°å¤šä¸ªç›®æ ‡çš„å†™å…¥ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ä¸€æ¬¡å†™å…¥å¤šä¸ªwriters","uri":"https://www.ganymedenil.com/2019/06/02/go-standard-library-by-write-multiple-writers-at-once.html","year":"2019"},{"content":"æœ¬æ–‡è®²è§£äº†å¦‚ä½•ä»¥äºŒè¿›åˆ¶å½¢å¼ç¼–å†™å’Œè¯»å–ä»»ä½•ç±»å‹ã€‚\nè¯»å†™äºŒè¿›åˆ¶æ•°æ® Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡è®²è§£äº†å¦‚ä½•ä»¥äºŒè¿›åˆ¶å½¢å¼ç¼–å†™å’Œè¯»å–ä»»ä½•ç±»å‹ã€‚\nå®ç° package main import ( \u0026quot;bytes\u0026quot; \u0026quot;encoding/binary\u0026quot; \u0026quot;fmt\u0026quot; ) func main() { // Writing binary values buf := bytes.NewBuffer([]byte{}) if err := binary.Write(buf, binary.BigEndian, 1.004); err != nil { panic(err) } if err := binary.Write(buf, binary.BigEndian, []byte(\u0026quot;Hello\u0026quot;)); err != nil { panic(err) } // Reading the written values var num float64 if err := binary.Read(buf, binary.BigEndian, \u0026amp;num); err != nil { panic(err) } fmt.Printf(\u0026quot;float64: %.3f\\n\u0026quot;, num) greeting := make([]byte, 5) if err := binary.Read(buf, binary.BigEndian, \u0026amp;greeting); err != nil { panic(err) } fmt.Printf(\u0026quot;string: %s\\n\u0026quot;, string(greeting)) } $ go run main.go float64: 1.004 string: Hello åŸç† å¯ä»¥ä½¿ç”¨encoding/binaryåŒ…å†™å…¥äºŒè¿›åˆ¶æ•°æ®ã€‚ Writeå‡½æ•°ä½¿ç”¨Writerå†™å…¥æ•°æ®çš„ä½ç½®ï¼Œå­—èŠ‚é¡ºåºï¼ˆBigEndian/LittleEndianï¼‰ï¼Œæœ€åå†™å…¥è¦å†™å…¥Writerçš„å€¼ã€‚\nä¸ºäº†æ¨¡æ‹Ÿè¯»å–äºŒè¿›åˆ¶æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨readå‡½æ•°ã€‚æ³¨æ„ï¼Œä»äºŒè¿›åˆ¶æºè¯»å–æ•°æ®å¹¶æ²¡æœ‰ä»€ä¹ˆç¥å¥‡ä¹‹å¤„ã€‚ä½ éœ€è¦ç¡®å®šä»Readerä¸­è·å–çš„æ˜¯ä»€ä¹ˆæ•°æ®ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å¯ä»¥å°†æ•°æ®è·å–åˆ°é€‚åˆè¯¥å¤§å°çš„ä»»ä½•ç±»å‹ã€‚\n","id":42,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡è®²è§£äº†å¦‚ä½•ä»¥äºŒè¿›åˆ¶å½¢å¼ç¼–å†™å’Œè¯»å–ä»»ä½•ç±»å‹ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¯»å†™äºŒè¿›åˆ¶æ•°æ®","uri":"https://www.ganymedenil.com/2019/06/02/go-standard-library-by-read-and-write-binary-data.html","year":"2019"},{"content":"åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦ä»æ–‡ä»¶ä¸­çš„ç‰¹å®šä½ç½®è¯»å–æˆ–å†™å…¥ï¼Œä¾‹å¦‚ç´¢å¼•æ–‡ä»¶ã€‚æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨å¹³é¢æ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ä½ç½®æœç´¢ã€‚\nåœ¨æ–‡ä»¶ä¸­å¯»æ‰¾ä½ç½® Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦ä»æ–‡ä»¶ä¸­çš„ç‰¹å®šä½ç½®è¯»å–æˆ–å†™å…¥ï¼Œä¾‹å¦‚ç´¢å¼•æ–‡ä»¶ã€‚æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨å¹³é¢æ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ä½ç½®æœç´¢ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶flatfile.txtï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n123.Jun.......Wong...... 12..Novak.....Jurgen.... 10..Thomas....Sohlich... åˆ›å»ºæ–‡ä»¶fileseek.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;errors\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) const lineLegth = 25 func main() { f, e := os.OpenFile(\u0026quot;flatfile.txt\u0026quot;, os.O_RDWR|os.O_CREATE, os.ModePerm) if e != nil { panic(e) } defer f.Close() fmt.Println(readRecords(2, \u0026quot;last\u0026quot;, f)) if err := writeRecord(2, \u0026quot;first\u0026quot;, \u0026quot;Radomir\u0026quot;, f); err != nil { panic(err) } fmt.Println(readRecords(2, \u0026quot;first\u0026quot;, f)) if err := writeRecord(10, \u0026quot;first\u0026quot;, \u0026quot;Andrew\u0026quot;, f); err != nil { panic(err) } fmt.Println(readRecords(10, \u0026quot;first\u0026quot;, f)) fmt.Println(readLine(2, f)) } func readLine(line int, f *os.File) (string, error) { lineBuffer := make([]byte, 24) f.Seek(int64(line*lineLegth), 0) _, err := f.Read(lineBuffer) return string(lineBuffer), err } func writeRecord(line int, column, dataStr string, f *os.File)error { definedLen := 10 position := int64(line * lineLegth) switch column { case \u0026quot;id\u0026quot;: definedLen = 4 case \u0026quot;first\u0026quot;: position += 4 case \u0026quot;last\u0026quot;: position += 14 default: return errors.New(\u0026quot;Column not defined\u0026quot;) } if len([]byte(dataStr)) \u0026gt; definedLen { return fmt.Errorf(\u0026quot;Maximum length for '%s' is %d\u0026quot;, column, definedLen) } data := make([]byte, definedLen) for i := range data { data[i] = '.' } copy(data, []byte(dataStr)) _, err := f.WriteAt(data, position) return err } func readRecords(line int, column string, f *os.File)(string, error) { lineBuffer := make([]byte, 24) f.ReadAt(lineBuffer, int64(line*lineLegth)) var retVal string switch column { case \u0026quot;id\u0026quot;: return string(lineBuffer[:3]), nil case \u0026quot;first\u0026quot;: return string(lineBuffer[4:13]), nil case \u0026quot;last\u0026quot;: return string(lineBuffer[14:23]), nil } return retVal, errors.New(\u0026quot;Column not defined\u0026quot;) } $ go run fileseek.go Sohlich.. \u0026lt;nil\u0026gt; Radomir.. \u0026lt;nil\u0026gt; Andrew... \u0026lt;nil\u0026gt; 10..Radomir...Sohlich... \u0026lt;nil\u0026gt; æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åå…­è¿›åˆ¶çœ‹ä¸€ä¸‹flatfile.txtï¼Œä½¿ç”¨xxd flatfile.txtã€‚\n$ xxd flatfile.txt 00000000: 3132 332e 4a75 6e2e 2e2e 2e2e 2e2e 576f 123.Jun.......Wo 00000010: 6e67 2e2e 2e2e 2e2e 0a31 322e 2e4e 6f76 ng.......12..Nov 00000020: 616b 2e2e 2e2e 2e4a 7572 6765 6e2e 2e2e ak.....Jurgen... 00000030: 2e0a 3130 2e2e 5261 646f 6d69 722e 2e2e ..10..Radomir... 00000040: 536f 686c 6963 682e 2e2e 0000 0000 0000 Sohlich......... 00000050: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 00000060: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 00000070: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 00000080: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 00000090: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 000000a0: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 000000b0: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 000000c0: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 000000d0: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 000000e0: 0000 0000 0000 0000 0000 0000 0000 0000 ................ 000000f0: 0000 0000 0000 0000 0000 0000 0000 416e ..............An 00000100: 6472 6577 2e2e 2e2e drew.... åŸç† å‰é¢çš„ç¤ºä¾‹ä½¿ç”¨å¹³é¢æ–‡ä»¶å±•ç¤ºäº†å¦‚ä½•åœ¨æ–‡ä»¶ä¸­è¿›è¡Œä½ç½®æŸ¥æ‰¾ã€è¯»å–å’Œå†™å…¥ã€‚é€šå¸¸ï¼Œè¦ç§»åŠ¨Fileå½“å‰æŒ‡é’ˆçš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨Seekæ–¹æ³•ã€‚å®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ä½ç½®å’Œå¦‚ä½•è®¡ç®—ä½ç½®ï¼Œ0 -ç›¸å¯¹äºæ–‡ä»¶åŸç‚¹ï¼Œ1 -ç›¸å¯¹äºå½“å‰ä½ç½®ï¼Œ2 -ç›¸å¯¹äºæ–‡ä»¶ç»“æŸã€‚è¿™æ ·å°±å¯ä»¥åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨å…‰æ ‡ã€‚åœ¨å‰é¢ä»£ç ä¸­çš„readLineå‡½æ•°çš„å®ç°ä¸­ä½¿ç”¨äº†Seekæ–¹æ³•ã€‚\nå¹³é¢æ–‡ä»¶æ˜¯å­˜å‚¨æ•°æ®çš„æœ€åŸºæœ¬å½¢å¼ã€‚å…¶è®°å½•æ ¼å¼ä¸€èˆ¬å…·æœ‰å›ºå®šçš„é•¿åº¦ï¼Œå¹¶ä¸”æ¯ä¸€æ¡è®°å½•çš„æ ¼å¼ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚ç¤ºä¾‹ä¸­çš„å¹³é¢æ–‡ä»¶çš„ç»“æ„æ˜¯ï¼šID-4ä¸ªå­—ç¬¦ï¼ŒFirstName-10ä¸ªå­—ç¬¦ï¼ŒLastName-10ä¸ªå­—ç¬¦ã€‚ æ•´ä¸ªè®°å½•é•¿24ä¸ªå­—ç¬¦ï¼Œä»¥ç¬¬25ä¸ªå­—ç¬¦çš„æ¢è¡Œç¬¦ç»“æŸã€‚\nos.Fileè¿˜åŒ…å«ReadAtå’ŒWriteAtæ–¹æ³•ã€‚è¿™äº›æ–¹æ³•å°†å­—èŠ‚æ•°æ®å†™å…¥/è¯»å–ä»ä½•å¤„å¼€å§‹çš„åç§»é‡ã€‚è¿™æ ·å¯ä»¥å°†å†™å’Œè¯»ç®€åŒ–åˆ°æ–‡ä»¶ä¸­çš„æŸä¸ªä½ç½®ã€‚\næ³¨æ„ï¼Œæœ¬ä¾‹å‡è®¾æ¯ä¸ªruneåªæœ‰ä¸€ä¸ªå­—èŠ‚ï¼Œå¯¹äºç‰¹æ®Šå­—ç¬¦ï¼Œä¸å¿…ä¸ºtrueï¼Œä»¥æ­¤ç±»æ¨ã€‚\n","id":43,"section":"posts","summary":"\u003cp\u003eåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦ä»æ–‡ä»¶ä¸­çš„ç‰¹å®šä½ç½®è¯»å–æˆ–å†™å…¥ï¼Œä¾‹å¦‚ç´¢å¼•æ–‡ä»¶ã€‚æœ¬æ–‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨å¹³é¢æ–‡ä»¶æ“ä½œä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ä½ç½®æœç´¢ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹åœ¨æ–‡ä»¶ä¸­å¯»æ‰¾ä½ç½®","uri":"https://www.ganymedenil.com/2019/06/02/go-standard-library-by-find-the-location-in-the-file.html","year":"2019"},{"content":"ä¸åŒçš„è¾“å…¥æºå¯ä»¥ä½¿ç”¨ä¸åŒçš„å­—ç¬¦é›†ï¼Œç”¨Goå¼€å‘çš„åº”ç”¨ä¸­ä¹Ÿä¸ä¾‹å¤–ã€‚ç°åœ¨è®¸å¤šç”¨æˆ·éƒ½ä½¿ç”¨çš„Windowsç³»ç»Ÿï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„ç³»ç»Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoå¸Œæœ›ç¨‹åºä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç éƒ½ä¸ºUTF-8ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™å¿…é¡»å¯¹ç»™å®šçš„å­—ç¬¦é›†è¿›è¡Œè§£ç ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ­£ç¡®å¤„ç†å­—ç¬¦ä¸²ã€‚æœ¬æ–‡å°†ä»‹ç»éUTF-8çš„å­—ç¬¦é›†å¦‚ä½•è¿›è¡Œæ–‡ä»¶è¯»å†™ã€‚\nè¯»/å†™ä¸åŒçš„å­—ç¬¦é›† Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ä¸åŒçš„è¾“å…¥æºå¯ä»¥ä½¿ç”¨ä¸åŒçš„å­—ç¬¦é›†ï¼Œç”¨Goå¼€å‘çš„åº”ç”¨ä¸­ä¹Ÿä¸ä¾‹å¤–ã€‚ç°åœ¨è®¸å¤šç”¨æˆ·éƒ½ä½¿ç”¨çš„Windowsç³»ç»Ÿï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„ç³»ç»Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoå¸Œæœ›ç¨‹åºä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç éƒ½ä¸ºUTF-8ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™å¿…é¡»å¯¹ç»™å®šçš„å­—ç¬¦é›†è¿›è¡Œè§£ç ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ­£ç¡®å¤„ç†å­—ç¬¦ä¸²ã€‚æœ¬æ–‡å°†ä»‹ç»éUTF-8çš„å­—ç¬¦é›†å¦‚ä½•è¿›è¡Œæ–‡ä»¶è¯»å†™ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;golang.org/x/text/encoding/charmap\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;os\u0026quot; ) func main() { // å°†å­—ç¬¦ä¸²ç¼–ç ä¸ºWindows-1252å¹¶å†™å…¥æ–‡ä»¶ encoder := charmap.Windows1252.NewEncoder() s, e := encoder.String(\u0026quot;This is sample text with runes Å \u0026quot;) if e != nil { panic(e) } ioutil.WriteFile(\u0026quot;example.txt\u0026quot;, []byte(s), os.ModePerm) // è§£ç ä¸ºUTF-8 f, e := os.Open(\u0026quot;example.txt\u0026quot;) if e != nil { panic(e) } defer f.Close() decoder := charmap.Windows1252.NewDecoder() reader := decoder.Reader(f) b, err := ioutil.ReadAll(reader) if err != nil { panic(err) } fmt.Println(string(b)) } $ go run main.go This is sample text with runes Å  åŸç† golang.org/x/text/encoding/charmapåŒ…ä¸­åŒ…å«å¹¿æ³›ä½¿ç”¨çš„å­—ç¬¦é›†çš„Charmapç±»å‹æŒ‡é’ˆå¸¸é‡ã€‚ Charmapç±»å‹æä¾›äº†ä¸ºç»™å®šå­—ç¬¦é›†åˆ›å»ºç¼–ç å™¨å’Œè§£ç å™¨çš„æ–¹æ³•ã€‚ Encoderåˆ›å»ºç¼–ç Writerï¼Œå®ƒå°†å†™å…¥çš„å­—èŠ‚ç¼–ç åˆ°æ‰€é€‰çš„å­—ç¬¦é›†ã€‚ ç±»ä¼¼åœ°ï¼ŒDecoderå¯ä»¥åˆ›å»ºè§£ç Readerï¼Œå…¶å°†è¯»å–åˆ°çš„æ‰€æœ‰æ•°æ®è§£ç åˆ°æ‰€é€‰çš„å­—ç¬¦é›†ã€‚\n","id":44,"section":"posts","summary":"\u003cp\u003eä¸åŒçš„è¾“å…¥æºå¯ä»¥ä½¿ç”¨ä¸åŒçš„å­—ç¬¦é›†ï¼Œç”¨Goå¼€å‘çš„åº”ç”¨ä¸­ä¹Ÿä¸ä¾‹å¤–ã€‚ç°åœ¨è®¸å¤šç”¨æˆ·éƒ½ä½¿ç”¨çš„Windowsç³»ç»Ÿï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„ç³»ç»Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoå¸Œæœ›ç¨‹åºä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç éƒ½ä¸ºUTF-8ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™å¿…é¡»å¯¹ç»™å®šçš„å­—ç¬¦é›†è¿›è¡Œè§£ç ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ­£ç¡®å¤„ç†å­—ç¬¦ä¸²ã€‚æœ¬æ–‡å°†ä»‹ç»éUTF-8çš„å­—ç¬¦é›†å¦‚ä½•è¿›è¡Œæ–‡ä»¶è¯»å†™ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¯»/å†™ä¸åŒçš„å­—ç¬¦é›†","uri":"https://www.ganymedenil.com/2019/05/31/go-standard-library-by-read-write-different-character-sets.html","year":"2019"},{"content":"åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Stdinæ¥è¯»æ•°æ®è¿˜æœ‰å¦‚ä½•è¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œç»™å¤§å®¶å±•ç¤ºå¦‚ä½•ä»æ–‡ä»¶è¯»å…¥å­—ç¬¦ä¸²ã€‚\nä»æ–‡ä»¶è¯»å…¥å­—ç¬¦ä¸² Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Stdinæ¥è¯»æ•°æ®è¿˜æœ‰å¦‚ä½•è¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œç»™å¤§å®¶å±•ç¤ºå¦‚ä½•ä»æ–‡ä»¶è¯»å…¥å­—ç¬¦ä¸²ã€‚\nå®ç° åˆ›å»ºtmpç›®å½•ï¼Œåœ¨tmpç›®å½•ä¸­åˆ›å»ºfile.txtæ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶å†…å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š\nè¿™æ˜¯æ–‡ä»¶å†…å®¹ åˆ›å»ºæ–‡ä»¶readfile.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bufio\u0026quot; \u0026quot;bytes\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;os\u0026quot; ) func main() { fmt.Println(\u0026quot;### ç”¨readerè¯»å–æ–‡ä»¶ ###\u0026quot;) f, err := os.Open(\u0026quot;temp/file.txt\u0026quot;) if err != nil { panic(err) } defer f.Close() // ç”¨readerè¯»å–æ–‡ä»¶ wr := bytes.Buffer{} sc := bufio.NewScanner(f) for sc.Scan() { wr.WriteString(sc.Text()) } fmt.Println(wr.String()) fmt.Println(\u0026quot;### ReadFile ###\u0026quot;) // å¯¹äºè¾ƒå°çš„æ–‡ä»¶ fContent, err := ioutil.ReadFile(\u0026quot;temp/file.txt\u0026quot;) if err != nil { panic(err) } fmt.Println(string(fContent)) } $ go run readfile.go ### ç”¨readerè¯»å–æ–‡ä»¶ ### è¿™æ˜¯æ–‡ä»¶å†…å®¹ ### ReadFile ### è¿™æ˜¯æ–‡ä»¶å†…å®¹ åŸç† ä»æ–‡ä»¶ä¸­è¯»å–å¾ˆç®€å•ï¼Œå› ä¸ºFileç±»å‹å®ç°äº†Reader å’ŒWriter æ¥å£ã€‚è¿™æ ·ï¼Œæ‰€æœ‰é€‚ç”¨äºReaderæ¥å£çš„å‡½æ•°å’Œæ–¹æ³•éƒ½é€‚ç”¨äºFileç±»å‹ã€‚ä¸Šé¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Scannerè¯»å–æ–‡ä»¶ï¼Œå¹¶å°†å†…å®¹å†™å…¥å­—èŠ‚ç¼“å†²åŒº(è¿™æ¯”ç›´æ¥é€šè¿‡å­—ç¬¦ä¸²è¿æ¥æ€§èƒ½æ›´å¥½)ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥æ§åˆ¶ä»æ–‡ä»¶è¯»å–çš„å†…å®¹é‡äº†ã€‚\nä½¿ç”¨ioutil.ReadFileçš„ç¬¬äºŒç§æ–¹æ³•æ›´ç®€å•ï¼Œä½†åº”è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šè¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚ è¯·è®°ä½ï¼Œæ–‡ä»¶å¯èƒ½å¾ˆå¤§ï¼Œå¯èƒ½ä¼šå¨èƒåˆ°åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ã€‚\n","id":45,"section":"posts","summary":"\u003cp\u003eåœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨\u003ccode\u003eStdin\u003c/code\u003eæ¥è¯»æ•°æ®è¿˜æœ‰å¦‚ä½•è¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œç»™å¤§å®¶å±•ç¤ºå¦‚ä½•ä»æ–‡ä»¶è¯»å…¥å­—ç¬¦ä¸²ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ä»æ–‡ä»¶è¯»å…¥å­—ç¬¦ä¸²","uri":"https://www.ganymedenil.com/2019/05/31/go-standard-library-by-read-string-from-file.html","year":"2019"},{"content":"å­˜å‚¨æˆ–è¯»å–æ•°æ®çš„æ–‡ä»¶è®¿é—®æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ“ä½œã€‚æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“æŒ‰åç§°å’Œè·¯å¾„æ‰“å¼€æ–‡ä»¶ã€‚\næŒ‰åç§°æ‰“å¼€æ–‡ä»¶ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ å­˜å‚¨æˆ–è¯»å–æ•°æ®çš„æ–‡ä»¶è®¿é—®æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ“ä½œã€‚æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“æŒ‰åç§°å’Œè·¯å¾„æ‰“å¼€æ–‡ä»¶ã€‚\nå®ç° åˆ›å»ºtmpç›®å½•ï¼Œåœ¨tmpç›®å½•ä¸­åˆ›å»ºfile.txtæ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶å†…å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š\nè¿™æ˜¯æ–‡ä»¶å†…å®¹ åˆ›å»ºæ–‡ä»¶openfile.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;os\u0026quot; ) func main() { f, err := os.Open(\u0026quot;temp/file.txt\u0026quot;) if err != nil { panic(err) } c, err := ioutil.ReadAll(f) if err != nil { panic(err) } fmt.Printf(\u0026quot;### æ–‡ä»¶å†…å®¹ ###\\n%s\\n\u0026quot;, string(c)) f.Close() f, err = os.OpenFile(\u0026quot;temp/test.txt\u0026quot;, os.O_CREATE|os.O_RDWR, os.ModePerm) if err != nil { panic(err) } io.WriteString(f, \u0026quot;Test string\u0026quot;) f.Close() } $ go run openfile.go ### æ–‡ä»¶å†…å®¹ ### è¿™æ˜¯æ–‡ä»¶å†…å®¹ åŸç† osåŒ…æä¾›äº†ä¸€ç§æ‰“å¼€æ–‡ä»¶çš„ç®€å•æ–¹æ³•ã€‚Openå‡½æ•°ä»¥åªè¯»æ¨¡å¼æŒ‰è·¯å¾„æ‰“å¼€æ–‡ä»¶ã€‚å¦ä¸€ä¸ªå‡½æ•°OpenFileåŠŸèƒ½æ›´å¼ºå¤§ï¼Œå®ƒå¯ä»¥ä½¿ç”¨æ–‡ä»¶çš„è·¯å¾„ã€æ ‡å¿—å’Œæƒé™æ¥æ‰“å¼€æ–‡ä»¶ã€‚\næ ‡å¿—å¸¸é‡åœ¨osåŒ…ä¸­å®šä¹‰ï¼Œä½ å¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶æˆ–æ“ä½œç¬¦|ç»„åˆå®ƒä»¬ã€‚æƒé™ç”±osåŒ…å¸¸é‡(ä¾‹å¦‚os.ModePerm)æˆ–è€…ä½¿ç”¨æ•°å­—è¡¨ç¤ºæ³•ï¼Œå¦‚0777(æƒé™:-rwxrwxrwx)æ¥è®¾ç½®ã€‚\n","id":46,"section":"posts","summary":"\u003cp\u003eå­˜å‚¨æˆ–è¯»å–æ•°æ®çš„æ–‡ä»¶è®¿é—®æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ“ä½œã€‚æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ ‡å‡†åº“æŒ‰åç§°å’Œè·¯å¾„æ‰“å¼€æ–‡ä»¶ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æŒ‰åç§°æ‰“å¼€æ–‡ä»¶","uri":"https://www.ganymedenil.com/2019/05/30/go-standard-library-by-open-file-by-name.html","year":"2019"},{"content":"æ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æ–‡ä»¶æè¿°ç¬¦ã€‚stdinä½œä¸ºè¿›ç¨‹çš„è¾“å…¥ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä»stdinè¯»å–æ•°æ®ã€‚\nè¯»å–æ ‡å‡†è¾“å…¥ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æ–‡ä»¶æè¿°ç¬¦ã€‚stdinä½œä¸ºè¿›ç¨‹çš„è¾“å…¥ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä»stdinè¯»å–æ•°æ®ã€‚\nå®ç° 1.åˆ›å»ºæ–‡ä»¶fmt.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import \u0026quot;fmt\u0026quot; func main() { var name string fmt.Println(\u0026quot;ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ\u0026quot;) fmt.Scanf(\u0026quot;%s\\n\u0026quot;, \u0026amp;name) var age int fmt.Println(\u0026quot;ä½ å‡ å²ï¼Ÿ\u0026quot;) fmt.Scanf(\u0026quot;%d\\n\u0026quot;, \u0026amp;age) fmt.Printf(\u0026quot;ä½ å¥½! %s, ä½ çš„å¹´é¾„æ˜¯ %d\\n\u0026quot;, name, age) } $ go run fmt.go ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ GanymedeNil ä½ å‡ å²ï¼Ÿ 25 ä½ å¥½! GanymedeNil, ä½ çš„å¹´é¾„æ˜¯ 25 2.åˆ›å»ºæ–‡ä»¶scanner.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bufio\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { // scanèƒ½å¤ŸæŒ‰è¡Œæ‰«æè¾“å…¥ sc := bufio.NewScanner(os.Stdin) for sc.Scan() { txt := sc.Text() fmt.Printf(\u0026quot;Echo: %s\\n\u0026quot;, txt) } } $ go run scanner.go Hello Echo: Hello 3.åˆ›å»ºæ–‡ä»¶reader.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { for { data := make([]byte, 8) n, err := os.Stdin.Read(data) if err == nil \u0026amp;\u0026amp; n \u0026gt; 0 { process(data) } else { break } } } func process(data []byte) { fmt.Printf(\u0026quot;Received: %X %s\\n\u0026quot;, data, string(data)) } $ echo 'Go is awesome!' | go run reader.go Received: 476F206973206177 Go is aw Received: 65736F6D65210A00 esome! åŸç† Goè¿›ç¨‹çš„stdinå¯ä»¥é€šè¿‡osåŒ…çš„Stdinè·å–ã€‚ å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ç°Readeræ¥å£çš„Fileç±»å‹ã€‚ ä»Readeré‡Œè¯»å–æ˜¯éå¸¸å®¹æ˜“çš„ã€‚ å‰é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä»Stdinè¯»å–çš„ä¸‰ç§éå¸¸å¸¸è§çš„æ–¹æ³•ã€‚\nç¬¬ä¸€ä¸ªä¾‹å­æ¼”ç¤ºäº†fmtåŒ…çš„ä½¿ç”¨ï¼Œå®ƒæä¾›äº†Scanã€Scanfå’ŒScanlnå‡½æ•°ã€‚Scanfå‡½æ•°å°†è¾“å…¥å†™å…¥ç»™å®šå˜é‡ã€‚Scanfçš„ä¼˜ç‚¹æ˜¯ä½ å¯ä»¥ç¡®å®šæ‰«æå€¼çš„æ ¼å¼ã€‚Scanå‡½æ•°åªæ˜¯å°†è¾“å…¥å†™å…¥å˜é‡ï¼ˆæ²¡æœ‰é¢„å®šä¹‰æ ¼å¼ï¼‰ï¼ŒScanlné¡¾åæ€ä¹‰ï¼Œè¯»å–ä»¥æ¢è¡Œç¬¦ç»“æŸçš„è¾“å…¥ã€‚\nScanneræ˜¯ç¬¬äºŒä¸ªä¾‹å­ï¼Œå®ƒæä¾›äº†æ‰«æè¾ƒå¤§è¾“å…¥çš„ä¾¿æ·æ–¹å¼ã€‚Scanner åŒ…å«äº†SplitåŠŸèƒ½ï¼Œé€šè¿‡è¯¥åŠŸèƒ½å¯ä»¥è‡ªå®šä¹‰åˆ†å‰²åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œè¦æ‰«æstdinä¸­çš„å•è¯ï¼Œå¯ä»¥ä½¿ç”¨bufio.ScanWordsä½œä¸ºé¢„å®šä¹‰çš„SplitFuncã€‚\né€šè¿‡Reader APIè¯»å–æ˜¯æœ€åæå‡ºçš„æ–¹æ³•ã€‚ è¿™ä¸ªå¯ä»¥è®©ä½ æ›´å¥½åœ°æ§åˆ¶è¾“å…¥çš„è¯»å–æ–¹å¼ã€‚\n","id":47,"section":"posts","summary":"\u003cp\u003eæ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯æ–‡ä»¶æè¿°ç¬¦ã€‚\u003ccode\u003estdin\u003c/code\u003eä½œä¸ºè¿›ç¨‹çš„è¾“å…¥ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä»\u003ccode\u003estdin\u003c/code\u003eè¯»å–æ•°æ®ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è¯»å–æ ‡å‡†è¾“å…¥","uri":"https://www.ganymedenil.com/2019/05/30/go-standard-library-by-read-standard-input.html","year":"2019"},{"content":"æ¯ä¸ªè¿›ç¨‹éƒ½å„æœ‰ä¸€ä¸ªstdinï¼Œstdoutå’Œ stderræ–‡ä»¶æè¿°ç¬¦ã€‚ä½¿ç”¨çš„æ ‡å‡†æ–¹æ³•æ˜¯stdoutä½œä¸ºè¿›ç¨‹è¾“å‡ºï¼Œstderrä½œä¸ºè¿›ç¨‹é”™è¯¯è¾“å‡ºã€‚ç”±äºè¿™äº›æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œå› æ­¤å†™å…¥æ•°æ®çš„ç›®æ ‡å¯ä»¥æ˜¯ä»æ§åˆ¶å°åˆ°å¥—æ¥å­—çš„ä»»ä½•å†…å®¹ã€‚æœ¬æ–‡å°†å‘Šè¯‰ä½ å¦‚ä½•ç¼–å†™stdoutå’Œstderrã€‚\nç¼–å†™æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æ¯ä¸ªè¿›ç¨‹éƒ½å„æœ‰ä¸€ä¸ªstdinï¼Œstdoutå’Œ stderræ–‡ä»¶æè¿°ç¬¦ã€‚ä½¿ç”¨çš„æ ‡å‡†æ–¹æ³•æ˜¯stdoutä½œä¸ºè¿›ç¨‹è¾“å‡ºï¼Œstderrä½œä¸ºè¿›ç¨‹é”™è¯¯è¾“å‡ºã€‚ç”±äºè¿™äº›æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œå› æ­¤å†™å…¥æ•°æ®çš„ç›®æ ‡å¯ä»¥æ˜¯ä»æ§åˆ¶å°åˆ°å¥—æ¥å­—çš„ä»»ä½•å†…å®¹ã€‚æœ¬æ–‡å°†å‘Šè¯‰ä½ å¦‚ä½•ç¼–å†™stdoutå’Œstderrã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;os\u0026quot; ) func main() { // åªéœ€å†™å­—ç¬¦ä¸² io.WriteString(os.Stdout, \u0026quot;è¿™æ˜¯æ ‡å‡†è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚\\n\u0026quot;) io.WriteString(os.Stderr, \u0026quot;è¿™æ˜¯æ ‡å‡†é”™è¯¯è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚\\n\u0026quot;) // Stdout/errå®ç°äº†writeræ¥å£ buf := []byte{0xAF, 0xFF, 0xFE} for i := 0; i \u0026lt; 200; i++ { if _, e := os.Stdout.Write(buf); e != nil { panic(e) } } // fmtåŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨ fmt.Fprintln(os.Stdout, \u0026quot;\\n\u0026quot;) } $ go run main.go è¿™æ˜¯æ ‡å‡†é”™è¯¯è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚ è¿™æ˜¯æ ‡å‡†è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ åŸç† ä¸å‰æ–‡ä¸­çš„Stdinä¸€æ ·ï¼ŒStdoutå’ŒStderræ˜¯æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™äº›å®ç°äº†Writeræ¥å£ã€‚\nä¸Šé¢çš„ç¤ºä¾‹å±•ç¤ºäº†å‡ ç§æ–¹æ³•å±•ç¤ºäº†å¦‚ä½•é€šè¿‡io.WriteStringå‡½æ•°å†™å…¥è¿™äº›å†…å®¹ï¼Œåˆ†åˆ«æ˜¯ä½¿ç”¨Writer APIä»¥åŠfmtåŒ…å’ŒFprintXXå‡½æ•°ã€‚\n","id":48,"section":"posts","summary":"\u003cp\u003eæ¯ä¸ªè¿›ç¨‹éƒ½å„æœ‰ä¸€ä¸ª\u003ccode\u003estdin\u003c/code\u003eï¼Œ\u003ccode\u003estdout\u003c/code\u003eå’Œ \u003ccode\u003estderr\u003c/code\u003eæ–‡ä»¶æè¿°ç¬¦ã€‚ä½¿ç”¨çš„æ ‡å‡†æ–¹æ³•æ˜¯\u003ccode\u003estdout\u003c/code\u003eä½œä¸ºè¿›ç¨‹è¾“å‡ºï¼Œ\u003ccode\u003estderr\u003c/code\u003eä½œä¸ºè¿›ç¨‹é”™è¯¯è¾“å‡ºã€‚ç”±äºè¿™äº›æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œå› æ­¤å†™å…¥æ•°æ®çš„ç›®æ ‡å¯ä»¥æ˜¯ä»æ§åˆ¶å°åˆ°å¥—æ¥å­—çš„ä»»ä½•å†…å®¹ã€‚æœ¬æ–‡å°†å‘Šè¯‰ä½ å¦‚ä½•ç¼–å†™\u003ccode\u003estdout\u003c/code\u003eå’Œ\u003ccode\u003estderr\u003c/code\u003eã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ç¼–å†™æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯","uri":"https://www.ganymedenil.com/2019/05/29/go-standard-library-by-write-standard-output-and-errors.html","year":"2019"},{"content":"åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¾“å‡º(é€šå¸¸æ˜¯æ•°æ®è¾“å‡º)æ˜¯é€šè¿‡é€‰é¡¹å¡æ–‡æœ¬å®Œæˆçš„ï¼Œè¯¥æ–‡æœ¬åœ¨æ’åˆ—è‰¯å¥½çš„å•å…ƒæ ¼ä¸­æ ¼å¼åŒ–ã€‚è¿™ç§æ ¼å¼å¯ä»¥é€šè¿‡text/tabwriteråŒ…æ¥å®ç°ã€‚è¯¥åŒ…æä¾›äº†Writerè¿‡æ»¤å™¨ï¼Œå®ƒå°†å¸¦æœ‰åˆ¶è¡¨ç¬¦çš„æ–‡æœ¬è½¬æ¢ä¸ºæ ¼å¼æ­£ç¡®çš„è¾“å‡ºã€‚\nå°†æ–‡æœ¬ä¸tabwriterå¯¹é½ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¾“å‡º(é€šå¸¸æ˜¯æ•°æ®è¾“å‡º)æ˜¯é€šè¿‡é€‰é¡¹å¡æ–‡æœ¬å®Œæˆçš„ï¼Œè¯¥æ–‡æœ¬åœ¨æ’åˆ—è‰¯å¥½çš„å•å…ƒæ ¼ä¸­æ ¼å¼åŒ–ã€‚è¿™ç§æ ¼å¼å¯ä»¥é€šè¿‡text/tabwriteråŒ…æ¥å®ç°ã€‚è¯¥åŒ…æä¾›äº†Writerè¿‡æ»¤å™¨ï¼Œå®ƒå°†å¸¦æœ‰åˆ¶è¡¨ç¬¦çš„æ–‡æœ¬è½¬æ¢ä¸ºæ ¼å¼æ­£ç¡®çš„è¾“å‡ºã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶tabwriter.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;text/tabwriter\u0026quot; ) func main() { w := tabwriter.NewWriter(os.Stdout, 15, 0, 1, ' ', tabwriter.AlignRight) fmt.Fprintln(w, \u0026quot;username\\tfirstname\\tlastname\\t\u0026quot;) fmt.Fprintln(w, \u0026quot;sohlich\\tRadomir\\tSohlich\\t\u0026quot;) fmt.Fprintln(w, \u0026quot;novak\\tJohn\\tSmith\\t\u0026quot;) w.Flush() } $ go run tabwriter.go username firstname lastname sohlich Radomir Sohlich novak John Smith åŸç† NewWriterå‡½æ•°è°ƒç”¨é…ç½®çš„å‚æ•°åˆ›å»ºWriterè¿‡æ»¤å™¨ã€‚ æ­¤Writerå†™å…¥çš„æ‰€æœ‰æ•°æ®éƒ½æ ¹æ®å‚æ•°è¿›è¡Œæ ¼å¼åŒ–ã€‚ os.Stdoutåœ¨è¿™é‡Œç”¨äºæ¼”ç¤ºç›®çš„ã€‚\ntext/tabwriteråŒ…è¿˜æä¾›äº†ä¸€äº›é…ç½®é€‰é¡¹ï¼Œä¾‹å¦‚flagå‚æ•°ã€‚ æœ€æœ‰ç”¨çš„æ˜¯tabwriter.AlignRightï¼Œå®ƒå°†ç¼–å†™å™¨é…ç½®ä¸ºåœ¨æ¯åˆ—ä¸­å°†å†…å®¹å¯¹é½ã€‚\n","id":49,"section":"posts","summary":"\u003cp\u003eåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¾“å‡º(é€šå¸¸æ˜¯æ•°æ®è¾“å‡º)æ˜¯é€šè¿‡é€‰é¡¹å¡æ–‡æœ¬å®Œæˆçš„ï¼Œè¯¥æ–‡æœ¬åœ¨æ’åˆ—è‰¯å¥½çš„å•å…ƒæ ¼ä¸­æ ¼å¼åŒ–ã€‚è¿™ç§æ ¼å¼å¯ä»¥é€šè¿‡\u003ccode\u003etext/tabwriter\u003c/code\u003eåŒ…æ¥å®ç°ã€‚è¯¥åŒ…æä¾›äº†\u003ccode\u003eWriter\u003c/code\u003eè¿‡æ»¤å™¨ï¼Œå®ƒå°†å¸¦æœ‰åˆ¶è¡¨ç¬¦çš„æ–‡æœ¬è½¬æ¢ä¸ºæ ¼å¼æ­£ç¡®çš„è¾“å‡ºã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å°†æ–‡æœ¬ä¸tabwriterå¯¹é½","uri":"https://www.ganymedenil.com/2019/05/29/go-standard-library-by-align-text-with-tabwriter.html","year":"2019"},{"content":"æœ¬æ–‡å°†æŒ‡å¯¼ä½ å®Œæˆæ–‡æœ¬æ–‡æ¡£çš„ç¼©è¿›å’Œå–æ¶ˆæ³¨é‡Š ã€‚\nç¼©è¿›æ–‡æœ¬æ–‡æ¡£ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬æ–‡å°†æŒ‡å¯¼ä½ å®Œæˆæ–‡æœ¬æ–‡æ¡£çš„ç¼©è¿›å’Œå–æ¶ˆæ³¨é‡Š ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;strconv\u0026quot; \u0026quot;strings\u0026quot; \u0026quot;unicode\u0026quot; ) func main() { text := \u0026quot;Hi! Go is awesome.\u0026quot; text = Indent(text, 6) fmt.Println(text) text = Unindent(text, 3) fmt.Println(text) text = Unindent(text, 10) fmt.Println(text) text = IndentByRune(text, 10, '.') fmt.Println(text) } // é€šè¿‡ç»™å®šçš„ç¼©è¿›å’Œruneç¼©è¿›ç¼©è¿›è¾“å…¥ func IndentByRune(input string, indent int, r rune) string { return strings.Repeat(string(r), indent) + input } // é€šè¿‡ç»™å®šç¼©è¿›ç¼©è¿›ç¼©è¿›è¾“å…¥ func Indent(input string, indent int) string { padding := indent + len(input) return fmt.Sprintf(\u0026quot;% \u0026quot;+strconv.Itoa(padding)+\u0026quot;s\u0026quot;, input) } // Unindent unindentingè¾“å…¥å­—ç¬¦ä¸²ã€‚å¦‚æœè¾“å…¥ç¼©è¿›å°äºâ€œç¼©è¿›â€ç©ºæ ¼ï¼Œåˆ™åˆ é™¤ä¸¤è€…çš„æœ€å°å€¼ã€‚ func Unindent(input string, indent int) string { count := 0 for _, val := range input { if unicode.IsSpace(val) { count++ } if count == indent || !unicode.IsSpace(val) { break } } return input[count:] } $ go run main.go Hi! Go is awesome. Hi! Go is awesome. Hi! Go is awesome. ..........Hi! Go is awesome. åŸç† ç¼©è¿›å’Œå¡«å……ä¸€æ ·ç®€å•ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä½¿ç”¨äº†ç›¸åŒçš„æ ¼å¼åŒ–é€‰é¡¹ã€‚ç¼©è¿›å®ç°çš„æ›´å…·å¯è¯»æ€§çš„å½¢å¼å¯ä»¥ä½¿ç”¨stringsåŒ…çš„Repeatå‡½æ•°ã€‚å‰é¢ä»£ç ä¸­çš„IndentByRuneå‡½æ•°åº”ç”¨äº†è¿™ç§æ–¹æ³•ã€‚\nåœ¨æœ¬ä¾‹ä¸­ï¼Œå–æ¶ˆç¼©è¿›æ„å‘³ç€åˆ é™¤ç»™å®šçš„å‰å¯¼ç©ºæ ¼æ•°ã€‚å‰é¢ä»£ç ä¸­çš„Unindentå®ç°åˆ é™¤äº†æœ€å°çš„å‰å¯¼ç©ºæ ¼æ•°æˆ–ç»™å®šçš„ç¼©è¿›ã€‚\n","id":50,"section":"posts","summary":"\u003cp\u003eæœ¬æ–‡å°†æŒ‡å¯¼ä½ å®Œæˆæ–‡æœ¬æ–‡æ¡£çš„ç¼©è¿›å’Œå–æ¶ˆæ³¨é‡Š ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ç¼©è¿›æ–‡æœ¬æ–‡æ¡£","uri":"https://www.ganymedenil.com/2019/05/28/go-standard-library-by-indented-text-document.html","year":"2019"},{"content":"å­—ç¬¦ä¸²è¾“å…¥å¯èƒ½åŒ…å«å¤ªå¤šçš„ç©ºæ ¼ï¼Œå¤ªå°‘çš„ç©ºæ ¼æˆ–ä¸é€‚åˆçš„ç©ºæ ¼å­—ç¬¦ã€‚æ­¤ç¯‡åŒ…å«æœ‰å…³å¦‚ä½•ç®¡ç†è¿™äº›å†…å®¹å¹¶æ ¹æ®éœ€è¦æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æç¤ºã€‚\nç®¡ç†å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ å­—ç¬¦ä¸²è¾“å…¥å¯èƒ½åŒ…å«å¤ªå¤šçš„ç©ºæ ¼ï¼Œå¤ªå°‘çš„ç©ºæ ¼æˆ–ä¸é€‚åˆçš„ç©ºæ ¼å­—ç¬¦ã€‚æ­¤ç¯‡åŒ…å«æœ‰å…³å¦‚ä½•ç®¡ç†è¿™äº›å†…å®¹å¹¶æ ¹æ®éœ€è¦æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æç¤ºã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶whitespace.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;math\u0026quot; \u0026quot;regexp\u0026quot; \u0026quot;strconv\u0026quot; \u0026quot;strings\u0026quot; ) func main() { stringToTrim := \u0026quot;\\t\\t\\n Go \\tis\\t Awesome \\t\\t\u0026quot; trimResult := strings.TrimSpace(stringToTrim) fmt.Println(trimResult) stringWithSpaces := \u0026quot;\\t\\t\\n Go \\tis\\n Awesome \\t\\t\u0026quot; r := regexp.MustCompile(\u0026quot;\\\\s+\u0026quot;) replace := r.ReplaceAllString(stringWithSpaces, \u0026quot; \u0026quot;) fmt.Println(replace) needSpace := \u0026quot;need space\u0026quot; fmt.Println(pad(needSpace, 14, \u0026quot;CENTER\u0026quot;)) fmt.Println(pad(needSpace, 14, \u0026quot;LEFT\u0026quot;)) } func pad(input string, padLen int, align string) string { inputLen := len(input) if inputLen \u0026gt;= padLen { return input } repeat := padLen - inputLen var output string switch align { case \u0026quot;RIGHT\u0026quot;: output = fmt.Sprintf(\u0026quot;% \u0026quot;+strconv.Itoa(-padLen)+\u0026quot;s\u0026quot;, input) case \u0026quot;LEFT\u0026quot;: output = fmt.Sprintf(\u0026quot;% \u0026quot;+strconv.Itoa(padLen)+\u0026quot;s\u0026quot;, input) case \u0026quot;CENTER\u0026quot;: bothRepeat := float64(repeat) / float64(2) left := int(math.Floor(bothRepeat)) + inputLen right := int(math.Ceil(bothRepeat)) output = fmt.Sprintf(\u0026quot;% \u0026quot;+strconv.Itoa(left)+\u0026quot;s%\u0026quot;+strconv.Itoa(right)+\u0026quot;s\u0026quot;, input, \u0026quot;\u0026quot;) } return output } $ go run whitespace.go Go is\tAwesome Go is Awesome need space need space åŸç† åœ¨ä»£ç å¤„ç†å­—ç¬¦ä¸²ä¹‹å‰å¯¹å…¶è¿›è¡Œä¿®å‰ªæ˜¯éå¸¸å¸¸è§çš„å®è·µï¼Œæ­£å¦‚å‰é¢çš„ä»£ç æ‰€æ¼”ç¤ºçš„ï¼Œè¿™å¾ˆå®¹æ˜“ç”±æ ‡å‡†çš„Goåº“å®Œæˆã€‚stringsåº“è¿˜æä¾›äº†TrimXXXå‡½æ•°çš„æ›´å¤šå˜ä½“ï¼Œå®ƒè¿˜å…è®¸ä»å­—ç¬¦ä¸²ä¸­ä¿®å‰ªå…¶ä»–å­—ç¬¦ã€‚\nè¦ä¿®å‰ªå‰è¾¹å’Œç»“å°¾çš„ç©ºç™½ï¼Œå¯ä»¥ä½¿ç”¨stringsåŒ…çš„TrimSpaceå‡½æ•°ã€‚è¿™ä»£è¡¨äº†ä»£ç çš„ä»¥ä¸‹éƒ¨åˆ†ï¼Œè¿™ä¹ŸåŒ…æ‹¬åœ¨å‰é¢çš„ä¾‹å­ä¸­:\nstringToTrim := \u0026quot;\\t\\t\\n Go \\tis\\t Awesome \\t\\t\u0026quot; stringToTrim = strings.TrimSpace(stringToTrim) regexåŒ…é€‚åˆæ›¿æ¢å¤šä¸ªç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œå¹¶ä¸”å¯ä»¥ç”¨è¿™ç§æ–¹å¼ä¸ºè¿›ä¸€æ­¥å¤„ç†å­—ç¬¦ä¸²åšå¥½å‡†å¤‡ã€‚æ³¨æ„ï¼Œä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä¸­æ–­è¡Œè¢«æ›¿æ¢ä¸ºå•ä¸ªç©ºæ ¼ã€‚\nè¿™éƒ¨åˆ†ä»£ç è¡¨ç¤ºä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†æ‰€æœ‰å¤šä¸ªç©ºæ ¼æ›¿æ¢ä¸ºä¸€ä¸ªç©ºæ ¼:\nr := regexp.MustCompile(\u0026quot;\\\\s+\u0026quot;) replace := r.ReplaceAllString(stringToTrim, \u0026quot; \u0026quot;) å¡«å……ä¸æ˜¯stringåŒ…çš„æ˜¾å¼å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡fmtåŒ…çš„Sprintfå‡½æ•°æ¥å®ç°ã€‚ä»£ç ä¸­çš„padå‡½æ•°ä½¿ç”¨æ ¼å¼åŒ–æ¨¡å¼% \u0026lt;+/-padding\u0026gt;så’Œä¸€äº›ç®€å•çš„æ•°å­¦è¿ç®—æ¥æŸ¥æ‰¾å¡«å……ã€‚æœ€åï¼Œå¡«å……æ•°å­—å‰çš„è´Ÿå·ä½œä¸ºå³padï¼Œè€Œæ­£æ•°ä½œä¸ºå·¦padã€‚\n","id":51,"section":"posts","summary":"\u003cp\u003eå­—ç¬¦ä¸²è¾“å…¥å¯èƒ½åŒ…å«å¤ªå¤šçš„ç©ºæ ¼ï¼Œå¤ªå°‘çš„ç©ºæ ¼æˆ–ä¸é€‚åˆçš„ç©ºæ ¼å­—ç¬¦ã€‚æ­¤ç¯‡åŒ…å«æœ‰å…³å¦‚ä½•ç®¡ç†è¿™äº›å†…å®¹å¹¶æ ¹æ®éœ€è¦æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æç¤ºã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ç®¡ç†å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼","uri":"https://www.ganymedenil.com/2019/05/28/go-standard-library-by-manage-spaces-in-strings.html","year":"2019"},{"content":"æœ‰å¤šç§è¡¨æ ¼æ•°æ®æ ¼å¼ã€‚CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ˜¯ä¸»è¦ç”¨äºæ•°æ®ä¼ è¾“å’Œå¯¼å‡ºçš„æœ€åŸºæœ¬æ ¼å¼ä¹‹ä¸€ã€‚æ²¡æœ‰å®šä¹‰CSVçš„æ ‡å‡†ï¼Œä½†RFC 4180ä¸­æè¿°äº†æ ¼å¼æœ¬èº«ã€‚\nè§£æä»¥é€—å·åˆ†éš”çš„æ•°æ® Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ‰å¤šç§è¡¨æ ¼æ•°æ®æ ¼å¼ã€‚CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ˜¯ä¸»è¦ç”¨äºæ•°æ®ä¼ è¾“å’Œå¯¼å‡ºçš„æœ€åŸºæœ¬æ ¼å¼ä¹‹ä¸€ã€‚æ²¡æœ‰å®šä¹‰CSVçš„æ ‡å‡†ï¼Œä½†RFC 4180ä¸­æè¿°äº†æ ¼å¼æœ¬èº«ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶data.csvï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\u0026quot;Name\u0026quot;,\u0026quot;Surname\u0026quot;,\u0026quot;Age\u0026quot; # this is comment in data \u0026quot;John\u0026quot;,\u0026quot;Mnemonic\u0026quot;,20 Maria,Tone,21 åˆ›å»ºæ–‡ä»¶data.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;encoding/csv\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { file, err := os.Open(\u0026quot;data.csv\u0026quot;) if err != nil { panic(err) } defer file.Close() reader := csv.NewReader(file) reader.FieldsPerRecord = 3 reader.Comment = '#' for { record, e := reader.Read() if e != nil { fmt.Println(e) break } fmt.Println(record) } } $ go run data.go [Name Surname Age] [John Mnemonic 20] [Maria Tone 21] EOF åˆ›å»ºæ–‡ä»¶data_uncommon.csvï¼Œå†…å®¹å¦‚ä¸‹ï¼š\nName;Surname;Age \u0026quot;John\u0026quot;;Mnemonic;20 \u0026quot;Maria\u0026quot;;Tone;21 åˆ›å»ºæ–‡ä»¶data_uncommon.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;encoding/csv\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { file, err := os.Open(\u0026quot;data_uncommon.csv\u0026quot;) if err != nil { panic(err) } defer file.Close() reader := csv.NewReader(file) reader.Comma = ';' for { record, e := reader.Read() if e != nil { fmt.Println(e) break } fmt.Println(record) } } $ go run data_uncommon.go [Name Surname Age] [John Mnemonic 20] [Maria Tone 21] EOF åŸç† è€Œä¸æ˜¯ç®€å•åœ°é€è¡Œæ‰«æè¾“å…¥å¹¶ä½¿ç”¨strings.Splitç­‰æ–¹æ³•è§£æCSVæ ¼å¼ï¼ŒGoæä¾›äº†æ›´å¥½çš„æ–¹æ³•ã€‚encoding/csvåŒ…ä¸­çš„NewReaderå‡½æ•°è¿”å›Readerç»“æ„ä½“ï¼Œè¯¥ç»“æ„æä¾›äº†è¯»å–csvæ–‡ä»¶çš„APIã€‚Readerç»“æ„ä½“æ ¹æ®ä½ çš„éœ€è¦ä¿ç•™å˜é‡æ¥é…ç½®readå‚æ•°ã€‚\nReader çš„FieldsPerRecordå‚æ•°æ˜¯ä¸€ä¸ªé‡è¦çš„è®¾ç½®ã€‚è¿™æ ·å°±å¯ä»¥éªŒè¯æ¯ä¸€è¡Œçš„å•å…ƒæ ¼è®¡æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è®¾ç½®ä¸º0æ—¶ï¼Œå®ƒè¢«è®¾ç½®ä¸ºç¬¬ä¸€è¡Œä¸­çš„è®°å½•æ•°ã€‚å¦‚æœè®¾ç½®ä¸ºæ­£å€¼ï¼Œåˆ™è®°å½•çš„æ•°é‡å¿…é¡»åŒ¹é…ã€‚å¦‚æœè®¾ç½®äº†è´Ÿå€¼ï¼Œåˆ™æ²¡æœ‰å•å…ƒæ ¼è®¡æ•°éªŒè¯ã€‚\nå¦ä¸€ä¸ªæœ‰è¶£çš„é…ç½®æ˜¯æ³¨é‡Šå‚æ•°ï¼Œå®ƒå…è®¸æ‚¨åœ¨å·²è§£æçš„æ•°æ®ä¸­å®šä¹‰æ³¨é‡Šå­—ç¬¦ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä»¥è¿™ç§æ–¹å¼å¿½ç•¥æ•´è¡Œã€‚\nGo 1.10ç°åœ¨ç¦æ­¢ä½¿ç”¨æ— æ„ä¹‰çš„é€—å·å’Œæ³¨é‡Šè®¾ç½®ã€‚è¿™æ„å‘³ç€nullã€å›è½¦ã€æ¢è¡Œç¬¦ã€æ— æ•ˆçš„ç¬¦æ–‡å’ŒUnicodeæ›¿æ¢å­—ç¬¦ã€‚æ­¤å¤–ï¼Œç¦æ­¢å°†é€—å·å’Œæ³¨é‡Šè®¾ç½®ä¸ºç›¸ç­‰ã€‚\n","id":52,"section":"posts","summary":"\u003cp\u003eæœ‰å¤šç§è¡¨æ ¼æ•°æ®æ ¼å¼ã€‚\u003cstrong\u003eCSV\u003c/strong\u003eï¼ˆ\u003cstrong\u003eé€—å·åˆ†éš”å€¼\u003c/strong\u003eï¼‰æ˜¯ä¸»è¦ç”¨äºæ•°æ®ä¼ è¾“å’Œå¯¼å‡ºçš„æœ€åŸºæœ¬æ ¼å¼ä¹‹ä¸€ã€‚æ²¡æœ‰å®šä¹‰CSVçš„æ ‡å‡†ï¼Œä½†RFC 4180ä¸­æè¿°äº†æ ¼å¼æœ¬èº«ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è§£æä»¥é€—å·åˆ†éš”çš„æ•°æ®","uri":"https://www.ganymedenil.com/2019/05/27/go-standard-library-by-parse-data-separated-by-commas.html","year":"2019"},{"content":"åœ¨å¾ˆå¤šå®é™…å·¥ä½œä¸­ï¼Œæ–‡æœ¬æ ·å¼è½¬æ¢æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚å¤§å°å†™è½¬æ¢ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œè›‡å½¢å‘½åæ³•ï¼Œé©¼å³°å‘½åæ³•ç­‰ã€‚\næ–‡æœ¬æ ·å¼è½¬æ¢ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ åœ¨å¾ˆå¤šå®é™…å·¥ä½œä¸­ï¼Œæ–‡æœ¬æ ·å¼è½¬æ¢æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚å¤§å°å†™è½¬æ¢ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œè›‡å½¢å‘½åæ³•ï¼Œé©¼å³°å‘½åæ³•ç­‰ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶case.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; \u0026quot;unicode\u0026quot; ) const email = \u0026quot;ExamPle@domain.com\u0026quot; const name = \u0026quot;isaac newton\u0026quot; const upc = \u0026quot;upc\u0026quot; const i = \u0026quot;i\u0026quot; const snakeCase = \u0026quot;first_name\u0026quot; func main() { // ä¸ºäº†æ¯”è¾ƒç”¨æˆ·è¾“å…¥ï¼Œæœ‰æ—¶æœ€å¥½åœ¨ç›¸åŒçš„æƒ…å†µä¸‹æ¯”è¾ƒè¾“å…¥ input := \u0026quot;Example@domain.com\u0026quot; input = strings.ToLower(input) emailToCompare := strings.ToLower(email) matches := input == emailToCompare fmt.Printf(\u0026quot;Email matches: %t\\n\u0026quot;, matches) upcCode := strings.ToUpper(upc) fmt.Println(\u0026quot;UPPER case: \u0026quot; + upcCode) // è¿™ä¸ªæœ‰å‘å›¾æœ‰ä¸åŒçš„å¤§å†™å­—æ¯å’Œæ ‡é¢˜ str := \u0026quot;Ç³\u0026quot; fmt.Printf(\u0026quot;%s in upper: %s and title: %s \\n\u0026quot;, str, strings.ToUpper(str), strings.ToTitle(str)) // ä½¿ç”¨XXXSpecialåŠŸèƒ½ title := strings.ToTitle(i) titleTurk := strings.ToTitleSpecial(unicode.TurkishCase, i) if title != titleTurk { fmt.Printf(\u0026quot;ToTitle is defferent: %#U vs. %#U \\n\u0026quot;, title[0], []rune(titleTurk)[0]) } // åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦çº æ­£è¾“å…¥ä»¥é˜²ä¸‡ä¸€ correctNameCase := strings.Title(name) fmt.Println(\u0026quot;Corrected name: \u0026quot; + correctNameCase) // ä½¿ç”¨Titleå’ŒToLowerå‡½æ•°å°†è›‡å½¢å‘½åæ³•è½¬æ¢ä¸ºé©¼å³°å‘½åæ³• firstNameCamel := toCamelCase(snakeCase) fmt.Println(\u0026quot;Camel case: \u0026quot; + firstNameCamel) } func toCamelCase(input string) string { titleSpace := strings.Title(strings.Replace(input, \u0026quot;_\u0026quot;, \u0026quot; \u0026quot;, -1)) camel := strings.Replace(titleSpace, \u0026quot; \u0026quot;, \u0026quot;\u0026quot;, -1) return strings.ToLower(camel[:1]) + camel[1:] } $ go run case.go Email matches: true UPPER case: UPC Ç³ in upper: Ç± and title: Ç² ToTitle is defferent: U+0049 'I' vs. U+0130 'Ä°' Corrected name: Isaac Newton Camel case: firstName åŸç† æ³¨æ„Unicodeä¸­çš„æ ‡é¢˜å¤§å°å†™æ˜ å°„ä¸å¤§å†™å­—æ¯æ˜ å°„ä¸åŒã€‚ä¸åŒä¹‹å¤„åœ¨äºå­—ç¬¦çš„æ•°é‡éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚è¿™äº›ä¸»è¦æ˜¯è¿æ¥ç¬¦å’Œæœ‰å‘å›¾ï¼Œå¦‚ fl, dz, and ljï¼ŒåŠ ä¸Šä¸€äº›å¤šéŸ³ä½“å¸Œè…Šå­—ç¬¦ã€‚ä¾‹å¦‚ï¼ŒU+01C7 (LJ)æ˜ å°„åˆ°U+01C8 (Lj) è€Œä¸æ˜¯U+01C9 (lj)ã€‚\nä¸ºäº†æ­£ç¡®åŒºåˆ†å¤§å°å†™ï¼Œåº”è¯¥ä½¿ç”¨stringåŒ…ä¸­çš„EqualFoldå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ä½¿ç”¨caseæŠ˜å å¯¹å­—ç¬¦ä¸²è¿›è¡Œè§„èŒƒåŒ–å¹¶æ¯”è¾ƒå®ƒä»¬ã€‚\n","id":53,"section":"posts","summary":"\u003cp\u003eåœ¨å¾ˆå¤šå®é™…å·¥ä½œä¸­ï¼Œæ–‡æœ¬æ ·å¼è½¬æ¢æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚å¤§å°å†™è½¬æ¢ï¼Œé¦–å­—æ¯å¤§å†™ï¼Œè›‡å½¢å‘½åæ³•ï¼Œé©¼å³°å‘½åæ³•ç­‰ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æ–‡æœ¬æ ·å¼è½¬æ¢","uri":"https://www.ganymedenil.com/2019/05/27/go-standard-library-by-text-style-conversion.html","year":"2019"},{"content":"ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„äº‹å®æ˜¯.goæ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç”¨UTF-8ç¼–ç çš„ã€‚ä¿¡ä¸ä¿¡ç”±ä½ ï¼ŒUnicodeä¸æ˜¯ä¸–ç•Œä¸Šå”¯ä¸€çš„å­—ç¬¦é›†ã€‚ä¾‹å¦‚ï¼ŒWindows-1250ç¼–ç åœ¨Windowsç”¨æˆ·ä¸­å¹¿æ³›ä½¿ç”¨ã€‚\nåœ¨å¤„ç†éUnicodeå­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦å°†å†…å®¹è½¬æ¢ä¸ºUnicodeã€‚æœ¬ç¯‡å°†æ¼”ç¤ºå¦‚ä½•è§£ç å’Œç¼–ç éunicodeå­—ç¬¦ä¸²ã€‚\nè§£ç éUnicodeå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ä¸² Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„äº‹å®æ˜¯.goæ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç”¨UTF-8ç¼–ç çš„ã€‚ä¿¡ä¸ä¿¡ç”±ä½ ï¼ŒUnicodeä¸æ˜¯ä¸–ç•Œä¸Šå”¯ä¸€çš„å­—ç¬¦é›†ã€‚ä¾‹å¦‚ï¼ŒWindows-1250ç¼–ç åœ¨Windowsç”¨æˆ·ä¸­å¹¿æ³›ä½¿ç”¨ã€‚\nåœ¨å¤„ç†éUnicodeå­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦å°†å†…å®¹è½¬æ¢ä¸ºUnicodeã€‚æœ¬ç¯‡å°†æ¼”ç¤ºå¦‚ä½•è§£ç å’Œç¼–ç éunicodeå­—ç¬¦ä¸²ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶encode.goï¼Œä»£ç å¦‚ä¸‹ï¼š package main import ( \u0026quot;io\u0026quot; \u0026quot;os\u0026quot; \u0026quot;golang.org/x/text/encoding/charmap\u0026quot; ) func main() { f, err := os.OpenFile(\u0026quot;out.txt\u0026quot;, os.O_CREATE|os.O_RDWR, os.ModePerm|os.ModeAppend) if err != nil { panic(err) } defer f.Close() // è§£ç unicode encoder := charmap.Windows1250.NewEncoder() writer := encoder.Writer(f) io.WriteString(writer, \u0026quot;GdaÅ„sk\u0026quot;) } è¿è¡Œgo run encode.go\nout.txtä»¥Windows-1250ç¼–ç è¿›è¡Œç¼–ç \nåˆ›å»ºæ–‡ä»¶decode.goï¼Œä»£ç å¦‚ä¸‹ï¼š package main import ( \u0026quot;fmt\u0026quot; \u0026quot;io/ioutil\u0026quot; \u0026quot;os\u0026quot; \u0026quot;strings\u0026quot; \u0026quot;golang.org/x/text/encoding/charmap\u0026quot; ) func main() { // æ‰“å¼€ windows-1250 æ–‡ä»¶ f, err := os.Open(\u0026quot;out.txt\u0026quot;) if err != nil { panic(err) } defer f.Close() // å…¨éƒ¨ä»¥åŸå§‹å†…å®¹è¯»å…¥ b, err := ioutil.ReadAll(f) if err != nil { panic(err) } content := string(b) fmt.Println(\u0026quot;Without decode: \u0026quot; + content) // unicode è§£ç  decoder := charmap.Windows1250.NewDecoder() reader := decoder.Reader(strings.NewReader(content)) b, err = ioutil.ReadAll(reader) if err != nil { panic(err) } fmt.Println(\u0026quot;Decoded: \u0026quot; + string(b)) } $ go run decode.go Without decode: Gdaï¿½sk Decoded: GdaÅ„sk åŸç† è½¯ä»¶åŒ…golang.org/x/text/encoding/charmapåŒ…å«ç”¨äºç®€å•ç¼–ç å’Œè§£ç çš„Charsetç±»å‹ã€‚è¯¥ç±»å‹å®ç°åˆ›å»ºè§£ç å™¨ç»“æ„çš„NewDecoderæ–¹æ³•ã€‚\nç¼–ç å·¥ä½œç±»ä¼¼ã€‚åˆ›å»ºç¼–ç Writerï¼Œç„¶åå°†ç”±è¯¥Writer ç¼–å†™çš„æ¯ä¸ªå­—ç¬¦ä¸²ç¼–ç ä¸ºWindows-1250ç¼–ç ã€‚\næ³¨æ„ï¼Œé€‰æ‹©Windows-1250ä½œä¸ºç¤ºä¾‹ã€‚è¿™ä¸ªåŒ…golang.org/x/text/encoding/charmapåŒ…å«è®¸å¤šå…¶ä»–å­—ç¬¦é›†é€‰é¡¹ã€‚\n","id":54,"section":"posts","summary":"\u003cp\u003eä¸€ä¸ªé²œä¸ºäººçŸ¥çš„äº‹å®æ˜¯\u003ccode\u003e.go\u003c/code\u003eæ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç”¨UTF-8ç¼–ç çš„ã€‚ä¿¡ä¸ä¿¡ç”±ä½ ï¼ŒUnicodeä¸æ˜¯ä¸–ç•Œä¸Šå”¯ä¸€çš„å­—ç¬¦é›†ã€‚ä¾‹å¦‚ï¼ŒWindows-1250ç¼–ç åœ¨Windowsç”¨æˆ·ä¸­å¹¿æ³›ä½¿ç”¨ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨å¤„ç†éUnicodeå­—ç¬¦ä¸²æ—¶ï¼Œéœ€è¦å°†å†…å®¹è½¬æ¢ä¸ºUnicodeã€‚æœ¬ç¯‡å°†æ¼”ç¤ºå¦‚ä½•è§£ç å’Œç¼–ç éunicodeå­—ç¬¦ä¸²ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è§£ç éUnicodeå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ä¸²","uri":"https://www.ganymedenil.com/2019/05/26/go-standard-library-by-decode-strings-in-non-unicode-character-sets.html","year":"2019"},{"content":"æ€»æ˜¯æœ‰ä¸€äº›ä»»åŠ¡ï¼Œä¾‹å¦‚è¾“å…¥éªŒè¯ï¼Œåœ¨æ–‡æ¡£ä¸­æœç´¢ä»»ä½•ä¿¡æ¯ï¼Œç”šè‡³ä»ä¸éœ€è¦çš„è½¬ä¹‰å­—ç¬¦ä¸­æ¸…é™¤ç»™å®šçš„å­—ç¬¦ä¸²ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚\né€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æŸ¥æ‰¾æ–‡æœ¬ä¸­çš„å­å­—ç¬¦ä¸² Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æ€»æ˜¯æœ‰ä¸€äº›ä»»åŠ¡ï¼Œä¾‹å¦‚è¾“å…¥éªŒè¯ï¼Œåœ¨æ–‡æ¡£ä¸­æœç´¢ä»»ä½•ä¿¡æ¯ï¼Œç”šè‡³ä»ä¸éœ€è¦çš„è½¬ä¹‰å­—ç¬¦ä¸­æ¸…é™¤ç»™å®šçš„å­—ç¬¦ä¸²ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;regexp\u0026quot; ) const refString = `[{ \\\u0026quot;email\\\u0026quot;: \\\u0026quot;email@example.com\\\u0026quot; \\ \u0026quot;phone\\\u0026quot;: 555467890}, { \\\u0026quot;email\\\u0026quot;: \\\u0026quot;other@domain.com\\\u0026quot; \\ \u0026quot;phone\\\u0026quot;: 555467890}]` func main() { // ä¸ºç®€æ´èµ·è§ï¼Œç®€åŒ–äº†è¿™ç§æ¨¡å¼ emailRegexp := regexp.MustCompile(\u0026quot;[a-zA-Z0-9]{1,}@[a-zA-Z0-9]{1,}\\\\.[a-z]{1,}\u0026quot;) first := emailRegexp.FindString(refString) fmt.Println(\u0026quot;First: \u0026quot;) fmt.Println(first) all := emailRegexp.FindAllString(refString, -1) fmt.Println(\u0026quot;All: \u0026quot;) for _, val := range all { fmt.Println(val) } } $ go run regexp.go First: email@example.com All: email@example.com other@domain.com åŸç† FindStringæˆ–FindAllStringå‡½æ•°æ˜¯æŸ¥æ‰¾ç»™å®šå­—ç¬¦ä¸²ä¸­åŒ¹é…æ¨¡å¼çš„æœ€ç®€å•æ–¹æ³•ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯Regexpçš„FindStringæ–¹æ³•åªè¿”å›é¦–ä¸ªã€‚å¦ä¸€æ–¹é¢ï¼ŒFindAllStringï¼Œé¡¾åæ€ä¹‰ï¼Œè¿”å›æ‰€æœ‰å‡ºç°çš„å­—ç¬¦ä¸²ç‰‡æ®µã€‚\nRegexpç±»å‹æä¾›äº†ä¸€ç»„ä¸°å¯Œçš„FindXXXæ–¹æ³•ã€‚æœ¬ç¯‡åªæè¿°é€šå¸¸æœ€æœ‰ç”¨çš„å­—ç¬¦ä¸²å˜ä½“ã€‚æ³¨æ„ï¼Œå‰é¢çš„ä»£ç ä½¿ç”¨regexpåŒ…çš„MustCompileå‡½æ•°ï¼Œå¦‚æœæ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘å¤±è´¥ï¼Œè¯¥å‡½æ•°å°†å¼•å‘ææ…Œã€‚\n","id":55,"section":"posts","summary":"\u003cp\u003eæ€»æ˜¯æœ‰ä¸€äº›ä»»åŠ¡ï¼Œä¾‹å¦‚è¾“å…¥éªŒè¯ï¼Œåœ¨æ–‡æ¡£ä¸­æœç´¢ä»»ä½•ä¿¡æ¯ï¼Œç”šè‡³ä»ä¸éœ€è¦çš„è½¬ä¹‰å­—ç¬¦ä¸­æ¸…é™¤ç»™å®šçš„å­—ç¬¦ä¸²ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æŸ¥æ‰¾æ–‡æœ¬ä¸­çš„å­å­—ç¬¦ä¸²","uri":"https://www.ganymedenil.com/2019/05/26/go-standard-library-by-find-substrings-in-text-through-regular-expression-patterns.html","year":"2019"},{"content":"ä¸å­—ç¬¦ä¸²å¤„ç†ç›¸å…³çš„å¦ä¸€ä¸ªéå¸¸å¸¸è§çš„ä»»åŠ¡æ˜¯æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­å­—ç¬¦ä¸²ã€‚Goæ ‡å‡†åº“æä¾›äº†ä¸€æ¬¡æ›¿æ¢å¤šä¸ªå­—ç¬¦ä¸²çš„ ReplaceåŠŸèƒ½å’ŒReplacerç±»å‹ã€‚\næ›¿æ¢éƒ¨åˆ†å­—ç¬¦ä¸² Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ä¸å­—ç¬¦ä¸²å¤„ç†ç›¸å…³çš„å¦ä¸€ä¸ªéå¸¸å¸¸è§çš„ä»»åŠ¡æ˜¯æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­å­—ç¬¦ä¸²ã€‚Goæ ‡å‡†åº“æä¾›äº†ä¸€æ¬¡æ›¿æ¢å¤šä¸ªå­—ç¬¦ä¸²çš„ ReplaceåŠŸèƒ½å’ŒReplacerç±»å‹ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶replace.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const refString = \u0026quot;Mary had a little lamb\u0026quot; const refStringTwo = \u0026quot;lamb lamb lamb lamb\u0026quot; func main() { out := strings.Replace(refString, \u0026quot;lamb\u0026quot;, \u0026quot;wolf\u0026quot;, -1) fmt.Println(out) out = strings.Replace(refStringTwo, \u0026quot;lamb\u0026quot;, \u0026quot;wolf\u0026quot;, 2) fmt.Println(out) } $ go run replace.go Mary had a little wolf wolf wolf lamb lamb åˆ›å»ºæ–‡ä»¶replacer.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const refString = \u0026quot;Mary had a little lamb\u0026quot; func main() { replacer := strings.NewReplacer(\u0026quot;lamb\u0026quot;, \u0026quot;wolf\u0026quot;, \u0026quot;Mary\u0026quot;, \u0026quot;Jack\u0026quot;) out := replacer.Replace(refString) fmt.Println(out) } $ go run replacer.go Jack had a little wolf åˆ›å»ºæ–‡ä»¶regexp.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;regexp\u0026quot; ) const refString = \u0026quot;Mary had a little lamb\u0026quot; func main() { regex := regexp.MustCompile(\u0026quot;l[a-z]+\u0026quot;) out := regex.ReplaceAllString(refString, \u0026quot;replacement\u0026quot;) fmt.Println(out) } $ go run regexp.go Mary had a replacement replacement åŸç† stringsåŒ…çš„Replaceå‡½æ•°è¢«å¹¿æ³›ç”¨äºç®€å•çš„æ›¿æ¢ã€‚æœ€åä¸€ä¸ªintegerå‚æ•°å®šä¹‰å°†æ‰§è¡Œå¤šå°‘æ¬¡æ›¿æ¢(åœ¨-1æƒ…å†µä¸‹ï¼Œæ›¿æ¢æ‰€æœ‰å­—ç¬¦ä¸²ã€‚å‚è§Replaceçš„ç¬¬äºŒç§ç”¨æ³•ï¼Œå…¶ä¸­åªæ›¿æ¢å‰ä¸¤ç§æƒ…å†µã€‚)æ›¿æ¢å‡½æ•°çš„ä½¿ç”¨åœ¨æ­¥éª¤1ä¸­ç»™å‡ºã€‚\né™¤äº†Replaceå‡½æ•°å¤–ï¼ŒReplacerç»“æ„ä½“è¿˜å…·æœ‰WriteStringæ–¹æ³•ã€‚ æ­¤æ–¹æ³•å°†å†™å…¥ç»™å®šçš„ç¼–å†™å™¨ï¼Œå¹¶åœ¨Replacerä¸­å®šä¹‰æ‰€æœ‰æ›¿æ¢ã€‚è¿™ç§ç±»å‹çš„ä¸»è¦ç›®çš„æ˜¯å¯é‡ç”¨æ€§ã€‚å®ƒå¯ä»¥åŒæ—¶æ›¿æ¢å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å‘ä½¿ç”¨å®‰å…¨;å‚è§æ­¥éª¤2ã€‚\næ›¿æ¢å­å­—ç¬¦ä¸²ç”šè‡³åŒ¹é…æ¨¡å¼çš„æ›´å¤æ‚çš„æ–¹æ³•è‡ªç„¶æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚ å¯ä»¥åˆ©ç”¨Regexç±»å‹æŒ‡é’ˆæ–¹æ³•ReplaceAllStringæ¥å®ç°æ­¤ç›®çš„ã€‚ æ­¥éª¤3è¯´æ˜äº†regexpåŒ…çš„ä½¿ç”¨ã€‚\n","id":56,"section":"posts","summary":"\u003cp\u003eä¸å­—ç¬¦ä¸²å¤„ç†ç›¸å…³çš„å¦ä¸€ä¸ªéå¸¸å¸¸è§çš„ä»»åŠ¡æ˜¯æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­å­—ç¬¦ä¸²ã€‚Goæ ‡å‡†åº“æä¾›äº†ä¸€æ¬¡æ›¿æ¢å¤šä¸ªå­—ç¬¦ä¸²çš„  ReplaceåŠŸèƒ½å’ŒReplacerç±»å‹ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æ›¿æ¢éƒ¨åˆ†å­—ç¬¦ä¸²","uri":"https://www.ganymedenil.com/2019/05/26/go-standard-library-by-replace-part-of-the-string.html","year":"2019"},{"content":"é™¤äº†å†…ç½®çš„+è¿ç®—ç¬¦ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´å¤šçš„æ–¹æ³•å¯ä»¥è¿æ¥å­—ç¬¦ä¸²ã€‚æœ¬ç¯‡å°†ç”¨bytesåŒ…å’Œå†…ç½®copyå‡½æ•°ï¼Œä½œä¸ºè¿æ¥å­—ç¬¦ä¸²çš„æ›´æœ‰æ•ˆçš„æ–¹æ³•ã€‚\nå°†å­—ç¬¦ä¸²ä¸writerè¿æ¥ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ é™¤äº†å†…ç½®çš„+è¿ç®—ç¬¦ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´å¤šçš„æ–¹æ³•å¯ä»¥è¿æ¥å­—ç¬¦ä¸²ã€‚æœ¬ç¯‡å°†ç”¨bytesåŒ…å’Œå†…ç½®copyå‡½æ•°ï¼Œä½œä¸ºè¿æ¥å­—ç¬¦ä¸²çš„æ›´æœ‰æ•ˆçš„æ–¹æ³•ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶concat_buffer.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bytes\u0026quot; \u0026quot;fmt\u0026quot; ) func main() { strings := []string{\u0026quot;This \u0026quot;, \u0026quot;is \u0026quot;, \u0026quot;even \u0026quot;, \u0026quot;more \u0026quot;, \u0026quot;performant \u0026quot;} buffer := bytes.Buffer{} for _, val := range strings { buffer.WriteString(val) } fmt.Println(buffer.String()) } $ go run concat_buffer.go This is even more performant åˆ›å»ºæ–‡ä»¶concat_copy.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; ) func main() { strings := []string{\u0026quot;This \u0026quot;, \u0026quot;is \u0026quot;, \u0026quot;even \u0026quot;, \u0026quot;more \u0026quot;, \u0026quot;performant \u0026quot;} bs := make([]byte, 100) bl := 0 for _, val := range strings { bl += copy(bs[bl:], []byte(val)) } fmt.Println(string(bs[:])) } $ go run concat_copy.go This is even more performant åŸç† æ­¥éª¤1ä½¿ç”¨bytesåŒ…çš„Bufferä½œä¸ºå­—ç¬¦ä¸²è¿æ¥æ€§èƒ½å‹å¥½çš„è§£å†³æ–¹æ¡ˆã€‚Bufferç»“æ„ä½“å®ç°WriteStringæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ç”¨äºæœ‰æ•ˆåœ°å°†å­—ç¬¦ä¸²è¿æ¥åˆ°åº•å±‚å­—èŠ‚ç‰‡ä¸­ã€‚\næ²¡æœ‰å¿…è¦åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½ä½¿ç”¨è¿™ç§æ”¹è¿›ï¼Œåªè¦è€ƒè™‘ä¸€ä¸‹ç¨‹åºå°†è¿æ¥å¤§é‡å­—ç¬¦ä¸²çš„æƒ…å†µ(ä¾‹å¦‚ï¼Œå†…å­˜ä¸­çš„CSVå¯¼å‡ºå’Œå…¶ä»–)ã€‚\næ­¥éª¤2ä¸­æä¾›çš„å†…ç½®copy å‡½æ•°å¯ç”¨äºå®Œæˆstringçš„è¿æ¥ã€‚è¿™ç§æ–¹æ³•éœ€è¦å¯¹æœ€ç»ˆå­—ç¬¦ä¸²é•¿åº¦åšä¸€äº›å‡è®¾ï¼Œæˆ–è€…å¯ä»¥åŠ¨æ€åœ°å®Œæˆã€‚ä½†æ˜¯ï¼Œå¦‚æœå†™å…¥ç»“æœçš„ç¼“å†²åŒºçš„å®¹é‡å°äºå·²ç»å†™å…¥çš„éƒ¨åˆ†å’Œè¦è¿½åŠ çš„å­—ç¬¦ä¸²çš„æ€»å’Œï¼Œåˆ™å¿…é¡»æ‰©å±•ç¼“å†²åŒº(é€šå¸¸é€šè¿‡åˆ†é…å®¹é‡æ›´å¤§çš„æ–°ç‰‡)ã€‚\nå»¶ä¼¸ ä»…ä½œæ¯”è¾ƒï¼Œæœ‰ä¸€ä¸ªåŸºå‡†ä»£ç ï¼Œç”¨äºæ¯”è¾ƒå†…ç½®+è¿ç®—ç¬¦bytes.Bufferå’Œå†…ç½®copyæ–¹æ³•çš„æ€§èƒ½ï¼š\nåˆ›å»ºæ–‡ä»¶å¤¹bench ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶bench_test.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bytes\u0026quot; \u0026quot;testing\u0026quot; ) const testString = \u0026quot;test\u0026quot; func BenchmarkConcat(b *testing.B) { var str string b.ResetTimer() for n := 0; n \u0026lt; b.N; n++ { str += testString } b.StopTimer() } func BenchmarkBuffer(b *testing.B) { var buffer bytes.Buffer b.ResetTimer() for n := 0; n \u0026lt; b.N; n++ { buffer.WriteString(testString) } b.StopTimer() } func BenchmarkCopy(b *testing.B) { bs := make([]byte, b.N) bl := 0 b.ResetTimer() for n := 0; n \u0026lt; b.N; n++ { bl += copy(bs[bl:], testString) } b.StopTimer() } $ go test -bench=. goos: windows goarch: amd64 pkg: Go-Standard-library/Concatenating-a-string-with-writer/bench BenchmarkConcat-4 300000 95719 ns/op BenchmarkBuffer-4 100000000 12.6 ns/op BenchmarkCopy-4 300000000 4.36 ns/op PASS ok Go-Standard-library/Concatenating-a-string-with-writer/bench 32.345s ","id":57,"section":"posts","summary":"\u003cp\u003eé™¤äº†å†…ç½®çš„+è¿ç®—ç¬¦ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´å¤šçš„æ–¹æ³•å¯ä»¥è¿æ¥å­—ç¬¦ä¸²ã€‚æœ¬ç¯‡å°†ç”¨\u003ccode\u003ebytes\u003c/code\u003eåŒ…å’Œå†…ç½®\u003ccode\u003ecopy\u003c/code\u003eå‡½æ•°ï¼Œä½œä¸ºè¿æ¥å­—ç¬¦ä¸²çš„æ›´æœ‰æ•ˆçš„æ–¹æ³•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å°†å­—ç¬¦ä¸²ä¸writerè¿æ¥","uri":"https://www.ganymedenil.com/2019/05/26/go-standard-library-by-connect-the-string-to-the-writer.html","year":"2019"},{"content":"æœ¬ç‰‡å°†åˆ†äº«å¦‚ä½•å°†å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†ç»™å®šçš„å­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”ç¬¦ã€‚\nä¸€ä¸ªçœŸå®çš„ç”¨ä¾‹æ˜¯åŠ¨æ€æ„å»ºSQL selectè¯­å¥ã€‚\nä½¿ç”¨åˆ†éš”ç¬¦è¿æ¥å­—ç¬¦ä¸²åˆ‡ç‰‡ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬ç‰‡å°†åˆ†äº«å¦‚ä½•å°†å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†ç»™å®šçš„å­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”ç¬¦ã€‚\nä¸€ä¸ªçœŸå®çš„ç”¨ä¾‹æ˜¯åŠ¨æ€æ„å»ºSQL selectè¯­å¥ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶join.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const selectBase = \u0026quot;SELECT * FROM user WHERE %s \u0026quot; var refStringSlice = []string{ \u0026quot; FIRST_NAME = 'Jack' \u0026quot;, \u0026quot; INSURANCE_NO = 333444555 \u0026quot;, \u0026quot; EFFECTIVE_FROM = SYSDATE \u0026quot;} func main() { sentence := strings.Join(refStringSlice, \u0026quot;AND\u0026quot;) fmt.Printf(selectBase+\u0026quot;\\n\u0026quot;, sentence) } $ go run join.go SELECT * FROM user WHERE FIRST_NAME = 'Jack' AND INSURANCE_NO = 333444555 AND EFFECTIVE_FROM = SYSDATE åˆ›å»ºæ–‡ä»¶join_manually.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const selectBase = \u0026quot;SELECT * FROM user WHERE \u0026quot; var refStringSlice = []string{ \u0026quot; FIRST_NAME = 'Jack' \u0026quot;, \u0026quot; INSURANCE_NO = 333444555 \u0026quot;, \u0026quot; EFFECTIVE_FROM = SYSDATE \u0026quot;} type JoinFunc func(piece string) string func main() { jF := func(p string) string { if strings.Contains(p, \u0026quot;INSURANCE\u0026quot;) { return \u0026quot;OR\u0026quot; } return \u0026quot;AND\u0026quot; } result := JoinWithFunc(refStringSlice, jF) fmt.Println(selectBase + result) } func JoinWithFunc(refStringSlice []string, joinFunc JoinFunc) string { concatenate := refStringSlice[0] for _, val := range refStringSlice[1:] { concatenate = concatenate + joinFunc(val) + val } return concatenate } $ go run join_manually.go SELECT * FROM user WHERE FIRST_NAME = 'Jack' OR INSURANCE_NO = 333444555 AND EFFECTIVE_FROM = SYSDATE åŸç† ä¸ºäº†å°†å­—ç¬¦ä¸²åˆ‡ç‰‡è¿æ¥æˆå•ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™é‡Œæœ‰stringåŒ…çš„Joinå‡½æ•°ã€‚ç®€å•åœ°è¯´ï¼Œéœ€è¦ä¸ºåˆ‡ç‰‡æä¾›éœ€è¦è¿æ¥çš„å­—ç¬¦ä¸²ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥è½»æ¾åœ°è¿æ¥å­—ç¬¦ä¸²åˆ‡ç‰‡ã€‚Joinå‡½æ•°çš„ä½¿ç”¨å¦‚æ­¥éª¤1æ‰€ç¤ºã€‚\nå½“ç„¶ï¼Œè¿æ¥å¯ä»¥é€šè¿‡åœ¨åˆ‡ç‰‡ä¸Šè¿­ä»£æ¥æ‰‹åŠ¨å®ç°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æ›´å¤æ‚çš„é€»è¾‘å®šåˆ¶åˆ†éš”ç¬¦ã€‚æ­¥éª¤2åªæ˜¯è¡¨ç¤ºå¦‚ä½•æ ¹æ®å½“å‰å¤„ç†çš„å­—ç¬¦ä¸²å°†æ‰‹åŠ¨è¿æ¥ç”¨äºæ›´å¤æ‚çš„é€»è¾‘ã€‚\nå»¶ä¼¸ è¯¥ Join å‡½æ•°ç”±bytesåŒ…æä¾›ï¼Œå®ƒè‡ªç„¶åœ°ç”¨äºè¿æ¥å­—èŠ‚ç‰‡ã€‚\n","id":58,"section":"posts","summary":"\u003cp\u003eæœ¬ç‰‡å°†åˆ†äº«å¦‚ä½•å°†å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†ç»™å®šçš„å­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”ç¬¦ã€‚\u003c/p\u003e\n\u003cp\u003eä¸€ä¸ªçœŸå®çš„ç”¨ä¾‹æ˜¯åŠ¨æ€æ„å»ºSQL selectè¯­å¥ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ä½¿ç”¨åˆ†éš”ç¬¦è¿æ¥å­—ç¬¦ä¸²åˆ‡ç‰‡","uri":"https://www.ganymedenil.com/2019/05/24/go-standard-library-by-use-a-separator-to-connect-a-string-slice.html","year":"2019"},{"content":"å°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºå•è¯å¯èƒ½å¾ˆæ£˜æ‰‹ã€‚é¦–å…ˆï¼Œç¡®å®šå•è¯æ˜¯ä»€ä¹ˆï¼Œä»¥åŠåˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ˜¯å¦æœ‰ä»»ä½•ç©ºæ ¼æˆ–ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚åšå‡ºè¿™äº›å†³å®šåï¼Œä½ å¯ä»¥ä»stringsåŒ…ä¸­é€‰æ‹©é€‚å½“çš„åŠŸèƒ½ã€‚\nå°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºå•è¯ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ å°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºå•è¯å¯èƒ½å¾ˆæ£˜æ‰‹ã€‚é¦–å…ˆï¼Œç¡®å®šå•è¯æ˜¯ä»€ä¹ˆï¼Œä»¥åŠåˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ˜¯å¦æœ‰ä»»ä½•ç©ºæ ¼æˆ–ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚åšå‡ºè¿™äº›å†³å®šåï¼Œä½ å¯ä»¥ä»stringsåŒ…ä¸­é€‰æ‹©é€‚å½“çš„åŠŸèƒ½ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶whitespace.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const refString = \u0026quot;Mary had a little lamb\u0026quot; func main() { words := strings.Fields(refString) for idx, word := range words { fmt.Printf(\u0026quot;Word %d is: %s\\n\u0026quot;, idx, word) } } $ go run whitespace.go å•è¯ 0 æ˜¯: Mary å•è¯ 1 æ˜¯: had å•è¯ 2 æ˜¯: a å•è¯ 3 æ˜¯: little å•è¯ 4 æ˜¯: lamb åˆ›å»ºæ–‡ä»¶anyother.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const refString = \u0026quot;Mary_had a little_lamb\u0026quot; func main() { words := strings.Split(refString, \u0026quot;_\u0026quot;) for idx, word := range words { fmt.Printf(\u0026quot;å•è¯ %d æ˜¯: %s\\n\u0026quot;, idx, word) } } $ go run anyother.go å•è¯ 0 æ˜¯: Mary å•è¯ 1 æ˜¯: had a little å•è¯ 2 æ˜¯: lamb åˆ›å»ºæ–‡ä»¶specfunction.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const refString = \u0026quot;Mary*had,a%little_lamb\u0026quot; func main() { // ä¸ºå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªç¬¦æ–‡è°ƒç”¨splitFuncã€‚å¦‚æœç¬¦æ–‡ç­‰äºâ€œ*ï¼…,_â€ä¸­çš„ä»»ä½•å­—ç¬¦ï¼Œåˆ™æ‹†åˆ†refString splitFunc := func(r rune) bool { return strings.ContainsRune(\u0026quot;*%,_\u0026quot;, r) } words := strings.FieldsFunc(refString, splitFunc) for idx, word := range words { fmt.Printf(\u0026quot;å•è¯ %d æ˜¯: %s\\n\u0026quot;, idx, word) } } $ go run specfunction.go å•è¯ 0 æ˜¯: Mary å•è¯ 1 æ˜¯: had å•è¯ 2 æ˜¯: a å•è¯ 3 æ˜¯: little å•è¯ 4 æ˜¯: lamb åˆ›å»ºæ–‡ä»¶regex.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;regexp\u0026quot; ) const refString = \u0026quot;Mary*had,a%little_lamb\u0026quot; func main() { words := regexp.MustCompile(\u0026quot;[*,%_]{1}\u0026quot;).Split(refString, -1) for idx, word := range words { fmt.Printf(\u0026quot;å•è¯ %d æ˜¯: %s\\n\u0026quot;, idx, word) } } $ go run regex.go å•è¯ 0 æ˜¯: Mary å•è¯ 1 æ˜¯: had å•è¯ 2 æ˜¯: a å•è¯ 3 æ˜¯: little å•è¯ 4 æ˜¯: lamb åŸç† å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•è¯çš„æœ€ç®€å•å½¢å¼æ˜¯å°†ä»»ä½•ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ã€‚å…¶ä¸­ç©ºæ ¼ç”±unicodeåŒ…ä¸­çš„IsSpaceå‡½æ•°å®šä¹‰:\n\u0026lsquo;\\t\u0026rsquo;, \u0026lsquo;\\n\u0026rsquo;, \u0026lsquo;\\v\u0026rsquo;, \u0026lsquo;\\f\u0026rsquo;, \u0026lsquo;\\r\u0026rsquo;, \u0026rsquo; \u0026lsquo;, U+0085 (NEL), U+00A0 (NBSP).\nå¦‚å‰æ‰€è¿°ï¼ŒstringåŒ…çš„Fieldså‡½æ•°å¯ç”¨äºç©ºæ ¼å­—ç¬¦åˆ†å‰²å¥å­ã€‚æ­¥éª¤1æ¶µç›–äº†ç¬¬ä¸€ä¸ªç®€å•çš„æ¡ˆä¾‹ã€‚\nå¦‚æœéœ€è¦å…¶ä»–åˆ†éš”ç¬¦ï¼Œåˆ™ä½¿ç”¨Splitå‡½æ•°ã€‚åœ¨æ­¥éª¤2ä¸­è®¨è®ºäº†ç”¨å¦ä¸€ä¸ªåˆ†éš”ç¬¦è¿›è¡Œåˆ†å‰²ã€‚è¯·æ³¨æ„ï¼Œå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼è¢«çœç•¥äº†ã€‚\nå¦‚æœéœ€è¦ä¸€ä¸ªæ›´å¤æ‚çš„å‡½æ•°æ¥å†³å®šæ˜¯å¦åœ¨ç»™å®šçš„ä½ç½®æ‹†åˆ†å­—ç¬¦ä¸²ï¼ŒFieldsFuncå¯ä»¥ä¸ºä½ æä¾›å¸®åŠ©ã€‚è¯¥å‡½æ•°çš„ä¸€ä¸ªå‚æ•°æ˜¯ä½¿ç”¨ç»™å®šå­—ç¬¦ä¸²çš„ç¬¦æ–‡å¹¶è¿”å›true(å¦‚æœè¯¥å­—ç¬¦ä¸²åœ¨è¯¥ç‚¹åº”è¯¥åˆ†å‰²)çš„å‡½æ•°ã€‚è¿™ä¸ªé€‰é¡¹åŒ…å«åœ¨æ­¥éª¤3ä¸­ã€‚\næ­£åˆ™è¡¨è¾¾å¼æ˜¯ç¤ºä¾‹ä¸­æåˆ°çš„æœ€åä¸€ä¸ªé€‰é¡¹ã€‚RegexpåŒ…çš„Regexpç»“æ„ä½“åŒ…å«Splitæ–¹æ³•ï¼Œå…¶å·¥ä½œæ–¹å¼ä¸æ‚¨æ‰€æœŸæœ›çš„ä¸€æ ·ã€‚å®ƒå°†å­—ç¬¦ä¸²åˆ†å‰²åˆ°åŒ¹é…ç»„çš„ä½ç½®ã€‚æ­¤æ–¹æ³•åœ¨æ­¥éª¤4ä¸­ä½¿ç”¨ã€‚\nå»¶ä¼¸ è¯¥stringsåŒ…è¿˜æä¾›å„ç§SplitXXXåŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©ä½ å®ç°æ›´å…·ä½“çš„ä»»åŠ¡ã€‚\n","id":59,"section":"posts","summary":"\u003cp\u003eå°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºå•è¯å¯èƒ½å¾ˆæ£˜æ‰‹ã€‚é¦–å…ˆï¼Œç¡®å®šå•è¯æ˜¯ä»€ä¹ˆï¼Œä»¥åŠåˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ˜¯å¦æœ‰ä»»ä½•ç©ºæ ¼æˆ–ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚åšå‡ºè¿™äº›å†³å®šåï¼Œä½ å¯ä»¥ä»stringsåŒ…ä¸­é€‰æ‹©é€‚å½“çš„åŠŸèƒ½ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å°†å­—ç¬¦ä¸²åˆ†è§£ä¸ºå•è¯","uri":"https://www.ganymedenil.com/2019/05/24/go-standard-library-by-decompose-a-string-into-words.html","year":"2019"},{"content":"åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²æ˜¯å¼€å‘äººå‘˜æœ€å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚å¤§å¤šæ•°ä¸»æµè¯­è¨€éƒ½æ˜¯åœ¨æ ‡å‡†åº“ä¸­å®ç°çš„ã€‚Goä¹Ÿä¸ä¾‹å¤–ã€‚\nåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸² Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²æ˜¯å¼€å‘äººå‘˜æœ€å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚å¤§å¤šæ•°ä¸»æµè¯­è¨€éƒ½æ˜¯åœ¨æ ‡å‡†åº“ä¸­å®ç°çš„ã€‚Goä¹Ÿä¸ä¾‹å¤–ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;strings\u0026quot; ) const refString = \u0026quot;Mary had a little lamb\u0026quot; func main() { lookFor := \u0026quot;lamb\u0026quot; contain := strings.Contains(refString, lookFor) fmt.Printf(\u0026quot;\\\u0026quot;%s\\\u0026quot; åŒ…å« \\\u0026quot;%s\\\u0026quot;: %t \\n\u0026quot;, refString, lookFor, contain) lookFor = \u0026quot;wolf\u0026quot; contain = strings.Contains(refString, lookFor) fmt.Printf(\u0026quot;\\\u0026quot;%s\\\u0026quot; åŒ…å« \\\u0026quot;%s\\\u0026quot;: %t \\n\u0026quot;, refString, lookFor, contain) startsWith := \u0026quot;Mary\u0026quot; starts := strings.HasPrefix(refString, startsWith) fmt.Printf(\u0026quot;\\\u0026quot;%s\\\u0026quot; ä» \\\u0026quot;%s\\\u0026quot; å¼€å§‹: %t \\n\u0026quot;, refString, startsWith, starts) endWith := \u0026quot;lamb\u0026quot; ends := strings.HasSuffix(refString, endWith) fmt.Printf(\u0026quot;\\\u0026quot;%s\\\u0026quot; åˆ° \\\u0026quot;%s\\\u0026quot; ç»“æŸ: %t \\n\u0026quot;, refString, endWith, ends) } $ go run main.go \u0026quot;Mary had a little lamb\u0026quot; åŒ…å« \u0026quot;lamb\u0026quot;: true \u0026quot;Mary had a little lamb\u0026quot; åŒ…å« \u0026quot;wolf\u0026quot;: false \u0026quot;Mary had a little lamb\u0026quot; ä» \u0026quot;Mary\u0026quot; å¼€å§‹: true \u0026quot;Mary had a little lamb\u0026quot; åˆ° \u0026quot;lamb\u0026quot; ç»“æŸ: true åŸç† Goçš„stringsåº“åŒ…å«å¤„ç†å­—ç¬¦ä¸²æ“ä½œçš„å‡½æ•°ã€‚è¿™æ¬¡Containså‡½æ•°å°±å¯ä»¥ä½¿ç”¨ ã€‚è¯¥Containså‡½æ•°åªæ˜¯æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å…·æœ‰ç»™å®šçš„å­å­—ç¬¦ä¸²ã€‚å®é™…ä¸Šï¼ŒContainså‡½æ•°ä¸­ä½¿ç”¨äº†Indexå‡½æ•°ã€‚\nè¦æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥å­å­—ç¬¦ä¸²å¼€å¤´ï¼ŒHasPrefixå‡½æ•°å°±åœ¨é‚£é‡Œã€‚è¦æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥å­å­—ç¬¦ä¸²ç»“å°¾ï¼ŒHasSuffixå‡½æ•°å°†èµ·ä½œç”¨ã€‚\nå®é™…ä¸Šï¼Œè¯¥Containså‡½æ•°æ˜¯é€šè¿‡ä½¿ç”¨æ¥è‡ªåŒä¸€åŒ…çš„Indexå‡½æ•°æ¥å®ç°çš„ ã€‚ä½ å¯ä»¥çŒœåˆ°ï¼Œå®é™…çš„å®ç°æ˜¯è¿™æ ·çš„ï¼šå¦‚æœç»™å®šå­å­—ç¬¦ä¸²çš„ç´¢å¼•å¤§äº-1ï¼Œåˆ™Containså‡½æ•°è¿”å›trueã€‚\nHasPrefixå’ŒHasSuffixå‡½æ•°çš„å·¥ä½œæ–¹å¼ä¸åŒ:å†…éƒ¨å®ç°åªæ£€æŸ¥å­—ç¬¦ä¸²å’Œå­å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰æˆ–å­—ç¬¦ä¸²æ›´é•¿ï¼Œåˆ™æ¯”è¾ƒå­—ç¬¦ä¸²æ‰€éœ€çš„éƒ¨åˆ†ã€‚\n","id":60,"section":"posts","summary":"\u003cp\u003eåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²æ˜¯å¼€å‘äººå‘˜æœ€å¸¸è§çš„ä»»åŠ¡ä¹‹ä¸€ã€‚å¤§å¤šæ•°ä¸»æµè¯­è¨€éƒ½æ˜¯åœ¨æ ‡å‡†åº“ä¸­å®ç°çš„ã€‚Goä¹Ÿä¸ä¾‹å¤–ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å­å­—ç¬¦ä¸²","uri":"https://www.ganymedenil.com/2019/05/23/go-standard-library-by-find-a-substring-in-a-string.html","year":"2019"},{"content":"æœåŠ¡å’Œå®ˆæŠ¤ç¨‹åºæ˜¯è¿è¡Œå¾ˆé•¿æ—¶é—´ï¼ˆé€šå¸¸æ˜¯å‡ å¤©ç”šè‡³å‡ å‘¨ï¼‰çš„ç¨‹åºã€‚è¿™äº›é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºé€šå¸¸åœ¨å¼€å§‹æ—¶åˆ†é…èµ„æºï¼ˆæ•°æ®åº“è¿æ¥ï¼Œç½‘ç»œsockï¼‰å¹¶ä¿ç•™è¿™äº›èµ„æºï¼Œåªè¦å®ƒä»¬å­˜åœ¨ï¼Œå°±ä¸ä¼šé‡Šæ”¾ã€‚å¦‚æœæ­¤ç±»è¿›ç¨‹è¢«ç»ˆæ­¢å¹¶ä¸”æœªæ­£ç¡®å¤„ç†å…³é—­ï¼Œåˆ™å¯èƒ½å‘ç”Ÿèµ„æºæ³„æ¼ã€‚ä¸ºäº†é¿å…è¿™ç§è¡Œä¸ºï¼Œåº”è¯¥å®ç°æ‰€è°“çš„æ­£å¸¸å…³é—­ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼˜é›… æ„å‘³ç€åº”ç”¨ç¨‹åºæ•è·ç»ˆæ­¢ä¿¡å·ï¼ˆå¦‚æœå¯èƒ½ï¼‰ï¼Œå¹¶å°è¯•åœ¨ç»ˆæ­¢ä¹‹å‰æ¸…ç†å’Œé‡Šæ”¾åˆ†é…çš„èµ„æºã€‚æœ¬ç¯‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•å®ç°æ­£å¸¸å…³é—­ã€‚\næ­£å¸¸å…³é—­åº”ç”¨ç¨‹åº Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœåŠ¡å’Œå®ˆæŠ¤ç¨‹åºæ˜¯è¿è¡Œå¾ˆé•¿æ—¶é—´ï¼ˆé€šå¸¸æ˜¯å‡ å¤©ç”šè‡³å‡ å‘¨ï¼‰çš„ç¨‹åºã€‚è¿™äº›é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºé€šå¸¸åœ¨å¼€å§‹æ—¶åˆ†é…èµ„æºï¼ˆæ•°æ®åº“è¿æ¥ï¼Œç½‘ç»œsockï¼‰å¹¶ä¿ç•™è¿™äº›èµ„æºï¼Œåªè¦å®ƒä»¬å­˜åœ¨ï¼Œå°±ä¸ä¼šé‡Šæ”¾ã€‚å¦‚æœæ­¤ç±»è¿›ç¨‹è¢«ç»ˆæ­¢å¹¶ä¸”æœªæ­£ç¡®å¤„ç†å…³é—­ï¼Œåˆ™å¯èƒ½å‘ç”Ÿèµ„æºæ³„æ¼ã€‚ä¸ºäº†é¿å…è¿™ç§è¡Œä¸ºï¼Œåº”è¯¥å®ç°æ‰€è°“çš„æ­£å¸¸å…³é—­ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼˜é›… æ„å‘³ç€åº”ç”¨ç¨‹åºæ•è·ç»ˆæ­¢ä¿¡å·ï¼ˆå¦‚æœå¯èƒ½ï¼‰ï¼Œå¹¶å°è¯•åœ¨ç»ˆæ­¢ä¹‹å‰æ¸…ç†å’Œé‡Šæ”¾åˆ†é…çš„èµ„æºã€‚æœ¬ç¯‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•å®ç°æ­£å¸¸å…³é—­ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/signal\u0026quot; \u0026quot;syscall\u0026quot; \u0026quot;time\u0026quot; ) var writer *os.File func main() { // è¯¥æ–‡ä»¶ä½œä¸ºè¦å†™å…¥çš„æ—¥å¿—æ–‡ä»¶æ‰“å¼€ã€‚è¿™æ ·æˆ‘ä»¬å°±ä»£è¡¨äº†èµ„æºåˆ†é…ã€‚ var err error writer, err = os.OpenFile(fmt.Sprintf(\u0026quot;test_%d.log\u0026quot;, time.Now().Unix()), os.O_RDWR|os.O_CREATE, os.ModePerm) if err != nil { panic(err) } // ä»£ç ç‹¬ç«‹åœ°åœ¨goroutineä¸­è¿è¡Œã€‚å› æ­¤ï¼Œå¦‚æœç¨‹åºä»å¤–éƒ¨ç»ˆæ­¢ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡closeChanè®©goroutineçŸ¥é“ closeChan := make(chan bool) go func() { for { time.Sleep(time.Second) select { case \u0026lt;-closeChan: log.Println(\u0026quot;Goroutine å…³é—­...\u0026quot;) return default: log.Println(\u0026quot;å†™å…¥æ—¥å¿—\u0026quot;) io.WriteString(writer, fmt.Sprintf(\u0026quot;è®°å½•å†™å…¥ %s\\n\u0026quot;, time.Now().String())) } } }() sigChan := make(chan os.Signal, 1) signal.Notify(sigChan, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGINT) // å µå¡ä»sigChanè¯»å–Notifyå‡½æ•°å‘é€çš„ä¿¡å· \u0026lt;-sigChan // æ”¶åˆ°ä¿¡å·åï¼Œé€šé“è¯»å–åé¢çš„æ‰€æœ‰ä»£ç éƒ½å¯ä»¥è§†ä¸ºæ¸…ç†ã€‚æ¸…æ´éƒ¨åˆ† close(closeChan) releaseAllResources() fmt.Println(\u0026quot;åº”ç”¨ç¨‹åºæ­£å¸¸å…³é—­\u0026quot;) } func releaseAllResources() { io.WriteString(writer, \u0026quot;åº”ç”¨ç¨‹åºé‡Šæ”¾æ‰€æœ‰èµ„æº \\n\u0026quot;) writer.Close() } $ go run main.go 2019/05/22 20:16:00 å†™å…¥æ—¥å¿— 2019/05/22 20:16:01 å†™å…¥æ—¥å¿— 2019/05/22 20:16:02 å†™å…¥æ—¥å¿— ^Cåº”ç”¨ç¨‹åºæ­£å¸¸å…³é—­ $ cat test_1558509359.log è®°å½•å†™å…¥ 2019-05-22 20:16:00.2506194 +0800 CST m=+1.017343401 è®°å½•å†™å…¥ 2019-05-22 20:16:01.2513848 +0800 CST m=+2.018108801 è®°å½•å†™å…¥ 2019-05-22 20:16:02.2527773 +0800 CST m=+3.019501301 åº”ç”¨ç¨‹åºé‡Šæ”¾æ‰€æœ‰èµ„æº åŸç† ä»sigChanè¯»å–çš„æ•°æ®è¢«é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸€ç›´è¿è¡Œï¼Œç›´åˆ°ä¿¡å·é€šè¿‡é€šé“å‘é€ã€‚sigChanæ˜¯Notifyå‡½æ•°å‘é€ä¿¡å·çš„é€šé“ã€‚\nç¨‹åºçš„ä¸»ä»£ç åœ¨ä¸€ä¸ªæ–°çš„goroutineä¸­è¿è¡Œã€‚è¿™æ ·ï¼Œå½“sigChanä¸Šçš„ä¸»å‡½æ•°è¢«é˜»å¡æ—¶ï¼Œå·¥ä½œå°†ç»§ç»­è¿›è¡Œã€‚ä¸€æ—¦æ“ä½œç³»ç»Ÿçš„ä¿¡å·è¢«å‘é€åˆ°è¿›ç¨‹ä¸­ï¼ŒsigChanå°†æ¥æ”¶ä¿¡å·å¹¶ä¸”æ‰§è¡Œä»sigChané€šé“è¯»å–çš„ä»£ç ã€‚è¿™æ®µä»£ç å¯ä»¥çœ‹ä½œæ˜¯æ¸…ç†éƒ¨åˆ†ã€‚\næ³¨æ„ï¼Œç»ˆç«¯è¾“å‡ºåŒ…å«çš„æœ€ç»ˆæ—¥å¿—ï¼Œåº”ç”¨ç¨‹åºé‡Šæ”¾æ‰€æœ‰èµ„æºï¼Œè¿™æ˜¯æ¸…ç†éƒ¨åˆ†çš„ä¸€éƒ¨åˆ†ã€‚\n","id":61,"section":"posts","summary":"\u003cp\u003eæœåŠ¡å’Œå®ˆæŠ¤ç¨‹åºæ˜¯è¿è¡Œå¾ˆé•¿æ—¶é—´ï¼ˆé€šå¸¸æ˜¯å‡ å¤©ç”šè‡³å‡ å‘¨ï¼‰çš„ç¨‹åºã€‚è¿™äº›é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºé€šå¸¸åœ¨å¼€å§‹æ—¶åˆ†é…èµ„æºï¼ˆæ•°æ®åº“è¿æ¥ï¼Œç½‘ç»œsockï¼‰å¹¶ä¿ç•™è¿™äº›èµ„æºï¼Œåªè¦å®ƒä»¬å­˜åœ¨ï¼Œå°±ä¸ä¼šé‡Šæ”¾ã€‚å¦‚æœæ­¤ç±»è¿›ç¨‹è¢«ç»ˆæ­¢å¹¶ä¸”æœªæ­£ç¡®å¤„ç†å…³é—­ï¼Œåˆ™å¯èƒ½å‘ç”Ÿèµ„æºæ³„æ¼ã€‚ä¸ºäº†é¿å…è¿™ç§è¡Œä¸ºï¼Œåº”è¯¥å®ç°æ‰€è°“çš„æ­£å¸¸å…³é—­ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼˜é›… æ„å‘³ç€åº”ç”¨ç¨‹åºæ•è·ç»ˆæ­¢ä¿¡å·ï¼ˆå¦‚æœå¯èƒ½ï¼‰ï¼Œå¹¶å°è¯•åœ¨ç»ˆæ­¢ä¹‹å‰æ¸…ç†å’Œé‡Šæ”¾åˆ†é…çš„èµ„æºã€‚æœ¬ç¯‡å°†å‘ä½ å±•ç¤ºå¦‚ä½•å®ç°æ­£å¸¸å…³é—­ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹æ­£å¸¸å…³é—­åº”ç”¨ç¨‹åº","uri":"https://www.ganymedenil.com/2019/05/23/go-standard-library-by-close-the-application-gracefully.html","year":"2019"},{"content":"æœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•å¤„ç†åº”ç”¨ç¨‹åºçš„å¯é€‰é…ç½®ï¼Œå¹¶åœ¨å…·æœ‰æ–‡ä»¶é…ç½®çš„å®é™…æ¡ˆä¾‹ä¸­ä½¿ç”¨åŠŸèƒ½é€‰é¡¹æ¨¡å¼ã€‚\nå¸¦åŠŸèƒ½é€‰é¡¹çš„æ–‡ä»¶é…ç½® Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•å¤„ç†åº”ç”¨ç¨‹åºçš„å¯é€‰é…ç½®ï¼Œå¹¶åœ¨å…·æœ‰æ–‡ä»¶é…ç½®çš„å®é™…æ¡ˆä¾‹ä¸­ä½¿ç”¨åŠŸèƒ½é€‰é¡¹æ¨¡å¼ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶main.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;encoding/json\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) type Client struct { consulIP string connString string } func (c *Client) String() string { return fmt.Sprintf(\u0026quot;ConsulIPï¼š%sï¼ŒconnStringï¼š%s\u0026quot;, c.consulIP, c.connString) } var defaultClient = Client{ consulIP: \u0026quot;localhost:9000\u0026quot;, connString: \u0026quot;postgres://localhost:5432\u0026quot;, } // ConfigFuncç”¨ä½œè¦åœ¨åŠŸèƒ½é€‰é¡¹ä¸­ä½¿ç”¨çš„ç±»å‹ type ConfigFunc func(opt *Client) // FromFile funcè¿”å›ConfigFuncç±»å‹ã€‚è¿™æ ·å®ƒå°±å¯ä»¥ä»jsonè¯»å–é…ç½® func FromFile(path string) ConfigFunc { return func(opt *Client) { f, err := os.Open(path) if err != nil { panic(err) } defer f.Close() decoder := json.NewDecoder(f) fop := struct { ConsulIP string `json:\u0026quot;consul_ip\u0026quot;` }{} err = decoder.Decode(\u0026amp;fop) if err != nil { panic(err) } opt.consulIP = fop.ConsulIP } } // FromEnvä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®å¹¶å°†å®ƒä»¬ä¸ç°æœ‰å˜é‡ç»„åˆ func FromEnv() ConfigFunc { return func(opt *Client) { connStr, exist := os.LookupEnv(\u0026quot;CONN_DB\u0026quot;) if exist { opt.connString = connStr } } } func NewClient(opts ...ConfigFunc) *Client { client := defaultClient for _, val := range opts { val(\u0026amp;client) } return \u0026amp;client } func main() { client := NewClient(FromFile(\u0026quot;config.json\u0026quot;), FromEnv()) fmt.Println(client.String()) } åˆ›å»ºæ–‡ä»¶config.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n{ \u0026quot;consul_ip\u0026quot;:\u0026quot;127.0.0.1\u0026quot; } $ export CONN_DB=oracle://local:5921 \u0026amp;\u0026amp; go run main.go ConsulIPï¼š127.0.0.1ï¼ŒconnStringï¼šoracle://local:5921 åŸç† å‡½æ•°é€‰é¡¹æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯é…ç½®APIåŒ…å«å‡½æ•°å‚æ•°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒNewClientå‡½æ•°æ¥å—ä¸åŒæ•°é‡çš„ConfigFuncå‚æ•°ï¼Œç„¶ååœ¨defaultClientç»“æ„ä¸Šé€ä¸€åº”ç”¨è¿™äº›å‚æ•°ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥éå¸¸çµæ´»åœ°ä¿®æ”¹é»˜è®¤é…ç½®ã€‚\nè¯·å‚é˜…FromFileå’ŒFromEnvå‡½æ•°ï¼Œå®ƒä»¬è¿”å›ConfigFuncï¼Œå®é™…ä¸Šæ˜¯è®¿é—®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡ã€‚\næœ€åï¼Œå¯ä»¥æ£€æŸ¥è¾“å‡ºï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªæ–‡ä»¶å’Œç¯å¢ƒå˜é‡çš„å€¼ã€‚\n","id":62,"section":"posts","summary":"\u003cp\u003eæœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•å¤„ç†åº”ç”¨ç¨‹åºçš„å¯é€‰é…ç½®ï¼Œå¹¶åœ¨å…·æœ‰æ–‡ä»¶é…ç½®çš„å®é™…æ¡ˆä¾‹ä¸­ä½¿ç”¨åŠŸèƒ½é€‰é¡¹æ¨¡å¼ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å¸¦åŠŸèƒ½é€‰é¡¹çš„æ–‡ä»¶é…ç½®","uri":"https://www.ganymedenil.com/2019/05/22/go-standard-library-by-file-configuration-with-function-options.html","year":"2019"},{"content":"ä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿä¸æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹è¿›è¡Œé€šä¿¡çš„åŸºæœ¬æ–¹å¼ã€‚å…¶ä¸­ä¸¤ç§æœ€å¸¸è§çš„ä¿¡å·æ˜¯SIGINTå’ŒSIGTERMã€‚è¿™ä¸¤ä¸ªä¿¡å·å°†å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚\nè¿˜æœ‰ä¿¡å·å¦‚SIGHUPã€‚SIGHUPè¡¨ç¤ºè°ƒç”¨è¯¥è¿›ç¨‹çš„ç»ˆç«¯å·²ç»å…³é—­ï¼Œä¾‹å¦‚ï¼Œç¨‹åºå¯ä»¥é€šè¿‡è¯¥ä¿¡å·å†³å®šæ˜¯å¦ç§»åŠ¨åˆ°åå°æ‰§è¡Œã€‚\nGoæä¾›äº†ä¸€ç§åœ¨åº”ç”¨ç¨‹åºæ”¶åˆ°ä¿¡å·æ—¶å¤„ç†è¡Œä¸ºçš„æ–¹æ³•ã€‚\nå¤„ç†æ“ä½œç³»ç»Ÿä¿¡å· Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿä¸æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹è¿›è¡Œé€šä¿¡çš„åŸºæœ¬æ–¹å¼ã€‚å…¶ä¸­ä¸¤ç§æœ€å¸¸è§çš„ä¿¡å·æ˜¯SIGINTå’ŒSIGTERMã€‚è¿™ä¸¤ä¸ªä¿¡å·å°†å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚\nè¿˜æœ‰ä¿¡å·å¦‚SIGHUPã€‚SIGHUPè¡¨ç¤ºè°ƒç”¨è¯¥è¿›ç¨‹çš„ç»ˆç«¯å·²ç»å…³é—­ï¼Œä¾‹å¦‚ï¼Œç¨‹åºå¯ä»¥é€šè¿‡è¯¥ä¿¡å·å†³å®šæ˜¯å¦ç§»åŠ¨åˆ°åå°æ‰§è¡Œã€‚\nGoæä¾›äº†ä¸€ç§åœ¨åº”ç”¨ç¨‹åºæ”¶åˆ°ä¿¡å·æ—¶å¤„ç†è¡Œä¸ºçš„æ–¹æ³•ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/signal\u0026quot; \u0026quot;syscall\u0026quot; ) func main() { // åˆ›å»ºå°†å‘é€æ¥æ”¶ä¿¡å·çš„é€šé“ã€‚ // å‘é€ä¿¡å·ä¸”é€šé“æœªå°±ç»ªæ—¶ï¼Œ // é€šçŸ¥ä¸ä¼šé˜»æ­¢ã€‚å› æ­¤æœ€å¥½åˆ›å»º // ç¼“å†²é€šé“ã€‚ sChan := make(chan os.Signal, 1) // Notify å°†æ•è·ç»™å®šçš„ä¿¡å·å¹¶é€šè¿‡ sChan // å‘é€ os.Signal å€¼ã€‚å¦‚æœå‚æ•°ä¸­æœªæŒ‡å®š // ä¿¡å·ï¼Œåˆ™åŒ¹é…æ‰€æœ‰ä¿¡å·ã€‚ signal.Notify(sChan, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT) // åˆ›å»ºè¦ç­‰å¾…ä¿¡å·å¤„ç†çš„é€šé“ exitChan := make(chan int) go func() { signal := \u0026lt;-sChan switch signal { case syscall.SIGHUP: fmt.Println(\u0026quot;ç»ˆç«¯å·²ç»å…³é—­\u0026quot;) exitChan \u0026lt;- 0 case syscall.SIGINT: fmt.Println(\u0026quot;è¯¥ç¨‹åºå·²è¢« CTRL+C ä¸­æ–­\u0026quot;) exitChan \u0026lt;- 1 case syscall.SIGTERM: fmt.Println(\u0026quot;é€šè¿‡ SIGTERM ä¿¡å·å…³é—­\u0026quot;) exitChan \u0026lt;- 1 case syscall.SIGQUIT: fmt.Println(\u0026quot;é€šè¿‡ SIGQUIT ä¿¡å·å…³é—­\u0026quot;) exitChan \u0026lt;- 1 } }() code := \u0026lt;-exitChan os.Exit(code) } è¿è¡Œ go run main.goï¼Œç„¶åæ‰§è¡Œ CTRL + C å‘é€ SIGINT ä¿¡å·\n$ go run main.go ^Cè¯¥ç¨‹åºå·²è¢« CTRL+C ä¸­æ–­ åŸç† åº”ç”¨åœ¨è·å–èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ä¸­æ–­ä¼šå‘ç”Ÿèµ„æºæ³„æ¼ã€‚è¿™ä¸ªæ—¶å€™æœ€å¥½é€šè¿‡ä¿¡å·æ¥é‡‡å–ä¸€äº›å¿…è¦çš„æªæ–½æ¥é‡Šæ”¾èµ„æºã€‚\nsignalåŒ…ä¸­çš„Notifyæ–¹æ³•å°†å¸®åŠ©æˆ‘ä»¬å¤„ç†æ¥æ”¶åˆ°çš„ä¿¡å·ã€‚\nå¦‚æœåœ¨Notifyæ–¹æ³•ä¸­æ²¡æœ‰æŒ‡å®šä¿¡å·ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°†æ•è·æ‰€æœ‰å¯èƒ½çš„ä¿¡å·ã€‚\næ³¨æ„ï¼ŒsignalåŒ…çš„Notifyæ–¹æ³•é€šè¿‡sChané€šé“ä¸goroutineé€šä¿¡ã€‚Notifyç„¶åæ•è·å®šä¹‰çš„ä¿¡å·å¹¶å°†å…¶å‘é€åˆ°goroutineè¿›è¡Œå¤„ç†ã€‚æœ€åï¼Œä½¿ç”¨exitChanè§£æè¿›ç¨‹çš„é€€å‡ºä»£ç ã€‚\né‡è¦çš„æ˜¯ï¼Œå¦‚æœæŒ‡å®šçš„é€šé“æ²¡æœ‰å‡†å¤‡å¥½ï¼ŒNotifyæ–¹æ³•ä¸ä¼šé˜»å¡ä¿¡å·ã€‚è¿™æ ·ä¿¡å·å°±ä¼šè¢«é”™è¿‡ã€‚ä¸ºäº†é¿å…ä¸¢å¤±ä¿¡å·ï¼Œæœ€å¥½åˆ›å»ºç¼“å†²é€šé“ã€‚\næ³¨æ„ï¼ŒSIGKILLå’ŒSIGSTOPä¿¡å·å¯èƒ½ä¸ä¼šè¢«Notifyæ–¹æ³•æ•è·ï¼Œå› æ­¤æ— æ³•å¤„ç†è¿™äº›ä¿¡å·ã€‚\n","id":63,"section":"posts","summary":"\u003cp\u003eä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿä¸æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹è¿›è¡Œé€šä¿¡çš„åŸºæœ¬æ–¹å¼ã€‚å…¶ä¸­ä¸¤ç§æœ€å¸¸è§çš„ä¿¡å·æ˜¯\u003ccode\u003eSIGINT\u003c/code\u003eå’Œ\u003ccode\u003eSIGTERM\u003c/code\u003eã€‚è¿™ä¸¤ä¸ªä¿¡å·å°†å¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚\u003c/p\u003e\n\u003cp\u003eè¿˜æœ‰ä¿¡å·å¦‚\u003ccode\u003eSIGHUP\u003c/code\u003eã€‚\u003ccode\u003eSIGHUP\u003c/code\u003eè¡¨ç¤ºè°ƒç”¨è¯¥è¿›ç¨‹çš„ç»ˆç«¯å·²ç»å…³é—­ï¼Œä¾‹å¦‚ï¼Œç¨‹åºå¯ä»¥é€šè¿‡è¯¥ä¿¡å·å†³å®šæ˜¯å¦ç§»åŠ¨åˆ°åå°æ‰§è¡Œã€‚\u003c/p\u003e\n\u003cp\u003eGoæä¾›äº†ä¸€ç§åœ¨åº”ç”¨ç¨‹åºæ”¶åˆ°ä¿¡å·æ—¶å¤„ç†è¡Œä¸ºçš„æ–¹æ³•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹å¤„ç†æ“ä½œç³»ç»Ÿä¿¡å·","uri":"https://www.ganymedenil.com/2019/05/22/go-standard-library-by-handling-operating-system-signals.html","year":"2019"},{"content":"GoäºŒè¿›åˆ¶æ–‡ä»¶è¿˜å¯ä»¥ç”¨ä½œå„ç§å®ç”¨ç¨‹åºçš„å·¥å…·ï¼Œå¹¶ä¸”go runä¹Ÿå¯ä»¥ç”¨ä½œbashè„šæœ¬çš„ä»£æ›¿å“ã€‚\nè°ƒç”¨å¤–éƒ¨è¿›ç¨‹ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ GoäºŒè¿›åˆ¶æ–‡ä»¶è¿˜å¯ä»¥ç”¨ä½œå„ç§å®ç”¨ç¨‹åºçš„å·¥å…·ï¼Œå¹¶ä¸”go runä¹Ÿå¯ä»¥ç”¨ä½œbashè„šæœ¬çš„ä»£æ›¿å“ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶run.goæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bytes\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; ) func main() { prc := exec.Command(\u0026quot;ls\u0026quot;, \u0026quot;-a\u0026quot;) out := bytes.NewBuffer([]byte{}) prc.Stdout = out err := prc.Run() if err != nil { fmt.Println(err) } if prc.ProcessState.Success() { fmt.Println(\u0026quot;æ‰§è¡ŒæˆåŠŸï¼š\u0026quot;) fmt.Println(out.String()) } } $ go run run.go æ‰§è¡ŒæˆåŠŸï¼š . .. run.go åˆ›å»ºæ–‡ä»¶start.goæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bytes\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; ) func main() { prc := exec.Command(\u0026quot;ls\u0026quot;, \u0026quot;-a\u0026quot;) out := bytes.NewBuffer([]byte{}) prc.Stdout = out err := prc.Start() if err != nil { fmt.Println(err) } prc.Wait() if prc.ProcessState.Success() { fmt.Println(\u0026quot;æ‰§è¡ŒæˆåŠŸï¼š\u0026quot;) fmt.Println(out.String()) } } $ go run start.go æ‰§è¡ŒæˆåŠŸï¼š . .. run.go start.go åŸç† Goæ ‡å‡†åº“æä¾›äº†ä¸€ç§ç®€å•çš„è°ƒç”¨å¤–éƒ¨è¿›ç¨‹çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡os/execåŒ…ä¸­çš„Commandæ–¹æ³•å®ç°ã€‚\næœ€ç®€å•çš„æ–¹æ³•æ˜¯åˆ›å»ºCmdç»“æ„ä½“å¹¶è°ƒç”¨Runæ–¹æ³•ã€‚Runæ–¹æ³•æ‰§è¡Œè¿›ç¨‹å¹¶ç­‰å¾…å®ƒå®Œæˆã€‚å¦‚æœå‘½ä»¤é”™è¯¯é€€å‡ºï¼Œåˆ™errå€¼ä¸ä¸ºç©ºã€‚\nè¿™æ›´é€‚åˆè°ƒç”¨OS utilså’Œå·¥å…·ï¼Œå› ä¸ºç¨‹åºä¸ä¼šæŒ‚èµ·å¤ªä¹…ã€‚\nå¤–éƒ¨è¿›ç¨‹ä¹Ÿå¯ä»¥å¼‚æ­¥æ‰§è¡Œã€‚é€šè¿‡è°ƒç”¨Cmdç»“æ„ä½“çš„Startæ–¹æ³•æ¥å®ç°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤–éƒ¨è¿›ç¨‹æ‰§è¡Œï¼Œä½†æ˜¯ä¸»goroutineä¸ä¼šç­‰åˆ°å®ƒç»“æŸã€‚Waitæ–¹æ³•å¯ç”¨äºç­‰å¾…è¿›ç¨‹ç»“æŸã€‚ç­‰å¾…æ–¹æ³•å®Œæˆåï¼Œè¿›ç¨‹çš„èµ„æºå°†è¢«é‡Šæ”¾ã€‚\nè¿™ç§æ–¹æ³•æ›´é€‚ç”¨äºæ‰§è¡Œç¨‹åºçš„å¤–éƒ¨ä¾èµ–å­˜åœ¨è€—æ—¶çš„æµç¨‹å’ŒæœåŠ¡ã€‚\n","id":64,"section":"posts","summary":"\u003cp\u003eGoäºŒè¿›åˆ¶æ–‡ä»¶è¿˜å¯ä»¥ç”¨ä½œå„ç§å®ç”¨ç¨‹åºçš„å·¥å…·ï¼Œå¹¶ä¸”\u003ccode\u003ego run\u003c/code\u003eä¹Ÿå¯ä»¥ç”¨ä½œbashè„šæœ¬çš„ä»£æ›¿å“ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è°ƒç”¨å¤–éƒ¨è¿›ç¨‹","uri":"https://www.ganymedenil.com/2019/05/21/go-standard-library-by-calling-an-external-process.html","year":"2019"},{"content":"è·å–åˆ°è¿è¡Œè¿›ç¨‹çš„PIDæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚æ“ä½œç³»ç»Ÿåº”ç”¨å¯ä»¥ä½¿ç”¨PIDæ¥æŸ¥æ‰¾å…³äºè¿›ç¨‹æœ¬èº«çš„ä¿¡æ¯ã€‚å½“è¿›ç¨‹å¤±è´¥æ—¶è·å–åˆ°çš„PIDå°±éå¸¸æœ‰ä»·å€¼ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨PIDè·Ÿè¸ªæ•´ä¸ªç³»ç»Ÿä¸­çš„ç³»ç»Ÿæ—¥å¿—ï¼Œå¦‚/var/log/messagesã€/var/log/syslogã€‚\nè·å–å½“å‰è¿›ç¨‹PID Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ è·å–åˆ°è¿è¡Œè¿›ç¨‹çš„PIDæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚æ“ä½œç³»ç»Ÿåº”ç”¨å¯ä»¥ä½¿ç”¨PIDæ¥æŸ¥æ‰¾å…³äºè¿›ç¨‹æœ¬èº«çš„ä¿¡æ¯ã€‚å½“è¿›ç¨‹å¤±è´¥æ—¶è·å–åˆ°çš„PIDå°±éå¸¸æœ‰ä»·å€¼ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨PIDè·Ÿè¸ªæ•´ä¸ªç³»ç»Ÿä¸­çš„ç³»ç»Ÿæ—¥å¿—ï¼Œå¦‚/var/log/messagesã€/var/log/syslogã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;strconv\u0026quot; ) func main() { pid := os.Getpid() fmt.Printf(\u0026quot;è¿›ç¨‹ PID: %d \\n\u0026quot;, pid) prc := exec.Command(\u0026quot;ps\u0026quot;, \u0026quot;-p\u0026quot;, strconv.Itoa(pid), \u0026quot;-v\u0026quot;) out, err := prc.Output() if err != nil { panic(err) } fmt.Println(string(out)) } è¿›ç¨‹ PID: 28259 PID TTY STAT TIME MAJFL TRS DRS RSS %MEM COMMAND 28259 pts/0 Sl+ 0:00 0 648 102535 1224 0.0 ./main åŸç† osåŒ…ä¸­çš„Getpidæ–¹æ³•è¿”å›å½“å‰è¿›ç¨‹çš„PIDã€‚ä¸Šè¿°ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡ç³»ç»Ÿåº”ç”¨pså‘½ä»¤è·å–è¯¥è¿›ç¨‹çš„æ›´å¤šä¿¡æ¯ã€‚\nåœ¨åº”ç”¨å¼€å§‹æ—¶æ‰“å°PIDå¯èƒ½å¾ˆæœ‰ç”¨ï¼Œåœ¨åº”ç”¨å´©æºƒæ—¶ï¼Œè·å–åˆ°çš„PIDå°±å¯ä»¥è°ƒæŸ¥ç›¸åº”çš„é—®é¢˜ã€‚\n","id":65,"section":"posts","summary":"\u003cp\u003eè·å–åˆ°è¿è¡Œè¿›ç¨‹çš„PIDæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚æ“ä½œç³»ç»Ÿåº”ç”¨å¯ä»¥ä½¿ç”¨PIDæ¥æŸ¥æ‰¾å…³äºè¿›ç¨‹æœ¬èº«çš„ä¿¡æ¯ã€‚å½“è¿›ç¨‹å¤±è´¥æ—¶è·å–åˆ°çš„PIDå°±éå¸¸æœ‰ä»·å€¼ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨PIDè·Ÿè¸ªæ•´ä¸ªç³»ç»Ÿä¸­çš„ç³»ç»Ÿæ—¥å¿—ï¼Œå¦‚\u003ccode\u003e/var/log/messages\u003c/code\u003eã€\u003ccode\u003e/var/log/syslog\u003c/code\u003eã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è·å–å½“å‰è¿›ç¨‹PID","uri":"https://www.ganymedenil.com/2019/05/21/go-standard-library-by-get-the-current-process-PID.html","year":"2019"},{"content":"æœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•åœ¨ç¨‹åºç»ˆæ­¢åè·å–æœ‰å…³å­è¿›ç¨‹çš„PIDå’ŒåŸºæœ¬ä¿¡æ¯ã€‚\næœ‰å…³æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯åªèƒ½é€šè¿‡syscallåŒ…è·å–ï¼Œå¹¶ä¸”ä¸å¹³å°é«˜åº¦ç›¸å…³ã€‚\nè·å–å­è¿›ç¨‹ä¿¡æ¯ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•åœ¨ç¨‹åºç»ˆæ­¢åè·å–æœ‰å…³å­è¿›ç¨‹çš„PIDå’ŒåŸºæœ¬ä¿¡æ¯ã€‚\næœ‰å…³æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯åªèƒ½é€šè¿‡syscallåŒ…è·å–ï¼Œå¹¶ä¸”ä¸å¹³å°é«˜åº¦ç›¸å…³ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶main_running.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;runtime\u0026quot; ) func main() { var cmd string if runtime.GOOS == \u0026quot;windows\u0026quot; { cmd = \u0026quot;timeout\u0026quot; } else { cmd = \u0026quot;sleep\u0026quot; } proc := exec.Command(cmd, \u0026quot;1\u0026quot;) proc.Start() // åœ¨è¿›ç¨‹ç»“æŸä¹‹å‰ä¸ä¼šè¿”å›ä»»ä½•è¿›ç¨‹çŠ¶æ€ fmt.Printf(\u0026quot;è¿è¡Œè¿›ç¨‹çš„è¿›ç¨‹çŠ¶æ€ï¼š%v\\n\u0026quot;, proc.ProcessState) // è·å–æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„PID fmt.Printf(\u0026quot;è¿è¡Œè¿›ç¨‹çš„PIDï¼š%d\\n\\n\u0026quot;, proc.Process.Pid) } $ go run main_running.go è¿è¡Œè¿›ç¨‹çš„è¿›ç¨‹çŠ¶æ€ï¼š\u0026lt;nil\u0026gt; è¿è¡Œè¿›ç¨‹çš„PIDï¼š45 åˆ›å»ºæ–‡ä»¶main.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;runtime\u0026quot; \u0026quot;time\u0026quot; ) func main() { var cmd string if runtime.GOOS == \u0026quot;windows\u0026quot; { cmd = \u0026quot;timeout\u0026quot; } else { cmd = \u0026quot;sleep\u0026quot; } proc := exec.Command(cmd, \u0026quot;1\u0026quot;) proc.Start() // WaitåŠŸèƒ½å°†ç­‰å¾…ï¼Œç›´åˆ°è¿›ç¨‹ç»“æŸ proc.Wait() // åœ¨è¿›ç¨‹ç»ˆæ­¢åï¼Œ*os.ProcessState åŒ…å«æœ‰å…³è¿›ç¨‹è¿è¡Œçš„ç®€å•ä¿¡æ¯ fmt.Printf(\u0026quot;PID: %d\\n\u0026quot;, proc.ProcessState.Pid()) fmt.Printf(\u0026quot;è¿›ç¨‹è€—è´¹æ—¶é—´: %dms\\n\u0026quot;, proc.ProcessState.SystemTime()/time.Microsecond) fmt.Printf(\u0026quot;æˆåŠŸé€€å‡º: %t\\n\u0026quot;, proc.ProcessState.Success()) } $ go run main.go PID: 51 è¿›ç¨‹è€—è´¹æ—¶é—´: 15625ms æˆåŠŸé€€å‡º: true åŸç† os/execæ ‡å‡†åº“æä¾›äº†æ‰§è¡Œè¿›ç¨‹çš„æ–¹æ³•ã€‚ä½¿ç”¨Commandï¼Œè¿”å›Cmdç»“æ„ä½“ã€‚Cmdæä¾›äº†å¤„ç†è¡¨ç¤ºçš„è®¿é—®æƒã€‚å½“è¿›ç¨‹è¿è¡Œæ—¶ï¼Œåªèƒ½æ‰¾åˆ°PIDã€‚\nå…³äºè¿™ä¸ªè¿›ç¨‹ï¼Œåªèƒ½è·å–åˆ°å¾ˆå°‘çš„ä¿¡æ¯ã€‚ä½†æ˜¯é€šè¿‡è·å–åˆ°çš„è¿›ç¨‹PIDï¼Œè¿˜å¯ä»¥é€šè¿‡ç³»ç»Ÿæ–¹æ³•æ¥è·å–æ›´å¤šä¿¡æ¯ã€‚\nè¯·è®°ä½ï¼Œå³ä½¿å­è¿›ç¨‹æ­£åœ¨è¿è¡Œï¼Œä¹Ÿå¯ä»¥è·å¾—å®ƒçš„PIDã€‚å¦ä¸€æ–¹é¢ï¼Œåªæœ‰åœ¨è¿›ç¨‹ç»ˆæ­¢ä¹‹åï¼ŒosåŒ…çš„ProcessStateç»“æ„ä½“æ‰å¯ç”¨ã€‚\n","id":66,"section":"posts","summary":"\u003cp\u003eæœ¬ç¯‡å°†ä»‹ç»å¦‚ä½•åœ¨ç¨‹åºç»ˆæ­¢åè·å–æœ‰å…³å­è¿›ç¨‹çš„PIDå’ŒåŸºæœ¬ä¿¡æ¯ã€‚\u003c/p\u003e\n\u003cp\u003eæœ‰å…³æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯åªèƒ½é€šè¿‡\u003ccode\u003esyscall\u003c/code\u003eåŒ…è·å–ï¼Œå¹¶ä¸”ä¸å¹³å°é«˜åº¦ç›¸å…³ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è·å–å­è¿›ç¨‹ä¿¡æ¯","uri":"https://www.ganymedenil.com/2019/05/20/go-standard-library-by-get-child-process-information.html","year":"2019"},{"content":"æ¯ä¸ªæ‰§è¡Œè¿›ç¨‹éƒ½å…·æœ‰æ ‡å‡†è¾“å‡ºã€è¾“å…¥å’Œé”™è¯¯è¾“å‡ºã€‚Goæ ‡å‡†åº“æä¾›äº†å¯¹è¿™äº›è¿›è¡Œè¯»å†™çš„æ–¹æ³•ã€‚\nä»å­è¿›ç¨‹è¯»å†™ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ æ¯ä¸ªæ‰§è¡Œè¿›ç¨‹éƒ½å…·æœ‰æ ‡å‡†è¾“å‡ºã€è¾“å…¥å’Œé”™è¯¯è¾“å‡ºã€‚Goæ ‡å‡†åº“æä¾›äº†å¯¹è¿™äº›è¿›è¡Œè¯»å†™çš„æ–¹æ³•ã€‚\nå®ç° åˆ›å»ºæ–‡ä»¶main_read_output.goï¼Œä»£ç å¦‚ä¸‹ï¼š package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;runtime\u0026quot; ) func main() { var cmd string if runtime.GOOS == \u0026quot;windows\u0026quot; { cmd = \u0026quot;dir\u0026quot; } else { cmd = \u0026quot;ls\u0026quot; } proc := exec.Command(cmd) // è¿›ç¨‹ç»ˆæ­¢å¹¶è¿”å›æ ‡å‡†è¾“å‡º buff, err := proc.Output() if err != nil { panic(err) } // å­è¿›ç¨‹çš„è¾“å‡ºä»¥å­—èŠ‚åˆ‡ç‰‡çš„å½¢å¼å­˜åœ¨æ‰“å°ä¸ºå­—ç¬¦ä¸² fmt.Println(string(buff)) } $ go run main_read_output.go main_read_output.go åˆ›å»ºæ–‡ä»¶main_read_stdout.goï¼Œä»£ç å¦‚ä¸‹ï¼š package main import ( \u0026quot;bytes\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;runtime\u0026quot; ) func main() { var cmd string if runtime.GOOS == \u0026quot;windows\u0026quot; { cmd = \u0026quot;dir\u0026quot; } else { cmd = \u0026quot;ls\u0026quot; } proc := exec.Command(cmd) buf := bytes.NewBuffer([]byte{}) // å®ç°io.Writeræ¥å£çš„ç¼“å†²åŒºè¢«åˆ†é…ç»™è¿›ç¨‹çš„Stdout proc.Stdout = buf // åœ¨è¿™ä¸ªä¾‹å­ä¸­é¿å…ç«äº‰æ¡ä»¶ã€‚æˆ‘ä»¬ç­‰åˆ°è¿›ç¨‹é€€å‡º proc.Run() // è¯¥è¿‡ç¨‹å°†è¾“å‡ºå†™å…¥ç¼“å†²åŒºï¼Œæˆ‘ä»¬ä½¿ç”¨å­—èŠ‚æ¥æ‰“å°è¾“å‡º fmt.Println(string(buf.Bytes())) } $ go run main_read_stdout.go main_read_output.go main_read_stdout.go åˆ›å»ºæ–‡ä»¶main_read_read.goï¼Œä»£ç å¦‚ä¸‹ï¼š package main import ( \u0026quot;bufio\u0026quot; \u0026quot;context\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;time\u0026quot; ) func main() { cmd := \u0026quot;ping\u0026quot; timeout := 2 * time.Second // å‘½ä»¤è¡Œå·¥å…·â€œpingâ€æ‰§è¡Œ2ç§’ ctx, _ := context.WithTimeout(context.TODO(), timeout) proc := exec.CommandContext(ctx, cmd, \u0026quot;example.com\u0026quot;) // è¿›ç¨‹è¾“å‡ºä»¥io.ReadCloserçš„å½¢å¼è·å¾—ã€‚åº•å±‚å®ç°ä½¿ç”¨os.Pipe stdout, _ := proc.StdoutPipe() defer stdout.Close() proc.Start() // ä¸ºäº†æ›´èˆ’é€‚åœ°é˜…è¯»ï¼Œä½¿ç”¨äº†bufio.Scannerã€‚ s := bufio.NewScanner(stdout) for s.Scan() { fmt.Println(s.Text()) } } $ go run main_read_read.go PING example.com (93.184.216.34) 56(84) bytes of data. 64 bytes from 93.184.216.34 (93.184.216.34): icmp_seq=1 ttl=52 time=211 ms 64 bytes from 93.184.216.34 (93.184.216.34): icmp_seq=2 ttl=52 time=257 ms åˆ›å»ºæ–‡ä»¶sample.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bufio\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { sc := bufio.NewScanner(os.Stdin) for sc.Scan() { fmt.Println(sc.Text()) } } åˆ›å»ºæ–‡ä»¶main.goï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;bufio\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;io\u0026quot; \u0026quot;os/exec\u0026quot; \u0026quot;time\u0026quot; ) func main() { cmd := []string{\u0026quot;go\u0026quot;, \u0026quot;run\u0026quot;, \u0026quot;sample.go\u0026quot;} proc := exec.Command(cmd[0], cmd[1], cmd[2]) stdin, _ := proc.StdinPipe() defer stdin.Close() // å‡ºäºè°ƒè¯•ç›®çš„ï¼Œæˆ‘ä»¬ä¼šç›‘è§†å·²æ‰§è¡Œè¿›ç¨‹çš„è¾“å‡º stdout, _ := proc.StdoutPipe() defer stdout.Close() go func() { s := bufio.NewScanner(stdout) for s.Scan() { fmt.Println(\u0026quot;ç¨‹åºè¾“å‡º:\u0026quot; + s.Text()) } }() proc.Start() // ç°åœ¨ï¼Œä»¥ä¸‹è¡Œè¢«å†™å…¥å­è¿›ç¨‹æ ‡å‡†è¾“å…¥ fmt.Println(\u0026quot;å†™å…¥\u0026quot;) io.WriteString(stdin, \u0026quot;Hello\\n\u0026quot;) io.WriteString(stdin, \u0026quot;Golang\\n\u0026quot;) io.WriteString(stdin, \u0026quot;is awesome\\n\u0026quot;) time.Sleep(time.Second * 2) proc.Process.Kill() } $ go run main.go å†™å…¥ ç¨‹åºè¾“å‡º:Hello ç¨‹åºè¾“å‡º:Golang ç¨‹åºè¾“å‡º:is awesome åŸç† os/exec åŒ…ä¸­çš„Cmdç»“æ„ä½“æä¾›äº†è®¿é—®è¿›ç¨‹è¾“å…¥/è¾“å‡ºçš„åŠŸèƒ½ã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è¯»å–è¿›ç¨‹çš„è¾“å‡ºã€‚\nè¯»å–è¿›ç¨‹è¾“å‡ºçš„æœ€ç®€å•æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨Cmdç»“æ„ä½“çš„Outputæˆ–CombinedOutput(è·å–Stderrå’ŒStdout)ã€‚åœ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œç¨‹åºåŒæ­¥åœ°ç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢ï¼Œç„¶åå°†è¾“å‡ºè¿”å›åˆ°å­—èŠ‚ç¼“å†²åŒºã€‚\né™¤äº†Outputå’ŒOutputCombinedæ–¹æ³•ä¹‹å¤–ï¼ŒCmdç»“æ„ä½“è¿˜æä¾›äº†Stdoutå±æ€§ï¼Œå¯ä»¥ä¸ºå…¶åˆ†é…io.Writerã€‚ç„¶åï¼Œåˆ†é…çš„å†™å…¥å™¨ä½œä¸ºè¿›ç¨‹è¾“å‡ºçš„ç›®æ ‡ã€‚å®ƒå¯ä»¥æ˜¯æ–‡ä»¶ã€å­—èŠ‚ç¼“å†²åŒºæˆ–å®ç°io.Writeræ¥å£çš„ä»»ä½•ç±»å‹ã€‚\nè¯»å–è¿›ç¨‹è¾“å‡ºçš„æœ€åä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡è°ƒç”¨StdoutPipeæ–¹æ³•ä»Cmdç»“æ„ä½“ä¸­è·å–io.Readerã€‚ StdoutPipeæ–¹æ³•åœ¨Stdoutä¹‹é—´åˆ›å»ºç®¡é“ï¼Œè¿›ç¨‹å†™å…¥è¾“å‡ºï¼Œå¹¶æä¾›Readerä½œä¸ºç¨‹åºæ¥å£ä»¥è¯»å–è¿›ç¨‹è¾“å‡ºã€‚ è¿™æ ·ï¼Œè¿›ç¨‹çš„è¾“å‡ºé€šè¿‡ç®¡é“ä¼ è¾“åˆ°å–å›çš„io.Readerã€‚\nå†™å…¥è¿›ç¨‹stdinçš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚ åœ¨æ‰€æœ‰é€‰é¡¹ä¸­ï¼Œå°†æ¼”ç¤ºä½¿ç”¨io.Writerçš„é€‰é¡¹ã€‚\nå¯ä»¥çœ‹å‡ºï¼Œæœ‰å‡ ç§æ–¹æ³•å¯ä»¥ä»å­è¿›ç¨‹è¯»å–å’Œå†™å…¥ã€‚ stderrå’Œstdinçš„ä½¿ç”¨å‡ ä¹ä¸æ­¥éª¤2ä¸­æè¿°çš„ç›¸åŒã€‚ æœ€åï¼Œå¦‚ä½•è®¿é—®è¾“å…¥/è¾“å‡ºçš„æ–¹æ³•å¯ä»¥è¿™æ ·åˆ’åˆ†ï¼š\nåŒæ­¥ï¼ˆç­‰å¾…è¿›ç¨‹ç»“æŸå¹¶è·å–å­—èŠ‚ï¼‰ï¼šä½¿ç”¨Cmdçš„Outputå’ŒCombinedOutputæ–¹æ³•ã€‚ IOï¼šè¾“å‡ºæˆ–è¾“å…¥ä»¥io.Writer/Readerçš„å½¢å¼æä¾›ã€‚ XXXPipeå’ŒStdXXXå±æ€§æ˜¯æ­¤æ–¹æ³•çš„æ­£ç¡®å±æ€§ã€‚ IOç±»å‹æ›´çµæ´»ï¼Œä¹Ÿå¯ä»¥å¼‚æ­¥ä½¿ç”¨ã€‚\n","id":67,"section":"posts","summary":"\u003cp\u003eæ¯ä¸ªæ‰§è¡Œè¿›ç¨‹éƒ½å…·æœ‰æ ‡å‡†è¾“å‡ºã€è¾“å…¥å’Œé”™è¯¯è¾“å‡ºã€‚Goæ ‡å‡†åº“æä¾›äº†å¯¹è¿™äº›è¿›è¡Œè¯»å†™çš„æ–¹æ³•ã€‚\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ä»å­è¿›ç¨‹è¯»å†™","uri":"https://www.ganymedenil.com/2019/05/20/go-standard-library-by-read-and-write-from-child-processes.html","year":"2019"},{"content":"golang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†å¦‚ä½•è·å–å½“å‰å·¥ä½œç›®å½•\nè·å–å½“å‰å·¥ä½œç›®å½• Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ åº”ç”¨çš„å¦ä¸€ä¸ªæœ‰ç”¨çš„ä¿¡æ¯æ˜¯ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚ä½¿ç”¨æ­¤ä¿¡æ¯ï¼Œç¨‹åºå¯ä»¥å¿«é€Ÿè·å–åˆ°ç›¸å…³çš„èµ„æºæ–‡ä»¶çš„è·¯å¾„ã€‚\nå®ç° package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;path/filepath\u0026quot; ) func main(){ ex,err:=os.Executable() if err!=nil{ panic(err) } // å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ fmt.Println(ex) //\tè·å–æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½• exPath := filepath.Dir(ex) fmt.Println(\u0026quot;å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ :\u0026quot; + exPath) // ä½¿ç”¨EvalSymlinksè·å–çœŸæ˜¯è·¯å¾„ realPath, err := filepath.EvalSymlinks(exPath) if err != nil { panic(err) } fmt.Println(\u0026quot;ç¬¦å·é“¾æ¥çœŸå®è·¯å¾„:\u0026quot; + realPath) } ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶go build -o build/binary åˆ›å»ºbuildæ–‡ä»¶å¤¹çš„è½¯è¿æ¥buid2 ln -s build build2 æ‰§è¡Œ./build2/binary /Users/GanymedeNil/GoglandProjects/go-standard-library/current-working-directory/build2/binary å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ :/Users/GanymedeNil/GoglandProjects/go-standard-library/current-working-directory/build2 ç¬¦å·é“¾æ¥çœŸå®è·¯å¾„:/Users/GanymedeNil/GoglandProjects/go-standard-library/current-working-directory/build åŸç† ä»Go 1.8 èµ·ï¼Œos åŒ…ä¸­çš„Executableæ–¹æ³•æ˜¯è§£æå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„çš„é¦–é€‰æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼ˆé™¤éè¿”å›é”™è¯¯ï¼‰ã€‚\nè¦è·å–äºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•çš„è·¯å¾„å¯ä»¥ä½¿ç”¨filepathåŒ…ä¸­çš„Diræ–¹æ³•ã€‚ä½†æ˜¯ä½¿ç”¨è¯¥æ–¹æ³•æœ‰ä¸€ä¸ªç¼ºé™·å°±æ˜¯è¿”å›çš„è·¯å¾„å¯èƒ½æ˜¯symlinkæŒ‡å‘çš„è·¯å¾„ã€‚\nä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨filepathåŒ…ä¸­çš„EvalSymlinksæ–¹æ³•ï¼Œæ¥è¿›è¡Œè½¬æ¢ã€‚æœ‰äº†è¿™ä¸ªhackï¼Œè¿”å›çš„å€¼å°±æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶çš„çœŸå®è·¯å¾„ã€‚\næ³¨æ„å¦‚æœä½¿ç”¨go runæ‰§è¡Œï¼Œåˆ™å®é™…çš„å¯æ‰§è¡Œæ–‡ä»¶ä¼šåœ¨ä¸´æ—¶ç›®å½•ä¸­ã€‚\n","id":68,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†å¦‚ä½•è·å–å½“å‰å·¥ä½œç›®å½•\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹è·å–å½“å‰å·¥ä½œç›®å½•","uri":"https://www.ganymedenil.com/2019/05/18/go-standard-library-by-get-current-working-directory.html","year":"2019"},{"content":"golang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†ç¯å¢ƒå˜é‡çš„è·å–ä¸è®¾ç½®ä»¥åŠå¦‚ä½•ä½¿ç”¨é»˜è®¤å€¼\nç¯å¢ƒå˜é‡çš„è·å–ä¸è®¾ç½®ä»¥åŠå¦‚ä½•ä½¿ç”¨é»˜è®¤å€¼ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ ç¯å¢ƒå˜é‡ä½œä¸ºé…ç½®é€‰é¡¹å¯ä»¥æ˜¾è‘—ç®€åŒ–åº”ç”¨çš„éƒ¨ç½²ï¼Œå¹¶ä¸”è¿™äº›åœ¨äº‘åŸºç¡€æ¶æ„ä¸­ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚\né€šå¸¸ï¼Œæœ¬åœ°å’Œè‡ªåŠ¨æ„å»ºç¯å¢ƒçš„æ•°æ®åº“è¿æ¥é…ç½®æ˜¯ä¸åŒçš„ã€‚\nå¦‚æœé…ç½®ç”±ç¯å¢ƒå˜é‡å®šä¹‰ï¼Œåˆ™æ— éœ€æ›´æ”¹åº”ç”¨çš„é…ç½®æ–‡ä»¶æˆ–è€…ç¨‹åºä»£ç ã€‚å¦‚æœç¯å¢ƒå˜é‡æ²¡æœ‰è®¾ç½®ï¼Œåˆ™é»˜è®¤é…ç½®ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚è¿™æ ·å¯¹äºå¼€å‘äººå‘˜å°±å®¹æ˜“å¤šäº†ã€‚\nå®ç° åˆ›å»ºget.goæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; ) func main(){ conStr := os.Getenv(\u0026quot;DB_CONN\u0026quot;) log.Printf(\u0026quot;è¿æ¥ï¼š%s\\n\u0026quot;,conStr) } è¿è¡Œå‘½ä»¤export DB_CONN=db:/user@example \u0026amp;\u0026amp; go run get.go\n$ export DB_CONN=db:/user@example \u0026amp;\u0026amp; go run get.go 2019/05/18 21:33:39 è¿æ¥ï¼šdb:/user@example åˆ›å»ºlookup.goæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;fmt\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; ) func main() { key := \u0026quot;DB_CONN\u0026quot; connStr, ex := os.LookupEnv(key) if !ex { log.Printf(\u0026quot;ç¯å¢ƒå˜é‡ %s æ²¡æœ‰è®¾ç½®\\n\u0026quot;, key) } fmt.Println(connStr) } è¿è¡Œå‘½ä»¤unset DB_CONN \u0026amp;\u0026amp; go run lookup.go\n$ unset DB_CONN \u0026amp;\u0026amp; go run lookup.go 2019/05/18 21:39:33 ç¯å¢ƒå˜é‡ DB_CONN æ²¡æœ‰è®¾ç½® åˆ›å»ºmain.goæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\npackage main import ( \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; ) func main() { key := \u0026quot;DB_CONN\u0026quot; // è®¾ç½®ç¯å¢ƒå˜é‡ os.Setenv(key, \u0026quot;postgres://as:as@example.com/pg?sslmode=verify-full\u0026quot;) val := GetEnvDefault(key, \u0026quot;postgres://as:as@localhost/pg?sslmode=verify-full\u0026quot;) log.Println(\u0026quot;å€¼æ˜¯ :\u0026quot; + val) os.Unsetenv(key) val = GetEnvDefault(key, \u0026quot;postgres://as:as@127.0.0.1/pg?sslmode=verify-full\u0026quot;) log.Println(\u0026quot;é»˜è®¤å€¼æ˜¯ :\u0026quot; + val) } func GetEnvDefault(key, defVal string) string { val, ex := os.LookupEnv(key) if !ex { return defVal } return val } è¿è¡Œå‘½ä»¤go run main.go\n$ go run main.go 2019/05/18 21:42:58 å€¼æ˜¯ :postgres://as:as@example.com/pg?sslmode=verify-full 2019/05/18 21:42:58 é»˜è®¤å€¼æ˜¯ :postgres://as:as@127.0.0.1/pg?sslmode=verify-full åŸç† ç¯å¢ƒå˜é‡çš„è·å–å’Œè®¾ç½®åˆ†åˆ«å¯ä»¥é€šè¿‡osåŒ…ä¸­Getenvå’ŒSetenvæ–¹æ³•å®ç°ã€‚æ–¹æ³•åç§°å·²ç»å¾ˆæ˜ç¡®è¯´æ˜äº†è‡ªèº«çš„åŠŸèƒ½ã€‚\nä½†Getenvæ–¹æ³•æœ‰ä¸ªç¼ºç‚¹ï¼Œå³ä½¿åœ¨æœªè®¾ç½®ç¯å¢ƒå˜é‡çš„æƒ…å†µä¸‹ï¼Œå®ƒä¹Ÿè¿”å›ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²ã€‚\nosåŒ…ä¸­è¿˜æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ–¹æ³•ï¼ŒLookupEnvï¼Œè¯¥æ–¹æ³•è¿”å›ä¸¤ä¸ªå€¼ï¼Œä¸€ä¸ªæ˜¯å˜é‡çš„å€¼ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯å˜é‡åœ¨ç¯å¢ƒä¸­æ˜¯å¦è®¾ç½®çš„å¸ƒå°”å€¼ã€‚è€ŒLookupEnvæ–¹æ³•åˆ™å¯ä»¥å…‹æœä¸Šé¢Getenvçš„ç¼ºç‚¹ã€‚\nå½“æˆ‘ä»¬è¦åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†ç¯å¢ƒå˜é‡ä»¥åŠå®ç°ä¸€ä¸ªé»˜è®¤ç¯å¢ƒå˜é‡çš„æ–¹æ³•ï¼Œéƒ½åº”è¯¥ä½¿ç”¨LookupEnvã€‚å› ä¸ºå¦‚æœæœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåˆ™ç¬¬äºŒä¸ªå€¼ä¼šè¿”å›falseã€‚\n","id":69,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†ç¯å¢ƒå˜é‡çš„è·å–ä¸è®¾ç½®ä»¥åŠå¦‚ä½•ä½¿ç”¨é»˜è®¤å€¼\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ç¯å¢ƒå˜é‡çš„è·å–ä¸è®¾ç½®ä»¥åŠå¦‚ä½•ä½¿ç”¨é»˜è®¤å€¼","uri":"https://www.ganymedenil.com/2019/05/18/go-standard-library-by-environment%20variables.html","year":"2019"},{"content":"golang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†å¦‚ä½•ä½¿ç”¨flagåŒ…åˆ›å»ºç¨‹åºäº¤äº’æ“ä½œ\nä½¿ç”¨flagåŒ…åˆ›å»ºç¨‹åºäº¤äº’æ“ä½œ Golang ç‰ˆæœ¬ 1.12.1\nå‰è¨€ é€šè¿‡flagå®šä¹‰ç¨‹åºäº¤äº’æ¥å£çš„æ–¹æ³•ä¸»å¯¼äº†åŸºäºGNU/Linuxã€BSDå’ŒmacOSçš„ç³»ç»Ÿã€‚æ¯”å¦‚ls -låœ¨*NIXç³»ç»Ÿä¸Šåˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚ Goç‰ˆæœ¬çš„flagåŒ…ä¸æ”¯æŒflagçš„ç»„åˆï¼Œä¾‹å¦‚ls -llï¼Œæ‰€ä»¥æ¯ä¸ªflagå¿…é¡»åˆ†å¼€ã€‚è¿˜æœ‰å°±æ˜¯Go flagåŒ…ä¹Ÿä¸åŒºåˆ†é•¿çŸ­é€‰é¡¹ã€‚æœ€åï¼Œ-flagå’Œ--flagæ˜¯ç­‰ä»·çš„ã€‚\nå®ç° package main import ( \u0026quot;flag\u0026quot; \u0026quot;fmt\u0026quot; \u0026quot;log\u0026quot; \u0026quot;os\u0026quot; \u0026quot;strings\u0026quot; ) // è‡ªå®šä¹‰ç±»å‹éœ€è¦å®ç°flag.Value // æ¥å£æ‰èƒ½åœ¨flag.Varå‡½æ•°ä¸­ä½¿ç”¨å®ƒ type ArrayValue []string func (s *ArrayValue) String() string { return fmt.Sprintf(\u0026quot;%v\u0026quot;, *s) } func (a *ArrayValue) Set(s string) error { *a = strings.Split(s, \u0026quot;,\u0026quot;) return nil } func main() { // ä½¿ç”¨è¿”å›æŒ‡é’ˆçš„æ–¹æ³•æå–flagå€¼ retry := flag.Int(\u0026quot;retry\u0026quot;, -1, \u0026quot;å®šä¹‰æœ€å¤§é‡è¯•æ¬¡æ•°\u0026quot;) // ä½¿ç”¨XXXVaræ–¹æ³•è¯»å–flagå€¼ // åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»åœ¨æ ‡å¿—ä¹‹å‰å®šä¹‰å˜é‡ var logPrefix string flag.StringVar(\u0026amp;logPrefix, \u0026quot;prefix\u0026quot;, \u0026quot;\u0026quot;, \u0026quot;Logger å‰ç¼€\u0026quot;) var arr ArrayValue flag.Var(\u0026amp;arr, \u0026quot;array\u0026quot;, \u0026quot;è¾“å…¥æ•°ç»„è¿­ä»£\u0026quot;) // æ‰§è¡Œflag.Parseå‡½æ•°ï¼Œ // è¯»å–å·²å®šä¹‰å˜é‡çš„flagã€‚ // æ²¡æœ‰è¿™ä¸ªè°ƒç”¨ï¼Œflagå˜é‡ä¿æŒä¸ºç©ºã€‚ flag.Parse() // ä¸flagåŠŸèƒ½æ— å…³ï¼Œåªæ˜¯ä¾‹å­é€»è¾‘çš„ä¸€éƒ¨åˆ† logger := log.New(os.Stdout, logPrefix, log.LstdFlags) retryCount := 0 for retryCount \u0026lt; *retry { logger.Println(\u0026quot;è¿æ¥é‡è¯•...\u0026quot;) logger.Printf(\u0026quot;å‘é€çš„æ•°ç»„ %v\\n\u0026quot;, arr) retryCount++ } } é€šè¿‡ go build -o util ç¼–è¯‘ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶\nåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ ./util -retry 2 -prefix=test -array=1,2,3\nè¿”å›å¦‚ä¸‹ç»“æœ\n$ ./util -retry 2 -prefix test -array=1,2,3 test2019/05/14 08:52:45 è¿æ¥é‡è¯•... test2019/05/14 08:52:45 å‘é€çš„æ•°ç»„ [1 2 3] test2019/05/14 08:52:45 è¿æ¥é‡è¯•... test2019/05/14 08:52:45 å‘é€çš„æ•°ç»„ [1 2 3] åŸç† å¯¹äºåœ¨ç¨‹åºä¸­è·å–flagå€¼ï¼ŒflagåŒ…å®šä¹‰äº†ä¸¤ç§ç±»å‹çš„å‡½æ•°ã€‚\nç¬¬ä¸€ç§ç±»å‹æ˜¯ç®€å•åç§°ï¼Œæ¯”å¦‚Intã€‚æ­¤å‡½æ•°å°†è¿”å›æŒ‡å‘å·²è§£æflagå€¼çš„æ•´æ•°å˜é‡çš„æŒ‡é’ˆã€‚\nç¬¬äºŒç§æ˜¯xxxVarè¿™ç§ç±»å‹çš„æ–¹æ³•ã€‚å®ƒä»¬æä¾›ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†ä½ éœ€è¦æä¾›æŒ‡å‘å˜é‡çš„æŒ‡é’ˆï¼Œä»¥ä¾¿äºå°†è§£æçš„flagå€¼å­˜å‚¨åœ¨ç»™å®šçš„å˜é‡ä¸­ã€‚\nGo åº“è¿˜æ”¯æŒè‡ªå®šä¹‰flagç±»å‹ï¼Œå‡½æ•°æ˜¯Varã€‚è‡ªå®šä¹‰ç±»å‹å¿…é¡»å®ç°flagåŒ…ä¸­valueçš„æ¥å£ã€‚ä¸Šè¿°ä»£ç ä¸­ArrayValueå˜é‡å°±æ˜¯å®ç°äº†flagåŒ…ä¸­valueçš„Stringå’ŒSetæ¥å£ã€‚\nä¸Šé¢ä»£ç æœ€é‡è¦éƒ¨åˆ†æ˜¯parse()è§£æflagçš„å‡½æ•°ã€‚åœ¨å®šä¹‰æ‰€æœ‰flagä¹‹åå¹¶ä¸”åœ¨è®¿é—®å€¼ä¹‹å‰ï¼Œå¿…é¡»è¿›è¡Œè°ƒç”¨ï¼Œå¦åˆ™å°†è·å–ä¸åˆ°ä¼ å…¥çš„å€¼ã€‚\nå»¶ä¼¸ flagåŒ…ä¸­è¿˜åŒ…å«flagå¤„ç†çš„åº•å±‚å‡½æ•°ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ï¼Œæ¨èé˜…è¯»ä¸€ä¸‹FlagSetçš„æ–‡æ¡£ã€‚\n","id":70,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†å¦‚ä½•ä½¿ç”¨flagåŒ…åˆ›å»ºç¨‹åºäº¤äº’æ“ä½œ\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹ä½¿ç”¨flagåŒ…åˆ›å»ºç¨‹åºäº¤äº’æ“ä½œ","uri":"https://www.ganymedenil.com/2019/05/14/go-standard-library-by-flag.html","year":"2019"},{"content":"golang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†å¦‚ä½•è·å–å‘½ä»¤è¡Œå‚æ•°\nè·å–å‘½ä»¤è¡Œå‚æ•° Golang ç‰ˆæœ¬ 1.12.1\nå®ç° package main import (Â \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; ) func main() { args := os.Args // æ‰“å°æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•° fmt.Println(args) // ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå³sliceä¸­çš„é›¶é¡¹ï¼Œæ˜¯è¢«è°ƒç”¨äºŒè¿›åˆ¶æ–‡ä»¶çš„åç§° programName := args[0] fmt.Printf(\u0026quot;äºŒè¿›åˆ¶åç§°æ˜¯: %s \\n\u0026quot;, programName) // å…¶ä½™çš„å‚æ•°å¯ä»¥é€šè¿‡çœç•¥ç¬¬ä¸€ä¸ªå‚æ•°æ¥è·å¾—Â otherArgs := args[1:] fmt.Println(otherArgs) for idx, arg := range otherArgs { fmt.Printf(\u0026quot;å‚æ•° %d = %s \\n\u0026quot;, idx, arg) } } åŸç† Goæ ‡å‡†åº“æä¾›äº†ä¸€äº›è®¿é—®ç¨‹åºè°ƒç”¨å‚æ•°çš„æ–¹æ³•ã€‚æœ€é€šç”¨çš„æ–¹æ³•æ˜¯é€šè¿‡osåŒ…ä¸­çš„Argså˜é‡è®¿é—®å‚æ•°ã€‚\nè¿™æ ·ï¼Œå¯ä»¥ä»å­—ç¬¦ä¸²åˆ‡ç‰‡ä¸­è·å–å‘½ä»¤è¡Œæ‰€æœ‰å‚æ•°ã€‚Â è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯å‚æ•°çš„æ•°é‡æ˜¯åŠ¨æ€çš„ã€‚\nè¯¦ç»†åœ°è¯´ï¼Œos.Args[0]å°†è¿”å›ç¨‹åºåç§°ã€‚os.Args[1:]æ²¡æœ‰äºŒè¿›åˆ¶åç§°çš„å…¶ä½™å‚æ•°ã€‚ åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæœ€å¥½ä¸è¦ä¾èµ–ä¼ é€’ç»™ç¨‹åºçš„å‚æ•°æ•°é‡ï¼Œè€Œæ˜¯å§‹ç»ˆæ£€æŸ¥å‚æ•°æ•°ç»„çš„é•¿åº¦ã€‚å¦åˆ™ï¼Œå¦‚æœç»™å®šç´¢å¼•ä¸Šçš„å‚æ•°ä¸åœ¨èŒƒå›´å†…ï¼Œç¨‹åºå°±ä¼šææ…Œã€‚\n","id":71,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä»‹ç»äº†å¦‚ä½•è·å–å‘½ä»¤è¡Œå‚æ•°\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹goè·å–å‘½ä»¤è¡Œå‚æ•°","uri":"https://www.ganymedenil.com/2019/05/13/go-standard-library-by-os-args.html","year":"2019"},{"content":"golang åŸºç¡€åº“ä¹‹golangç‰ˆæœ¬ï¼Œä»‹ç»äº†å¦‚ä½•è·å–Golangçš„è¿è¡Œæ—¶ç‰ˆæœ¬ï¼Œä»¥åŠé€šè¿‡æºç è§£æç‰ˆæœ¬æ˜¯å¦‚ä½•è·å–çš„\nè·å–Golangç‰ˆæœ¬ Golang ç‰ˆæœ¬ 1.12.1\nå®ç° package main import ( \u0026quot;log\u0026quot; \u0026quot;runtime\u0026quot; ) const info = ` ç¨‹åº %s è¿è¡Œ... ç”± Goï¼š%s ç‰ˆæœ¬ç¼–è¯‘ ` func main() { log.Printf(info, \u0026quot;Example\u0026quot;, runtime.Version()) } åŸç† runtimeåŒ…ä¸­åŒ…å«äº†è®¸å¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼Œè¦æ‰¾å‡ºGoçš„è¿è¡Œæ—¶ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Versionå‡½æ•°ã€‚å®ƒå¯ä»¥æ˜¯æäº¤æ—¶çš„å“ˆå¸Œå€¼æˆ–è€…æ˜¯æ„å»ºæ—¶çš„æ—¥æœŸï¼Œä¹Ÿå¯ä»¥æ˜¯â€œgo1.3â€ä¹‹ç±»çš„å‘å¸ƒæ ‡è®°ã€‚\npackage runtime import \u0026quot;runtime/internal/sys\u0026quot; // Version returns the Go tree's version string. // It is either the commit hash and date at the time of the build or, // when possible, a release tag like \u0026quot;go1.3\u0026quot;. func Version() string { return sys.TheVersion } ä½†Versionå‡½æ•°äº‹å®ä¸Šåªæ˜¯è¿”å›äº†runtime/internal/sysçš„TheVersionå¸¸é‡ã€‚å¸¸é‡ä½äº$GOROOT/src/runtime/internal/sys/zversion.goä¸­ã€‚\n// Code generated by go tool dist; DO NOT EDIT. package sys const TheVersion = `go1.12.1` const Goexperiment = `` const StackGuardMultiplierDefault = 1 é€šè¿‡è¯¥æ–‡ä»¶çš„æ³¨é‡Šæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”±go tool distç”Ÿæˆï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åœ¨$GOROOT/src/cmd/dist/buildruntime.go è¿™ä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°ç”Ÿæˆè¯¥æ–‡ä»¶çš„æ–¹æ³•mkzversionã€‚è¿›è€Œæˆ‘ä»¬æ‰¾åˆ°äº†å¸¸é‡TheVersionçš„èµ‹å€¼æ–¹æ³•findgoversionã€‚\npackage main // mkzversion writes zversion.go: // //\tpackage sys // //\tconst TheVersion = \u0026lt;version\u0026gt; //\tconst Goexperiment = \u0026lt;goexperiment\u0026gt; //\tconst StackGuardMultiplier = \u0026lt;multiplier value\u0026gt; // func mkzversion(dir, file string) { var buf bytes.Buffer fmt.Fprintf(\u0026amp;buf, \u0026quot;// Code generated by go tool dist; DO NOT EDIT.\\n\u0026quot;) fmt.Fprintln(\u0026amp;buf) fmt.Fprintf(\u0026amp;buf, \u0026quot;package sys\\n\u0026quot;) fmt.Fprintln(\u0026amp;buf) fmt.Fprintf(\u0026amp;buf, \u0026quot;const TheVersion = `%s`\\n\u0026quot;, findgoversion()) fmt.Fprintf(\u0026amp;buf, \u0026quot;const Goexperiment = `%s`\\n\u0026quot;, os.Getenv(\u0026quot;GOEXPERIMENT\u0026quot;)) fmt.Fprintf(\u0026amp;buf, \u0026quot;const StackGuardMultiplierDefault = %d\\n\u0026quot;, stackGuardMultiplierDefault()) writefile(buf.String(), file, writeSkipSame) } è€Œfindgoversionæ–¹æ³•æ‰€åœ¨æ–‡ä»¶æ˜¯$GOROOT/src/cmd/dist/build.goã€‚\npackage main // findgoversion determines the Go version to use in the version string. func findgoversion() string { // The $GOROOT/VERSION file takes priority, for distributions // without the source repo. path := pathf(\u0026quot;%s/VERSION\u0026quot;, goroot) if isfile(path) { b := chomp(readfile(path)) // Commands such as \u0026quot;dist version \u0026gt; VERSION\u0026quot; will cause // the shell to create an empty VERSION file and set dist's // stdout to its fd. dist in turn looks at VERSION and uses // its content if available, which is empty at this point. // Only use the VERSION file if it is non-empty. if b != \u0026quot;\u0026quot; { // Some builders cross-compile the toolchain on linux-amd64 // and then copy the toolchain to the target builder (say, linux-arm) // for use there. But on non-release (devel) branches, the compiler // used on linux-amd64 will be an amd64 binary, and the compiler // shipped to linux-arm will be an arm binary, so they will have different // content IDs (they are binaries for different architectures) and so the // packages compiled by the running-on-amd64 compiler will appear // stale relative to the running-on-arm compiler. Avoid this by setting // the version string to something that doesn't begin with devel. // Then the version string will be used in place of the content ID, // and the packages will look up-to-date. // TODO(rsc): Really the builders could be writing out a better VERSION file instead, // but it is easier to change cmd/dist than to try to make changes to // the builder while Brad is away. if strings.HasPrefix(b, \u0026quot;devel\u0026quot;) { if hostType := os.Getenv(\u0026quot;META_BUILDLET_HOST_TYPE\u0026quot;); strings.Contains(hostType, \u0026quot;-cross\u0026quot;) { fmt.Fprintf(os.Stderr, \u0026quot;warning: changing VERSION from %q to %q\\n\u0026quot;, b, \u0026quot;builder \u0026quot;+hostType) b = \u0026quot;builder \u0026quot; + hostType } } return b } } // The $GOROOT/VERSION.cache file is a cache to avoid invoking // git every time we run this command. Unlike VERSION, it gets // deleted by the clean command. path = pathf(\u0026quot;%s/VERSION.cache\u0026quot;, goroot) if isfile(path) { return chomp(readfile(path)) } // Show a nicer error message if this isn't a Git repo. if !isGitRepo() { fatalf(\u0026quot;FAILED: not a Git repo; must put a VERSION file in $GOROOT\u0026quot;) } // Otherwise, use Git. // What is the current branch? branch := chomp(run(goroot, CheckExit, \u0026quot;git\u0026quot;, \u0026quot;rev-parse\u0026quot;, \u0026quot;--abbrev-ref\u0026quot;, \u0026quot;HEAD\u0026quot;)) // What are the tags along the current branch? tag := \u0026quot;devel\u0026quot; precise := false // If we're on a release branch, use the closest matching tag // that is on the release branch (and not on the master branch). if strings.HasPrefix(branch, \u0026quot;release-branch.\u0026quot;) { tag, precise = branchtag(branch) } if !precise { // Tag does not point at HEAD; add hash and date to version. tag += chomp(run(goroot, CheckExit, \u0026quot;git\u0026quot;, \u0026quot;log\u0026quot;, \u0026quot;-n\u0026quot;, \u0026quot;1\u0026quot;, \u0026quot;--format=format: +%h %cd\u0026quot;, \u0026quot;HEAD\u0026quot;)) } // Cache version. writefile(tag, path, 0) return tag } æ³¨é‡Šæœ‰å¾ˆå¤šä½†æˆ‘ä»¬åªéœ€è¦ç†è§£ç‰ˆæœ¬çš„è·å–æµç¨‹å³å¯ï¼Œé¦–å…ˆ$GOROOT/VERSIONæ–‡ä»¶æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨$GOROOT/VERSION.cacheæ–‡ä»¶ã€‚å¦‚æœ$GOROOT/VERSION.cacheä¹Ÿæ²¡æœ‰ï¼Œåˆ™å·¥å…·å¼€å§‹å°è¯•ä½¿ç”¨Gitä¿¡æ¯æ¥è§£æç‰ˆæœ¬ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒGoçš„æºç å¿…é¡»æ˜¯é€šè¿‡gitçš„æ–¹å¼ä¸‹è½½çš„ã€‚\n","id":72,"section":"posts","summary":"\u003cp\u003egolang åŸºç¡€åº“ä¹‹golangç‰ˆæœ¬ï¼Œä»‹ç»äº†å¦‚ä½•è·å–Golangçš„è¿è¡Œæ—¶ç‰ˆæœ¬ï¼Œä»¥åŠé€šè¿‡æºç è§£æç‰ˆæœ¬æ˜¯å¦‚ä½•è·å–çš„\u003c/p\u003e","tags":["go"],"title":"goåŸºç¡€åº“ä¹‹goç‰ˆæœ¬è·å–","uri":"https://www.ganymedenil.com/2019/05/11/go-standard-library-by-runtime-version.html","year":"2019"},{"content":"rustçš„åŸºç¡€éƒ¨åˆ†ï¼Œå˜é‡ã€å¸¸é‡ã€æ•°æ®ç±»å‹ã€å‡½æ•°ã€æ³¨é‡Šå’Œæ§åˆ¶æµ\nå˜é‡ä¸å¯å˜æ€§ å˜é‡ä½¿ç”¨letå…³é”®å­—ï¼Œé»˜è®¤ä¸å¯å˜\nä½†åœ¨å˜é‡åä¹‹å‰åŠ mutå…³é”®å­—æ¥ä½¿å…¶å¯å˜\nå¸¸é‡ä½¿ç”¨constå…³é”®å­—ï¼Œå¹¶ä¸”å¿…é¡»æ³¨æ˜å€¼ç±»å‹\nconst MAX_POINTS: u32 = 100_000; å˜é‡éšè—ï¼Œé‡å¤ä½¿ç”¨letå…³é”®å­—æ¥å¤šæ¬¡éšè—ã€‚å½“å†æ¬¡ä½¿ç”¨letæ—¶ï¼Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜å€¼çš„ç±»å‹ï¼Œä½†å¤ç”¨è¿™ä¸ªåå­—\nfn main(){ let x =5; let x = x + 1; let x = x * 2; println!(\u0026quot;xå€¼æ˜¯:{}\u0026quot;,x); // xå€¼æ˜¯:12 } ä½¿ç”¨mutåˆ›å»ºçš„å˜é‡ï¼ŒäºŒæ¬¡èµ‹å€¼å¿…é¡»æ˜¯åŒç±»å‹\næ•°æ®ç±»å‹ æ ‡é‡ç±»å‹ æ•´æ•° é•¿åº¦ æœ‰ç¬¦å· æ— ç¬¦å· 8-bit i8 u8 16-bit i16 u16 32-bit i32 u32 64-bit i64 u64 arch isize usize æ¯ä¸€ä¸ªæœ‰ç¬¦å·çš„å˜ä½“å¯ä»¥å‚¨å­˜åŒ…å«ä» -(2^(n-1)) åˆ° 2^(n-1)-1 åœ¨å†…çš„æ•°å­—ï¼Œè¿™é‡Œ n æ˜¯å˜ä½“ä½¿ç”¨çš„ä½æ•°ã€‚æ‰€ä»¥ i8 å¯ä»¥å‚¨å­˜ä» -(2^(7)) åˆ° 2^(7)-1 åœ¨å†…çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä» -128 åˆ° 127ã€‚æ— ç¬¦å·çš„å˜ä½“å¯ä»¥å‚¨å­˜ä» 0 åˆ° 2^(n)-1 çš„æ•°å­—ï¼Œæ‰€ä»¥ u8 å¯ä»¥å‚¨å­˜ä» 0 åˆ° 2^(8)-1 çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä» 0 åˆ° 255ã€‚ å¦å¤–ï¼Œisize å’Œ usize ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ 32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„ã€‚\nRustä¸­çš„æ•´å‹å­—é¢å€¼\næ•°å­—å­—é¢å€¼ ä¾‹å­ Decimal 98_222 Hex 0xff Octal 0o77 Binary 0b1111_0000 Byte(u8 only) b'A' é‚£ä¹ˆè¯¥ä½¿ç”¨å“ªç§ç±»å‹çš„æ•°å­—å‘¢ï¼Ÿå¦‚æœæ‹¿ä¸å®šä¸»æ„ï¼ŒRust çš„é»˜è®¤ç±»å‹é€šå¸¸å°±å¾ˆå¥½ï¼Œæ•°å­—ç±»å‹é»˜è®¤æ˜¯ i32ï¼šå®ƒé€šå¸¸æ˜¯æœ€å¿«çš„ï¼Œç”šè‡³åœ¨ 64 ä½ç³»ç»Ÿä¸Šä¹Ÿæ˜¯ã€‚isize æˆ– usize ä¸»è¦ä½œä¸ºæŸäº›é›†åˆçš„ç´¢å¼•ã€‚\næ•´å‹æº¢å‡º\nå½“åœ¨ debug æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust æ£€æŸ¥è¿™ç±»é—®é¢˜å¹¶ä½¿ç¨‹åº panicï¼Œè¿™ä¸ªæœ¯è¯­è¢« Rust ç”¨æ¥è¡¨æ˜ç¨‹åºå› é”™è¯¯è€Œé€€å‡ºã€‚ åœ¨ release æ„å»ºä¸­ï¼ŒRust ä¸æ£€æµ‹æº¢å‡ºï¼Œç›¸åä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸º â€œtwoâ€™s complement wrappingâ€ çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œ256 å˜æˆ 0ï¼Œ257 å˜æˆ 1ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾èµ–æº¢å‡ºè¢«è®¤ä¸ºæ˜¯ä¸€ç§é”™è¯¯ï¼Œå³ä¾¿å¯èƒ½å‡ºç°è¿™ç§è¡Œä¸ºã€‚å¦‚æœä½ ç¡®å®éœ€è¦è¿™ç§è¡Œä¸ºï¼Œæ ‡å‡†åº“ä¸­æœ‰ä¸€ä¸ªç±»å‹æ˜¾å¼æä¾›æ­¤åŠŸèƒ½ï¼ŒWrappingã€‚\næµ®ç‚¹å‹ Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ f32 å’Œ f64ï¼Œåˆ†åˆ«å  32 ä½å’Œ 64 ä½ã€‚é»˜è®¤ç±»å‹æ˜¯ f64ï¼Œå› ä¸ºåœ¨ç°ä»£ CPU ä¸­ï¼Œå®ƒä¸ f32 é€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ç²¾åº¦æ›´é«˜ã€‚\nå¸ƒå°”å‹ Rust ä¸­çš„å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼štrue å’Œ falseã€‚Rust ä¸­çš„å¸ƒå°”ç±»å‹ä½¿ç”¨ bool è¡¨ç¤ºã€‚\nå­—ç¬¦ç±»å‹ Rust çš„ char ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ï¼ˆæ³¨æ„ char ç”±å•å¼•å·æŒ‡å®šï¼Œä¸åŒäºå­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·ã€‚ï¼‰\nç¬¦åˆç±»å‹ å…ƒç»„ç±»å‹ fn main() { let tup: (i32, f64, u8) = (500, 6.4, 1); } fn main() { let tup = (500, 6.4, 1); let (x, y, z) = tup; println!(\u0026quot;The value of y is: {}\u0026quot;, y); } fn main() { let x: (i32, f64, u8) = (500, 6.4, 1); let five_hundred = x.0; let six_point_four = x.1; let one = x.2; } æ•°ç»„ç±»å‹ ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚Rust ä¸­çš„æ•°ç»„æ˜¯å›ºå®šé•¿åº¦çš„ï¼šä¸€æ—¦å£°æ˜ï¼Œå®ƒä»¬çš„é•¿åº¦ä¸èƒ½å¢é•¿æˆ–ç¼©å°ã€‚\nfn main() { let a = [1, 2, 3, 4, 5]; } let a: [i32; 5] = [1, 2, 3, 4, 5]; fn main() { let a = [1, 2, 3, 4, 5]; let first = a[0]; let second = a[1]; } å½“è®¿é—®æ•°ç»„è¶Šç•Œï¼Œç¼–è¯‘å¹¶ä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯ï¼Œä¸è¿‡ç¨‹åºä¼šå‡ºç°ä¸€ä¸ªè¿è¡Œæ—¶ï¼ˆruntimeï¼‰é”™è¯¯å¹¶ä¸”ä¸ä¼šæˆåŠŸé€€å‡ºã€‚\nå‡½æ•° fn main() { another_function(5, 6); } fn another_function(x: i32, y: i32) { println!(\u0026quot;The value of x is: {}\u0026quot;, x); println!(\u0026quot;The value of y is: {}\u0026quot;, y); } è¯­å¥ï¼ˆStatementsï¼‰æ˜¯æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚è¡¨è¾¾å¼ï¼ˆExpressionsï¼‰è®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼ã€‚\nfn main() { let x = 5; let y = { let x = 3; x + 1 }; println!(\u0026quot;The value of y is: {}\u0026quot;, y); // The value of y is: 4 } å…·æœ‰è¿”å›å€¼çš„å‡½æ•° å‡½æ•°å¯ä»¥å‘è°ƒç”¨å®ƒçš„ä»£ç è¿”å›å€¼ã€‚æˆ‘ä»¬å¹¶ä¸å¯¹è¿”å›å€¼å‘½åï¼Œä½†è¦åœ¨ç®­å¤´ï¼ˆ-\u0026gt;ï¼‰åå£°æ˜å®ƒçš„ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ç­‰åŒäºå‡½æ•°ä½“æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ä½¿ç”¨ return å…³é”®å­—å’ŒæŒ‡å®šå€¼ï¼Œå¯ä»å‡½æ•°ä¸­æå‰è¿”å›ï¼›ä½†å¤§éƒ¨åˆ†å‡½æ•°éšå¼çš„è¿”å›æœ€åçš„è¡¨è¾¾å¼ã€‚\nfn five() -\u0026gt; i32 { 5 } fn main() { let x = five(); println!(\u0026quot;The value of x is: {}\u0026quot;, x); } æ³¨é‡Š åªå…è®¸ // è¿™ç§å†™æ³•ã€‚\næ§åˆ¶æµ if è¡¨è¾¾å¼ fn main() { let number = 3; if number \u0026lt; 5 { println!(\u0026quot;condition was true\u0026quot;); } else { println!(\u0026quot;condition was false\u0026quot;); } } fn main() { // æˆ‘ä»¬è¦åˆ¤æ–­ number ä¸ä¸ºé›¶ let number = 3; // if è¡¨è¾¾å¼åªå…è®¸æ¡ä»¶è¿”å› bool ç±»å‹ // è¿™é‡Œæ”¹ä¸º number != 0 æ‰èƒ½ç¼–è¯‘é€šè¿‡ if number { println!(\u0026quot;number was three\u0026quot;); } } fn main() { let number = 6; if number % 4 == 0 { println!(\u0026quot;number is divisible by 4\u0026quot;); } else if number % 3 == 0 { println!(\u0026quot;number is divisible by 3\u0026quot;); } else if number % 2 == 0 { println!(\u0026quot;number is divisible by 2\u0026quot;); } else { println!(\u0026quot;number is not divisible by 4, 3, or 2\u0026quot;); } } åœ¨ let è¯­å¥ä¸­ä½¿ç”¨ if fn main() { let condition = true; let number = if condition { 5 } else { 6 }; println!(\u0026quot;The value of number is: {}\u0026quot;, number); // The value of number is: 5 } åœ¨è¿™ç§ä½¿ç”¨åœºæ™¯ä¸­ï¼Œif å’Œ else åˆ†æ”¯çš„å€¼ç±»å‹å¿…é¡»ä¸€è‡´ï¼Œä¸ç„¶ç¼–è¯‘ä¼šæç¤ºé”™è¯¯ã€‚\n##ä½¿ç”¨å¾ªç¯é‡å¤æ‰§è¡Œ\nloop fn main() { let mut counter = 0; let result = loop { counter += 1; if counter == 10 { break counter * 2; } }; assert_eq!(result, 20); } while å½“æ¡ä»¶ä¸ºçœŸï¼Œæ‰§è¡Œå¾ªç¯ã€‚å½“æ¡ä»¶ä¸å†ä¸ºçœŸï¼Œè°ƒç”¨ break åœæ­¢å¾ªç¯ã€‚\nfn main() { let mut number = 3; while number != 0 { println!(\u0026quot;{}!\u0026quot;, number); number = number - 1; } println!(\u0026quot;LIFTOFF!!!\u0026quot;); } for fn main() { let a = [10, 20, 30, 40, 50]; for element in a.iter() { println!(\u0026quot;the value is: {}\u0026quot;, element); } } ","id":73,"section":"posts","summary":"\u003cp\u003erustçš„åŸºç¡€éƒ¨åˆ†ï¼Œå˜é‡ã€å¸¸é‡ã€æ•°æ®ç±»å‹ã€å‡½æ•°ã€æ³¨é‡Šå’Œæ§åˆ¶æµ\u003c/p\u003e","tags":["rust"],"title":"rustè¯­è¨€å­¦ä¹ ï¼ˆä¸€ï¼‰","uri":"https://www.ganymedenil.com/2019/04/07/stady-rust-01.html","year":"2019"},{"content":"è™½ç„¶hexoç”Ÿæˆçš„é™æ€åšå®¢å¾ˆå®‰å…¨ï¼Œä¹Ÿä¸éœ€è¦åƒWordpress é‚£æ ·è¿ç»´æœåŠ¡å™¨ï¼Œä½†æ˜¯åŸºäºæœ¬åœ°çš„é™æ€æ–‡ä»¶ç”Ÿæˆå’Œå‘å¸ƒè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå°¤å…¶æ˜¯å¤šä¸ªç”µè„‘çš„åˆ‡æ¢ï¼Œä½ æ¯å°ç”µè„‘éƒ½éœ€è¦å®‰è£…ä¸€æ•´å¥—çš„nodejs ç¯å¢ƒå’Œhexoæ‰§è¡Œç¯å¢ƒï¼Œé€šè¿‡gitæœåŠ¡çš„hookè¿›è¡Œhexoåšå®¢ç”Ÿæˆä¸éƒ¨ç½²ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nåˆ›å»ºgitæœåŠ¡ å®‰è£…git æˆ‘ä½¿ç”¨çš„ CentOS æ‰§è¡Œ yum install git å³å¯å®‰è£…git\nä¸ºgitåˆ›å»ºç”¨æˆ·å’Œç¾¤ç»„ æ·»åŠ ç»„ groupadd git\næ·»åŠ ç”¨æˆ·å¹¶å°†ç”¨æˆ·åŠ å…¥ç»„ useradd git -g git\nåˆ›å»ºè¯ä¹¦ç™»å½• cd /home/git\nmkdir .ssh\nchmod 700 .ssh\ntouch .ssh/authorized_keys\nchmod 600 .ssh/authorized_keys\næ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•çš„ç”¨æˆ·çš„å…¬é’¥ï¼Œå…¬é’¥ä½äºid_rsa.pubæ–‡ä»¶ä¸­ï¼ŒæŠŠæˆ‘ä»¬çš„å…¬é’¥å¯¼å…¥åˆ°/home/git/.ssh/authorized_keysæ–‡ä»¶é‡Œï¼Œä¸€è¡Œä¸€ä¸ªã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ªå‘å°±æ˜¯åœ¨CentOSé‡Œsshç”Ÿæ•ˆå¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶\n.sshç›®å½•çš„æƒé™å¿…é¡»æ˜¯700 .ssh/authorized_keysæ–‡ä»¶æƒé™å¿…é¡»æ˜¯600 åˆ›å»ºgitç”¨æˆ·çš„å¯†é’¥ ssh-keygen -t rsa -C \u0026quot;willard_liu@XXXX.com\u0026quot;,åŒæ ·çš„æŠŠåˆšåˆ›å»ºçš„å…¬é’¥id_rsa.pubåŠ å…¥åˆ° authorized_keys ä¸­\né…ç½®ä¸€ä¸‹ git ç”¨æˆ·ä¸‹çš„git ä¿¡æ¯\n$ git config --global user.name author #å°†ç”¨æˆ·åè®¾ä¸ºauthor $ git config --global user.email author@corpmail.com #å°†ç”¨æˆ·é‚®ç®±è®¾ä¸ºauthor@corpmail.com åˆå§‹åŒ–Gitä»“åº“ é¦–å…ˆæˆ‘ä»¬é€‰å®šä¸€ä¸ªç›®å½•ä½œä¸ºGitä»“åº“ï¼Œå‡å®šæ˜¯/data/gitrepo/test.gitï¼Œåœ¨/data/gitrepoç›®å½•ä¸‹è¾“å…¥å‘½ä»¤ï¼š\ncd /data\nmkdir gitrepo\nchown git:git gitrepo/\ncd gitrepo\ngit init --bare test.git\nä»¥ä¸Šå‘½ä»¤Gitåˆ›å»ºä¸€ä¸ªç©ºä»“åº“ï¼ŒæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“é€šå¸¸éƒ½ä»¥.gitç»“å°¾ã€‚ç„¶åï¼ŒæŠŠä»“åº“æ‰€å±ç”¨æˆ·æ”¹ä¸ºgitï¼š\nchown -R git:git test.git\næµ‹è¯•ä¸€ä¸‹ä»“åº“æ˜¯å¦æœ‰é—®é¢˜\n$ git clone git@xxx.xxx.xxx.xxx:/data/gitrepo/test.git Cloning into 'test'... warning: You appear to have cloned an empty repository. Checking connectivity... done. åˆ°è¿™æˆ‘ä»¬çš„gitä»“åº“å°±æ­å»ºå®Œæˆäº†\nç„¶åæˆ‘ä»¬æŠŠ hexo é¡¹ç›®ä¸‹çš„source é‡Œé¢çš„å†…å®¹å…¨ä¸¢åˆ°è¿™ä¸ªgité¡¹ç›®ä¸‹å°±è¡Œäº†\nhexo é¡¹ç›®éƒ¨ç½² å®‰è£… nodejsè¿™ä¸ªä¸å†è¿™é‡Œå±•å¼€\nå®‰è£… hexo æ‰§è¡Œnpm install hexo-cli -g\nè½¯é“¾ hexo åˆ° /usr/bin ä¸‹æ–¹ä¾¿ç­‰ä¸‹åœ¨ git ç”¨æˆ·ä¸‹ä½¿ç”¨\nsudo ln -s /usr/local/lib/nodejs/node-v**.**.**-linux-x64/bin/hexo /usr/bin/hexo\næˆ‘ä»¬åœ¨ data ä¸‹å†åˆ›å»ºä¸€ä¸ª hexo é¡¹ç›®ç›®å½• mkdir blog\nç„¶åæˆ‘ä»¬æŠŠæœ¬åœ°å®Œæ•´çš„hexoé¡¹ç›®é™¤äº†node_modules å’Œ source ç›®å½•å¤–çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½ä¸Šä¼ åˆ° /data/blogä¸‹\nåˆ‡æ¢ç”¨æˆ·åˆ°git su gitï¼Œç„¶åå…‹éš†åˆšæ‰æˆ‘ä»¬çš„ä»“åº“ åˆ° source ç›®å½•\ngit clone git@xxx.xxx.xxx.xxx:/data/gitrepo/test.git /data/blog/source\nè¿›å…¥/data/blogå®‰è£…é¡¹ç›®ç»„ä»¶npm install\næ‰§è¡Œhexo g å’Œ hexo d,çœ‹ä¸æœ¬åœ°æ‰§è¡Œçš„æ˜¯å¦ä¸€è‡´\nå¦‚æœä¸Šè¿°æ­¥éª¤éƒ½æ²¡é—®é¢˜æˆ‘ä»¬å°±éœ€è¦æŠŠä¸Šé¢çš„æ­¥éª¤é…ç½®åˆ°ä»“åº“çš„hookä¸Šäº†\nè¿›å…¥ cd /data/gitrepo/test.git/hooks/ï¼Œå¦‚æœæ²¡æœ‰post-receiveè¿™ä¸ªæ–‡ä»¶ï¼Œå°±åˆ›å»ºä¸€ä¸ª touch post-receiveï¼Œå† é…ç½®ä¸€ä¸‹æƒé™ chmod 755 post-receiveï¼Œå…·ä½“å„ä¸ªhookçš„å«ä¹‰å‚è€ƒgitçš„æ–‡æ¡£\né…ç½® post-receive\n# è¿›å…¥source ç›®å½• cd /data/blog/source pwd echo \u0026quot;==========æ‹‰å–æœ€æ–°çš„æ–‡ç« ==========\u0026quot; unset GIT_DIR # å¼ºåˆ¶æ‹‰å–è¦†ç›–æœ¬åœ°å†…å®¹ git fetch --all git reset --hard origin/master git pull echo \u0026quot;==========æ‹‰å–ç»“æŸ==========\u0026quot; # è¿›å…¥blog ç›®å½• cd /data/blog pwd echo \u0026quot;==========æ¸…é™¤html==========\u0026quot; hexo clean echo \u0026quot;==========å¼€å§‹ç”Ÿæˆhtml==========\u0026quot; hexo g echo \u0026quot;==========ç”Ÿæˆhtmlå®Œæˆ==========\u0026quot; echo \u0026quot;==========å¼€å§‹éƒ¨ç½²==========\u0026quot; hexo d echo \u0026quot;==========éƒ¨ç½²å®Œæ¯•==========\u0026quot; åœ¨æœ¬åœ° push çœ‹ä¸€ä¸‹æ˜¯å¦æœ‰ä»¥ä¸Šè¿œç¨‹æ‰§è¡Œçš„æ“ä½œè¾“å‡º\nå¦‚æœä¸Šè¿°æ­¥éª¤éƒ½okäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‡ºäºå®‰å…¨è€ƒè™‘éœ€è¦ç¦ç”¨gitçš„è¿œç¨‹ç™»å½•\né€šè¿‡ç¼–è¾‘/etc/passwdæ–‡ä»¶å®Œæˆã€‚æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¸€è¡Œï¼š\ngitâŒ1001:1001:,,,:/home/git:/bin/bash æ”¹ä¸ºï¼š\ngitâŒ1001:1001:,,,:/home/git:/usr/bin/git-shell è¿™æ ·ï¼Œgitç”¨æˆ·å¯ä»¥æ­£å¸¸é€šè¿‡sshä½¿ç”¨gitï¼Œä½†æ— æ³•ç™»å½•shellï¼Œå› ä¸ºæˆ‘ä»¬ä¸ºgitç”¨æˆ·æŒ‡å®šçš„git-shellæ¯æ¬¡ä¸€ç™»å½•å°±è‡ªåŠ¨é€€å‡ºã€‚\nè‡³æ­¤æˆ‘ä»¬å°±å®Œæˆäº†æ‰€æœ‰æ­¥éª¤ï¼Œä»¥åæˆ‘ä»¬éœ€è¦å†™åšå®¢åªéœ€è¦åœ¨æœ¬åœ°å®‰è£…gitï¼Œå¦‚æœæ˜¯é¦–æ¬¡è¿˜éœ€å°†å…¬é’¥ id_rsa.pubçš„å†…å®¹é…ç½®åˆ°æœåŠ¡å™¨gitç”¨æˆ·ä¸‹çš„ .ssh/authorized_keysæ–‡ä»¶ä¸­ï¼Œç„¶åæ‹‰å–å‘å¸ƒ source ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„markdownçš„gitä»“åº“åœ°å€å°±å¯ä»¥å®Œæˆæ•´ä¸ªåšå®¢å‘å¸ƒæµç¨‹äº†ã€‚\n","id":74,"section":"posts","summary":"\u003cp\u003eè™½ç„¶hexoç”Ÿæˆçš„é™æ€åšå®¢å¾ˆå®‰å…¨ï¼Œä¹Ÿä¸éœ€è¦åƒWordpress é‚£æ ·è¿ç»´æœåŠ¡å™¨ï¼Œä½†æ˜¯åŸºäºæœ¬åœ°çš„é™æ€æ–‡ä»¶ç”Ÿæˆå’Œå‘å¸ƒè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå°¤å…¶æ˜¯å¤šä¸ªç”µè„‘çš„åˆ‡æ¢ï¼Œä½ æ¯å°ç”µè„‘éƒ½éœ€è¦å®‰è£…ä¸€æ•´å¥—çš„nodejs ç¯å¢ƒå’Œhexoæ‰§è¡Œç¯å¢ƒï¼Œé€šè¿‡gitæœåŠ¡çš„hookè¿›è¡Œhexoåšå®¢ç”Ÿæˆä¸éƒ¨ç½²ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\u003c/p\u003e","tags":["hexo"],"title":"ä½¿ç”¨git hook éƒ¨ç½² hexo é™æ€åšå®¢","uri":"https://www.ganymedenil.com/2019/01/13/Build-hexo-git.html","year":"2019"},{"content":"ä¸»è¦å†…å®¹ï¼šé€šè¿‡åŒ…å®‰è£…å’Œç¼–è¯‘å®‰è£…çš„æ–¹å¼å¯¹ NGINX è¿›è¡Œå®‰è£…ã€‚\nRHEL/CentOS é€šè¿‡åŒ…ï¼ˆPackagesï¼‰å®‰è£… NGINX è¦å®‰è£…æœ€æ–°çš„ NGINX ç‰ˆæœ¬ï¼Œè¯·åœ¨ /etc/yum.repos.d/nginx.repo ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä»¥æ·»åŠ  NGINX ä¸»çº¿ä»“åº“ï¼ˆmainline repositoryï¼‰\n[nginx] name=nginx repo baseurl=http://nginx.org/packages/mainline/OS/OSRELEASE/$basearch/ gpgcheck=0 enabled=1 OS éƒ¨åˆ†ç”¨ rhel æˆ– centos æ›¿æ¢ï¼ŒOSRELEASE éƒ¨åˆ†æ›¿æ¢ä¸º 5 , 6 æˆ– 7 ï¼Œä»¥ä¾¿å¯¹åº”æ­£ç¡®çš„ç‰ˆæœ¬ã€‚\nä¸çŸ¥é“è‡ªå·±æ˜¯ä»€ä¹ˆç³»ç»Ÿç‰ˆæœ¬çš„ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œ cat /etc/redhat-release ï¼ŒæŸ¥çœ‹ä½ æœ¬æœºçš„ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯ã€‚\nä»“åº“æ·»åŠ å®Œæ¯•åï¼Œæ›´æ–°åŒ…ï¼Œç„¶åå¼€å§‹å®‰è£… NGINXã€‚\nyum update yum install nginx è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… http://nginx.org/en/linux_packages.html#mainline ä¸Šçš„å®˜æ–¹æ–‡æ¡£ã€‚\né€šè¿‡ç¼–è¯‘å®‰è£… é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…åŒ…æ„å»ºå·¥å…·å’Œé¢å¤–çš„ Extra Packages For Enterprise Linuxï¼ˆEPELï¼‰ä»“åº“ï¼š\nsudo yum install yum-utils epel-release mock ç„¶åæ›´æ–°/etc/yum.repos.d/nginx.repoï¼Œæ·»åŠ é¢å¤–çš„ä»“åº“æºï¼š\n[nginx-source] name=nginx source repo baseurl=http://nginx.org/packages/mainline/centos/7/SRPMS/ gpgcheck=0 enabled=1 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨CentOS 7ä½œä¸ºæ¼”ç¤ºã€‚å¦‚ä½•ä¿®æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬çš„CentOSï¼Œå‚é˜…ä¸Šä¸€èŠ‚ç”¨åŒ…å®‰è£…ä¸­çš„ç›¸å…³è¯´æ˜ã€‚\næ›´æ–°ä»“åº“åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç›®å½•ç”¨äºç¼–è¯‘ï¼Œ ç„¶åä¸‹è½½æºä»£ç åŒ…ï¼ˆSRPMï¼‰ï¼š\nmkdir ~/nginxbuild cd ~/nginxbuild yumdownloader --source nginx æ¥ä¸‹æ¥ï¼Œä¸‹è½½æ‰€éœ€çš„åŒ…ä»¥å®Œæˆç¼–è¯‘ï¼š\nyum-builddep nginx ä¸€æ—¦ä¸‹è½½äº†æ‰€æœ‰å¼€å‘åŒ…ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä»SRPMä¸­æå–æ–‡ä»¶ï¼š\nrpm2cpio nginx-1.9.10-1.el7.ngx.src.rpm | cpio -idmv è¯·æ³¨æ„ï¼Œç›®å½•åç§°å¯èƒ½å› æ‚¨å®‰è£…çš„NGINXç‰ˆæœ¬è€Œå¼‚ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯nginx-1.9.10ï¼Œå› ä¸ºæˆ‘å®‰è£…äº†NGINX 1.9.10ã€‚\næ‚¨åº”è¯¥çœ‹åˆ°æºæ–‡ä»¶çš„è¾“å‡ºç±»ä¼¼äºï¼š å¦‚æœæˆ‘ä»¬æƒ³è¦æ›´æ–°é…ç½®å¹¶åº”ç”¨è¡¥ä¸æˆ–æ›´æ”¹å…¶ä¸­ä¸€ä¸ªé»˜è®¤å€¼ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ç¼–è¾‘æ–‡ä»¶æ¥å®Œæˆã€‚\næˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ mock ä»æºä»£ç é‡å»ºè¿™äº›æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåŒ…çš„å·¥å…·ã€‚ mock çš„ä¼˜ç‚¹æ˜¯æ‰€æœ‰å¼€å‘ä¾èµ–é¡¹éƒ½åŒ…å«åœ¨ chrooted ç¯å¢ƒä¸­ï¼Œå› æ­¤å®ƒä¸ä¼šä½¿ä¸»å®‰è£…å˜å¾—æ··ä¹±ã€‚å¯ä»¥æ¸…ç†å’Œåˆ é™¤è¿™ä¸ª chrooted ç¯å¢ƒï¼Œè€Œä¸ä¼šå¯¹ä¸»æœºç³»ç»Ÿäº§ç”Ÿä»»ä½•å½±å“ï¼Œå¦‚æœæ‚¨éœ€è¦å¯é‡å¤çš„æ„å»ºï¼Œè¿™æ˜¯å¾ˆå¥½çš„ã€‚\nè¦ç¼–è¯‘ï¼Œåªéœ€è¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\nmock --buildsrpm --spec ~/nginxbuild/nginx.spec --sources ~/nginxbuild è¿™å°†ç”ŸæˆSRPMï¼Œå®ƒä»¬å°†ä¸ç›¸å…³çš„æ—¥å¿—æ–‡ä»¶ä¸€èµ·ä½äº /var/lib/moc/epel-7-x86_64/resultç›®å½•ä¸­ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»é‡å»ºäº†SRPMï¼Œæˆ‘ä»¬å¯ä»¥ç¼–è¯‘å®ƒäº†ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨mockï¼Œä»¥ä¾¿æ•´é½åœ°åŒ…å«æ‰€æœ‰å†…å®¹ï¼š\nmock --no-clean --rebuild var/lib/mock/epel-7-x86_64/result/nginx-1.9.11-1.el7.ngx.src.rpm æ ¹æ®ä½ æœºå™¨çš„å¤„ç†èƒ½åŠ›ï¼Œè¿™å¯èƒ½éœ€è¦äº”åˆ†é’Ÿæˆ–æ›´é•¿æ—¶é—´æ‰èƒ½å®Œæˆã€‚ç¼–è¯‘å®Œæˆåï¼Œä½ åº”è¯¥åœ¨ /var/lib/mock/epel-7-x86_64 ç›®å½•ä¸­çœ‹åˆ°ç”Ÿæˆçš„äºŒè¿›åˆ¶ RPM ä»¥åŠè°ƒè¯•ç”¨çš„ RPM ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š\n-rw-rw-r-- 1 demo mock 159K Feb 10 20:59 build.log -rw-r--r-- 1 demo mock 889K Feb 10 20:57 nginx-1.9.11-1.el7.ngx.src.rpm -rw-r--r-- 1 demo mock 803K Feb 10 20:59 nginx-1.9.11-1.el7.ngx.x86_64.rpm -rw-r--r-- 1 demo mock 3.1M Feb 10 20:59 nginx-debuginfo-1.9.11-1.el7.ngx.x86_64.rpm -rw-rw-r-- 1 demo mock 45K Feb 10 20:59 root.log -rw-rw-r-- 1 demo mock 1000 Feb 10 20:59 state.log ç°åœ¨æˆ‘ä»¬æœ‰äº†æ–°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ yum å®‰è£…å®ƒï¼š\nsudo yum install /var/lib/mock/epel-7-x86_64/result/nginx-1.9.11-1. ngx.x86_64.rpm æœ€å¥½ä½¿ç”¨ yum æ¥å®‰è£…è½¯ä»¶åŒ…ï¼Œå› ä¸ºå®ƒä¹Ÿå¯ä»¥å®‰è£…ä»»ä½•ä¾èµ–é¡¹ã€‚\næµ‹è¯• æ— è®ºä½ çš„å®‰è£…æ–¹æ³•å¦‚ä½•ï¼Œä¸€æ—¦å¯åŠ¨å¹¶è¿è¡Œ NGINX ï¼Œä½ åº”è¯¥èƒ½å¤Ÿé€šè¿‡IPåœ°å€åŠ  / æˆ–å®Œå…¨é™å®šåŸŸåï¼ˆFQDNï¼‰æµè§ˆå®ƒï¼Œå¹¶æŸ¥çœ‹ä¸æ­¤å¤„æ˜¾ç¤ºçš„å†…å®¹éå¸¸ç›¸ä¼¼çš„å†…å®¹ï¼š è¦å¯åŠ¨ï¼Œåœæ­¢å’Œé‡æ–°å¯åŠ¨ NGINXï¼ˆå¦‚æœä½¿ç”¨å®˜æ–¹äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ Linux init ç³»ç»Ÿã€‚ä¸åŒçš„OSç‰ˆæœ¬ä¹‹é—´å­˜åœ¨éå¸¸å°çš„å·®å¼‚ï¼Œå› æ­¤ç¡®ä¿æ­£ç¡®ä½¿ç”¨æ­£ç¡®çš„å˜é‡å‘½ä»¤éå¸¸é‡è¦ã€‚\nå½“Ubuntuä»15.04åˆ‡æ¢åˆ° systemd ä½œä¸ºé»˜è®¤çš„ init ç³»ç»Ÿæ—¶ï¼Œè¯·ç¡®ä¿ä»”ç»†æ£€æŸ¥æ‚¨æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚\nå„ç‰ˆæœ¬çš„æ“ä½œå¯å‚è€ƒä»¥ä¸‹è¡¨\nActivity/OS CentOS / RedHat 6 CentOS / RedHat 7 Ubuntu 14.04 / Debian 8 Start NGINX service nginx start systemctl start nginx service nginx start Stop NGINX service nginx stop systemctl stop nginx service nginx stop Restart NGINX service nginx restart systemctl restart nginx service nginx restart Reload NGINX service nginx reload N/A N/A NGINX çš„æŸäº›é…ç½®ä¿®æ”¹å°†éœ€è¦å®Œå…¨é‡å¯ NGINXï¼Œè€Œå…¶ä»–ä¿®æ”¹åªéœ€è¦é‡æ–°åŠ è½½é…ç½®ã€‚åœ¨å¤§å¤šæ•°å·²ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œåªéœ€é‡æ–°åŠ è½½å³å¯ã€‚ NGINX å°† fork ä¸€ç»„æ–°çš„ worker è¿›ç¨‹ï¼Œå¹¶å…è®¸ç°æœ‰ workers è¿›ç¨‹å®Œæˆå¤„ç†å¹¶å¹²å‡€åœ°é€€å‡ºï¼Œè¿™æ ·å°±å¯ä»¥é¿å…åœæœºã€‚\næˆ‘ä»¬å¯ä»¥åœ¨è¿›è¡Œé…ç½®æ›´æ”¹åæ£€æŸ¥ NGINX é…ç½®æ–‡ä»¶ï¼Œä»¥ç¡®ä¿è¯­æ³•æ­£ç¡®ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n/usr/sbin/nginx -t å¦‚æœä¸€åˆ‡æ­£ç¡®ï¼Œä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful å¦‚æœæœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·åœ¨é”™è¯¯æç¤ºå¯¹åº”çš„é…ç½®è¡Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚\n","id":75,"section":"posts","summary":"\u003cp\u003eä¸»è¦å†…å®¹ï¼šé€šè¿‡åŒ…å®‰è£…å’Œç¼–è¯‘å®‰è£…çš„æ–¹å¼å¯¹ NGINX è¿›è¡Œå®‰è£…ã€‚\u003c/p\u003e","tags":["nginx"],"title":"NGINX å®‰è£…","uri":"https://www.ganymedenil.com/2018/08/14/nginx-install.html","year":"2018"},{"content":"å›´ç»•å®¹å™¨çš„é‡è¦æ“ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºä¸€ä¸ªå®¹å™¨ã€å¯åŠ¨å®¹å™¨ã€ç»ˆæ­¢ä¸€ä¸ªå®¹å™¨ã€è¿›å…¥å®¹å™¨å†…æ‰§è¡Œæ“ä½œã€åˆ é™¤å®¹å™¨å’Œé€šè¿‡å¯¼å…¥å¯¼å‡ºå®¹å™¨æ¥å®ç°å®¹å™¨è¿ç§»ç­‰ã€‚\næ“ä½œ Docker å®¹å™¨ å®¹å™¨æ˜¯é•œåƒçš„ä¸€ä¸ªè¿è¡Œå®ä¾‹ã€‚æ‰€ä¸åŒçš„æ˜¯ï¼Œé•œåƒæ˜¯é™æ€çš„åªè¯»æ–‡ä»¶ï¼Œè€Œå®¹å™¨å¸¦æœ‰è¿è¡Œæ—¶éœ€è¦çš„å¯å†™æ–‡ä»¶å±‚ã€‚å¦‚æœè®¤ä¸ºè™šæ‹Ÿæœºæ˜¯æ¨¡æ‹Ÿè¿è¡Œçš„ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬å†…æ ¸ã€åº”ç”¨è¿è¡Œæ€ç¯å¢ƒå’Œå…¶ä»–ç³»ç»Ÿç¯å¢ƒï¼‰å’Œè·‘åœ¨ä¸Šé¢çš„åº”ç”¨ï¼Œé‚£ä¹ˆDockerå®¹å™¨å°±æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªï¼ˆæˆ–ä¸€ç»„ï¼‰åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬å¿…éœ€çš„è¿è¡Œç¯å¢ƒã€‚\n1. æ–°å»ºå®¹å™¨ docker create [OPTIONS] IMAGE [COMMAND] [ARG...]\nä¾‹å­ï¼š\n$ docker create -it ubuntu:latest af8f4f922dafee22c8fe6cd2ae11d16e25087d61f1b1fa55b36e94db7ef45178 $ docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES af8f4f922daf ubuntu:latest \u0026quot;/bin/bash\u0026quot; 17 seconds ago Created silly_euler ä½¿ç”¨docker create å‘½ä»¤æ–°å»ºçš„å®¹å™¨å¤„äºåœæ­¢çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨docker startå‘½ä»¤æ¥å¯åŠ¨å®ƒã€‚\nCreateå‘½ä»¤å’Œåç»­çš„runå‘½ä»¤æ”¯æŒçš„é€‰é¡¹éƒ½ååˆ†å¤æ‚ï¼Œä¸»è¦åŒ…æ‹¬å¦‚ä¸‹å‡ å¤§ç±»ï¼šä¸å®¹å™¨è¿è¡Œæ¨¡å¼ç›¸å…³ã€ä¸å®¹å™¨å’Œç¯å¢ƒé…ç½®ç›¸å…³ã€ä¸å®¹å™¨èµ„æºé™åˆ¶å’Œå®‰å…¨ä¿æŠ¤ç›¸å…³ã€‚ å…·ä½“è¯¦æƒ…å¯ä»¥é€šè¿‡å‘½ä»¤ docker create --help è·å¾—ã€‚\n2. å¯åŠ¨å®¹å™¨ docker start [OPTIONS] CONTAINER [CONTAINER...]\n3. æ–°å»ºå¹¶å¯åŠ¨å®¹å™¨ docker run [OPTIONS] IMAGE [COMMAND] [ARG...]\nå½“åˆ©ç”¨docker runæ¥åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨æ—¶ï¼ŒDockeråœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š\nÂ·æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½ï¼›\nÂ·åˆ©ç”¨é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¹¶å¯åŠ¨è¯¥å®¹å™¨ï¼›\nÂ·åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿç»™å®¹å™¨ï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚ï¼›\nÂ·ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­ï¼›\nÂ·ä»ç½‘æ¡¥çš„åœ°å€æ± é…ç½®ä¸€ä¸ªIPåœ°å€ç»™å®¹å™¨ï¼›\nÂ·æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼›\nÂ·æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«è‡ªåŠ¨ç»ˆæ­¢ã€‚\nå¯¹äºæ‰€åˆ›å»ºçš„bashå®¹å™¨ï¼Œå½“ä½¿ç”¨exitå‘½ä»¤é€€å‡ºä¹‹åï¼Œå®¹å™¨å°±è‡ªåŠ¨å¤„äºé€€å‡ºï¼ˆExitedï¼‰çŠ¶æ€äº†ã€‚è¿™æ˜¯å› ä¸ºå¯¹Dockerå®¹å™¨æ¥è¯´ï¼Œå½“è¿è¡Œçš„åº”ç”¨é€€å‡ºåï¼Œå®¹å™¨ä¹Ÿå°±æ²¡æœ‰ç»§ç»­è¿è¡Œçš„å¿…è¦äº†ã€‚\næŸäº›æ—¶å€™ï¼Œæ‰§è¡Œdocker runä¼šå‡ºé”™ï¼Œå› ä¸ºå‘½ä»¤æ— æ³•æ­£å¸¸æ‰§è¡Œå®¹å™¨ä¼šç›´æ¥é€€å‡ºï¼Œæ­¤æ—¶å¯ä»¥æŸ¥çœ‹é€€å‡ºçš„é”™è¯¯ä»£ç ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œå¸¸è§é”™è¯¯ä»£ç åŒ…æ‹¬ï¼š Â·125ï¼šDocker daemonæ‰§è¡Œå‡ºé”™ï¼Œä¾‹å¦‚æŒ‡å®šäº†ä¸æ”¯æŒçš„Dockerå‘½ä»¤å‚æ•°ï¼› Â·126ï¼šæ‰€æŒ‡å®šå‘½ä»¤æ— æ³•æ‰§è¡Œï¼Œä¾‹å¦‚æƒé™å‡ºé”™ï¼› Â·127ï¼šå®¹å™¨å†…å‘½ä»¤æ— æ³•æ‰¾åˆ°ã€‚\nå‘½ä»¤æ‰§è¡Œåå‡ºé”™ï¼Œä¼šé»˜è®¤è¿”å›é”™è¯¯ç ã€‚\n4. å®ˆæŠ¤æ€è¿è¡Œ è®©Dockerå®¹å™¨åœ¨åå°ä»¥å®ˆæŠ¤æ€ï¼ˆDaemonizedï¼‰å½¢å¼è¿è¡Œã€‚æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ -då‚æ•°æ¥å®ç°ã€‚\n$ docker run -d ubuntu /bin/sh \\ -c \u0026quot;while true; do echo hello world; sleep 1; done\u0026quot; ce554267d7a4c34eefc92c5517051dc37b918b588736d0823e4c846596b04d83 ç»ˆæ­¢å®¹å™¨ docker stop [OPTIONS] CONTAINER [CONTAINER...]\né¦–å…ˆå‘å®¹å™¨å‘é€SIGTERMä¿¡å·ï¼Œç­‰å¾…ä¸€æ®µè¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤ä¸º10ç§’ï¼‰åï¼Œå†å‘é€SIGKILLä¿¡å·æ¥ç»ˆæ­¢å®¹å™¨\næ³¨æ„ï¼šdocker killå‘½ä»¤ä¼šç›´æ¥å‘é€SIGKILLä¿¡å·æ¥å¼ºè¡Œç»ˆæ­¢å®¹å™¨ã€‚ æ­¤å¤–ï¼Œå½“Dockerå®¹å™¨ä¸­æŒ‡å®šçš„åº”ç”¨ç»ˆç»“æ—¶ï¼Œå®¹å™¨ä¹Ÿä¼šè‡ªåŠ¨ç»ˆæ­¢ã€‚ä¾‹å¦‚å¯¹äºä¸Šä¸€èŠ‚ä¸­åªå¯åŠ¨äº†ä¸€ä¸ªç»ˆç«¯çš„å®¹å™¨ï¼Œç”¨æˆ·é€šè¿‡exitå‘½ä»¤æˆ–Ctrl+dæ¥é€€å‡ºç»ˆç«¯æ—¶ï¼Œæ‰€åˆ›å»ºçš„å®¹å™¨ç«‹åˆ»ç»ˆæ­¢ï¼Œå¤„äºstoppedçŠ¶æ€ã€‚\nè¿›å…¥å®¹å™¨ 1. attach å‘½ä»¤ docker attach [OPTIONS] CONTAINER\næ”¯æŒä¸‰ä¸ªä¸»è¦é€‰é¡¹ï¼š\n--detach-keys[=[]] æŒ‡å®šé€€å‡ºattachæ¨¡å¼çš„å¿«æ·é”®åºåˆ—ï¼Œé»˜è®¤æ˜¯CTRL-p CTRL-q\n--no-stdin=true|false æ˜¯å¦å…³é—­æ ‡å‡†è¾“å…¥ï¼Œé»˜è®¤æ˜¯ä¿æŒæ‰“å¼€\n--sig-proxy=true|false æ˜¯å¦ä»£ç†æ”¶åˆ°çš„ç³»ç»Ÿä¿¡å·ç»™åº”ç”¨è¿›ç¨‹ï¼Œé»˜è®¤ä¸ºtrue\nä½†æ˜¯ä½¿ç”¨attachå‘½ä»¤æœ‰æ—¶å€™å¹¶ä¸æ–¹ä¾¿ã€‚å½“å¤šä¸ªçª—å£åŒæ—¶ç”¨attachå‘½ä»¤è¿åˆ°åŒä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œæ‰€æœ‰çª—å£éƒ½ä¼šåŒæ­¥æ˜¾ç¤ºã€‚å½“æŸä¸ªçª—å£å› å‘½ä»¤é˜»å¡æ—¶ï¼Œå…¶ä»–çª—å£ä¹Ÿæ— æ³•æ‰§è¡Œæ“ä½œäº†ã€‚\n2. exec å‘½ä»¤ docker exec [OPTIONS] CONTAINER COMMAND [ARG...]\n-iï¼Œ--interactive=true|false æ‰“å¼€æ ‡å‡†è¾“å…¥æ¥å—ç”¨æˆ·è¾“å…¥å‘½ä»¤ï¼Œé»˜è®¤ä¸ºfalse\n--privileged=true|false æ˜¯å¦ç»™æ‰§è¡Œå‘½ä»¤ä»¥é«˜æƒé™ï¼Œé»˜è®¤ä¸ºfalse\n-tï¼Œ--tty=true|false åˆ†é…ä¼ªç»ˆç«¯ï¼Œé»˜è®¤ä¸ºfalse\n-uï¼Œ--user=\u0026quot;\u0026quot; æ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·åæˆ–ID\né€šè¿‡æŒ‡å®š-itå‚æ•°æ¥ä¿æŒæ ‡å‡†è¾“å…¥æ‰“å¼€ï¼Œå¹¶ä¸”åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ã€‚é€šè¿‡execå‘½ä»¤å¯¹å®¹å™¨æ‰§è¡Œæ“ä½œæ˜¯æœ€ä¸ºæ¨èçš„æ–¹å¼ã€‚\nåˆ é™¤å®¹å™¨ docker rm [OPTIONS] CONTAINER [CONTAINER...]\nä¸»è¦æ”¯æŒçš„é€‰é¡¹åŒ…æ‹¬ï¼š\n-fï¼Œ--force=false æ˜¯å¦å¼ºè¡Œç»ˆæ­¢å¹¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨\n-lï¼Œ--link=false åˆ é™¤å®¹å™¨çš„è¿æ¥ï¼Œä½†ä¿ç•™å®¹å™¨\n-vï¼Œ--volumes=false åˆ é™¤å®¹å™¨æŒ‚è½½çš„æ•°æ®å·\né»˜è®¤æƒ…å†µä¸‹ï¼Œdocker rmå‘½ä»¤åªèƒ½åˆ é™¤å¤„äºç»ˆæ­¢æˆ–é€€å‡ºçŠ¶æ€çš„å®¹å™¨ï¼Œå¹¶ä¸èƒ½åˆ é™¤è¿˜å¤„äºè¿è¡ŒçŠ¶æ€çš„å®¹å™¨ã€‚\nå¦‚æœè¦ç›´æ¥åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥æ·»åŠ -få‚æ•°ã€‚Dockerä¼šå…ˆå‘é€SIGKILLä¿¡å·ç»™å®¹å™¨ï¼Œç»ˆæ­¢å…¶ä¸­çš„åº”ç”¨ï¼Œä¹‹åå¼ºè¡Œåˆ é™¤ã€‚\nå¯¼å…¥å’Œå¯¼å‡ºå®¹å™¨ 1. å¯¼å‡ºå®¹å™¨ docker export [OPTIONS] CONTAINER\nä¾‹å­ï¼š\n$ docker export -o test_for_run.tar ce5 $ ls test_for_run.tar $ docker export e81 \u0026gt;test_for_stop.tar $ ls test_for_run.tar test_for_stop.tar 2.å¯¼å…¥å®¹å™¨ docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]\nç”¨æˆ·å¯ä»¥é€šè¿‡-cï¼Œ\u0026ndash;change=[]é€‰é¡¹åœ¨å¯¼å…¥çš„åŒæ—¶æ‰§è¡Œå¯¹å®¹å™¨è¿›è¡Œä¿®æ”¹çš„DockerfileæŒ‡ä»¤\n$ docker import test_for_run.tar - test/ubuntu:v1.0 $ docker images REPOSITORY TAG IMAGE ID CREATED VIRTUAL SIZE test/ubuntu v1.0 9d37a6082e97 About a minute ago 171.3 MB ","id":76,"section":"posts","summary":"\u003cp\u003eå›´ç»•å®¹å™¨çš„é‡è¦æ“ä½œï¼ŒåŒ…æ‹¬åˆ›å»ºä¸€ä¸ªå®¹å™¨ã€å¯åŠ¨å®¹å™¨ã€ç»ˆæ­¢ä¸€ä¸ªå®¹å™¨ã€è¿›å…¥å®¹å™¨å†…æ‰§è¡Œæ“ä½œã€åˆ é™¤å®¹å™¨å’Œé€šè¿‡å¯¼å…¥å¯¼å‡ºå®¹å™¨æ¥å®ç°å®¹å™¨è¿ç§»ç­‰ã€‚\u003c/p\u003e","tags":["docker"],"title":"æ“ä½œ Docker å®¹å™¨","uri":"https://www.ganymedenil.com/2018/07/10/use-docker-container.html","year":"2018"},{"content":"å›´ç»•Dockeré•œåƒçš„ä¸€ç³»åˆ—é‡è¦å‘½ä»¤æ“ä½œï¼ŒåŒ…æ‹¬è·å–ã€æŸ¥çœ‹ã€æœç´¢ã€åˆ é™¤ã€åˆ›å»ºã€å­˜å‡ºå’Œè½½å…¥ã€ä¸Šä¼ ç­‰ã€‚\nDocker è¿è¡Œå®¹å™¨å‰éœ€è¦æœ¬åœ°å­˜åœ¨å¯¹åº”çš„é•œåƒï¼Œå¦‚æœé•œåƒæ²¡ä¿å­˜åœ¨æœ¬åœ°ï¼ŒDocker ä¼šå°è¯•å…ˆä»é»˜è®¤é•œåƒä»“åº“ä¸‹è½½ï¼ˆé»˜è®¤ä½¿ç”¨ Docker Hub å…¬å…±æ³¨å†ŒæœåŠ¡å™¨ä¸­çš„ä»“åº“ï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„é•œåƒä»“åº“ã€‚\n1. è·å–é•œåƒ docker pull NAME [:TAG]\nNAME æ˜¯é•œåƒä»“åº“çš„åç§°ï¼ˆç”¨æ¥åŒºåˆ†é•œåƒï¼‰ï¼ŒTAG æ˜¯é•œåƒçš„æ ‡ç­¾ï¼ˆå¾€å¾€ç”¨æ¥è¡¨ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæè¿°ä¸€ä¸ªé•œåƒéœ€è¦åŒ…æ‹¬â€œåç§°+æ ‡ç­¾â€ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œè·å–ä¸€ä¸ª Ubuntu 14.04 ç³»ç»Ÿçš„åŸºç¡€é•œåƒå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤ï¼š docker pull ubuntu:14.04 å¯¹äº Docker é•œåƒæ¥è¯´ï¼Œå¦‚æœä¸æ˜¾å¼æŒ‡å®š TAGï¼Œåˆ™é»˜è®¤ä¼šé€‰æ‹© latest æ ‡ç­¾ï¼Œè¿™ä¼šä¸‹è½½ä»“åº“ä¸­æœ€æ–°ç‰ˆæœ¬çš„é•œåƒã€‚ ä¾‹å¦‚ï¼š docker pull ubuntu ä¸‹è½½æœ€æ–°çš„ Ubuntu ç³»ç»Ÿé•œåƒï¼Œä¸ docker pull ubuntu:latest ä¸€è‡´ã€‚\nä¸€èˆ¬æ¥è¯´ï¼Œé•œåƒçš„latestæ ‡ç­¾æ„å‘³ç€è¯¥é•œåƒçš„å†…å®¹ä¼šè·Ÿè¸ªæœ€æ–°çš„éç¨³å®šç‰ˆæœ¬è€Œå‘å¸ƒï¼Œå†…å®¹æ˜¯ä¸ç¨³å®šçš„ã€‚å½“å‰Ubuntuæœ€æ–°çš„å‘è¡Œç‰ˆæœ¬ä¸º16.04ï¼Œlatesté•œåƒå®é™…ä¸Šå°±æ˜¯16.04é•œåƒï¼Œç”¨æˆ·å¯ä»¥ä¸‹è½½ubuntuï¼š16.04é•œåƒå¹¶æŸ¥çœ‹ï¼Œä¸¤è€…çš„æ•°å­—æ‘˜è¦å€¼æ˜¯ä¸€è‡´çš„ã€‚ä»ç¨³å®šæ€§ä¸Šè€ƒè™‘ï¼Œä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¿½ç•¥é•œåƒçš„æ ‡ç­¾ä¿¡æ¯æˆ–ä½¿ç”¨é»˜è®¤çš„latestæ ‡è®°çš„é•œåƒã€‚\nä¸¥æ ¼åœ°è®²ï¼Œé•œåƒçš„ä»“åº“åç§°ä¸­è¿˜åº”è¯¥æ·»åŠ ä»“åº“åœ°å€ï¼ˆå³registryï¼Œæ³¨å†ŒæœåŠ¡å™¨ï¼‰ä½œä¸ºå‰ç¼€ï¼Œåªæ˜¯æˆ‘ä»¬é»˜è®¤ä½¿ç”¨çš„æ˜¯Docker HubæœåŠ¡ï¼Œè¯¥å‰ç¼€å¯ä»¥å¿½ç•¥ã€‚ ä¾‹å¦‚ï¼Œdocker pull ubuntu:14.04 å‘½ä»¤ç›¸å½“äºdocker pull registry.hub.docker.com/ubuntu:14.04 å‘½ä»¤ï¼Œå³ä»é»˜è®¤çš„æ³¨å†ŒæœåŠ¡å™¨Docker Hub Registry ä¸­çš„ ubuntu ä»“åº“æ¥ä¸‹è½½æ ‡è®°ä¸º14.04çš„é•œåƒã€‚\nå­å‘½ä»¤ï¼š -a,--all-tag=true|false æ˜¯å¦è·å–ä»“åº“ä¸­çš„æ‰€æœ‰é•œåƒï¼Œé»˜è®¤ä¸ºå¦ã€‚\n2. æŸ¥çœ‹é•œåƒä¿¡æ¯ ä½¿ç”¨ images å‘½ä»¤åˆ—å‡ºé•œåƒ docker images [OPTIONS] [REPOSITORY[:TAG]]\nåœ¨åˆ—å‡ºçš„ä¿¡æ¯ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å‡ ä¸ªå­—æ®µä¿¡æ¯ REPOSITORY:æ¥è‡ªäºå“ªä¸ªä»“åº“ï¼Œæ¯”å¦‚ubuntuä»“åº“ç”¨æ¥ä¿å­˜ubuntuç³»åˆ—çš„åŸºç¡€é•œåƒã€‚\nTAG:é•œåƒçš„æ ‡ç­¾ä¿¡æ¯ï¼Œæ¯”å¦‚14.04ã€latestç”¨æ¥æ ‡æ³¨ä¸åŒçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚æ ‡ç­¾åªæ˜¯æ ‡è®°ï¼Œå¹¶ä¸èƒ½æ ‡è¯†é•œåƒå†…å®¹ã€‚\nIMAGE ID:é•œåƒçš„IDï¼ˆå”¯ä¸€æ ‡è¯†é•œåƒï¼‰ï¼Œå¦‚ubuntuï¼šlatestå’Œubuntuï¼š16.04é•œåƒçš„IDéƒ½æ˜¯2fa927b5cdd3ï¼Œè¯´æ˜å®ƒä»¬ç›®å‰å®é™…ä¸ŠæŒ‡å‘åŒä¸€ä¸ªé•œåƒã€‚\nCREATED:åˆ›å»ºæ—¶é—´ï¼Œè¯´æ˜é•œåƒæœ€åçš„æ›´æ–°æ—¶é—´ã€‚\nSIZE:é•œåƒå¤§å°ï¼Œä¼˜ç§€çš„é•œåƒå¾€å¾€ä½“ç§¯éƒ½è¾ƒå°ã€‚\nå­å‘½ä»¤ï¼š -aï¼Œ--all=true|false åˆ—å‡ºæ‰€æœ‰çš„é•œåƒæ–‡ä»¶ï¼ˆåŒ…æ‹¬ä¸´æ—¶æ–‡ä»¶ï¼‰ï¼Œé»˜è®¤ä¸ºå¦ -digests=true|false åˆ—å‡ºé•œåƒçš„æ•°å­—æ‘˜è¦å€¼ï¼Œé»˜è®¤ä¸ºå¦ -fï¼Œ--filter=[] è¿‡æ»¤åˆ—å‡ºçš„é•œåƒï¼Œå¦‚dangling=trueåªæ˜¾ç¤ºæ²¡æœ‰è¢«ä½¿ç”¨çš„é•œåƒï¼›ä¹Ÿå¯æŒ‡å®šå¸¦æœ‰ç‰¹å®šæ ‡æ³¨çš„é•œåƒç­‰ã€‚\n--format=\u0026quot;TEMPLATE\u0026quot; æ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œå¦‚.IDä»£è¡¨IDä¿¡æ¯ï¼Œ.Repositoryä»£è¡¨ä»“åº“ä¿¡æ¯ç­‰\n--no-trunc=true|false å¯¹è¾“å‡ºç»“æœä¸­å¤ªé•¿çš„éƒ¨åˆ†æ˜¯å¦è¿›è¡Œæˆªæ–­ï¼Œå¦‚é•œåƒçš„IDä¿¡æ¯ï¼Œé»˜è®¤ä¸ºæ˜¯\n-qï¼Œ--quiet=true|false ä»…è¾“å‡ºIDä¿¡æ¯ï¼Œé»˜è®¤ä¸ºå¦ã€‚\nå…¶ä¸­ï¼Œå¯¹è¾“å‡ºç»“æœè¿›è¡Œæ§åˆ¶çš„é€‰é¡¹å¦‚ -fï¼Œ\u0026ndash;filter=[]ã€\u0026ndash;no-trunc=true|falseã€-qï¼Œ\u0026ndash;quiet=true|falseç­‰ï¼Œå¤§éƒ¨åˆ†å­å‘½ä»¤éƒ½æ”¯æŒã€‚\nä½¿ç”¨tagå‘½ä»¤æ·»åŠ é•œåƒæ ‡ç­¾ docker tag SOURCE_IMAGE[:TAG] TARGET_IMAGE[:TAG]\nä¾‹å¦‚æ·»åŠ ä¸€ä¸ªæ–°çš„myubuntuï¼šlatesté•œåƒæ ‡ç­¾ï¼š docker tag ubuntu:latest myubuntu:latest\nä¹‹åï¼Œç”¨æˆ·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨myubuntu:latestæ¥è¡¨ç¤ºè¿™ä¸ªé•œåƒäº†ã€‚ docker tagå‘½ä»¤æ·»åŠ çš„æ ‡ç­¾å®é™…ä¸Šèµ·åˆ°äº†ç±»ä¼¼é“¾æ¥çš„ä½œç”¨ã€‚\nä½¿ç”¨inspectå‘½ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ docker inspect OPTIONS] NAME|ID [NAME|ID...]\nä½¿ç”¨ docker inspect å‘½ä»¤å¯ä»¥è·å–è¯¥é•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ¶ä½œè€…ã€é€‚åº”æ¶æ„ã€å„å±‚çš„æ•°å­—æ‘˜è¦ç­‰ã€‚ ä¾‹å¦‚ï¼š docker inspect ubuntu:14.04\nè¿”å›çš„æ˜¯ä¸€ä¸ªJSONæ ¼å¼çš„æ¶ˆæ¯ï¼Œå¦‚æœæˆ‘ä»¬åªè¦å…¶ä¸­ä¸€é¡¹å†…å®¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°-fæ¥æŒ‡å®šï¼Œä¾‹å¦‚ï¼Œè·å–é•œåƒçš„Architectureï¼š\ndocker inspect -f {{\u0026quot;.Architecture\u0026quot;}} amd64\nä½¿ç”¨historyå‘½ä»¤æŸ¥çœ‹é•œåƒå†å² docker history [OPTIONS] IMAGE\nè¯¥å‘½ä»¤å°†åˆ—å‡ºå„å±‚çš„åˆ›å»ºä¿¡æ¯ã€‚\nä¾‹å¦‚æŸ¥çœ‹ ubuntu:14.04 é•œåƒçš„åˆ›å»ºè¿‡ç¨‹\ndocker history ubuntu:14.04\n3. æœç´¢é•œåƒ docker search [OPTIONS] TERM\næœç´¢è¿œç«¯ä»“åº“ä¸­å…±äº«çš„é•œåƒï¼Œé»˜è®¤æœç´¢å®˜æ–¹ä»“åº“ä¸­çš„é•œåƒã€‚\næ”¯æŒçš„å‚æ•°ï¼š\n--automated=true|false ä»…æ˜¾ç¤ºè‡ªåŠ¨åˆ›å»ºçš„é•œåƒï¼Œé»˜è®¤ä¸ºå¦\n--no-trunc=true|false è¾“å‡ºä¿¡æ¯ä¸æˆªæ–­æ˜¾ç¤ºï¼Œé»˜è®¤ä¸ºå¦\n-sï¼Œ--stars=X æŒ‡å®šä»…æ˜¾ç¤ºè¯„ä»·ä¸ºæŒ‡å®šæ˜Ÿçº§ä»¥ä¸Šçš„é•œåƒï¼Œé»˜è®¤ä¸º0ï¼Œå³è¾“å‡ºæ‰€æœ‰é•œåƒ\næ³¨:æœ€æ–°çš„ docker 18 ç‰ˆæœ¬ä¸­ï¼Œautomated ä¸ starts éƒ½å·²ç»å½’å¹¶åˆ° filter ä¸­ï¼Œ--filter=starsã€--filter=is-automatedã€‚\nä¾‹å¦‚ï¼Œæœç´¢æ‰€æœ‰è‡ªåŠ¨åˆ›å»ºçš„è¯„ä»·ä¸º1+çš„å¸¦nginxå…³é”®å­—çš„é•œåƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n$ docker search --automated -s 3 nginx (version 18) $ docker search --filter=stars=3 --filter=is-automated=true nginx NAME DESCRIPTION STARS OFFICIAL AUTOMATED jwilder/nginx-proxy Automated Nginx reverse proxy for docker conâ€¦ 1357 [OK] richarvey/nginx-php-fpm Container running Nginx + PHP-FPM capable ofâ€¦ 586 [OK] jrcs/letsencrypt-nginx-proxy-companion LetsEncrypt container to use with nginx as pâ€¦ 385 [OK] webdevops/php-nginx Nginx with PHP-FPM 106 [OK] zabbix/zabbix-web-nginx-mysql Zabbix frontend based on Nginx web-server wiâ€¦ 58 [OK] bitnami/nginx Bitnami nginx Docker Image 54 [OK] 1and1internet/ubuntu-16-nginx-php-phpmyadmin-mysql-5 ubuntu-16-nginx-php-phpmyadmin-mysql-5 36 [OK] tobi312/rpi-nginx NGINX on Raspberry Pi / armhf 20 [OK] wodby/drupal-nginx Nginx for Drupal container image 9 [OK] blacklabelops/nginx Dockerized Nginx Reverse Proxy Server. 9 [OK] webdevops/nginx Nginx container 8 [OK] nginxdemos/hello NGINX webserver that serves a simple page coâ€¦ 7 [OK] 1science/nginx Nginx Docker images that include Consul Tempâ€¦ 4 [OK] è¿”å›ä¿¡æ¯åŒ…å«å…³é”®å­—çš„é•œåƒï¼Œå…¶ä¸­åŒ…æ‹¬é•œåƒåå­—ã€æè¿°ã€æ˜Ÿçº§ï¼ˆè¡¨ç¤ºè¯¥é•œåƒçš„å—æ¬¢è¿ç¨‹åº¦ï¼‰ã€æ˜¯å¦å®˜æ–¹åˆ›å»ºã€æ˜¯å¦è‡ªåŠ¨åˆ›å»ºç­‰ã€‚\né»˜è®¤çš„è¾“å‡ºç»“æœå°†æŒ‰ç…§æ˜Ÿçº§è¯„ä»·è¿›è¡Œæ’åºã€‚\n4. åˆ é™¤é•œåƒ ä½¿ç”¨æ ‡ç­¾åˆ é™¤é•œåƒ docker rmi [OPTIONS] IMAGE [IMAGE...]\nä¾‹å¦‚ï¼Œè¦åˆ é™¤æ‰myubuntu:latesté•œåƒï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š docker rmi myubuntu:latest\nå½“åŒä¸€ä¸ªé•œåƒæ‹¥æœ‰å¤šä¸ªæ ‡ç­¾çš„æ—¶å€™ï¼Œdocker rmi å‘½ä»¤åªæ˜¯åˆ é™¤è¯¥é•œåƒå¤šä¸ªæ ‡ç­¾ä¸­çš„æŒ‡å®šæ ‡ç­¾è€Œå·²ï¼Œå¹¶ä¸å½±å“é•œåƒæ–‡ä»¶ã€‚ä½†å½“é•œåƒåªå‰©ä¸‹ä¸€ä¸ªæ ‡ç­¾çš„æ—¶å€™å°±è¦å°å¿ƒäº†ï¼Œæ­¤æ—¶å†ä½¿ç”¨docker rmiå‘½ä»¤ä¼šå½»åº•åˆ é™¤é•œåƒã€‚\nä½¿ç”¨é•œåƒ ID åˆ é™¤é•œåƒ å½“ä½¿ç”¨ docker rmi å‘½ä»¤ï¼Œå¹¶ä¸”åé¢è·Ÿä¸Šé•œåƒçš„IDï¼ˆä¹Ÿå¯ä»¥æ˜¯èƒ½è¿›è¡ŒåŒºåˆ†çš„éƒ¨åˆ†IDä¸²å‰ç¼€ï¼‰æ—¶ï¼Œä¼šå…ˆå°è¯•åˆ é™¤æ‰€æœ‰æŒ‡å‘è¯¥é•œåƒçš„æ ‡ç­¾ï¼Œç„¶ååˆ é™¤è¯¥é•œåƒæ–‡ä»¶æœ¬èº«ã€‚\næ³¨æ„ï¼Œå½“æœ‰è¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨å­˜åœ¨æ—¶ï¼Œé•œåƒæ–‡ä»¶é»˜è®¤æ˜¯æ— æ³•è¢«åˆ é™¤çš„ã€‚\nå¦‚æœè¦æƒ³å¼ºè¡Œåˆ é™¤é•œåƒï¼Œå¯ä»¥ä½¿ç”¨-få‚æ•°ã€‚\næ³¨æ„ï¼Œé€šå¸¸å¹¶ä¸æ¨èä½¿ç”¨-få‚æ•°æ¥å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªå­˜åœ¨å®¹å™¨ä¾èµ–çš„é•œåƒã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œå…ˆåˆ é™¤ä¾èµ–è¯¥é•œåƒçš„æ‰€æœ‰å®¹å™¨ï¼Œå†æ¥åˆ é™¤é•œåƒã€‚\n5. åˆ›å»ºé•œåƒ åˆ›å»ºé•œåƒçš„æ–¹æ³•ä¸»è¦æœ‰ä¸‰ç§ï¼šåŸºäºå·²æœ‰é•œåƒçš„å®¹å™¨åˆ›å»ºã€åŸºäºæœ¬åœ°æ¨¡æ¿å¯¼å…¥ã€åŸºäºDockerfileåˆ›å»ºã€‚\nåŸºäºå·²æœ‰é•œåƒçš„å®¹å™¨åˆ›å»º docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]\n-aï¼Œ--author=\u0026quot;\u0026quot; ä½œè€…ä¿¡æ¯\n-cï¼Œ--change=[] æäº¤çš„æ—¶å€™æ‰§è¡ŒDockerfileæŒ‡ä»¤ï¼ŒåŒ…æ‹¬CMD|ENTRYPOINT|ENV|EXPOSE|LABEL|ONBUILD|USER|VOLUME|WORKDIRç­‰\n-mï¼Œ--message=\u0026quot;\u0026quot; æäº¤æ¶ˆæ¯\n-pï¼Œ--pause=true æäº¤æ—¶æš‚åœå®¹å™¨è¿è¡Œ\nä¾‹å­ï¼š å…ˆè¿›å…¥å®¹å™¨ï¼Œè¿›è¡Œä¸€äº›å˜æ›´\n$ docker run -it ubuntu:14.04 /bin/bash root@a925cb40b3f0:/# touch test root@a925cb40b3f0:/# exit æäº¤æ”¹å˜ç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒ\n$ docker commit -m \u0026quot;Added a new file\u0026quot; -a \u0026quot;Docker Newbee\u0026quot; a925cb40b3f0 test:0.1 9e9c814023bcffc3e67e892a235afe61b02f66a947d2747f724bd317dda02f27 åŸºäºæœ¬åœ°æ¨¡æ¿å¯¼å…¥ docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]\nä¾‹å¦‚ï¼Œä¸‹è½½äº†ubuntu-14.04çš„æ¨¡æ¿å‹ç¼©åŒ…ï¼Œä¹‹åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯¼å…¥ï¼š\n$ cat ubuntu-14.04-x86_64-minimal.tar.gz | docker import - ubuntu:14.04\n6. å¯¼å‡ºå’Œå¯¼å…¥é•œåƒ å¯¼å‡ºé•œåƒ docker save [OPTIONS] IMAGE [IMAGE...]\nä¾‹å­ï¼š $ docker save -o ubuntu_14.04.tar ubuntu:14.04\nå¯¼å…¥é•œåƒ docker load [OPTIONS]\nä¾‹å­ï¼š $ docker load --input ubuntu_14.04.tar æˆ– $ docker load \u0026lt; ubuntu_14.04.tar\n7. ä¸Šä¼ é•œåƒ docker push [OPTIONS] NAME[:TAG]\nå¯ä»¥ä½¿ç”¨docker pushå‘½ä»¤ä¸Šä¼ é•œåƒåˆ°ä»“åº“ï¼Œé»˜è®¤ä¸Šä¼ åˆ°Docker Hubå®˜æ–¹ä»“åº“\n$ docker tag test:latest user/test:latest $ docker push user/test:latest The push refers to a repository [docker.io/user/test] Sending image list Please login prior to push: Username: Password: Email: ","id":77,"section":"posts","summary":"\u003cp\u003eå›´ç»•Dockeré•œåƒçš„ä¸€ç³»åˆ—é‡è¦å‘½ä»¤æ“ä½œï¼ŒåŒ…æ‹¬è·å–ã€æŸ¥çœ‹ã€æœç´¢ã€åˆ é™¤ã€åˆ›å»ºã€å­˜å‡ºå’Œè½½å…¥ã€ä¸Šä¼ ç­‰ã€‚\u003c/p\u003e","tags":["docker"],"title":"ä½¿ç”¨ Docker é•œåƒ","uri":"https://www.ganymedenil.com/2018/07/10/use-docker-images.html","year":"2018"},{"content":"æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬é•œåƒã€å®¹å™¨ã€ä»“åº“\né•œåƒ ï¼ˆImageï¼‰ ç±»ä¼¼äºè™šæ‹Ÿæœºé•œåƒï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼Œæ˜¯åˆ›å»ºå®¹å™¨çš„åŸºç¡€ã€‚ ##å®¹å™¨ ï¼ˆContainerï¼‰\nç±»ä¼¼äºä¸€ä¸ªè½»é‡çº§çš„æ²™ç®±ï¼ŒDockeråˆ©ç”¨å®¹å™¨æ¥è¿è¡Œå’Œéš”ç¦»åº”ç”¨ã€‚å®¹å™¨æ˜¯ä»é•œåƒåˆ›å»ºçš„åº”ç”¨è¿è¡Œå®ä¾‹ã€‚å¯ä»¥å°†å…¶å¯åŠ¨ã€å¼€å§‹ã€åœæ­¢ã€åˆ é™¤ï¼Œè€Œè¿™äº›å®¹å™¨éƒ½æ˜¯å½¼æ­¤ç›¸äº’éš”ç¦»çš„ã€äº’ä¸å¯è§çš„ã€‚\né•œåƒè‡ªèº«æ˜¯åªè¯»çš„ã€‚å®¹å™¨ä»é•œåƒå¯åŠ¨çš„æ—¶å€™ï¼Œä¼šåœ¨é•œåƒçš„æœ€ä¸Šå±‚åˆ›å»ºä¸€ä¸ªå¯å†™å±‚ã€‚\nä»“åº“ ï¼ˆRepositoryï¼‰ ç±»ä¼¼äºä»£ç ä»“åº“ï¼Œå®ƒæ˜¯Dockeré›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚æ ¹æ®æ‰€å­˜å‚¨çš„é•œåƒå…¬å¼€åˆ†äº«ä¸å¦ï¼ŒDockerä»“åº“å¯ä»¥åˆ†ä¸ºå…¬å¼€ä»“åº“ï¼ˆPublicï¼‰å’Œç§æœ‰ä»“åº“ï¼ˆPrivateï¼‰ä¸¤ç§å½¢å¼ã€‚\n","id":78,"section":"posts","summary":"\u003cp\u003eæ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬é•œåƒã€å®¹å™¨ã€ä»“åº“\u003c/p\u003e","tags":["docker"],"title":"Docker æ ¸å¿ƒæ¦‚å¿µ","uri":"https://www.ganymedenil.com/2018/07/10/docker-key-conception.html","year":"2018"},{"content":"swoole çš„å®‰è£…ä¸ä½¿ç”¨\nç¯å¢ƒè¦æ±‚ ç³»ç»Ÿ: Linux, FreeBSD or MacOS\nLinux å†…æ ¸ç‰ˆæœ¬ \u0026gt;= 2.3.32\nPHP ç‰ˆæœ¬ \u0026gt;= 5.3.10\nGCC ç‰ˆæœ¬ \u0026gt;= 4.4 or Clang\nCmake ç‰ˆæœ¬ \u0026gt;= 2.4 (Cmakeéœ€è¦å°†libswooleç¼–è¯‘ä¸ºC / C ++åº“)\næ¨èLinuxç‰ˆæœ¬ï¼šUbuntu 14ï¼ŒCentOS 7æˆ–æ›´é«˜ç‰ˆæœ¬\nPHPç‰ˆæœ¬ä¾èµ– Swooleä»…æ”¯æŒPHPç‰ˆæœ¬\u0026gt; = 5.3.10ï¼Œæ¨èä½¿ç”¨PHP 5.4+ Swooleä¸ä¾èµ–äºstreamï¼Œsocketsï¼Œpcntlï¼Œposixï¼Œsysvmsgç­‰æ‰©å±•ã€‚åªéœ€å®‰è£…PHPçš„åŸºæœ¬æ‰©å±•ã€‚ å®‰è£… æºç å®‰è£… ä¸‹è½½ swoole æœ€æ–°ç¨³å®šç‰ˆæœ¬\nhttps://github.com/swoole/swoole-src/releases\ncd swoole # è¿›å…¥ swoole æºç ç›®å½• phpize # ä¸ºPHPæ‰©å±•å‡†å¤‡ç¼–è¯‘ç¯å¢ƒ ./configure # æ ¹æ®éœ€è¦æ·»åŠ é…ç½®å‚æ•° make # ç¼–è¯‘ sudo make install # å®‰è£… swoole åˆ° php æ‰©å±•ç›®å½• æˆ‘çš„æµ‹è¯•ç¯å¢ƒç¼–è¯‘å‚æ•° ./configure --with-php-config=PATH --enable-swoole-debug --enable-trace-log --enable-sockets --enable-openssl --enable-swoole --with-swoole --enable-coroutine --enable-thread --enable-debug ç¼–è¯‘å¯é€‰å‚æ•°\n--disable-option-checking ignore unrecognized --enable/--with options --disable-FEATURE do not include FEATURE (same as --enable-FEATURE=no) --enable-FEATURE[=ARG] include FEATURE [ARG=yes] --with-PACKAGE[=ARG] use PACKAGE [ARG=yes] --without-PACKAGE do not use PACKAGE (same as --with-PACKAGE=no) --with-libdir=NAME Look for libraries in .../NAME rather than .../lib --with-php-config=PATH Path to php-config php-config --enable-swoole-debug Enable swoole debug å¯ç”¨swooleçš„è°ƒè¯•æ—¥å¿—ã€‚ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨æ­¤é…ç½®ã€‚ --enable-trace-log Enable swoole trace log --enable-sockets Do you have sockets extension? å¯ç”¨å¯¹ sockets çš„æ”¯æŒã€‚ä¾èµ– sockets --enable-async-redis Do you have hiredis? å¯ç”¨å¯¹å¼‚æ­¥Rediså®¢æˆ·ç«¯çš„æ”¯æŒã€‚ä¾èµ– hiredis --enable-coroutine-postgresql Do you install postgresql? å¯ç”¨åç¨‹ Postgresql å®¢æˆ·ç«¯ï¼Œä¾èµ– libpq --enable-openssl Use openssl? å¯ç”¨opensslæ”¯æŒã€‚ä¾èµ– libssl.so --enable-http2 Use http2.0? å¯ç”¨HTTP2çš„æ”¯æŒã€‚ä¾èµ– nghttp2 --enable-thread Experimental: Use thread? å¯ç”¨çº¿ç¨‹æ”¯æŒ //å®éªŒæ€§åŠŸèƒ½ã€‚è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ --enable-hugepage Experimental: Use hugepage? å¯ç”¨ hugepage //ä½¿ç”¨å¤§å†…å­˜é¡µä¼˜åŒ–æ€§èƒ½ï¼Œå…·ä½“é¸Ÿå“¥åœ¨ä»–çš„åšå®¢ä¸­è®²åˆ°ã€‚ å¦‚æœå·²ç»å¼€å¯äº† jemallocï¼Œå†å¼€å¯hugepage å°è±¡æ€§èƒ½ https://blog.digitalocean.com/transparent-huge-pages-and-alternative-memory-allocators/ å®éªŒæ€§åŠŸèƒ½ã€‚è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ --enable-swoole Enable swoole support --enable-swoole-static Enable swoole static compile support --with-swoole With swoole support --with-libpq-dir=DIR Include libpq support (requires libpq \u0026gt;= 9.5) --with-openssl-dir=DIR Include OpenSSL support (requires OpenSSL \u0026gt;= 0.9.6) è®¾ç½®opensslåº“çš„è·¯å¾„ï¼Œä¾‹å¦‚ï¼š--with-openssl-dir=/opt/openssl/. --with-jemalloc-dir=DIR Include jemalloc support ä½¿ç”¨ jemalloc è¿›è¡Œå†…å­˜ä¼˜åŒ–æ”¯æŒ --enable-mysqlnd Do you have mysqlnd? å¯ç”¨å¯¹ mysqlnd çš„æ”¯æŒï¼Œä¾èµ– mysqlnd --enable-coroutine Enable coroutine (requires PHP \u0026gt;= 5.5) å¯ç”¨åç¨‹ --enable-asan Enable asan å¯ç”¨ Address-Sanitizier å†…å­˜æ£€æµ‹å·¥å…· //åªæœ‰å¼€å¯debugæ‰æœ‰æ•ˆ --enable-picohttpparser Experimental: Do you have picohttpparser? å¯ç”¨ picohttpparser æ”¯æŒ //è¿™æ˜¯ä¸€ä¸ªè¶…é«˜æ€§èƒ½çš„httpè§£æå™¨ï¼Œå®éªŒæ€§åŠŸèƒ½ã€‚è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ --enable-timewheel Experimental: Enable timewheel heartbeat? å¯ç”¨æ—¶é—´è½®ç®—æ³•å¹¶ä¼˜åŒ–å¿ƒè·³ç®—æ³• //å®éªŒæ€§åŠŸèƒ½ã€‚è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ --enable-debug, compile with debug symbols ç¼–è¯‘æ—¶åŠ å…¥ç¬¦å·è¡¨ //ä½¿ç”¨gdbè°ƒè¯•æ—¶æœ‰ç”¨ --enable-shared=PKGS Build shared libraries default=yes --enable-static=PKGS Build static libraries default=yes --enable-fast-install=PKGS Optimize for fast installation default=yes --with-gnu-ld Assume the C compiler uses GNU ld default=no --disable-libtool-lock Avoid locking (might break parallel builds) --with-pic Try to use only PIC/non-PIC objects default=use both --with-tags=TAGS Include additional configurations automatic äºŒè¿›åˆ¶ç‰ˆæœ¬å®‰è£… Linuxç”¨æˆ· pecl install swoole\nå®‰è£…å¯é€‰å‚æ•°é»˜è®¤ NO\nenable debug/trace log support? enable sockets supports? enable openssl support? enable http2 support? enable async-redis support? enable mysqlnd support? enable postgresql coroutine client support? MacOS Xï¼ˆmacOSï¼‰ç”¨æˆ· æ¨èä½¿ç”¨ homebrew å®‰è£…\nbrew install swoole\nä½¿ç”¨ å®‰è£…å®Œæˆåéœ€è¦åœ¨ php.ini ä¸­åŠ å…¥æ‰©å±• extension=swoole.soï¼Œæ‰èƒ½ä½¿ç”¨\nphp -i | grep php.ini # æ£€æŸ¥ php.ini æ‰€åœ¨ç›®å½• sudo echo \u0026quot;extension=swoole.so\u0026quot; \u0026gt; php.ini # æ·»åŠ  extension=swoole.so åˆ° php.ini åˆ°æœ€åä¸€è¡Œ php -m | grep swoole # æ£€æŸ¥ swoole æ‰©å±•æ˜¯å¦å·²ç»è¢«æ¿€æ´» ä½¿ç”¨ PhpStorm å¼€å‘swoole\né»˜è®¤ PhpStorm ä¸æ”¯æŒå¯¹äº swoole çš„ä»£ç æç¤ºï¼Œéœ€è¦ä¸‹è½½å¯¹åº”çš„ä»£ç æç¤ºåº“\nhttps://github.com/eaglewu/swoole-ide-helper\nç„¶ååœ¨ Preferences -\u0026gt; Languages \u0026amp; Frameworks -\u0026gt; PHP çš„ Include Path ä¸­å¼•å…¥ä»£ç æç¤ºåº“\nç°åœ¨å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨è‡ªåŠ¨è¡¥å…¨æç¤ºäº†\n","id":79,"section":"posts","summary":"\u003cp\u003eswoole çš„å®‰è£…ä¸ä½¿ç”¨\u003c/p\u003e","tags":["swoole"],"title":"swoole å­¦ä¹ ï¼ˆä¸€ï¼‰å®‰è£…","uri":"https://www.ganymedenil.com/2018/04/22/learn-swoole-install.html","year":"2018"},{"content":"go è¯­è¨€ ç³»ç»Ÿä¿¡å·æ•æ‰\nä¿¡å·ç±»å‹ ä¸åŒå¹³å°ä¿¡å·å®šä¹‰æœ‰æ‰€ä¸åŒï¼Œé€šè¿‡å‘½ä»¤ man signal å¯è·å–å„å¹³å°è¯¦ç»†çš„ä¿¡å·ä»‹ç»ã€‚\nGo ä¸­çš„ Signal å‘é€å’Œå¤„ç† golangä¸­å¯¹ä¿¡å·çš„å¤„ç†ä¸»è¦ä½¿ç”¨os/signalåŒ…ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ï¼š notifyæ–¹æ³•ç”¨æ¥ç›‘å¬æ”¶åˆ°çš„ä¿¡å· stopæ–¹æ³•ç”¨æ¥å–æ¶ˆç›‘å¬ ç›‘å¬å…¨éƒ¨ä¿¡å· package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/signal\u0026quot; ) // ç›‘å¬å…¨éƒ¨ä¿¡å· func main() { //åˆå»ºchan c := make(chan os.Signal) //ç›‘å¬æ‰€æœ‰ä¿¡å· signal.Notify(c) //é˜»å¡ç›´åˆ°æœ‰ä¿¡å·ä¼ å…¥ fmt.Println(\u0026quot;å¯åŠ¨\u0026quot;) s := \u0026lt;-c fmt.Println(\u0026quot;é€€å‡ºä¿¡å·\u0026quot;, s) } ç¼–è¯‘ go build example-1.go\nå¯åŠ¨ ./example-1\nctrl+cé€€å‡º,è¾“å‡º é€€å‡ºä¿¡å· interrupt\nkill pid è¾“å‡º é€€å‡ºä¿¡å· terminated\nç›‘å¬æŒ‡å®šä¿¡å· package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/signal\u0026quot; \u0026quot;syscall\u0026quot; ) // ç›‘å¬æŒ‡å®šä¿¡å· func main() { //åˆå»ºchan c := make(chan os.Signal) //ç›‘å¬æŒ‡å®šä¿¡å· ctrl+c kill signal.Notify(c, os.Interrupt, os.Kill, syscall.SIGUSR1, syscall.SIGUSR2) //é˜»å¡ç›´åˆ°æœ‰ä¿¡å·ä¼ å…¥ fmt.Println(\u0026quot;å¯åŠ¨\u0026quot;) //é˜»å¡ç›´è‡³æœ‰ä¿¡å·ä¼ å…¥ s := \u0026lt;-c fmt.Println(\u0026quot;é€€å‡ºä¿¡å·\u0026quot;, s) } ç¼–è¯‘ go build example-2.go\nå¯åŠ¨ ./example-2\nctrl+cé€€å‡º,è¾“å‡º é€€å‡ºä¿¡å· interrupt\nkill pid è¾“å‡º é€€å‡ºä¿¡å· terminated\nkill -USR1 pid è¾“å‡º é€€å‡ºä¿¡å· user defined signal 1\nkill -USR2 pid è¾“å‡º é€€å‡ºä¿¡å· user defined signal 2\nä¼˜é›…é€€å‡º go å®ˆæŠ¤è¿›ç¨‹ package main import ( \u0026quot;fmt\u0026quot; \u0026quot;os\u0026quot; \u0026quot;os/signal\u0026quot; \u0026quot;syscall\u0026quot; \u0026quot;time\u0026quot; ) // ä¼˜é›…é€€å‡ºgoå®ˆæŠ¤è¿›ç¨‹ func main() { //åˆ›å»ºç›‘å¬é€€å‡ºchan c := make(chan os.Signal) //ç›‘å¬æŒ‡å®šä¿¡å· ctrl+c kill signal.Notify(c, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGUSR1, syscall.SIGUSR2) go func() { for s := range c { switch s { case syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT: fmt.Println(\u0026quot;é€€å‡º\u0026quot;, s) ExitFunc() case syscall.SIGUSR1: fmt.Println(\u0026quot;usr1\u0026quot;, s) case syscall.SIGUSR2: fmt.Println(\u0026quot;usr2\u0026quot;, s) default: fmt.Println(\u0026quot;other\u0026quot;, s) } } }() fmt.Println(\u0026quot;è¿›ç¨‹å¯åŠ¨...\u0026quot;) sum := 0 for { sum++ fmt.Println(\u0026quot;sum:\u0026quot;, sum) time.Sleep(time.Second) } } func ExitFunc() { fmt.Println(\u0026quot;å¼€å§‹é€€å‡º...\u0026quot;) fmt.Println(\u0026quot;æ‰§è¡Œæ¸…ç†...\u0026quot;) fmt.Println(\u0026quot;ç»“æŸé€€å‡º...\u0026quot;) os.Exit(0) } kill -USR1 pid è¾“å‡º usr1 user defined signal 1\nkill -USR2 pid usr2 user defined signal 2\nkill pid é€€å‡º terminated å¼€å§‹é€€å‡º\u0026hellip; æ‰§è¡Œæ¸…ç†\u0026hellip; ç»“æŸé€€å‡º\u0026hellip;\næ‰§è¡Œè¾“å‡º go build example-3.go ./example-3\nè¿›ç¨‹å¯åŠ¨\u0026hellip; sum: 1 sum: 2 sum: 3 sum: 4 sum: 5 sum: 6 sum: 7 sum: 8 sum: 9 usr1 user defined signal 1 sum: 10 sum: 11 sum: 12 sum: 13 sum: 14 usr2 user defined signal 2 sum: 15 sum: 16 sum: 17 é€€å‡º terminated å¼€å§‹é€€å‡º\u0026hellip; æ‰§è¡Œæ¸…ç†\u0026hellip; ç»“æŸé€€å‡º\u0026hellip;\n","id":80,"section":"posts","summary":"\u003cp\u003ego è¯­è¨€ ç³»ç»Ÿä¿¡å·æ•æ‰\u003c/p\u003e","tags":["linux","go"],"title":"go è¯­è¨€ ç³»ç»Ÿä¿¡å·æ•æ‰","uri":"https://www.ganymedenil.com/2018/02/19/golang-signal.html","year":"2018"},{"content":"ä¿®å¤é›ªçƒ RDR: redis data reveal æ”¯æŒ Redis v4\né—®é¢˜ é¦–å…ˆé›ªçƒçš„ redis data reveal ï¼ˆä»¥ä¸‹ç®€ç§°RDRï¼‰æ ¸å¿ƒä¾èµ–æ˜¯ cupcake/rdb,è€Œæ— æ³•è§£æRedis v4 ä¹Ÿæ˜¯å› ä¸º cupcake/rdb ä¸æ”¯æŒ rdb v8 çš„ç»“æ„æ”¯æŒã€‚\nè§£å†³ ç›´æ¥ä¿®å¤ cupcake/rdb æ”¯æŒ rdb v8 ç‰ˆæœ¬æ”¯æŒå³å¯ï¼ˆ Redis RDB File Formatï¼‰ã€‚è§£å†³å¯ç›´æ¥çœ‹è¿™ä¸ªpach ã€‚\nç›®å‰ cupcake/rdb å·²ç»ä¿®å¤æ”¯æŒï¼Œå¯ç›´æ¥åœ¨æˆ‘çš„ä»£ç ä»“åº“ä¸‹è½½ä½¿ç”¨ã€‚\nRDR å› ä¸ºä½¿ç”¨ go v1.7 å¼€å‘ï¼Œæ­£åœ¨è¿›è¡Œå‡çº§ä»¥æ”¯æŒ go v1.9 çš„æ”¯æŒã€‚\n","id":81,"section":"posts","summary":"\u003cp\u003eä¿®å¤é›ªçƒ RDR: redis data reveal æ”¯æŒ Redis v4\u003c/p\u003e","tags":["redis","go"],"title":"ä¿®å¤rdr æ”¯æŒ Redis v4","uri":"https://www.ganymedenil.com/2018/01/30/fix-rdr-support-for-redis-v4.html","year":"2018"},{"content":"å¤šç«™ç‚¹ä½¿ç”¨ laravel å¯¼è‡´ CSRF åœ¨cookiesä¸­çš„é”®å€¼å†²çª,ç„¶åçˆ† Illuminate\\Session\\TokenMismatchException é”™è¯¯\né—®é¢˜ è¿™ä¸ªé—®é¢˜ä¸€ç›´é—´æ­‡æ€§å‡ºç°ï¼Œä¹Ÿæ˜¯æœ€è¿‘æ‰æ„è¯†åˆ°å› ä¸ºå…¬å¸å†…éƒ¨å„ä¸ªå­ç«™å¼€å§‹æ¨è¡Œ laravel ã€‚\näºæ˜¯é‡æ–°çœ‹äº†æ–‡æ¡£æ‰¾åˆ°ä»¥ä¸‹å…³é”®\nLaravel stores the current CSRF token in a XSRF-TOKEN cookie that is included with each response generated by the framework.\nä»æ­¤å¯çŸ¥ laravel ä¼šå‘ cookies å†™å…¥ä¸€ä¸ªé”®åä¸º XSRF-TOKEN çš„ éªŒè¯å­—æ®µï¼Œè€Œæˆ‘ä»¬çš„å„ç«™ç‚¹å¦‚æœé»˜è®¤éƒ½ä½¿ç”¨æ­¤å­—æ®µå°±ä¼šå‡ºç°ï¼Œåœ¨Aç«™ç”Ÿæˆæ­¤å­—æ®µå€¼ï¼Œåœ¨Bç«™ä½¿ç”¨ï¼Œç„¶åCSRFæŠ¥é”™ã€‚\nè§£å†³ é‡å†™ Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken ä¸­çš„ addCookieToResponse è¿™ä¸ªæ–¹æ³•å³å¯\nå…·ä½“åšæ³• æˆ‘ä»¬åªè¦åœ¨ \\app\\Http\\Middleware\\VerifyCsrfToken.php è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé‡å†™æ­¤æ–¹æ³•å³å¯ï¼š\n\u0026lt;?php namespace App\\Http\\Middleware; use Symfony\\Component\\HttpFoundation\\Cookie; use Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken as BaseVerifier; class VerifyCsrfToken extends BaseVerifier { /** * The URIs that should be excluded from CSRF verification. * * @var array */ protected $except = [ ]; /** * Add the CSRF token to the response cookies. * * @param \\Illuminate\\Http\\Request $request * @param \\Illuminate\\Http\\Response $response * @return \\Illuminate\\Http\\Response */ protected function addCookieToResponse($request, $response) { $config = config('session'); $response-\u0026gt;headers-\u0026gt;setCookie( new Cookie( //åœ¨è¿™æ”¹æˆ cookies ä¸­å”¯ä¸€çš„é”®å³å¯å¦‚ â€˜GN_XSRF-TOKENâ€™ 'XSRF-TOKEN', $request-\u0026gt;session()-\u0026gt;token(), time() + 60 * $config['lifetime'], $config['path'], $config['domain'], $config['secure'], false ) ); return $response; } } ","id":82,"section":"posts","summary":"\u003cp\u003eå¤šç«™ç‚¹ä½¿ç”¨ \u003ccode\u003elaravel\u003c/code\u003e å¯¼è‡´ \u003ccode\u003eCSRF\u003c/code\u003e  åœ¨cookiesä¸­çš„é”®å€¼å†²çª,ç„¶åçˆ† \u003ccode\u003eIlluminate\\Session\\TokenMismatchException\u003c/code\u003e é”™è¯¯\u003c/p\u003e","tags":["laravel"],"title":"è®°laravelçš„CSRFè¿™ä¸ªå‘","uri":"https://www.ganymedenil.com/2017/09/21/laravel-csrf.html","year":"2017"},{"content":"è¿œç¨‹xdebugè°ƒè¯•é…ç½®\n1.å®‰è£…é…ç½®xdebug ç›´æ¥ä½¿ç”¨peclå®‰è£…å³å¯\npecl install xdebug ç„¶åå†™xdebugé…ç½®ï¼Œä¸‹é¢æ˜¯æˆ‘çš„è®¾ç½®(å…·ä½“æ‰©å±•è·¯å¾„ä»¥ä½ å®‰è£…å®Œåæç¤ºçš„è·¯å¾„ä¸ºå‡†)\n[xdebug] zend_extension=/usr/local/php/lib/php/extensions/no-debug-non-zts-20160303/xdebug.so xdebug.remote_enable = 1 xdebug.remote_host=192.168.220.128(ä½ è¿è¡ŒxdebugæœåŠ¡å™¨çš„å¤–ç½‘ipï¼Œè¿™é‡Œæ˜¯æˆ‘åœ¨è™šæ‹Ÿæœºæµ‹è¯•çš„åœ°å€) xdebug.remote_connect_back = 1 xdebug.remote_port = 9000 ä¿å­˜é‡å¯php\n2.é…ç½®è¿è¡ŒDBGp proxy é¦–å…ˆä¸‹è½½ï¼Œä¸‹è½½åœ°å€ï¼Œæˆ‘åœ¨è¿™é€‰æ‹©çš„æ˜¯Komodo IDE 10 (version 10.1.2)ç„¶åæ˜¯Python Remote Debugging Client Linux (x86_64) ï¼Œå¯ä»¥æŒ‰ç…§ä½ çš„ç³»ç»Ÿéœ€æ±‚é€‰æ‹©ä¸‹è½½ï¼Œä½†æ¨èé€‰æ‹©pythonç‰ˆæœ¬è€Œä¸æ˜¯å…¶ä»–çš„ï¼Œå› ä¸ºè¿™ç¯‡æ–‡ç« æ˜¯æŒ‰pythonç‰ˆå†™çš„â•­(â€²â–½`)â•¯ä¸‹è½½å®Œè§£åŒ…è¿›å…¥ç›®å½•ï¼Œåˆ«ç€æ€¥è¿è¡Œï¼Œå…ˆæµ‹è¯•ä¸€ä¸‹åŒ…æ˜¯å¦å·²ç»å¯¼å…¥\npython -c \u0026quot;import dbgp.client; print 'ok'\u0026quot; å¦‚æœæ²¡æ˜¾ç¤ºokè€Œæ˜¯æ˜¾ç¤ºé”™è¯¯å°±ä»£è¡¨æ²¡å¯¼å…¥\nç¼–è¾‘/etc/profile(å…·ä½“ç›®å½•æŒ‰ç…§ä½ è§£å‹ç›®å½•ä¸ºå‡†ï¼Œæˆ‘è¿™æ˜¯rootä¸‹çš„PythonRemoteDebuggingç›®å½•ï¼Œå› ä¸ºæˆ‘çš„centos 7 çš„é»˜è®¤python ç‰ˆæœ¬æ˜¯2.7æ‰€ä»¥æˆ‘å¯¼å…¥çš„åŒ…ç›®å½•æ˜¯pythonlibï¼Œå¦‚æœä½ æ˜¯3çš„æ”¹æˆpython3lib)\nexport PYTHONPATH=/root/PythonRemoteDebugging/pythonlib ç»§ç»­ä¸Šä¸€æ­¥æµ‹è¯•æ˜¯å¦æ˜¾ç¤ºok\nå¥½äº†ç°åœ¨å¯ä»¥è¿è¡Œäº†\n./pydbgpproxy -d 127.0.0.1:9000 -i 192.168.220.128:9001 å¦‚æœæ˜¾ç¤ºç±»ä¼¼çš„ä¿¡æ¯ä»£è¡¨è¿è¡ŒæˆåŠŸï¼Œå¦‚æœé”™è¯¯ä¸€èˆ¬æé†’ç«¯å£å·²è¢«å ç”¨æ¢ä¸ªç«¯å£å³å¯\nINFO: dbgp.proxy: starting proxy listeners. appid: 3583 INFO: dbgp.proxy: dbgp listener on 127.0.0.1:9000 INFO: dbgp.proxy: IDE listener on 192.168.220.128:9001 å¥½äº†æœ€åä¸€æ­¥ï¼Œå¼€æ”¾9001ç«¯å£ ç¼–è¾‘/etc/sysconfig/iptables åŠ ä¸€æ¡è§„åˆ™\n-A INPUT -p tcp -m state --state NEW -m tcp --dport 9001 -j ACCEPT é‡å¯iptables è®©è§„åˆ™ç”Ÿæ•ˆ ç„¶åè¿è¡Œpydbgpproxy\n3.è®¾ç½®PhpStorm æ‰“å¼€ Tools-\u0026gt;DBGp proxy-\u0026gt;configuration IDE key æ˜¯ç”¨æ¥åŒºåˆ†ä¸åŒç”¨æˆ·çš„ åªè¦æ¯ä¸ªäººçš„ä¸é‡å¤å°±å¯ä»¥äº† Host è¿™ä¸ªå°±æ˜¯pydbgpproxyä¸­æŒ‡å®šçš„å¤–ç½‘ipï¼Œæˆ‘è¿™æ˜¯192.168.220.128 Port pydbgpproxyä¸­æŒ‡å®šçš„ç«¯å£ï¼Œæˆ‘è¿™æ˜¯9001 ä¿å­˜åï¼Œæˆ‘ä»¬è¿˜å¾—æ³¨å†Œä¸€ä¸‹ ç‚¹å‡»Tools-\u0026gt;DBGp proxy-\u0026gt;register IDE æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼Œè¡¨ç¤ºæ³¨å†ŒæˆåŠŸ\nIDE successfully registered with ide key 'PHPSTORM' å¥½äº† ç°åœ¨å¯ä»¥è·Ÿå°ä¼™ä¼´ä»¬æ„‰å¿«çš„åœ¨è¿œç¨‹å¼€å‘æœºä¸Šäº«å—xdebugäº†(^o^)/\nå‚è€ƒç½‘ç«™ï¼š https://xdebug.org/docs/install http://docs.komodoide.com/Manual/debugpython https://confluence.jetbrains.com/display/PhpStorm/Multi-user+debugging+in+PhpStorm+with+Xdebug+and+DBGp+proxy\n","id":83,"section":"posts","summary":"\u003cp\u003eè¿œç¨‹xdebugè°ƒè¯•é…ç½®\u003c/p\u003e","tags":["xdebug","Php Storm"],"title":"å¼€å‘æœºå¤šç”¨æˆ· xdebug è¿œç¨‹è°ƒè¯• PhpStorm","uri":"https://www.ganymedenil.com/2017/01/01/2.html","year":"2017"},{"content":"Laravelè¯´æ˜æ–‡æ¡£ä¸­çš„ Redis å‘å¸ƒä¸è®¢é˜…æ¡ˆä¾‹ï¼Œå‘½ä»¤è¡Œè¿è¡ŒPHP artisan redis:subscribe åˆ°60sè‡ªåŠ¨æ–­å¼€å¹¶æŠ¥é”™\n[Predis\\Connection\\ConnectionException] Error while reading line from the server. [tcp://127.0.0.1:6379] é—®é¢˜ Laravelè¯´æ˜æ–‡æ¡£ä¸­çš„ Redis å‘å¸ƒä¸è®¢é˜…æ¡ˆä¾‹ï¼Œå‘½ä»¤è¡Œè¿è¡ŒPHP artisan redis:subscribe åˆ°60sè‡ªåŠ¨æ–­å¼€å¹¶æŠ¥é”™\n[Predis\\Connection\\ConnectionException] Error while reading line from the server. [tcp://127.0.0.1:6379] è§£å†³ åœ¨config/database.phpé…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°redisé…ç½®é¡¹ï¼Œæ·»åŠ ä¸€è¡Œå¦‚ä¸‹\n'redis' =\u0026gt; [ 'cluster' =\u0026gt; false, 'default' =\u0026gt; [ 'host' =\u0026gt; env('REDIS_HOST', '127.0.0.1'), 'password' =\u0026gt; env('REDIS_PASSWORD', null), 'port' =\u0026gt; env('REDIS_PORT', 6379), 'database' =\u0026gt; 0, 'read_write_timeout' =\u0026gt; 0,//new ], ] åŸå›  æ®Predisä½œè€…åœ¨é…ç½®æ–‡ä»¶ä¸­è¯´æ˜ï¼Œå› ä¸ºåœ¨åº•å±‚ç½‘ç»œèµ„æºä¸Šæ‰§è¡Œè¯»å–æˆ–å†™å…¥æ“ä½œæ—¶ä½¿ç”¨äº†è¶…æ—¶ï¼Œé»˜è®¤è®¾ç½®äº†timeout ä¸º60sã€‚\nå‚è€ƒ\nhttps://github.com/nrk/predis/wiki/Connection-Parameters\n","id":84,"section":"posts","summary":"\u003cp\u003eLaravelè¯´æ˜æ–‡æ¡£ä¸­çš„ Redis å‘å¸ƒä¸è®¢é˜…æ¡ˆä¾‹ï¼Œå‘½ä»¤è¡Œè¿è¡ŒPHP artisan redis:subscribe åˆ°60sè‡ªåŠ¨æ–­å¼€å¹¶æŠ¥é”™\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-cmd\"\u003e[Predis\\Connection\\ConnectionException]\n Error while reading line from the server. [tcp://127.0.0.1:6379]\n\u003c/code\u003e\u003c/pre\u003e","tags":["Predis"],"title":"Laravel Predis Error while reading line from the server.","uri":"https://www.ganymedenil.com/2017/01/01/1.html","year":"2017"},{"content":"","id":85,"section":"","summary":"","tags":null,"title":"å‹æƒ…é“¾æ¥","uri":"https://www.ganymedenil.com/links/","year":"0001"}],"tags":[{"title":"Hardhat","uri":"https://www.ganymedenil.com/tags/Hardhat/"},{"title":"JAX","uri":"https://www.ganymedenil.com/tags/JAX/"},{"title":"LLM","uri":"https://www.ganymedenil.com/tags/LLM/"},{"title":"NFT","uri":"https://www.ganymedenil.com/tags/NFT/"},{"title":"Php Storm","uri":"https://www.ganymedenil.com/tags/Php-Storm/"},{"title":"Predis","uri":"https://www.ganymedenil.com/tags/Predis/"},{"title":"SOL","uri":"https://www.ganymedenil.com/tags/SOL/"},{"title":"Solana","uri":"https://www.ganymedenil.com/tags/Solana/"},{"title":"Solidity","uri":"https://www.ganymedenil.com/tags/Solidity/"},{"title":"ddd","uri":"https://www.ganymedenil.com/tags/ddd/"},{"title":"docker","uri":"https://www.ganymedenil.com/tags/docker/"},{"title":"gemma","uri":"https://www.ganymedenil.com/tags/gemma/"},{"title":"go","uri":"https://www.ganymedenil.com/tags/go/"},{"title":"hexo","uri":"https://www.ganymedenil.com/tags/hexo/"},{"title":"kerasNLP","uri":"https://www.ganymedenil.com/tags/kerasNLP/"},{"title":"laravel","uri":"https://www.ganymedenil.com/tags/laravel/"},{"title":"linux","uri":"https://www.ganymedenil.com/tags/linux/"},{"title":"nginx","uri":"https://www.ganymedenil.com/tags/nginx/"},{"title":"nuxt","uri":"https://www.ganymedenil.com/tags/nuxt/"},{"title":"php","uri":"https://www.ganymedenil.com/tags/php/"},{"title":"redis","uri":"https://www.ganymedenil.com/tags/redis/"},{"title":"rust","uri":"https://www.ganymedenil.com/tags/rust/"},{"title":"swoole","uri":"https://www.ganymedenil.com/tags/swoole/"},{"title":"web3","uri":"https://www.ganymedenil.com/tags/web3/"},{"title":"xdebug","uri":"https://www.ganymedenil.com/tags/xdebug/"},{"title":"ä»¥å¤ªåŠ","uri":"https://www.ganymedenil.com/tags/%E4%BB%A5%E5%A4%AA%E5%9D%8A/"},{"title":"æ€»ç»“","uri":"https://www.ganymedenil.com/tags/%E6%80%BB%E7%BB%93/"},{"title":"æ™ºèƒ½åˆçº¦","uri":"https://www.ganymedenil.com/tags/%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6/"}]}